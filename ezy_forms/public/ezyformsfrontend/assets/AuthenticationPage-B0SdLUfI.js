import{_ as F,d as n,e as M,w as D,o as y,c as p,b as t,D as I,H as B,t as f,K as T,E as N,l as i,m as u,p as d,k as c}from"./index-BX552J3x.js";const P={class:"p-1 mt-3"},U={class:"table"},J={class:"form-check form-switch"},O=["checked","onClick"],R={class:"form-check-label mt-1"},z={class:"modal fade",id:"EnableDisable",tabindex:"-1","aria-labelledby":"EnableDisableLabel","aria-hidden":"true"},q={class:"modal-dialog modal-dialog-centered"},L={class:"modal-content"},W={class:"modal-body"},x={__name:"AuthenticationPage",setup(H){const l=n([{title:"Two Factor Authentication",checked:!1},{title:"Send Form as an Attachment Via an E-Mail ",checked:!1},{title:"Welcome E-Mail Configuration",checked:!1}]),m=n(!1),b=n(null),r=n(!1),h=n(""),v=n(!1),k=n(""),w=M(()=>N.value),A=a=>{b.value=a,r.value=l.value[a].checked,v.value=r.value;const e=r.value===!1?1:0;a===0?h.value=e?"Are you sure you want to enable Two Factor Authentication?":"Are you sure you want to disable Two Factor Authentication?":a===1?h.value=e?"Are you sure you want to enable Send Form As an Attachment Through E-Mail?":"Are you sure you want to disable Send Form As an Attachment Through E-Mail?":a===2&&(h.value=e?"Are you sure you want to enable E-Mail Configuration?":"Are you sure you want to disable E-Mail Configuration?"),new bootstrap.Modal(document.getElementById("EnableDisable")).show()},E=()=>{l.value[b.value].checked=v.value},C=()=>{const a=b.value,e=r.value===!1?1:0;console.log(r.value);const o=e?1:0;l.value[a].checked=!e;const s=a===0?"System Settings":localStorage.getItem("Bu")||"";a===0?i.put(`${u.resource}${d.SystemSettings}/${encodeURIComponent(s)}`,{enable_two_factor_auth:o}).then(()=>{c.success(`Two Factor Authentication ${o===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),S()}).catch(()=>{c.error("Failed to update Two Factor Authentication!")}):a===1?i.put(`${u.resource}${d.wfSettingEzyForms}/${encodeURIComponent(s)}`,{send_form_as_a_attach_through_mail:o}).then(()=>{c.success(`Send Form As an Attachment Through Mail ${o===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),g()}).catch(()=>{c.error("Failed to update Send Form As an Attachment Through Mail!")}):a===2&&(m.value===!0?i.put(`${u.resource}${d.wfSettingEzyForms}/${encodeURIComponent(s)}`,{welcome_mail_to_employee:o}).then(()=>{c.success(`Welcome Mail Configuration ${o===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),g()}).catch(()=>{c.error("Failed to update Welcome Mail Configuration!")}):(c.info("Please Configure Default Mail First!"),l.value[a].checked=!1))};function g(){const a={fields:JSON.stringify(["*"]),filters:JSON.stringify([["bu_name","=",k.value]])};i.get(`${u.resource}${d.wfSettingEzyForms}`,{params:a}).then(e=>{if(e.data.length>0){const o=e.data[0].send_form_as_a_attach_through_mail;l.value[1].checked=o==1;const s=e.data[0].welcome_mail_to_employee;l.value[2].checked=s==1}}).catch(e=>{console.error("Error fetching business unit settings:",e)})}const S=()=>{const a="System Settings",e={fields:JSON.stringify(["*"])};i.get(`${u.resource}${d.SystemSettings}/${encodeURIComponent(a)}`,{params:e}).then(o=>{o.data&&(l.value[0].checked=o.data.enable_two_factor_auth==1)}).catch(o=>{console.error("Error fetching system settings:",o)})},$=()=>{const a={fields:JSON.stringify(["default_outgoing","enable_outgoing"]),filters:JSON.stringify([["default_outgoing","=",1],["enable_outgoing","=",1]])};i.get(`${u.resource}${d.Email_Account}`,{params:a}).then(e=>{if(e.data&&e.data.length>0){const o=e.data[0];o.default_outgoing===1&&o.enable_outgoing===1?m.value=!0:m.value=!1}else m.value=!1}).catch(e=>{console.error("Error fetching system settings:",e)})};return D(w,a=>{a&&a.length&&(k.value=a,g(),$(),S())},{immediate:!0}),(a,e)=>(y(),p("div",P,[e[2]||(e[2]=t("h1",{class:"m-0 font-13 mb-3"},"Settings",-1)),t("table",U,[e[0]||(e[0]=t("thead",null,[t("tr",null,[t("th",null,"S.No"),t("th",null,"Title"),t("th",null,"Actions")])],-1)),t("tbody",null,[(y(!0),p(I,null,B(l.value,(o,s)=>(y(),p("tr",{key:s},[t("td",null,f(s+1),1),t("td",null,f(o.title),1),t("td",null,[t("div",J,[t("input",{class:"form-check-input shadow-none",type:"checkbox",role:"switch",checked:o.checked,onClick:T(_=>A(s),["prevent"])},null,8,O),t("label",R,f(o.checked?"Enabled":"Disabled"),1)])])]))),128))])]),t("div",z,[t("div",q,[t("div",L,[t("div",{class:"modal-header"},[e[1]||(e[1]=t("h5",{class:"modal-title",id:"EnableDisableLabel"},"Confirm Action",-1)),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:E})]),t("div",W,f(h.value),1),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:E},"Close"),t("button",{type:"button",class:"btn btn-dark",onClick:C},"Yes, Proceed")])])])])]))}},Y=F(x,[["__scopeId","data-v-e71fd85f"]]);export{Y as default};
