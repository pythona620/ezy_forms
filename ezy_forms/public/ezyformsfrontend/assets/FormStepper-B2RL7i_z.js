var be=Object.defineProperty,ve=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var Q=(b,u,i)=>u in b?be(b,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):b[u]=i,R=(b,u)=>{for(var i in u||(u={}))_e.call(u,i)&&Q(b,i,u[i]);if(K)for(var i of K(u))he.call(u,i)&&Q(b,i,u[i]);return b},q=(b,u)=>ve(b,fe(u));import{_ as ye,u as ge,b as A,j as ke,d as Ce,z as we,k as X,l as Y,m as Fe,o,c as n,e,h as V,a as S,B as z,g as _,i as h,p as Z,q as g,F as N,E as Ve,n as P,t as k,w as x,v as I,s as Se,x as E,A as xe,y as $e}from"./index-oeIZeLsV.js";const Ue="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg";function ee(b){const u=[];let i=null,$=0;return b.forEach(f=>{f.rows.forEach(U=>{U.columns.forEach(F=>{F.fields.forEach(D=>{const j=M(D.label);u.push(q(R({},D),{fieldname:j,insert_after:i,idx:$++})),i=j});const T=M(F.label);u.push({fieldtype:"Column Break",doctype:"Custom Field",dt:F.dt,fieldname:T,label:F.label,insert_after:i,idx:$++}),i=T});const B=M(U.label);u.push({fieldtype:"Column Break",doctype:"Custom Field",fieldname:B,dt:U.dt,insert_after:i,idx:$++}),i=B});const r=M(f.label);u.push({fieldtype:"Section Break",doctype:"Custom Field",label:f.label,dt:f.dt,fieldname:r,insert_after:i,idx:$++}),i=r}),u}function M(b){return b.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}const De={class:""},Ae={class:""},Ne={class:"d-flex justify-content-between align-items-center CancelNdSave"},Be={class:"form-container container-fluid mt-1"},Te={class:"row"},je={class:"col-2"},Re={class:"steps"},Ee=["onClick"],Me={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},Le={class:"step-text"},Oe={class:"font-11"},qe={class:"font-14"},ze={class:"col-10"},Pe={class:""},We={class:"form-content stepsDiv"},He={key:0},Je={class:""},Ge={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Ke={class:"font-14 m-0"},Qe={class:"row"},Xe={class:"col-4"},Ye={class:"mt-4"},Ze={class:""},Ie={class:"mt-4"},et={class:""},tt={class:"mt-4"},st={class:""},lt={class:"mt-4"},ot={class:""},nt={class:"mt-4"},at={class:""},it={key:1},dt={class:""},ct={class:""},rt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ut={class:"modal-dialog modal-xl"},mt={class:"modal-content"},pt={class:"modal-body"},bt={key:0},vt={key:1},ft={key:0,class:"card p-1"},_t={class:"mb-2"},ht={key:0},yt=["for"],gt=["multiple","onUpdate:modelValue"],kt=["value"],Ct={key:1,class:"row"},wt={class:"d-flex gap-2 align-items-center"},Ft=["type","name","id"],Vt=["for"],St={class:"mt-4"},xt={class:"d-flex justify-content-between"},$t=["onUpdate:modelValue"],Ut={class:"d-flex"},Dt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},At={class:"offcanvas-footer"},Nt={class:"text-end p-3"},Bt=["onClick"],Tt={class:"container-fluid"},jt={class:"d-flex justify-content-between align-items-center"},Rt=["onClick"],Et=["onClick"],Mt={class:"col"},Lt={class:"row"},Ot={class:"column_name d-flex align-items-center justify-content-between"},qt=["onUpdate:modelValue"],zt=["onClick"],Pt={class:"px-3 py-1 field-border"},Wt={class:"d-flex justify-content-between"},Ht=["onUpdate:modelValue"],Jt={class:"btn btn-light btn-sm"},Gt=["onClick"],Kt=["onClick"],Qt=["onUpdate:modelValue","onChange"],Xt=["value"],Yt={key:0},Zt=["onUpdate:modelValue"],It={class:"d-flex gap-2 align-items-center"},es=["onUpdate:modelValue"],ts={class:"d-flex justify-content-center align-items-center my-2"},ss=["onClick"],ls={class:"d-flex justify-content-start align-items-center my-2"},os=["onClick"],ns={__name:"FormStepper",setup(b){const u=ge();A(0);const i=A(1),$=["HR","Finance","IT","Sales"],f=ke(()=>Ve);Ce(()=>{r.value.form_short_name&&G()});const r=A({form_name:"",form_short_name:"",accessible_departments:"[]",business_unit:`${f.value.value}`,form_category:"",owner_of_the_form:""}),U=[{id:1,label:"About Form",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Fields & Workflow",stepno:"Step 2",icon:"bi bi-question-circle"}],B=[{label:"Text",type:"Data"},{label:"Checkbox",type:"Check"},{label:"Radio",type:"radio"},{label:"Attach",type:"Attach"},{label:"Number",type:"number"},{label:"TextArea",type:"Text"},{label:"Date",type:"Date"},{label:"Select",type:"Select"},{label:"MultiSelect",type:"multiselect"}];function F(){u.push({path:"/new/created"})}const T=l=>{switch(l){case"About Form":W();break;case"Fields & Workflow":D();break}},D=()=>{i.value<3&&(i.value+=1)},j=(l,t)=>{l!==t&&(console.log("Form short name updated:",l),G())};function te(){const l=ee(m),t=q(R({},r.value),{fields:l});console.log("Complete Data === ",t),X.post(Y.savedata,t).then(s=>{console.log(s,"saved From Responces")})}const W=()=>{i.value>1&&(i.value-=1)},m=we([]),H=A(!1),se=()=>{m.push({label:"",dt:`${f.value.value}-${r.value.form_short_name}`,rows:[{label:L(0),dt:`${f.value.value}-${r.value.form_short_name}`,columns:[{label:"",dt:`${f.value.value}-${r.value.form_short_name}`,fields:[]}]}]})},le=l=>{m.splice(l,1)},oe=l=>{const t=m[l].rows.length,s=L(t);m[l].rows.push({label:s,dt:`${f.value.value}-${r.value.form_short_name}`,columns:[{fields:[]}]})},ne=(l,t)=>{m[l].rows.splice(t,1)},ae=(l,t)=>{m[l].rows[t].columns.push({label:"",fields:[]})},ie=(l,t,s)=>{m[l].rows[t].columns.splice(s,1)},de=(l,t,s)=>{m[l].rows[t].columns[s].fields.push({label:"",fieldtype:"",options:"",reqd:!1,doctype:"Custom Field",dt:`${f.value.value}-${r.value.form_short_name}`})},ce=(l,t,s,c)=>{m[l].rows[t].columns[s].fields.splice(c,1)},re=(l,t,s,c)=>{const v=m[l].rows[t].columns[s].fields[c],p=R({},v);p.name=`${v.name} Name the field`,m[l].rows[t].columns[s].fields.splice(c+1,0,p)},ue=(l,t,s,c)=>{const v=m[l].rows[t].columns[s].fields[c];console.log("field === ",v),console.log(" sections === ",m);const p=ee(m);console.log(" extracted Format === ",p)},me=l=>{switch(l){case"Data":return"input";case"number":return"input";case"Text":return"textarea";case"Check":return"input";case"Select":return"select";case"Date":return"input";case"Date":return"file";case"radio":return"input";default:return"input"}},L=l=>l===0?"1st row":l===1?"2nd row":l===2?"3rd row":`${l+1}th row`,pe=()=>{H.value=!0},J=A([]);function G(){const l={fields:JSON.stringify(["*"])};X.get(Y.resource+Fe.departments+`/${f.value.value}-${r.value.form_short_name}`,{params:l}).then(t=>{var s;(s=t==null?void 0:t.data)!=null&&s.length&&console.log(t.data,"nnnnnnnnnnnnn departments")}).catch(t=>{console.error("Error fetching department data:",t)})}return(l,t)=>(o(),n("div",null,[e("div",De,[e("div",Ae,[e("div",Ne,[e("div",{class:"ps-1 m-0 d-flex align-items-center",onClick:t[0]||(t[0]=s=>F())},t[8]||(t[8]=[e("h1",{class:"font-13 m-0"},[e("i",{class:"bi bi-arrow-left"}),e("span",{class:"ms-2"},"Cancel Form")],-1)])),e("div",null,[e("button",{class:"btn btn-light font-10",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:pe},t[9]||(t[9]=[e("i",{class:"bi bi-eye me-1"},null,-1),V("Preview ")])),S(z,{class:"font-10 rounded-2",name:"Save as Draft",onClick:t[1]||(t[1]=s=>te())})])]),e("div",Be,[e("div",Te,[e("div",je,[e("ul",Re,[(o(),n(_,null,h(U,s=>e("li",{key:s.id,class:P({active:i.value===s.id,completed:i.value>s.id})},[e("div",{class:"d-flex gap-3 align-items-center",onClick:c=>T(s.label)},[i.value>s.id?(o(),n("i",Me)):(o(),n("i",{key:1,class:P(s.icon)},null,2)),e("div",Le,[e("span",Oe,k(s.stepno),1),t[10]||(t[10]=e("br",null,null,-1)),e("span",qe,k(s.label),1)])],8,Ee)],2)),64))])]),e("div",ze,[e("div",Pe,[e("div",We,[i.value===1?(o(),n("div",He,[e("div",Je,[e("div",Ge,[e("h1",Ke,[e("i",{class:"bi bi-chevron-left",onClick:t[2]||(t[2]=s=>F())}),t[11]||(t[11]=e("span",{class:"ms-2"},"Cancel Form",-1))]),t[12]||(t[12]=e("h1",{class:"font-14 fw-bold m-0"},"About Form",-1)),i.value<3?(o(),Z(z,{key:0,class:"buttoncomp",name:"Next",onClick:D})):g("",!0)])]),e("div",Qe,[t[13]||(t[13]=e("div",{class:"col-4"},null,-1)),e("div",Xe,[e("div",Ye,[e("div",Ze,[S(N,{labeltext:"Form Name",class:"mb-3",type:"text",tag:"input",name:"Value",id:"Value",placeholder:"Untitle Form",orm:"",modelValue:r.value.form_name,"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.form_name=s)},null,8,["modelValue"])])]),e("div",Ie,[e("div",et,[S(N,{labeltext:"Form Short Code",class:"mb-3",type:"text",onChange:j,tag:"input",name:"Value",id:"Value",placeholder:"Untitle Form",modelValue:r.value.form_short_name,"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.form_short_name=s)},null,8,["modelValue"])])]),e("div",tt,[e("div",st,[S(N,{labeltext:"Owner Of The Form",class:"mb-3 w-100",tag:"select",name:"dept",id:"dept",placeholder:"Select Department",options:J.value,modelValue:r.value.owner_of_the_form,"onUpdate:modelValue":t[5]||(t[5]=s=>r.value.owner_of_the_form=s)},null,8,["options","modelValue"])])]),e("div",lt,[e("div",ot,[S(N,{labeltext:"Form Cateogry",class:"mb-3",tag:"select",name:"desgination",id:"desgination",placeholder:"Select Cateogry",options:$,modelValue:r.value.form_category,"onUpdate:modelValue":t[6]||(t[6]=s=>r.value.form_category=s)},null,8,["modelValue"])])]),e("div",nt,[e("div",at,[S(N,{labeltext:"Accessbility Departments",class:"mb-3",tag:"select",name:"desgination",id:"Departments",placeholder:"Select Desigination",options:J.value,modelValue:r.value.accessible_departments,"onUpdate:modelValue":t[7]||(t[7]=s=>r.value.accessible_departments=s)},null,8,["options","modelValue"])])])]),t[14]||(t[14]=e("div",{class:"col-4"},null,-1))])])):g("",!0),i.value===2?(o(),n("div",it,[e("div",dt,[e("div",{class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},[e("h1",{class:"font-11 m-0"},[e("i",{onClick:W,class:"bi bi-chevron-left"}),t[15]||(t[15]=e("span",{class:"ms-2"},"Back To About Form",-1))]),t[16]||(t[16]=e("div",null,null,-1))]),e("div",ct,[e("div",rt,[e("div",ut,[e("div",mt,[t[18]||(t[18]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title m-0 font-13",id:"exampleModalLabel"}," Preview Form "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",pt,[m.length?g("",!0):(o(),n("div",bt,t[17]||(t[17]=[e("div",{class:"text-center"},[e("h4",null,"Sections Not Added")],-1)]))),H.value?(o(),n("div",vt,[m.length?(o(),n("div",ft,[(o(!0),n(_,null,h(m,(s,c)=>(o(),n("div",{key:"preview-"+c,class:"preview-section mb-2"},[e("h5",null,k(s.label),1),(o(!0),n(_,null,h(s.rows,(v,p)=>(o(),n("div",{class:"row",key:p},[(o(!0),n(_,null,h(v.columns,(C,y)=>(o(),n("div",{key:"column-preview-"+y,class:"col"},[e("h6",null,k(C.label),1),e("div",_t,[(o(!0),n(_,null,h(C.fields,(a,w)=>(o(),n("div",{key:"field-preview-"+w},[a.label?(o(),n("div",ht,[e("label",{for:"field-"+c+"-"+y+"-"+w},k(a.label),9,yt),a.fieldtype=="Select"||a.fieldtype=="multiselect"?x((o(),n("select",{key:0,multiple:a.fieldtype=="multiselect","onUpdate:modelValue":d=>a.value=d,class:"form-select mb-2 font-13"},[(o(!0),n(_,null,h(a.options.split(`
`),(d,O)=>(o(),n("option",{key:O,value:d},k(d),9,kt))),128))],8,gt)),[[I,a.value]]):a.fieldtype=="check"||a.fieldtype=="radio"?(o(),n("div",Ct,[(o(!0),n(_,null,h(a.options.split(`
`),(d,O)=>(o(),n("div",{class:"form-check col-4 mb-4",key:O},[e("div",wt,[e("div",null,[e("input",{class:"",type:a.fieldtype,name:d,id:d},null,8,Ft)]),e("div",null,[e("label",{class:"form-check-label m-0",for:d},k(d),9,Vt)])])]))),128))])):(o(),Z(Se(me(a.fieldtype)),{key:2,modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,type:a.fieldtype,name:"field-"+c+"-"+y+"-"+w,class:P([l.form-l.control,"form-control previewInputHeight"])},null,8,["modelValue","onUpdate:modelValue","type","name","class"]))])):g("",!0)]))),128))])]))),128))]))),128))]))),128))])):g("",!0)])):g("",!0)])])])]),e("div",St,[(o(!0),n(_,null,h(m,(s,c)=>(o(),n("div",{key:c,class:"dynamicSection"},[e("section",xt,[x(e("input",{"onUpdate:modelValue":v=>s.label=v,type:"text",class:"border-less-input font-14",placeholder:"Untitled approval flow"},null,8,$t),[[E,s.label]]),e("div",Ut,[t[21]||(t[21]=e("button",{class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},[e("img",{src:Ue,alt:"",class:"me-1"}),V(" Add designations")],-1)),e("div",Dt,[t[19]||(t[19]=xe('<div class="offcanvas-header" data-v-3296cdb2><h5 id="offcanvasRightLabel" data-v-3296cdb2>Add designation for requestor </h5><button type="button" class="btn-close bg-light text-reset" data-bs-dismiss="offcanvas" aria-label="Close" data-v-3296cdb2></button></div><div class="offcanvas-body" data-v-3296cdb2><ul class="list-unstyled" data-v-3296cdb2><li class="designationList" data-v-3296cdb2><input type="checkbox" name="" id="" class="designationCheckBox" data-v-3296cdb2><span class="ps-2" data-v-3296cdb2>intern</span></li></ul></div>',2)),e("div",At,[e("div",Nt,[S(z,{class:"btn btn-dark addingDesignations",name:" Add Designations"})])])]),e("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:v=>le(c)},t[20]||(t[20]=[e("i",{class:"bi bi-trash me-2"},null,-1),V(" Delete approval ")]),8,Bt)])]),e("div",Tt,[(o(!0),n(_,null,h(s.rows,(v,p)=>(o(),n("section",{class:"row",key:p},[e("div",jt,[e("label",null,k(L(p)),1),e("div",null,[v.columns.length<3?(o(),n("button",{key:0,class:"btn btn-light bg-transparent border-0 font-13",onClick:C=>ae(c,p)},t[22]||(t[22]=[e("i",{class:"bi bi-plus"},null,-1),V(" Add Column ")]),8,Rt)):g("",!0),e("button",{class:"btn btn-light bg-transparent border-0 font-13",onClick:C=>ne(c,p)},t[23]||(t[23]=[e("i",{class:"ri-subtract-line"},null,-1),V(" Delete row ")]),8,Et)])]),e("div",Mt,[e("div",Lt,[(o(!0),n(_,null,h(v.columns,(C,y)=>(o(),n("div",{key:y,class:"col p-0 dynamicColumn"},[e("div",Ot,[x(e("input",{"onUpdate:modelValue":a=>C.label=a,type:"text",class:"border-less-input columnFieldInput font-14",placeholder:"Column Name"},null,8,qt),[[E,C.label]]),e("button",{class:"btn btn-light btn-sm",onClick:a=>ie(c,p,y)},t[24]||(t[24]=[e("i",{class:"bi bi-trash"},null,-1)]),8,zt)]),(o(!0),n(_,null,h(C.fields,(a,w)=>(o(),n("div",{key:w,class:"mt-2"},[e("div",Pt,[e("div",Wt,[x(e("input",{"onUpdate:modelValue":d=>a.label=d,placeholder:"Name the field",class:"border-less-input mb-1 columnFieldInput font-14 p-0"},null,8,Ht),[[E,a.label]]),e("div",null,[e("button",Jt,[e("i",{class:"ri-file-copy-line copyIcon",onClick:d=>re(c,p,y,w)},null,8,Gt)]),e("button",{class:"btn btn-light btn-sm",onClick:d=>ce(c,p,y,w)},t[25]||(t[25]=[e("i",{class:"bi bi-trash"},null,-1)]),8,Kt)])]),x(e("select",{"onUpdate:modelValue":d=>a.fieldtype=d,class:"form-select mb-2 font-13 searchSelect",onChange:d=>ue(c,p,y,w)},[t[26]||(t[26]=e("option",{value:""},"Select Type ",-1)),(o(),n(_,null,h(B,d=>e("option",{key:d,value:d.type},k(d.label),9,Xt)),64))],40,Qt),[[I,a.fieldtype]]),a.fieldtype=="Check"||a.fieldtype=="radio"||a.fieldtype=="Select"||a.fieldtype=="multiselect"?(o(),n("div",Yt,[t[27]||(t[27]=e("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),x(e("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":d=>a.options=d,class:"form-control shadow-none mb-1 font-12"},null,8,Zt),[[E,a.options]])])):g("",!0),e("div",It,[e("div",null,[x(e("input",{class:"font-12","onUpdate:modelValue":d=>a.reqd=d,placeholder:"Field Name",type:"checkbox"},null,8,es),[[$e,a.reqd]])]),t[28]||(t[28]=e("div",null,[e("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Mandatory")],-1))])])]))),128)),e("div",ts,[e("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:a=>de(c,p,y)},t[29]||(t[29]=[e("i",{class:"bi bi-plus fs-4"},null,-1),e("span",null,"Add Field",-1)]),8,ss)])]))),128))])])]))),128))]),e("div",ls,[e("button",{class:"btn btn-light addRow m-2",onClick:v=>oe(c,l.rowIndex)},t[30]||(t[30]=[e("i",{class:"bi bi-plus"},null,-1),V(" Add row in section ")]),8,os)])]))),128)),e("div",{class:"d-flex justify-content-center align-items-center my-4"},[e("button",{class:"btn btn-light border font-12",onClick:se},t[31]||(t[31]=[e("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),V(" Add Approval ")]))])])])])])):g("",!0)])])])])])])])]))}},ds=ye(ns,[["__scopeId","data-v-3296cdb2"]]);export{ds as default};
