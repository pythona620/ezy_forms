var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var T=(_,m,u)=>m in _?X(_,m,{enumerable:!0,configurable:!0,writable:!0,value:u}):_[m]=u,S=(_,m)=>{for(var u in m||(m={}))ee.call(m,u)&&T(_,u,m[u]);if(h)for(var u of h(m))te.call(m,u)&&T(_,u,m[u]);return _},z=(_,m)=>Y(_,Z(m));import{p as oe,f as $,q as ae,d as c,e as le,w as ne,o as d,c as p,b as o,g as f,t as v,h as r,a as i,F as s,_ as ie,P as se,E as de,l as V,m as x,n as E,k as M}from"./index-B-ZWE6ER.js";import{B as L}from"./ButtonComp-Ciox4MwK.js";const pe={class:"d-flex justify-content-between align-items-center"},re={class:"d-flex gap-2 align-items-center"},me={class:"d-flex align-items-center"},ue={class:"me-2"},ge={key:0,class:"process-date font-12 m-0"},ce={key:1,class:"process-date font-12 m-0"},_e={key:2,class:"process-date font-12 m-0"},fe={key:3,class:"process-date font-12 m-0"},be={key:4,class:"process-date font-12 m-0"},ve={key:5,class:"process-date font-12 m-0"},ye={key:6,class:"process-date font-12 m-0"},Ee={type:"button",class:"filterbtn d-flex align-items-center position-relative","data-bs-toggle":"modal","data-bs-target":"#fileterModal"},ke={key:0,class:"badge badge-light colorappiled"},Ve={class:"modal fade",id:"fileterModal",tabindex:"-1","aria-labelledby":"fileterModalLabel","aria-hidden":"true"},xe={class:"modal-dialog modal-xl"},Ce={class:"modal-content"},De={class:"modal-body"},we={class:"row"},Re={class:"col-3"},Ue={class:"col-3"},Se={class:"col-3"},$e={class:"col-3"},Le={class:"col-3"},Ne={class:"col-3"},Fe={class:"col-3"},qe={class:"modal fade",id:"createDepartments","data-bs-backdrop":"static",tabindex:"-1","data-bs-keyboard":"false","aria-labelledby":"createDepartmentsLabel","aria-hidden":"true"},Be={class:"modal-dialog modal-lg"},Pe={class:"modal-content"},he={class:"modal-body"},Te={class:"container-fluid"},ze={class:"row"},Me={class:"col"},Oe={class:"col"},je={class:"modal-footer"},Ae={class:"mt-2"},Ie={class:"modal fade",id:"viewEmployee","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"viewEmployeeLabel","aria-hidden":"true"},Je={class:"modal-dialog modal-lg"},He={class:"modal-content"},Ge={class:"modal-body"},Ke={class:"container-fluid"},Qe={class:"row"},We={class:"col"},Xe={class:"col"},Ye={class:"modal-footer"},Ze={__name:"EmployeeComp",setup(_){const m=$(()=>de.value);ae(()=>{});const u=c(""),N=c(0),C=c([]),F=c([]),q=c([]),D=c([]),n=c({emp_code:"",emp_name:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",company_field:""}),O=c([{name:"Edit Employee",icon:"fa-solid fa-eye"}]);function j(){H()}function A(l,e){e.name==="Edit Employee"&&(l?(n.value=S({},l),new bootstrap.Modal(document.getElementById("viewEmployee"),{}).show()):(console.warn("No form fields provided."),formCreation(l)))}const b=c({limitPageLength:"None",limit_start:0}),I=c([{th:"Employee Code",td_key:"emp_code"},{th:"Name",td_key:"emp_name"},{th:"Mail",td_key:"emp_mail_id"},{th:"Department",td_key:"department"},{th:"Designation",td_key:"designation"},{th:"Reporting To",td_key:"reporting_to"},{th:"Reporting Designation",td_key:"reporting_designation"}]);$(()=>[t.designation,t.emp_code,t.department,t.emp_mail_id,t.emp_name,t.reporting_designation,t.reporting_to].filter(l=>l).length);const B=$(()=>[{value:t.designation,applied:t.applieddesignation},{value:t.emp_code,applied:t.appliedeEmp_code},{value:t.emp_mail_id,applied:t.appliedEmp_mail_id},{value:t.department,applied:t.applieddepartment},{value:t.emp_name,applied:t.appliedEmp_name},{value:t.reporting_designation,applied:t.appliedreporting_designation},{value:t.reporting_to,applied:t.appliedreporting_to}].filter(l=>l.applied&&l.value).length),t=le({appliedeEmp_code:!1,appliedEmp_name:!1,appliedEmp_mail_id:!1,applieddepartment:!1,applieddesignation:!1,appliedreporting_to:!1,appliedreporting_designation:!1,emp_code:"",emp_name:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:""});function y(l){l==="emp_code"?(t.emp_code="",t.appliedeEmp_code=!1):l==="designation"?(t.designation="",t.applieddesignation=!1):l==="department"?(t.department="",t.applieddepartment=!1):l==="emp_mail_id"?(t.emp_mail_id="",t.appliedEmp_mail_id=!1):l==="emp_name"?(t.emp_name="",t.appliedEmp_name=!1):l==="reporting_designation"?(t.reporting_designation="",t.appliedreporting_designation=!1):l==="reporting_to"&&(t.reporting_to="",t.appliedreporting_to=!1),P()}const U=c([]);function P(){t.appliedeEmp_code=!!t.emp_code,t.appliedEmp_name=!!t.emp_name,t.appliedEmp_mail_id=!!t.emp_mail_id,t.applieddepartment=!!t.department,t.applieddesignation=!!t.designation,t.appliedreporting_to=!!t.reporting_to,t.appliedreporting_designation=!!t.reporting_designation,R()}function J(){t.value={emp_code:"",Owner_OF_Form:"",Form_Category:"",Form_Name:"",Requested_Period:"",Approval_status:""}}function w(){n.value={emp_code:"",emp_name:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:""}}function H(){const l={fields:JSON.stringify(["*"]),limit_page_length:b.value.limitPageLength,limit_start:b.value.limit_start};V.get(x.resource+E.departments,{params:l}).then(e=>{e.data&&(console.log(e.data,"Fetched departments"),D.value=e.data.map(a=>a.name))}).catch(e=>{console.error("Error fetching department data:",e)})}const G=l=>{b.value.limitPageLength=l,b.value.limit_start=0,fetchTable()},K=([l,e])=>{b.value.limitPageLength=l,b.value.limit_start=e,fetchTable()};function R(){const l=[["company_field","like",`%${u.value}%`]];t.emp_code&&l.push(["emp_code","like",`%${t.emp_code}%`]),t.emp_name&&l.push(["emp_name","like",`%${t.emp_name}%`]),t.emp_mail_id&&l.push(["emp_mail_id","like",`%${t.emp_mail_id}%`]),t.department&&l.push(["department","=",`${t.department}`]),t.designation&&l.push(["designation","like",`${t.designation}`]),t.reporting_to&&l.push(["reporting_to","like",`${t.reporting_to}`]),t.reporting_designation&&l.push(["reporting_designation","like",`%${t.reporting_designation}%`]);const e={fields:JSON.stringify(["*"]),filters:JSON.stringify(l),limit_page_length:b.value.limitPageLength,limit_start:b.value.limit_start,order_by:"`tabEzy Employee`.`creation` desc"},a={fields:JSON.stringify(["count( `tabEzy Employee`.`name`) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(l)};V.get(`${x.resource}${E.EzyEmployeeList}`,{params:a}).then(g=>{N.value=g.data[0].total_count}).catch(g=>{console.error("Error fetching ezyForms data:",g)}),V.get(x.resource+E.EzyEmployeeList,{params:e}).then(g=>{g.data&&(console.log(g.data,"Fetched departments"),U.value=g.data,C.value=[...new Set(g.data.map(k=>k.designation))],F.value=[...new Set(g.data.map(k=>k.reporting_to))],q.value=[...new Set(g.data.map(k=>k.reporting_designation))],console.log(C.value,"%%%%%%%%%%%%"))}).catch(g=>{console.error("Error fetching department data:",g)})}ne(m,l=>{n.value.company_field=l,u.value=l,l.length&&(console.log(l,"new value of business unit"),R())},{immediate:!0});function Q(){const l=z(S({},n.value),{doctype:E.EzyEmployeeList});console.log(l,"------------------"),V.post(x.resource+E.EzyEmployeeList,l).then(e=>{e.data&&(M.success("Employee Created",{autoClose:500}),R())})}function W(){console.log(n.value,"---------------",n.value.name),V.put(`${x.resource}${E.EzyEmployeeList}/${n.value.name}`,n.value).then(l=>{l.data&&(M.success("Changes Saved",{autoClose:500}),R()),console.log("Categories saved successfully:",l.data)}).catch(l=>{console.error("Error saving categories:",l)})}return(l,e)=>(d(),p("div",null,[o("div",pe,[e[54]||(e[54]=o("div",null,[o("h1",{class:"m-0 font-13"}," User Management ")],-1)),o("div",re,[o("div",me,[o("div",ue,[t.emp_code&&t.appliedeEmp_code?(d(),p("span",ge,[f(v(t.emp_code)+" ",1),t.emp_code?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[0]||(e[0]=a=>y("emp_code"))},e[28]||(e[28]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0),t.designation&&t.applieddesignation?(d(),p("span",ce,[f(v(t.designation)+" ",1),t.designation?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[1]||(e[1]=a=>y("designation"))},e[29]||(e[29]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0),t.department&&t.applieddepartment?(d(),p("span",_e,[f(v(t.department)+" ",1),t.department?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[2]||(e[2]=a=>y("department"))},e[30]||(e[30]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0),t.emp_mail_id&&t.appliedEmp_mail_id?(d(),p("span",fe,[f(v(t.emp_mail_id)+" ",1),t.emp_mail_id?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[3]||(e[3]=a=>y("emp_mail_id"))},e[31]||(e[31]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0),t.emp_code&&t.appliedeEmp_code?(d(),p("span",be,[f(v(t.emp_name)+" ",1),t.emp_name?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[4]||(e[4]=a=>y("emp_name"))},e[32]||(e[32]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0),t.reporting_designation&&t.appliedreporting_designation?(d(),p("span",ve,[f(v(t.reporting_designation)+" ",1),t.reporting_designation?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[5]||(e[5]=a=>y("reporting_designation"))},e[33]||(e[33]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0),t.reporting_to&&t.appliedreporting_to?(d(),p("span",ye,[f(v(t.reporting_to)+" ",1),t.reporting_to?(d(),p("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[6]||(e[6]=a=>y("reporting_to"))},e[34]||(e[34]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):r("",!0)])):r("",!0)]),o("div",null,[o("button",Ee,[e[35]||(e[35]=o("span",null,[o("i",{class:"ri-filter-2-line"})],-1)),B.value!==0?(d(),p("span",ke," ( "+v(B.value)+") ",1)):r("",!0)])])]),o("div",Ve,[o("div",xe,[o("div",Ce,[o("div",De,[o("div",we,[o("div",Re,[e[36]||(e[36]=o("label",{class:"font-13 ps-1",for:"Employee"},"Employee Name:",-1)),i(s,{class:"mb-3",tag:"input",type:"search",name:"Employee",id:"Employee",placeholder:"Search",modelValue:t.emp_name,"onUpdate:modelValue":e[7]||(e[7]=a=>t.emp_name=a)},null,8,["modelValue"])]),o("div",Ue,[e[37]||(e[37]=o("label",{class:"font-13 ps-1",for:"Requested"},"Employee code:",-1)),i(s,{class:"mb-3",tag:"input",type:"search",name:"Employee",id:"Employee",placeholder:"Search",modelValue:t.emp_code,"onUpdate:modelValue":e[8]||(e[8]=a=>t.emp_code=a)},null,8,["modelValue"])]),o("div",Se,[e[38]||(e[38]=o("label",{class:"font-13 ps-1",for:"emp_mail_id"},"Employee mail:",-1)),i(s,{class:"mb-3",tag:"input",type:"search",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Search",modelValue:t.emp_mail_id,"onUpdate:modelValue":e[9]||(e[9]=a=>t.emp_mail_id=a)},null,8,["modelValue"])]),o("div",$e,[e[39]||(e[39]=o("label",{class:"font-13 ps-1",for:"dept"},"Employee Department:",-1)),i(s,{tag:"select",placeholder:"Select Department",class:"mb-3",name:"dept",modelValue:t.department,"onUpdate:modelValue":e[10]||(e[10]=a=>t.department=a),id:"dept",Required:!1,options:D.value},null,8,["modelValue","options"])]),o("div",Le,[e[40]||(e[40]=o("label",{class:"font-13 ps-1",for:"dept"},"Employee Desigination:",-1)),i(s,{tag:"select",placeholder:"Select Desigination",class:"mb-3",name:"dept",modelValue:t.designation,"onUpdate:modelValue":e[11]||(e[11]=a=>t.designation=a),id:"dept",Required:!1,options:C.value},null,8,["modelValue","options"])]),o("div",Ne,[e[41]||(e[41]=o("label",{class:"font-13 ps-1",for:"Requested"},"Reporting To:",-1)),i(s,{tag:"select",placeholder:"Reporting To",class:"mb-3",name:"dept",modelValue:t.reporting_to,"onUpdate:modelValue":e[12]||(e[12]=a=>t.reporting_to=a),id:"dept",Required:!1,options:F.value},null,8,["modelValue","options"])]),o("div",Fe,[e[42]||(e[42]=o("label",{class:"font-13 ps-1",for:"Requested"},"Reporting Desigination:",-1)),i(s,{tag:"select",placeholder:"Reporting To",class:"mb-3",name:"dept",modelValue:t.reporting_designation,"onUpdate:modelValue":e[13]||(e[13]=a=>t.reporting_designation=a),id:"dept",Required:!1,options:q.value},null,8,["modelValue","options"])])])]),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"cancelfilter border-0 text-nowrap font-10",onClick:J,"data-bs-dismiss":"modal"},e[43]||(e[43]=[o("span",{class:"font-14 me-1"},"x",-1),f("Cancel Filter")])),o("button",{type:"button",class:"applyfilter text-nowrap border-0 btn btn-dark text-white font-10 d-flex justify-content-center align-items-center","data-bs-dismiss":"modal",onClick:P},e[44]||(e[44]=[o("span",{class:"font-16 me-1"},[o("i",{class:"bi bi-check2"})],-1),f(" Apply Filter")]))])])])]),o("div",{class:"d-flex align-items-center"},[o("button",{type:"button",class:"btn btn-dark buttoncomp CreateDepartments d-flex align-items-center","data-bs-toggle":"modal","data-bs-target":"#createDepartments",onClick:j}," Create Employee ")]),o("div",qe,[o("div",Be,[o("div",Pe,[o("div",{class:"modal-header"},[e[45]||(e[45]=o("h5",{class:"modal-title",id:"createDepartmentsLabel"},"Ezy Employee",-1)),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:w,"aria-label":"Close"})]),o("div",he,[o("div",Te,[o("div",ze,[o("div",Me,[e[46]||(e[46]=o("label",{class:"font-13 ps-1",for:"emp_code"},"Emp code",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter Emp code",modelValue:n.value.emp_code,"onUpdate:modelValue":e[14]||(e[14]=a=>n.value.emp_code=a)},null,8,["modelValue"]),e[47]||(e[47]=o("label",{class:"font-13 ps-1",for:"emp_name"},"Emp Name",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter Emp Name",modelValue:n.value.emp_name,"onUpdate:modelValue":e[15]||(e[15]=a=>n.value.emp_name=a)},null,8,["modelValue"]),e[48]||(e[48]=o("label",{class:"font-13 ps-1",for:"emp_mail_id"},"Emp Mail ID",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter Email",modelValue:n.value.emp_mail_id,"onUpdate:modelValue":e[16]||(e[16]=a=>n.value.emp_mail_id=a)},null,8,["modelValue"]),e[49]||(e[49]=o("label",{class:"font-13 ps-1 fw-medium",for:"dept"},"Departments",-1)),i(s,{tag:"select",placeholder:"Select Department",class:"mb-3",name:"dept",modelValue:n.value.department,"onUpdate:modelValue":e[17]||(e[17]=a=>n.value.department=a),id:"dept",Required:!1,options:D.value},null,8,["modelValue","options"])]),o("div",Oe,[e[50]||(e[50]=o("label",{class:"font-13 ps-1",for:"Designation"},"Designation",-1)),i(s,{tag:"select",placeholder:"Select Desigination",class:"mb-3",name:"Designation",modelValue:n.value.designation,"onUpdate:modelValue":e[18]||(e[18]=a=>n.value.designation=a),id:"dept",Required:!1,options:C.value},null,8,["modelValue","options"]),e[51]||(e[51]=o("label",{class:"font-13 ps-1",for:"reporting_to"},"Reporting To",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"reporting_to",id:"reporting_to",placeholder:"Enter Reporting To",modelValue:n.value.reporting_to,"onUpdate:modelValue":e[19]||(e[19]=a=>n.value.reporting_to=a)},null,8,["modelValue"]),e[52]||(e[52]=o("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"reporting_designation",id:"reporting_designation",placeholder:"Enter Reporting Designation",modelValue:n.value.reporting_designation,"onUpdate:modelValue":e[20]||(e[20]=a=>n.value.reporting_designation=a)},null,8,["modelValue"])])])])]),o("div",je,[i(L,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:w,"data-bs-dismiss":"modal"}),o("button",{type:"button",class:"applyfilter btn btn-dark text-nowrap font-10 d-flex justify-content-center align-items-center","data-bs-dismiss":"modal",onClick:Q},e[53]||(e[53]=[o("span",{class:"font-16 me-1"},[o("i",{class:"bi bi-check2"})],-1),f(" Create Employee")]))])])])])])]),o("div",Ae,[i(ie,{tHeaders:I.value,tData:U.value,isAction:"true",actions:O.value,onActionClicked:A,actionType:"dropdown",isCheckbox:"true"},null,8,["tHeaders","tData","actions"]),i(se,{currentRecords:U.value.length,totalRecords:N.value,onUpdateValue:G,onLimitStart:K},null,8,["currentRecords","totalRecords"])]),o("div",Ie,[o("div",Je,[o("div",He,[o("div",{class:"modal-header"},[e[55]||(e[55]=o("h5",{class:"modal-title",id:"viewEmployeeLabel"},"Ezy Employee",-1)),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:w,"aria-label":"Close"})]),o("div",Ge,[o("div",Ke,[o("div",Qe,[o("div",We,[e[56]||(e[56]=o("label",{class:"font-13 ps-1",for:"emp_code"},"Emp code",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter department code",modelValue:n.value.emp_code,"onUpdate:modelValue":e[21]||(e[21]=a=>n.value.emp_code=a)},null,8,["modelValue"]),e[57]||(e[57]=o("label",{class:"font-13 ps-1",for:"emp_name"},"Emp Name",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter department code",modelValue:n.value.emp_name,"onUpdate:modelValue":e[22]||(e[22]=a=>n.value.emp_name=a)},null,8,["modelValue"]),e[58]||(e[58]=o("label",{class:"font-13 ps-1",for:"emp_mail_id"},"Emp Mail ID",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter department code",modelValue:n.value.emp_mail_id,"onUpdate:modelValue":e[23]||(e[23]=a=>n.value.emp_mail_id=a)},null,8,["modelValue"]),e[59]||(e[59]=o("label",{class:"font-13 ps-1 fw-medium",for:"dept"},"Departments",-1)),i(s,{tag:"select",placeholder:"Select Department",class:"mb-3",name:"dept",modelValue:n.value.department,"onUpdate:modelValue":e[24]||(e[24]=a=>n.value.department=a),id:"dept",Required:!1,options:D.value},null,8,["modelValue","options"])]),o("div",Xe,[e[60]||(e[60]=o("label",{class:"font-13 ps-1",for:"Designation"},"Designation",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"Designation",id:"Designation",placeholder:"Enter department code",modelValue:n.value.designation,"onUpdate:modelValue":e[25]||(e[25]=a=>n.value.designation=a)},null,8,["modelValue"]),e[61]||(e[61]=o("label",{class:"font-13 ps-1",for:"reporting_to"},"Reporting To",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"reporting_to",id:"reporting_to",placeholder:"Enter department code",modelValue:n.value.reporting_to,"onUpdate:modelValue":e[26]||(e[26]=a=>n.value.reporting_to=a)},null,8,["modelValue"]),e[62]||(e[62]=o("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),i(s,{class:"mb-3",tag:"input",type:"text",name:"reporting_designation",id:"reporting_designation",placeholder:"Enter department code",modelValue:n.value.reporting_designation,"onUpdate:modelValue":e[27]||(e[27]=a=>n.value.reporting_designation=a)},null,8,["modelValue"])])])])]),o("div",Ye,[i(L,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:w,"data-bs-dismiss":"modal"}),i(L,{type:"button",class:"btn btn-dark font-11",name:"Save Employee","data-bs-dismiss":"modal",onClick:W})])])])])]))}},at=oe(Ze,[["__scopeId","data-v-3b8201e2"]]);export{at as default};
