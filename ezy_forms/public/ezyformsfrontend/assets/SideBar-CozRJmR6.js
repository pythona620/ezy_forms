var ke=Object.defineProperty,Ce=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var oe=(f,l,i)=>l in f?ke(f,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[l]=i,ne=(f,l)=>{for(var i in l||(l={}))$e.call(l,i)&&oe(f,i,l[i]);if(ae)for(var i of ae(l))Se.call(l,i)&&oe(f,i,l[i]);return f},le=(f,l)=>Ce(f,we(l));import{p as ee,A as te,r as ce,o as r,c as m,b as e,s as R,u as L,a as $,G as I,B as q,g as O,t as p,C as de,d as n,f as u,q as xe,l as F,m as N,n as M,w as ue,E as K,i as De,U as Re,y as j,h as X,F as Z,K as ie,L as re,k as Fe,j as Ne}from"./index-B-ZWE6ER.js";import{B as Q}from"./ButtonComp-Ciox4MwK.js";const qe="/assets/ezy_forms/ezyformsfrontend/assets/Image-DGmvfUlV.svg",Ee={class:"tabs-div"},Pe={class:"tab-list m-0 p-0"},Ve={__name:"TabsComp",props:{tabs:{type:Array,required:!0}},emits:["activeTabValue"],setup(f,{emit:l}){const i=l,c=te();function k(_){i("activeTabValue",_)}function S(_){return _.name==="Forms"?c.path.startsWith("/forms/department/"):c.path.startsWith(_.route)}return(_,h)=>{const y=ce("router-link");return r(),m("div",Ee,[e("ul",Pe,[(r(!0),m(R,null,L(f.tabs,(d,E)=>(r(),m("li",{key:E,class:"tab-item"},[$(y,{to:d.route,class:q(["tab-link",S(d)?"active-link":""]),onClick:C=>k(d.name)},{default:I(()=>[e("i",{class:q(d.icon)},null,2),O(" "+p(d.name),1)]),_:2},1032,["to","class","onClick"])]))),128))])])}}},Be=ee(Ve,[["__scopeId","data-v-0548cb4b"]]),Te={class:"position-sticky top-0 stickyheader"},Le={class:"container-fluid"},Ie={class:"headerbackgound mt-2"},Oe={class:"row"},Me={class:"col-7"},je={class:"mt-2"},ze={class:"col-3 pe-1"},Ue={class:"d-flex gap-3 justify-content-end align-items-center m-0"},Je={class:"mb-1"},Ae={class:"mt-1"},We={class:"logooutbtn"},Ge={class:"btn-group dropdown navbar-nav ms-auto"},He={class:"dropdown-menu dropdown-menu-start p-2"},Ke={class:"d-flex gap-2 align-items-center"},Ye={class:"d-flex justify-content-center align-items-center btn btn-dark"},Ze={class:""},Qe={class:"fw-medium font-13"},Xe={class:""},et={class:"fw-medium font-11"},tt={class:"mt-2"},st={class:"d-flex justify-content-center align-items-center"},at={class:"mt-2"},ot={class:"d-flex justify-content-center align-items-center"},nt={class:"modal fade",id:"riaseRequestModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"riaseRequestModalLabel","aria-hidden":"true"},lt={class:"modal-dialog modal-dialog-centered modal-md"},it={class:"modal-content"},rt={class:"modal-header"},ct={class:"modal-body"},dt={class:"mb-2"},ut={class:"mb-2"},mt={class:"modal fade",id:"changePassword","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"changePasswordLabel","aria-hidden":"true"},ft={class:"modal-dialog modal-dialog-centered modal-sm"},pt={class:"modal-content"},vt={class:"modal-body"},bt={class:"mb-2"},gt={class:"mb-2"},_t={key:0,class:"text-danger font-10 m-0 ps-2"},ht={class:"d-flex justify-content-center align-items-center p-3"},yt={__name:"HeaderComp",props:["id"],setup(f){const l=de(),i=n([{name:"Dashboard",icon:"bi bi-columns-gap",route:"/dashboard"},{name:"To do",icon:"fa-solid fa-list-check",route:"/todo"},{name:"Forms",icon:"bi bi-file-earmark-text",route:"/forms"},{name:"Settings",icon:"bi bi-gear",route:"/settings"},{name:"Archive",icon:"bi bi-archive",route:"/archived"},{name:"Form",icon:"bi bi-file-earmark-text",route:"/create-form"}]),c=n({selectedCategory:"",selectedform:""});n(!1);const k=te(),S=n([]),_=n([]),h=n(""),y=n(""),d=n(""),E=n(""),C=n(""),P=n(""),z=n(""),A=n(""),x=n([]),V=n([]),Y=n([]),w=n([]),B=n(""),W=n({limit_start:0,limitPageLength:100}),G=u(()=>z.value.toLowerCase().includes("it")?i.value:i.value.filter(s=>s.name!=="Form"));function D(){localStorage.removeItem("UserName"),localStorage.removeItem("employeeData"),localStorage.removeItem("Bu"),l.push({path:"/"}).then(()=>{})}function T(){c.value.selectedCategory="",c.value.selectedform="",x.value=[]}xe(()=>{me(),B.value=k.path;const s=JSON.parse(localStorage.getItem("employeeData")),t=JSON.parse(localStorage.getItem("UserName"));t?(E.value=t.full_name,t.full_name==="Administrator"?(A.value=t.full_name,y.value=t.full_name.charAt(0).toUpperCase()):s&&(A.value=t.full_name,y.value=s.emp_name.charAt(0).toUpperCase(),P.value=s.name,z.value=s.designation||"")):console.warn("No user data found in localStorage.")});const v=u(()=>["/forms/department","/todo"].some(t=>k.path.includes(t))),a=u(()=>d.value&&C.value&&d.value!==C.value);function g(){if(a.value){console.error("Passwords do not match.");return}const s=JSON.parse(localStorage.getItem("employeeData")),t={new_password:d.value};F.put(`${N.resource}${M.users}/${s.name}`,t).then(o=>{console.log("Password updated successfully:",o.data),Fe.success("Password changed Successfully",{autoClose:300}),bootstrap.Modal.getInstance(document.getElementById("changePassword")).hide()}).catch(o=>{console.error("Error:",o)})}const me=()=>{const s={fields:JSON.stringify(["*"])};F.get(N.resource+M.wfSettingEzyForms,{params:s}).then(t=>{var o;(o=t==null?void 0:t.data)!=null&&o.length&&(V.value=t.data.map(b=>b.bu_code),V.value.length&&(h.value=V.value[0]))}).catch(t=>{console.error("Error fetching ezyForms data:",t)})};ue(h,(s,t)=>{K.value=s,localStorage.setItem("Bu",K.value),t?se(!0):se()});function se(s=null){const t=[["business_unit","like",`%${h.value}%`]],o={fields:JSON.stringify(["*"]),filters:JSON.stringify(t)};F.get(N.resource+M.departments,{params:o}).then(b=>{if(b.data){w.value=b.data;const H=w.value.length>0?`/forms/department/${w.value[0].name.replace(/\s+/g,"-").toLowerCase()}`:"/forms";i.value=i.value.map(J=>J.name==="Forms"?le(ne({},J),{route:H}):J),Y.value=w.value.map(J=>({route:J.name.replace(/\s+/g,"-").toLowerCase()})),s&&B.value.includes("/forms")&&ye({route:H})}}).catch(b=>{console.error("Error fetching department data:",b)})}const U=n({});function fe(){console.log(" Raise req ");const s=localStorage.getItem("employeeData");s?(U.value=JSON.parse(s),ge(U==null?void 0:U.value.department)):console.error("No employee data found in local storage.")}function pe(s){if(x.value=[],c.value.selectedform="",s){const t={role:U.value.designation,business_unit:K.value};F.post(N.raiseFormdata,t).then(o=>{_.value=o.message.list_of_roadmaps}).catch(o=>{console.error("Error fetching data:",o)})}}function ve(s){x.value=[],c.value.selectedform=s,s&&be(s)}function be(s){const t=[["business_unit","like",`%${h.value}%`]];c.value.selectedCategory&&t.push(["form_category","like",`${c.value.selectedCategory}`]),s&&t.push(["form_short_name","like",`%${s}%`]);const o={fields:JSON.stringify(["*"]),limit_page_length:W.value.limitPageLength,limit_start:W.value.limit_start,filters:JSON.stringify(t),order_by:"`tabEzy Form Definitions`.`creation` desc"};F.get(`${N.resource}${M.EzyFormDefinitions}`,{params:o}).then(b=>{console.log(b,"===================0000000000=====================");const H=b.data[0].form_json;x.value=Ne(JSON.parse(H).fields),x.value.splice(1)}).catch(b=>{console.error("Error fetching ezyForms data:",b)})}function ge(s){F.get(`${N.resource}${M.departments}/${s}`).then(t=>{t.data&&t.data.ezy_departments_items&&(S.value=t.data.ezy_departments_items.map(o=>o.category))}).catch(t=>{console.error("Error fetching categories data:",t)})}n([]),n("");function _e(){bootstrap.Modal.getInstance(document.getElementById("riaseRequestModal")).hide(),l.push({name:"RaiseRequest",query:{selectedCategory:c.value.selectedCategory,selectedForm:c.value.selectedform,business_unit:h.value}})}const he=s=>{B.value=s.route,l.push(s.route)},ye=s=>{s.route.includes("/forms")&&l.push(s.route)};return(s,t)=>(r(),m("div",null,[e("div",Te,[e("div",Le,[e("div",Ie,[e("div",Oe,[t[9]||(t[9]=De('<div class="col-2" data-v-bf18cd60><div class="d-flex gap-2 p-2 align-items-center" data-v-bf18cd60><div data-v-bf18cd60><img class="imgmix" src="'+Re+'" data-v-bf18cd60></div><div class="m-0" data-v-bf18cd60><p class="font-13 m-0" data-v-bf18cd60>EZY | Forms</p></div></div></div>',1)),e("div",Me,[e("div",je,[$(Be,{tabs:G.value,onChangeTab:he},null,8,["tabs"])])]),e("div",ze,[e("div",Ue,[e("div",Je,[v.value?(r(),j(Q,{key:0,class:"btn-outline-primary d-flex justify-content-center align-items-center bg-white text-nowrap font-10",name:"Raise request","data-bs-toggle":"modal","data-bs-target":"#riaseRequestModal",onClick:fe})):X("",!0)]),e("div",Ae,[$(Z,{tag:"select",placeholder:"",class:"mb-3",name:"roles",id:"roles",Required:!1,modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=o=>h.value=o),options:V.value},null,8,["modelValue","options"])]),e("div",We,[e("div",Ge,[t[8]||(t[8]=e("button",{type:"button",class:"btn border-0 p-0 me-2 mt-0","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("img",{src:qe})],-1)),e("ul",He,[e("div",Ke,[e("div",null,[e("li",Ye,p(y.value),1)]),e("div",null,[e("li",null,[e("div",Ze,[e("span",Qe,p(P.value),1)]),e("div",Xe,[e("span",et,p(z.value),1)])])])]),e("li",tt,[e("div",st,[$(Q,{class:"changepass rounded-2 text-left",icon:"lock","data-bs-toggle":"modal","data-bs-target":"#changePassword",name:"Change Password"})])]),e("li",at,[e("div",ot,[$(Q,{class:"logout rounded-2 text-left",icon:"box-arrow-right",onClick:t[1]||(t[1]=o=>D()),name:"Log Out"})])])])])])])])])])])]),e("div",nt,[e("div",lt,[e("div",it,[e("div",rt,[t[10]||(t[10]=e("h5",{class:"modal-title font-14 fw-bold",id:"riaseRequestModalLabel"},"Raise Request",-1)),e("button",{onClick:t[2]||(t[2]=o=>T()),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",ct,[e("div",dt,[t[11]||(t[11]=e("label",{class:"raise-label",for:""},"Category",-1)),$(ie(re),{options:S.value,onChange:pe,modelValue:c.value.selectedCategory,"onUpdate:modelValue":t[3]||(t[3]=o=>c.value.selectedCategory=o),placeholder:"Select",multiple:!1,class:"font-11",searchable:!0},null,8,["options","modelValue"])]),e("div",ut,[t[12]||(t[12]=e("label",{class:"raise-label",for:""},"Form",-1)),$(ie(re),{options:_.value,modelValue:c.value.selectedform,"onUpdate:modelValue":t[4]||(t[4]=o=>c.value.selectedform=o),placeholder:"Select",onChange:ve,multiple:!1,class:"font-11",searchable:!0},null,8,["options","modelValue"])])]),e("div",null,[e("div",{class:"d-flex justify-content-center align-items-center p-3"},[e("button",{class:"btn btn-dark font-12 w-100",onClick:_e,type:"submit"}," Raise Request ")])])])])]),e("div",mt,[e("div",ft,[e("div",pt,[t[15]||(t[15]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title font-14 fw-bold",id:"changePasswordLabel"},"Change Password"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",vt,[e("div",bt,[t[13]||(t[13]=e("label",{class:"raise-label",for:"changepass"},"New Password",-1)),$(Z,{class:"mb-3",tag:"input",type:"text",name:"changepass",id:"changepass",placeholder:"Enter",modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=o=>d.value=o)},null,8,["modelValue"])]),e("div",gt,[t[14]||(t[14]=e("label",{class:"raise-label",for:"confirmpass"},"Confirm Password",-1)),$(Z,{class:"",tag:"input",type:"text",name:"confirmpass",id:"confirmpass",placeholder:"Enter",modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o)},null,8,["modelValue"]),a.value?(r(),m("span",_t,"Passwords do not match.")):X("",!0)])]),e("div",null,[e("div",ht,[e("button",{class:"btn btn-dark font-12 w-100",type:"submit",onClick:t[7]||(t[7]=o=>g())}," Confirm New Password")])])])])])]))}},jt=ee(yt,[["__scopeId","data-v-bf18cd60"]]),kt={class:""},Ct={class:"sidebar pt-2"},wt={class:"font-12 m-0 text-muted ps-2"},$t={class:"mt-1"},St={class:"list-unstyled"},xt=["title"],Dt={class:"list-unstyled"},Rt=["title"],Ft={class:"list-unstyled"},Nt=["title"],qt={key:1,class:"list-unstyled"},Et={key:2,class:"list-unstyled"},Pt=["title"],Vt="My Details",Bt="Master",Tt="Form",Lt={__name:"SideBar",setup(f){const l=u(()=>K.value),i=n({business_unit:""}),c=n({limitPageLength:"None",limitstart:0}),k=n([]),S=[{name:"Profile",icon:"bi bi-person-circle",route:"profile"},{name:"E-Signature",icon:"bi bi-person-circle",route:"esign"},{name:"Department",icon:"bi bi-clock-history",route:"department"},{name:"Designation",icon:"bi bi-people",route:"designations"},{name:"Employees",icon:"bi bi-people",route:"employee"}],_=[{name:"Received for me",icon:"bi bi-bucket",route:"receivedform"},{name:"Raised by me",icon:"bi bi-send",route:"raisedbyme"},{name:"My team",icon:"bi bi-microsoft-teams",route:"myteam"},{name:"History",icon:"bi bi-clock-history",route:"history"}],h=[{name:"Created",icon:"bi bi-file-earmark-plus",route:"created"},{name:"Draft",icon:"bi bi-file-earmark-text",route:"draft"},{name:"Trash",icon:"bi bi-trash3",route:"trash"}],y=te();de();const d=u(()=>y.path.startsWith("/forms")),E=u(()=>y.path.startsWith("/settings")),C=u(()=>y.path.startsWith("/todo")),P=u(()=>y.path.startsWith("/create-form")),z=u(()=>d.value?k.value:C.value?_:P.value?h:[]),A=u(()=>S.slice(0,2)),x=u(()=>S.slice(2,4)),V=u(()=>S.slice(4)),Y=u(()=>d.value?"Departments":C.value?"Requests":P.value?"Forms":""),w=u(()=>d.value?"/forms":E.value?"/settings":C.value?"/todo":P.value?"/create-form":"/"),B=n([]);function W(){const D=[["business_unit","like",`%${i.value.business_unit}%`]],T={fields:JSON.stringify(["*"]),limit_page_length:c.value.limitPageLength,limitstart:c.value.limitstart,filters:JSON.stringify(D),order_by:"`tabEzy Departments`.`creation` desc"};F.get(N.resource+M.departments,{params:T}).then(v=>{v.data&&(B.value=v.data,k.value=B.value.map(a=>({name:a.department_name,route:a.name.replace(/\s+/g,"-").toLowerCase()})),console.log(k.value))}).catch(v=>{console.error("Error fetching department data:",v)})}const G=["bi-file-earmark-check","bi-question-octagon","bi-file-earmark-bar-graph","bi-card-checklist","bi-file-earmark-ruled","bi-journal-x","bi-clock-history","bi-percent"];return ue([l,d],([D,T])=>{i.value.business_unit=D,T&&D.length&&W()},{immediate:!0}),(D,T)=>{const v=ce("router-link");return r(),m("div",kt,[e("div",Ct,[e("h1",wt,p(Y.value),1),e("aside",$t,[E.value?(r(),m(R,{key:0},[e("h2",{class:"font-10 m-0 text-muted ps-2"},p(Vt)),e("ul",St,[(r(!0),m(R,null,L(A.value,(a,g)=>(r(),j(v,{key:g,to:`${w.value}/${a.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:I(()=>[e("li",{title:a.name},[e("i",{class:q(`bi-icon ps-1 bg-transparent bi ${a.icon} me-3`)},null,2),O(" "+p(a.name),1)],8,xt)]),_:2},1032,["to"]))),128))]),e("h2",{class:"font-10 m-0 text-muted ps-2"},p(Bt)),e("ul",Dt,[(r(!0),m(R,null,L(x.value,(a,g)=>(r(),j(v,{key:g,to:`${w.value}/${a.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:I(()=>[e("li",{title:a.name},[e("i",{class:q(`bi-icon ps-1 bg-transparent bi ${a.icon} me-3`)},null,2),O(" "+p(a.name),1)],8,Rt)]),_:2},1032,["to"]))),128))]),e("h2",{class:"font-10 m-0 text-muted ps-2"},p(Tt)),e("ul",Ft,[(r(!0),m(R,null,L(V.value,(a,g)=>(r(),j(v,{key:g,to:`${w.value}/${a.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:I(()=>[e("li",{title:a.name},[e("i",{class:q(`bi-icon ps-1 bg-transparent bi ${a.icon} me-3`)},null,2),O(" "+p(a.name),1)],8,Nt)]),_:2},1032,["to"]))),128))])],64)):X("",!0),d.value?(r(),m("ul",qt,[(r(!0),m(R,null,L(k.value,(a,g)=>(r(),j(v,{key:a.route,to:`/forms/department/${a.route}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:I(()=>[e("li",null,[e("i",{class:q(["bi-icon","fs-6","bg-transparent","bi",G[g%G.length],"me-3"])},null,2),O(" "+p(a.name),1)])]),_:2},1032,["to"]))),128))])):(r(),m("ul",Et,[(r(!0),m(R,null,L(z.value,(a,g)=>(r(),j(v,{key:g,to:`${w.value}/${a.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:I(()=>[e("li",{title:a.name},[e("i",{class:q(`bi-icon ps-1 bg-transparent bi ${a.icon} me-3`)},null,2),O(" "+p(a.name),1)],8,Pt)]),_:2},1032,["to"]))),128))]))])])])}}},zt=ee(Lt,[["__scopeId","data-v-a034a1b8"]]);export{jt as H,zt as S};
