var Ps=Object.defineProperty,Hs=Object.defineProperties;var js=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var mt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable;var pt=(A,D,F)=>D in A?Ps(A,D,{enumerable:!0,configurable:!0,writable:!0,value:F}):A[D]=F,le=(A,D)=>{for(var F in D||(D={}))mt.call(D,F)&&pt(A,F,D[F]);if(Te)for(var F of Te(D))ft.call(D,F)&&pt(A,F,D[F]);return A},Se=(A,D)=>Hs(A,js(D));var We=(A,D)=>{var F={};for(var S in A)mt.call(A,S)&&D.indexOf(S)<0&&(F[S]=A[S]);if(A!=null&&Te)for(var S of Te(A))D.indexOf(S)<0&&ft.call(A,S)&&(F[S]=A[S]);return F};var Ye=(A,D,F)=>new Promise((S,_e)=>{var te=P=>{try{p(F.next(P))}catch(Z){_e(Z)}},Fe=P=>{try{p(F.throw(P))}catch(Z){_e(Z)}},p=P=>P.done?S(P.value):Promise.resolve(P.value).then(te,Fe);p((F=F.apply(A,D)).next())});import{_ as Js,u as Qs,s as Ws,d as b,q as ne,e as x,w as ve,f as Ys,L as vt,l as N,m as z,p as I,o as n,c as i,b as s,v as V,O as Zs,j as J,h as _,D as q,H as U,I as T,t as g,N as Gs,B as _t,a as ee,x as Ze,i as Ks,A as Oe,y as ht,K as ce,z as k,F as Xs,C as B,J as Ge,Q as De,R as ie,S as xs,E as Is,k as Q,U as Ke,V as el,W as bt,X as tl}from"./index-BX552J3x.js";const sl="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg",ll={class:""},ol={class:""},al={class:"d-flex justify-content-between align-items-center CancelNdSave my-2 py-2"},nl=["disabled"],il={class:"form-container p-0 container-fluid mt-1"},rl={class:"row"},dl={class:"col-2"},ul={class:"steps-sticky-div"},cl={class:"steps"},pl=["onClick"],ml={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},fl={class:"step-text"},vl={class:"font-11"},_l={class:"font-14"},hl={class:"col-10 formbackground-color"},bl={class:""},gl={class:"form-content stepsDiv"},yl={key:0},kl={class:""},wl={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Cl={class:"container-fluid p-0"},Sl={class:"row"},Dl={class:"col-4"},Fl={class:"mt-3"},$l={class:""},Vl={key:0,class:"text-danger ErrorMsg ms-2"},Al={class:"mt-3"},ql={class:""},Ul={key:0,class:"text-danger ErrorMsg ms-2"},Bl={class:"mt-3"},El={class:""},Ll={for:""},Tl={key:0,class:"text-danger"},Ol={class:"mt-3"},Rl={class:""},Ml={for:""},Nl={key:0,class:"text-danger"},zl={class:"mt-3"},Pl={class:"typo__label"},Hl={for:""},jl={key:0,class:"text-danger"},Jl={class:"custom-option"},Ql=["checked","onChange"],Wl={class:"mt-3"},Yl={class:""},Zl={key:1},Gl={class:""},Kl={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Xl={class:"d-flex gap-2 align-items-center"},xl={class:"requestandAppHeader"},Il={class:"d-flex justify-content-between"},eo={class:"ps-2 pt-2"},to={class:"d-flex"},so={key:0,class:"role-container"},lo={key:0,class:"role-text d-flex align-items-center"},oo={class:"role-label"},ao={class:"role-names"},no=["onClick"],io=["onClick"],ro=["onClick"],uo=["onClick"],co={class:"pt-0 section_block"},po={class:"d-flex justify-content-between align-items-center"},mo={class:"d-flex flex-column"},fo=["onUpdate:modelValue","onChange"],vo={key:0,class:"text-danger font-10"},_o={class:"d-flex align-items-center"},ho=["onClick"],bo={class:"container-fluid"},go={class:"d-flex justify-content-between align-items-center"},yo={class:"rownames"},ko=["onClick"],wo={class:"col"},Co={class:"row"},So=["onMouseenter"],Do={class:"column_name d-flex align-items-center justify-content-between"},Fo={class:"d-flex flex-column ps-2"},$o=["onUpdate:modelValue","onChange"],Vo={key:0,class:"text-danger font-10"},Ao={class:"position-absolute top-0 end-0"},qo=["onClick"],Uo=["onDrop"],Bo=["onMouseenter","onDragstart"],Eo=["onDrop"],Lo=["onDragstart","onDrop"],To={class:"d-flex justify-content-between"},Oo={class:"flex-column d-flex"},Ro=["onUpdate:modelValue","onChange"],Mo={key:0,class:"text-danger font-10"},No={class:"FieldcopyRemove"},zo=["onClick"],Po=["onClick"],Ho=["onUpdate:modelValue","onChange"],jo=["value"],Jo={key:0},Qo=["onUpdate:modelValue"],Wo={key:0,class:"text-danger font-10"},Yo={key:1},Zo={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},Go=["onClick"],Ko=["onUpdate:modelValue","placeholder"],Xo={key:2},xo={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},Io=["onClick"],ea=["onUpdate:modelValue","placeholder"],ta={class:"d-flex align-items-center justify-content-between"},sa={class:"d-flex align-items-center gap-2"},la={class:"d-flex align-items-center"},oa=["onUpdate:modelValue"],aa=["onClick"],na=["onUpdate:modelValue"],ia={key:4,class:"text-danger font-10"},ra=["onDrop"],da={class:"childtableShow"},ua={class:"mt-2"},ca={key:0,class:"childTableContainer"},pa={key:0,class:"font-13"},ma={key:1,class:"d-flex align-items-center gap-2"},fa={class:"d-flex align-items-center"},va=["onUpdate:modelValue"],_a={key:2,class:"table table-bordered rounded-table"},ha=["onDrop"],ba=["draggable","onDragstart"],ga={key:0},ya=["onUpdate:modelValue"],ka={key:0,class:"font-11 text-danger"},wa={key:1},Ca={key:2},Sa={class:"d-flex gap-1"},Da=["onUpdate:modelValue"],Fa=["value"],$a={class:"d-flex"},Va={class:"d-flex align-items-center gap-2"},Aa={class:"d-flex align-items-center"},qa=["onUpdate:modelValue"],Ua=["onClick"],Ba={key:0},Ea=["onUpdate:modelValue"],La={key:0,class:"text-danger font-10"},Ta={key:1,class:"font-11 text-danger"},Oa={key:3},Ra={key:3,class:"mb-2 mt-3"},Ma=["onClick"],Na=["onClick"],za=["onDrop"],Pa={class:"d-flex justify-content-center align-items-center my-2"},Ha=["onClick"],ja={class:"font-13"},Ja={key:0,class:"d-flex align-items-center gap-2"},Qa={class:"d-flex align-items-center"},Wa=["onUpdate:modelValue"],Ya={class:"table table-bordered rounded-table"},Za={key:0},Ga=["onUpdate:modelValue","onBlur"],Ka={key:0,class:"font-11 text-danger"},Xa={key:1},xa={key:2},Ia={class:"d-flex gap-1"},en=["onUpdate:modelValue"],tn=["value"],sn=["onClick"],ln={key:0},on=["onUpdate:modelValue"],an={key:0,class:"text-danger font-10"},nn={key:1,class:"font-11 text-danger"},rn={key:3},dn={class:"mb-2"},un=["onClick"],cn=["onClick"],pn=["onClick"],mn={key:0},fn={class:"d-flex justify-content-between align-items-center mt-1 mb-2"},vn=["onUpdate:modelValue","onBlur"],_n={key:0,class:"text-danger font-12"},hn={key:1,class:"text-danger font-12"},bn={class:"d-flex align-items-center gap-2"},gn={class:"d-flex align-items-center"},yn=["onUpdate:modelValue"],kn=["onClick"],wn={class:"px-1 field-border"},Cn={class:"d-flex justify-content-between"},Sn=["onUpdate:modelValue","onBlur"],Dn={key:0,class:"text-danger font-12"},Fn={class:"d-flex align-items-center"},$n={class:"d-flex my-1"},Vn=["onUpdate:modelValue"],An=["onClick"],qn=["onClick"],Un=["onUpdate:modelValue"],Bn=["value"],En={key:0},Ln=["onUpdate:modelValue"],Tn={key:0,class:"text-danger font-10"},On={key:1,class:"text-danger font-12"},Rn=["onClick"],Mn=["onClick"],Nn={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},zn=["onClick"],Pn={key:0,class:"m-2"},Hn={key:2},jn={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},Jn={class:"modal-dialog modal-dialog-centered"},Qn={class:"modal-content"},Wn={class:"modal-body"},Yn=["placeholder"],Zn={class:"d-flex align-items-center gap-2"},Gn={class:"d-flex align-items-center py-2"},Kn={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},Xn={class:"offcanvas-header add_designationHeader"},xn={id:"offcanvasRightLabel",class:"font-14"},In={class:"offcanvas-body p-0"},ei={class:""},ti={class:""},si={key:0,class:"p-3 py-4 approval-border-bottom d-flex align-items-center gap-3"},li={class:"form-control","aria-disabled":""},oi={class:"font-12"},ai={class:"ms-2"},ni=["value"],ii={key:1,class:"p-3 approval-border-bottom"},ri={key:0,class:"form-check ps-0"},di={class:"p-3 listofdesignations"},ui={key:0,class:"form-check ps-1"},ci={key:1,class:"list-unstyled designation-scroll"},pi=["id","value"],mi=["for"],fi={key:2},vi={class:"offcanvas-footer"},_i={class:"text-end p-3"},pe="Select All",hi={__name:"FormStepper",setup(A){const D=Qs(),F=Ws(),S=b(1),_e=b([]);b([]);const te=b([]),Fe=b([]);ne([]);let p=ne([]),P=ne([]);const Z=b([]),K=b([]),Re=b([]),oe=b(""),G=b(""),E=b("");let H=ne([]);const $e=b(""),he=b(!1),me=b(""),gt=b([]),yt=b([]),se=ne({}),M=b([]),kt=b("");let $=b("");const be=x(()=>Is);b(!1);const Ve=ne([]),W=b({routepath:D.query.routepath,business_unit:D.query.business_unit,formId:D.query.id}),Ae=b(""),fe=b(!1),f=b({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${be.value.value||W.value.business_unit||D.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:""}),wt=x(()=>f.value);b(""),b(!1),ve(be,t=>{t&&t.value&&(f.value.business_unit=t.value)},{immediate:!0});function Ct(t){if($==null||$==="new")return!1;const e=X(t).roles;if(t===0)return e.length===0;const l=X(t-1).roles;return l.length>0&&l[0]!==null&&l[0]!==""&&e.length===0}ve(()=>f.value.form_name,t=>{f.value.form_name=t.trim()}),ve(()=>f.value.form_short_name,t=>{f.value.form_short_name=t.trim()}),ve(()=>f.value.series,t=>{f.value.series=t.trim()});const qe=b(null),Xe=(t,e,l,o,d,a)=>{qe.value={blockIndex:e,sectionIndex:l,rowIndex:o,columnIndex:d,fieldIndex:a}},ge=(t,e,l,o,d,a)=>{if(!qe.value)return;const{blockIndex:u,sectionIndex:m,rowIndex:h,columnIndex:r,fieldIndex:c}=qe.value,w=p[u].sections[m].rows[h].columns[r].fields,v=p[e].sections[l].rows[o].columns[d].fields;if(u===e&&m===l&&h===o&&r===d&&c===a)return;const C=w.splice(c,1)[0];w===v&&c<a&&a--,v.splice(a,0,C),qe.value=null},Ue=b(""),St=t=>{const e=[["module","in",["User Forms"]],["istable","=",1]];t!=null&&t.trim()&&e.push(["name","like",`%${t}%`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};return N.get(z.resource+I.doctypesList,{params:l}).then(o=>o.data||[]).catch(o=>(console.error("Error fetching doctype list:",o),[]))},Me=b(null),Ne=t=>Ye(this,null,function*(){if(t.tableName){const e=t.tableName.trim(),l=yield St(e);Me.value=l.find(o=>o.name.toLowerCase()===e.toLowerCase()),Me.value&&(Ue.value="Table already exists")}else Ue.value="";t.label&&(t.fieldname=Rt(t.label))}),re=b([]),xe=ne({query:"",key:""});function Dt(t){const e=[["istable","=",0]];t!=null&&t.trim()&&e.push(["name","like",`%${t}%`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};N.get(z.resource+I.doctypesList,{params:l}).then(o=>{re.value=o.data||[]}).catch(o=>{console.error("Error fetching doctype list:",o)})}function Ft(t){const e=[["istable","=",1]];t!=null&&t.trim()&&e.push(["name","like",`%${t}%`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};N.get(z.resource+I.doctypesList,{params:l}).then(o=>{re.value=o.data||[]}).catch(o=>{console.error("Error fetching doctype list:",o)})}function Ie(t,e,l,o,d,a){p[t].sections[e].rows[l].columns[o].fields[d].options=a,re.value=[],xe.query="",xe.key=""}const $t=x(()=>p!=null&&p.length?E.value===1?[0]:Array.from({length:E.value},(t,e)=>e).filter(t=>t<E.value):[]),Vt=x(()=>Z.value.filter(t=>t.toLowerCase().includes($e.value.toLowerCase())).sort((t,e)=>{const l=K.value.includes(t),o=K.value.includes(e);return l===o?0:l?-1:1})),ae=b(null),de=b(null),At=(t,e,l,o,d)=>{ae.value={blockIndex:t,sectionIndex:e,rowIndex:l,columnIndex:o,fieldIndex:d}},qt=()=>{ae.value=null},Ut=(t,e,l,o,d)=>ae.value&&ae.value.blockIndex===t&&ae.value.sectionIndex===e&&ae.value.rowIndex===l&&ae.value.columnIndex===o&&ae.value.fieldIndex===d,Bt=(t,e,l,o)=>{de.value={blockIndex:t,sectionIndex:e,rowIndex:l,columnIndex:o}},Et=()=>{de.value=null},Lt=(t,e,l,o)=>de.value&&de.value.blockIndex===t&&de.value.sectionIndex===e&&de.value.rowIndex===l&&de.value.columnIndex===o;Ys(()=>{ys(),$.value=D.params.paramid||"new",$.value!=null&&$.value!=null&&$.value!="new"&&(at(),je());let t=localStorage.getItem("Bu");if(f.value.business_unit=t,D.query.preId==="PreDefine"){let e=Tt.value[0],l=vt(JSON.parse(e.form_json).fields);M.value=JSON.parse(e.form_json).child_table_fields,l.forEach((o,d)=>{p.push(o)})}});const Tt=b([{form_json:'{"fields": [{"description": "Field", "fieldname": "requested_by", "fieldtype": "Data", "idx": 0, "label": "Requested by", "reqd": 0, "value": ""}, {"description": "Column Break", "fieldname": "", "fieldtype": "Column Break", "idx": 1, "label": "", "doctype": "DocField"}, {"description": "Field", "fieldname": "requested_on", "fieldtype": "Datetime", "idx": 2, "label": "Requested On", "reqd": 0, "value": ""}, {"description": "Column Break", "fieldname": "_1", "fieldtype": "Column Break", "idx": 3, "label": ""}, {"description": "Row Break", "fieldname": "row_0_0_0", "fieldtype": "Column Break", "idx": 4, "label": "row_0_0_0"}, {"description": "Field", "fieldname": "receiver_name", "fieldtype": "Data", "idx": 5, "label": "Receiver Name", "reqd": 0, "value": ""}, {"description": "Field", "fieldname": "receiving_date", "fieldtype": "Date", "idx": 6, "label": "Receiving Date", "reqd": 0, "value": ""}, {"description": "Column Break", "fieldname": "_2", "fieldtype": "Column Break", "idx": 7, "label": ""}, {"description": "Row Break", "fieldname": "row_0_1_0", "fieldtype": "Column Break", "idx": 8, "label": "row_0_1_0"}, {"description": "Section Break", "fieldname": "_3", "fieldtype": "Section Break", "label": "", "idx": 9}, {"description": "false", "fieldname": "receiving_items", "fieldtype": "Table", "idx": 10, "label": "Receiving_Items", "reqd": 0, "value": "", "options": "Receiving_Items"}, {"description": "Column Break", "fieldname": "_4", "fieldtype": "Column Break", "idx": 11, "label": ""}, {"description": "Row Break", "fieldname": "_5", "fieldtype": "Column Break", "idx": 12, "label": ""}, {"description": "Section Break", "fieldname": "_6", "fieldtype": "Section Break", "label": "", "idx": 13, "doctype": "DocField"}, {"description": "Block Break", "fieldname": "requestor", "fieldtype": "Section Break", "label": "requestor", "idx": 14, "doctype": "DocField"}], "workflow": [{"type": "requestor", "roles": ["re", "CS", "IT Manager", "Hd", "mail test", "chef", "cash", "support", "happy"], "fields": ["_3", "row_0_0_0", "requested_by", "_1", "requested_on", "row_0_1_0", "_2", "receiver_name", "receiving_date", "_4", "row_break_after_receiving_items", "col_break_after_receiving_items", "Receiving_Items"], "idx": 0}], "child_table_fields": {"receiving_items": [{"options": "", "description": null, "fieldname": "item_name", "fieldtype": "Data", "idx": 1, "label": "Item Name", "value": ""}, {"options": "", "description": "", "fieldname": "received_qty", "fieldtype": "Data", "idx": 2, "label": "Received Qty", "value": ""}, {"options": "", "description": null, "fieldname": "qty", "fieldtype": "Data", "idx": 2, "label": "QTY", "value": ""}]}}'}]),Ot=b([]);function Rt(t){return t.toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]/g,"")}const Mt=(t,e)=>{const l=p[t].sections[e];l.childTables||(l.childTables=[]);const o=l.childTables.length;l.childTables.push({label:"",fieldname:"",fieldtype:"Table",idx:o,reqd:!1,as_a_block:"",description:"false",columns:[le({label:"",fieldname:"",fieldtype:"",idx:0,description:"",reqd:!1},Ve.fieldtype==="Select"&&Ve.options?{options:Ve.options?`
${Ve.options}`:`
`}:{})],newTable:!0})},Nt=(t,e,l)=>{const o=p[t].sections[e].childTables[l];o.columns||(o.columns=[]),o.columns.push(le({label:"",fieldname:"",fieldtype:"",idx:o.columns.length,description:"",reqd:!1},o.columns.fieldtype==="Select"&&o.columns.options?{options:o.columns.options?`
${o.columns.options}`:`
`}:{}))},zt=(t,e,l)=>{p[t].sections[e].childTables.splice(l,1)},Pt=(t,e,l,o)=>{p[t].sections[e].childTables[l].columns.splice(o,1)},Ht=(t,e,l)=>{var u;const o=p[t].sections[e].childTables[l],d={tableName:!1,columns:[]};let a=!1;return(u=o.tableName)!=null&&u.trim()||(d.tableName="Table name is required.",a=!0),o.columns.forEach((m,h)=>{var c,w;const r={};(c=m.label)!=null&&c.trim()||(r.label="Field Label is required",a=!0),(w=m.fieldtype)!=null&&w.trim()||(r.fieldtype="Please select field type",a=!0),d.columns[h]=r}),se[`${t}-${e}-${l}`]=d,a},jt=(t,e,l)=>{var d,a;const o=(a=(d=p[t])==null?void 0:d.sections)==null?void 0:a[e];o&&!Array.isArray(o[l])&&(o[l]=[])},et=t=>t?t.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""):"",Jt=(t,e,l)=>{if(Ht(t,e,l)){Q.error("Please fix validation errors before creating the table",{transition:"zoom"});return}if(Me.value){Q.error("Table already exists",{transition:"zoom"});return}const d=p[t].sections[e].childTables[l],a=p[t].sections[e];d.newTable=!1;const u={form_short_name:et(d.tableName),fields:d.columns,idx:d.idx,as_a_block:d.as_a_block===1?"true":"false"};N.post(z.childtable,u).then(m=>{var h,r,c;if(m){jt(t,e,"afterCreated"),a.afterCreated[l]=d,p[t].sections[e].childTables[l]=[],Q.success("Table created successfully!",{autoClose:500,transition:"zoom"});const w=(c=(r=(h=m.message)==null?void 0:h[0])==null?void 0:r[0])==null?void 0:c.child_doc;p[t].sections[e].childTables[l]=w}}).catch(m=>{console.error("Error creating table:",m)})},Qt=(t,e,l,o)=>{const a=p[t].sections[e].afterCreated.find(m=>m.tableName===l);if(!a)return;a.columns.splice(o,1),a.columns.forEach((m,h)=>{m.idx=h+1});const u=O.value[l];u&&(O.value[l]=u.filter(m=>m!==o).map(m=>m>o?m-1:m))},Wt=(t,e,l)=>{const d=p[t].sections[e].afterCreated.find(u=>u.tableName===l);if(!d)return;const a=d.columns.length;d.columns.push({fieldname:"",fieldtype:"",idx:a+1,label:"",value:"",isNew:!0,description:""})},tt=b([]),Yt=(t,e,l)=>{const d=p[t].sections[e].afterCreated.find(a=>a.tableName===l);if(d){if(L[l]){O.value[l]=[];let a=!0;if(d.columns.forEach((h,r)=>{(!h.label||!h.fieldtype)&&(O.value[l].push(r),a=!1)}),!a)return;const u=d.columns.map((w,c)=>{var v=w,{isNew:h}=v,r=We(v,["isNew"]);return Se(le({},r),{idx:c+1})}),m={form_short_name:et(l),fields:u,as_a_block:d.description};N.post(z.childtable,m).then(h=>{tt.value=h.data,Q.success("Fields updated successfully!",{autoClose:500})}).catch(h=>{console.error("❌ Saving fields failed:",h)})}L[l]=!L[l]}},L=ne({}),Zt=t=>{M.value[t]||(M.value[t]=[]);const e=M.value[t].length+1;M.value[t].push({fieldname:"",fieldtype:"",idx:e,label:"",value:"",isNew:!0,description:"",options:M.value[t].options?`
${M.value[t].options}`:""})},Gt=(t,e)=>{M.value[t]&&M.value[t].splice(e,1)},ue=b(null),O=b({}),st=b(null),Kt=t=>{ue.value=t},Xt=()=>{ue.value=null},xt=t=>{t.preventDefault()},It=(t,e)=>{const l=t.target.closest("tr");if(!l)return;const o=Array.from(l.parentNode.children).indexOf(l);if(o!==ue.value){const d=e[ue.value];e.splice(ue.value,1),e.splice(o,0,d),ue.value=o}},es=(t,e)=>{if(L[t]){O.value[t]=[];let l=!0;if(M.value[t].forEach((a,u)=>{(!a.label||!a.fieldtype)&&(O.value[t].push(u),l=!1)}),!l)return;let o=M.value[t].map((h,m)=>{var r=h,{isNew:a}=r,u=We(r,["isNew"]);return Se(le({},u),{idx:m})});const d={form_short_name:t,fields:o,as_a_block:e};N.post(z.childtable,d).then(a=>{Q.success("Fields updated successfully!",{autoClose:500},{transition:"zoom"}),tt.value=a.data}).catch(a=>{console.error("❌ Saving fields failed:",a)})}L[t]=!L[t],st.value=L[t]?t:null};ve(M,t=>{Object.keys(t).forEach(e=>{t[e].forEach((l,o)=>{var d;l.label&&l.fieldtype&&(O.value[e]=(d=O.value[e])==null?void 0:d.filter(a=>a!==o))})})},{deep:!0});const ts=b([{id:1,label:"About Form",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Fields & Workflow",stepno:"Step 2",icon:"bi bi-question-circle"},{id:3,label:"Print Format",stepno:"Step 3",icon:"ri-checkbox-circle-line"}]),ze=[{label:"Text",type:"Data"},{label:"Select",type:"Select"},{label:"Attach",type:"Attach"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Number",type:"Int"},{label:"TextArea",type:"Text"}],ss=[{label:"Text",type:"Data"},{label:"Table",type:"Table"},{label:"Number",type:"Int"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Phone"},{label:"Time",type:"Time"},{label:"TextArea",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Check",type:"Check"},{label:"Select",type:"Select"},{label:"Multi Select",type:"Small Text"},{label:"Link",type:"Link"}],ls=x(()=>[pe,...te.value]),os=x(()=>{const t=f.value.accessible_departments;return t.includes(pe)?"All Selected":t.length>1?`${t[0]}.. +${t.length-1} more selected`:t.join(", ")}),as=t=>t===pe?f.value.accessible_departments.length===te.value.length:f.value.accessible_departments.includes(t),ns=(t,e)=>{t===pe?e.target.checked?f.value.accessible_departments=[...te.value]:f.value.accessible_departments=[]:(e.target.checked?f.value.accessible_departments.push(t):f.value.accessible_departments=f.value.accessible_departments.filter(l=>l!==t),f.value.accessible_departments.length===te.value.length?f.value.accessible_departments=[...te.value]:f.value.accessible_departments=f.value.accessible_departments.filter(l=>l!==pe))},is=t=>{t===pe&&(f.value.accessible_departments=[...te.value])},rs=t=>{t===pe&&(f.value.accessible_departments=[])},Pe=x({get(){return Z.value.length>0&&Z.value.every(t=>K.value.includes(t))},set(t){t?K.value=[...Z.value]:K.value=[]}});function ds(){!Pe.value&&K.value.length}function us(){const t=p[E.value];if(!t||!t.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:E.value==0?"requestor":"approver",roles:K.value,fields:t.sections.flatMap(Ke),idx:E.value};E.value!==0&&(e.view_only_reportee=he.value===!0?1:0),E.value!==0&&(e.on_rejection=me.value?me.value:0);const l=H.findIndex(o=>o.idx===e.idx);l!==-1?H[l]=e:H.push(e),fs()}function X(t){return H.find(e=>e.idx===t)||{roles:[]}}function cs(t){const e=X(t),l=e.roles||[];K.value=[...l],he.value=e.view_only_reportee===1,me.value=e.on_rejection}const He=t=>{$e.value="",he.value=!1,me.value="",f.value.accessible_departments.length&&ms(f.value.accessible_departments),E.value=t,cs(t)},ps=b([]);function ms(t){Array.isArray(t)&&t.length>0,N.get(z.resource+I.WFRoleMatrix+`/${f.value.business_unit}`).then(e=>{e.data&&(ps.value=e.data.users,Z.value=[...new Set(e.data.users.map(l=>l.role_name))])}).catch(e=>{console.error("Error fetching designations data:",e)})}function fs(){N.post(z.add_roles_WF,{workflow_setup:H,doctype:f.value.form_short_name,business_unit:f.value.business_unit}).then(t=>{console.log(t),E.value==0?Q.success("Requestor Added",{autoClose:1e3,transition:"zoom"}):Q.success(`Approver-${E.value} Added`,{autoClose:1e3,transition:"zoom"})})}function vs(){F.push({path:W.value.routepath||localStorage.getItem("routepath")})}function _s(){f.value.form_name="",f.value.form_short_name="",f.value.owner_of_the_form="",f.value.business_unit="",f.value.form_category="",f.value.accessible_departments=[]}const hs=t=>{if(Ee.value){Q.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}t<S.value?ot():t>S.value&&lt()},lt=()=>{if(Ee.value){Q.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}S.value<3&&(S.value+=1,S.value===3&&(Le.value=p))},ot=()=>{S.value>1&&(S.value-=1)},bs=b([]);function at(){N.get(z.resource+I.EzyFormDefinitions+`/${$.value}`).then(t=>{var l;let e=t==null?void 0:t.data;if(e){F.push({query:{id:e.name}}),e.accessible_departments&&(e.accessible_departments=e.accessible_departments.split(",")),f.value=Se(le(le({},f.value),e),{owner_of_the_form:e.owner_of_the_form||f.value.owner_of_the_form||""});const o=JSON.parse((l=t.data)==null?void 0:l.form_json);gt.value=o.workflow,kt.value=o.fields.filter(a=>a.fieldtype==="Table"),bs.value=o.fields.filter(a=>a.fieldtype==="Table"),fe.value=t.data.is_landscape;let d=vt(JSON.parse(e==null?void 0:e.form_json).fields);M.value=JSON.parse(t.data.form_json).child_table_fields,Ot.value=[],yt.value=[],d.forEach((a,u)=>{p.push(a)}),JSON.parse(e==null?void 0:e.form_json).workflow.forEach((a,u)=>{H.push(a)})}}).catch(t=>{console.error("Error fetching  data:",t)})}function gs(){const t={};Ae.value&&(t.print_format=Ae.value),fe.value!==void 0&&fe.value!==null&&(t.is_landscape=fe.value),N.put(z.resource+I.EzyFormDefinitions+`/${D.query.id}`,t).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),Q.success("Print Format Added Successfully",{autoClose:1e3,transition:"zoom"})}).catch(e=>{console.error("Error fetching  data:",e)})}function ys(){const t={fields:JSON.stringify(["*"])};N.get(z.resource+I.departments,{params:t}).then(e=>{var l;(l=e==null?void 0:e.data)!=null&&l.length&&(Fe.value=e.data.map(o=>o.name),te.value=e.data.map(o=>o.name))}).catch(e=>{console.error("Error fetching department data:",e)})}ve(()=>f.value.owner_of_the_form,t=>{t&&je(t)});function je(t){t&&typeof t=="string"&&t.trim()!==""&&ks(t)}function ks(t){N.get(z.resource+I.departments+`/${t}`).then(e=>{var l;(l=e==null?void 0:e.data)!=null&&l.ezy_departments_items&&(_e.value=e.data.ezy_departments_items.map(o=>o.category))}).catch(e=>{console.error("Error fetching categories data:",e)})}function nt(t){let e=tl(p);const l=Se(le({},f.value),{fields:e,doctype:I.EzyFormDefinitions,workflow_setup:H,form_status:t==="save"?"Created":"Draft"});l.accessible_departments=l.accessible_departments.toString(),N.post(z.savedata,l).then(o=>{o&&o.message&&o.message.message?(F.push({params:{paramid:o.message.message},query:{id:o.message.message}}),$.value=o.message.message,$&&$!=="new"&&(p.splice(0,p.length),at()),H.length<p.length?Q.info("Add Workflow",{autoClose:2e3,transition:"zoom"}):it.value===!0&&Q.success("Form Created Successfully!",{autoClose:2e3,transition:"zoom",onClose:()=>{let d=localStorage.getItem("routepath");t==="save"?F.push({path:d}):t==="Draft"&&F.push({path:d})}})):console.error("Invalid response structure:",o)}).catch(o=>{console.error("Error saving form data:",o)})}const Be=b(""),ws=()=>{var l,o;const t=p.length,e={label:t===0?"requestor":`approver-${t}`,parent:`${(l=be.value)==null?void 0:l.value}-${(o=f.value)==null?void 0:o.form_short_name}`,sections:[{label:"",parent:`${be.value.value}-${f.value.form_short_name}`,childTables:[],afterCreated:{},rows:t===0?[{label:`row_0_0_${t}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${t}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${t}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1},{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]}]}]}]};p.push(e),el(()=>{Be.value&&Be.value.scrollTo({top:Be.value.scrollHeight,behavior:"smooth"})})},it=b(!1),Cs=t=>{let e=p[t];e.parent&&P.push(e),H.length>t&&H[t].roles&&[...H[t].roles],p.splice(t,1),H.length>t&&H.splice(t,1)},Ss=(t,e)=>{const l={label:"",parent:`${be.value.value}-${f.value.form_short_name}`,rows:[{label:`row_0_${e}_${t}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]};p[t].sections.splice(e+1,0,l)},Ds=(t,e)=>{let l=p[t].sections[e];l.parent&&P.push(l),p[t].sections.splice(e,1)},Fs=(t,e,l)=>{p[t].sections[e].rows[l].columns.push({label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]})},$s=(t,e,l,o)=>{const a=p[t].sections[e].rows[l].columns,u=a[o];u.parent&&P.push(u),a.length===1?p[t].sections[e].rows.splice(l,1):a.splice(o,1)},Vs=(t,e,l,o)=>{p[t].sections[e].rows[l].columns[o].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},As=(t,e,l,o,d)=>{let a=p[t].sections[e].rows[l].columns[o].fields[d];a.parent&&P.push(a),p[t].sections[e].rows[l].columns[o].fields.splice(d,1)},qs=(t,e,l,o,d)=>{const a=p[t].sections[e].rows[l].columns[o].fields[d],u=le({},a);u.name=`${a.name} Name the field`,p[t].sections[e].rows[l].columns[o].fields.splice(d+1,0,u)},Us=(t,e,l,o,d)=>{const a=bt(p);p.splice(0,p.length,...a);let u=p[t].sections[e].rows[l].columns[o].fields[d].fieldtype;(u!=="Select"||u!=="radio"||u!=="multiselect")&&(p[t].sections[e].rows[l].columns[o].fields[d].options="")},Bs=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus"].map(t=>t.toLowerCase().trim()),Es=["Approver","Approved on","Approved By"].map(t=>t.toLowerCase().trim());function Ls(t){return Bs.includes(t==null?void 0:t.trim().toLowerCase())}function Ts(t){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(t)||t.includes('"')||t.includes("'")}function Os(t){return t.flatMap(e=>{var l;return[(l=e.label)==null?void 0:l.trim().toLowerCase(),...e.sections.flatMap(o=>{var d;return[(d=o.label)==null?void 0:d.trim().toLowerCase(),...o.rows.flatMap(a=>a.columns.flatMap(u=>{var m;return[(m=u.label)==null?void 0:m.trim().toLowerCase(),...u.fields.map(h=>{var r;return(r=h.label)==null?void 0:r.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!Es.includes(e))}function Je(t,e,l,o,d){const u=Os(p).filter((r,c,w)=>w.indexOf(r)!==c),m=bt(p);p.splice(0,p.length,...m);function h(r,c){Ls(r)?c.errorMsg="Entered label is restricted":Ts(r)?c.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:c.errorMsg=u.includes(r.trim().toLowerCase())?"Duplicate Label Name":""}d!==void 0&&h(p[t].sections[e].rows[l].columns[o].fields[d].label,p[t].sections[e].rows[l].columns[o].fields[d]),d===void 0&&o!==void 0&&h(p[t].sections[e].rows[l].columns[o].label,p[t].sections[e].rows[l].columns[o]),o===void 0&&d===void 0&&h(p[t].sections[e].label,p[t].sections[e])}const Qe=x(()=>{function t(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(t):Object.values(e).some(t)}return t(p)}),Ee=x(()=>oe.value.length>0||G.value.length>0||!f.value.form_category||!f.value.owner_of_the_form||f.value.accessible_departments.length===0),Rs=x(()=>p.some(t=>t.sections.some(e=>e.rows.some(l=>l.columns.some(o=>o.fields.some(d=>d.label&&d.fieldtype))))));function rt(t,e){let l=t.target.value.trim();if(!l){e==="form_name"?oe.value="Input cannot be empty or only spaces":e==="form_short_name"&&(G.value="Input cannot be empty or only spaces");return}if(/^\d/.test(l)){e==="form_short_name"&&(G.value="First character must be a letter");return}else G.value="";if(e==="form_short_name"&&/[^a-zA-Z ]/.test(l)){G.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(l)){e==="form_name"?oe.value="Special characters are not allowed":e==="form_short_name"&&(G.value="Special characters are not allowed");return}else e==="form_name"?oe.value="":e==="form_short_name"&&(G.value="");const o=[[e,"=",`%${l}%`],["business_unit","like",`%${f.value.business_unit}%`]],d={fields:JSON.stringify(["*"]),filters:JSON.stringify(o)};N.get(`${z.resource}${I.EzyFormDefinitions}`,{params:d}).then(a=>{Re.value=a.data,e==="form_name"?oe.value=l&&Re.value.some(u=>u.form_name&&u.form_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(G.value=l&&Re.value.some(u=>u.form_short_name&&u.form_short_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(a=>{console.error("Error fetching ezyForms data:",a),e==="form_name"?oe.value="":e==="form_short_name"&&(G.value="")})}const Ms=t=>t===0?"1st row":t===1?"2nd row":t===2?"3rd row":`${t+1}th row`,Le=b([]),Ns=()=>{p.length&&(Le.value=p,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function zs(){N.post(z.delete_form_items,{deleted_fields:P.flatMap(Ke),doctype:$}).then(t=>{var e;(e=t==null?void 0:t.message)!=null&&e.success&&nt()})}function dt(t){return Ye(this,null,function*(){if(Qe.value){Q.error("Please fix the errors before proceeding.");return}it.value=!0;let e=P.flatMap(Ke);$!=null&&$!=null&&$!="new"&&e.length?zs():nt(t)})}return(t,e)=>(n(),i("div",null,[s("div",ll,[s("div",ol,[s("div",al,[s("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=l=>vs())},e[32]||(e[32]=[s("h1",{class:"font-13 ms-3"},[s("i",{class:"bi bi-arrow-left"}),s("span",{class:"ms-2"},"Back")],-1)])),s("div",null,[S.value===2&&V(p).length&&!t.$route.query.id?(n(),i("button",{key:0,disabled:Qe.value||Ee.value,style:Zs({cursor:Qe.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=l=>dt("Draft"))},e[33]||(e[33]=[s("i",{class:"bi bi-bookmark-check-fill"},null,-1),J(" Save As Draft ")]),12,nl)):_("",!0)])]),s("div",il,[s("div",rl,[s("div",dl,[s("div",ul,[s("ul",cl,[(n(!0),i(q,null,U(ts.value,l=>(n(),i("li",{key:l.id,class:T({active:S.value===l.id,completed:S.value>l.id})},[s("div",{class:T(["d-flex gap-3 align-items-center",{"not-allowed":Ee.value&&S.value+1===l.id}]),onClick:o=>hs(l.id)},[S.value>l.id?(n(),i("i",ml)):(n(),i("i",{key:1,class:T(l.icon)},null,2)),s("div",fl,[s("span",vl,g(l.stepno),1),e[34]||(e[34]=s("br",null,null,-1)),s("span",_l,g(l.label),1)])],10,pl)],2))),128))])])]),s("div",hl,[s("div",bl,[s("div",gl,[S.value===1?(n(),i("div",yl,[s("div",kl,[s("div",wl,[e[35]||(e[35]=s("div",null,null,-1)),e[36]||(e[36]=s("h1",{class:"font-14 fw-bold m-0"},"About Form",-1)),s("div",null,[t.$route.query.id?_("",!0):(n(),i("button",{key:0,class:"btn btn-light font-12 mx-2",type:"button",onClick:_s},"Clear Form")),S.value<3?(n(),Gs(_t,{key:1,class:"btn btn-dark bg-dark text-white fw-bold font-13",name:"Next",onClick:lt})):_("",!0)])])]),s("div",Cl,[s("div",Sl,[e[43]||(e[43]=s("div",{class:"col-4"},null,-1)),s("div",Dl,[s("div",Fl,[s("div",$l,[ee(Ze,{disabled:W.value.formId&&W.value.formId.length>0,labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Untitled Form",onChange:e[2]||(e[2]=l=>rt(l,"form_name")),modelValue:f.value.form_name,"onUpdate:modelValue":e[3]||(e[3]=l=>f.value.form_name=l)},null,8,["disabled","modelValue"]),oe.value?(n(),i("span",Vl,g(oe.value),1)):_("",!0)])]),s("div",Al,[s("div",ql,[ee(Ze,{disabled:W.value.formId&&W.value.formId.length>0,labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Untitled Form",onChange:e[4]||(e[4]=l=>rt(l,"form_short_name")),modelValue:f.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=l=>f.value.form_short_name=l)},null,8,["disabled","modelValue"]),G.value?(n(),i("span",Ul,g(G.value),1)):_("",!0)]),s("div",null,[ee(Ze,{disabled:W.value.formId&&W.value.formId.length>0,labeltext:"Form Naming series",class:"formHeight mt-2",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Naming series",modelValue:f.value.series,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value.series=l)},null,8,["disabled","modelValue"]),e[37]||(e[37]=Ks('<small class="text-muted" style="font-size:12px;" data-v-335f31fd> Note : Enter <code data-v-335f31fd>YY-YY</code>, <code data-v-335f31fd>YYYY</code>, or <code data-v-335f31fd>ABC</code>. The system will default to the format <code data-v-335f31fd> 24-25-0001</code>, <code data-v-335f31fd> 2025-0001</code>, or <code data-v-335f31fd> ABC-0001</code> respectively. </small>',1))])]),s("div",Bl,[s("div",El,[s("label",Ll,[e[38]||(e[38]=J("Owner Of The Form ")),f.value.owner_of_the_form?_("",!0):(n(),i("span",Tl,"*"))]),ee(V(Oe),{disabled:W.value.formId&&W.value.formId.length>0,options:Fe.value,onChange:je,modelValue:f.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=l=>f.value.owner_of_the_form=l),placeholder:"Select Department",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["disabled","options","modelValue"])])]),s("div",Ol,[s("div",Rl,[s("label",Ml,[e[39]||(e[39]=J("Form Cateogry ")),f.value.form_category?_("",!0):(n(),i("span",Nl,"*"))]),ee(V(Oe),{disabled:W.value.formId&&W.value.formId.length>0,options:_e.value,modelValue:f.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=l=>f.value.form_category=l),placeholder:"Select Cateogry",multiple:!1,searchable:!0,class:"font-11 multiselect"},null,8,["disabled","options","modelValue"])])]),s("div",zl,[e[42]||(e[42]=s("div",{class:""},null,-1)),s("div",null,[s("label",Pl,[s("label",Hl,[e[40]||(e[40]=J("Accessibility Departments ")),f.value.accessible_departments.length?_("",!0):(n(),i("span",jl,"*"))])]),ee(V(Oe),{modelValue:f.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=l=>f.value.accessible_departments=l),options:ls.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Department",class:"font-11",onSelect:is,onRemove:rs},{option:ht(({option:l})=>[s("div",Jl,[s("input",{type:"checkbox",checked:as(l),class:"custom-checkbox",onChange:o=>ns(l,o),onClick:e[9]||(e[9]=ce(()=>{},["stop"]))},null,40,Ql),s("span",null,g(l),1)])]),selection:ht(({values:l,isOpen:o})=>[l.length?k((n(),i("span",{key:0,class:"multiselect__single font-10"},g(os.value),513)),[[Ge,!o]]):_("",!0)]),_:1},8,["modelValue","options"])]),s("div",Wl,[s("div",Yl,[e[41]||(e[41]=s("label",{for:""},"Has Workflow ",-1)),ee(V(Oe),{options:["No"],modelValue:f.value.has_workflow,"onUpdate:modelValue":e[11]||(e[11]=l=>f.value.has_workflow=l),placeholder:"Select",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["modelValue"])])])])]),e[44]||(e[44]=s("div",{class:"col-4"},null,-1))])])])):_("",!0),S.value===2?(n(),i("div",Zl,[s("div",Gl,[s("div",Kl,[s("h1",{onClick:e[12]||(e[12]=l=>ot()),class:"font-11 m-0"},e[45]||(e[45]=[s("i",{class:"bi bi-chevron-left"},null,-1),s("span",{class:"ms-2"},"Back To About Form",-1)])),s("div",Xl,[s("div",null,[Rs.value?(n(),i("button",{key:0,class:"btn btn-light previewBtn d-flex align-items-center font-13",type:"button",onClick:Ns},e[46]||(e[46]=[s("i",{class:"bi bi-eye me-1 ms-1 mb-0"},null,-1),J("Preview ")]))):_("",!0)]),V(p).length?(n(),i("button",{key:0,class:"btn btn-dark font-10 Withborder border",type:"button",onClick:e[13]||(e[13]=l=>dt("save"))},g(V($)!=="new"?"Update Form":"Create Form"),1)):_("",!0)])]),ee(Xs,{blockArr:Le.value,formDescriptions:wt.value,childHeaders:M.value},null,8,["blockArr","formDescriptions","childHeaders"]),s("div",{class:"main-block",ref_key:"mainBlockRef",ref:Be},[(n(!0),i(q,null,U(V(p),(l,o)=>(n(),i("div",{class:"block-level",key:o},[s("div",xl,[s("div",Il,[s("div",null,[s("h6",eo,g(o===0?"Requestor Block":`Approver
                                  Block ${o}
                                  `),1)]),s("div",to,[V($)&&V(H).length?(n(),i("div",so,[X(o)?(n(),i("label",lo,[s("span",oo,g(X(o).roles.length>0?o===0?"Requestor: ":"Approver: ":""),1),s("span",ao,g(X(o).roles.slice(0,2).join(", ")),1),X(o).roles.length>2?(n(),i("span",{key:0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:d=>He(o),class:"more-count"}," +"+g(X(o).roles.length-2)+" more ",9,no)):_("",!0)])):_("",!0)])):_("",!0),Ct(o)&&V($)!=null&&V($)!=null&&V($)!="new"&&X(o).roles.length===0?(n(),i("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:d=>He(o)},e[47]||(e[47]=[s("img",{src:sl,alt:"Add",class:"me-1"},null,-1),J(" Add designations ")]),8,io)):_("",!0),V($)!=null&&V($)!=null&&V($)!="new"&&X(o).roles.length>0?(n(),i("button",{key:2,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:d=>He(o)},e[48]||(e[48]=[s("i",{class:"bi bi-pencil font-14"},null,-1)]),8,ro)):_("",!0),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:d=>Cs(o)},e[49]||(e[49]=[s("i",{class:"bi bi-trash me-1"},null,-1),J(" Delete Block ")]),8,uo)])])]),s("div",co,[(n(!0),i(q,null,U(l.sections,(d,a)=>(n(),i("div",{key:"section-"+a,class:"dynamicSection mt-0 section"},[s("section",po,[s("div",mo,[k(s("input",{"onUpdate:modelValue":u=>d.label=u,type:"text",class:T(["border-less-input","font-14",{"italic-style":!d.label},{"fw-medium":d.label}]),onChange:u=>Je(o,a),placeholder:"Untitled section"},null,42,fo),[[B,d.label]]),d.errorMsg?(n(),i("small",vo,g(d.errorMsg),1)):_("",!0)]),s("div",_o,[s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:u=>Ds(o,a)},e[50]||(e[50]=[s("i",{class:"bi bi-trash me-1"},null,-1),J(" Delete Section ")]),8,ho)])]),s("div",bo,[(n(!0),i(q,null,U(d.rows,(u,m)=>(n(),i("section",{class:"row dynamicRow row-container",key:"row-"+m},[s("div",go,[s("label",yo,g(Ms(m)),1),s("div",null,[u.columns.length<3?(n(),i("button",{key:0,class:"btn btn-light bg-transparent border-0 font-12",onClick:h=>Fs(o,a,m)},e[51]||(e[51]=[s("i",{class:"bi bi-plus font-14"},null,-1),J(" Add Column ")]),8,ko)):_("",!0)])]),s("div",wo,[s("div",Co,[(n(!0),i(q,null,U(u.columns,(h,r)=>(n(),i("div",{key:"column-"+r,onMouseenter:c=>Bt(o,a,m,r),onMouseleave:Et,class:"col p-0 dynamicColumn position-relative column-container"},[s("div",Do,[s("div",Fo,[k(s("input",{"onUpdate:modelValue":c=>h.label=c,type:"text",class:T(["border-less-input","ps-1","font-14","inputHeight",{"italic-style":!h.label},{"fw-medium":h.label}]),onChange:c=>Je(o,a,m,r),placeholder:"Column Name"},null,42,$o),[[B,h.label]]),h.errorMsg?(n(),i("small",Vo,g(h.errorMsg),1)):_("",!0)]),k(s("div",Ao,[s("button",{class:"btn btn-light bg-transparent me-1 btn-sm",onClick:c=>$s(o,a,m,r)},e[52]||(e[52]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,qo)],512),[[Ge,Lt(o,a,m,r)]])]),h.fields.length===0?(n(),i("div",{key:0,class:"empty-drop-zone",onDragover:e[14]||(e[14]=ce(()=>{},["prevent"])),onDrop:c=>ge(c,o,a,m,r,t.fieldIndex)},null,40,Uo)):_("",!0),(n(!0),i(q,null,U(h.fields,(c,w)=>(n(),i("div",{key:"field-"+w,onMouseenter:v=>At(o,a,m,r,w),onMouseleave:qt,class:"dynamicField m-1 draggable-item",draggable:"true",onDragstart:v=>Xe(v,o,a,m,r,w)},[s("div",{class:"drop-zone",onDragover:e[15]||(e[15]=ce(()=>{},["prevent"])),onDrop:v=>ge(v,o,a,m,r,w)},null,40,Eo),s("div",{class:"px-1 dynamic_fied field-border",draggable:"true",onDragstart:v=>Xe(v,o,a,m,r,w),onDragover:e[22]||(e[22]=ce(()=>{},["prevent"])),onDrop:v=>ge(v,o,a,m,r,w)},[s("div",To,[s("div",Oo,[k(s("input",{"onUpdate:modelValue":v=>c.label=v,placeholder:"Name the field",class:T(["border-less-input","font-14","p-0","inputHeight",{"italic-style":!c.label},{"fw-medium":c.label}]),onChange:v=>Je(o,a,m,r,w)},null,42,Ro),[[B,c.label]]),c.errorMsg?(n(),i("small",Mo,g(c.errorMsg),1)):_("",!0)]),k(s("div",No,[s("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:v=>qs(o,a,m,r,w)},e[53]||(e[53]=[s("i",{class:"ri-file-copy-line font-13 copyIcon"},null,-1)]),8,zo),s("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:v=>As(o,a,m,r,w)},e[54]||(e[54]=[s("i",{class:"bi bi-x-lg font-13"},null,-1)]),8,Po)],512),[[Ge,Ut(o,a,m,r,w)]])]),k(s("select",{"onUpdate:modelValue":v=>c.fieldtype=v,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:v=>Us(o,a,m,r,w)},[e[55]||(e[55]=s("option",{value:""},"Select Type",-1)),(n(),i(q,null,U(ss,v=>s("option",{key:v,value:v.type},g(v.label),9,jo)),64))],40,Ho),[[De,c.fieldtype]]),["Select","Table MultiSelect","Small Text"].includes(c.fieldtype)?(n(),i("div",Jo,[e[56]||(e[56]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),k(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":v=>c.options=v,class:"form-control shadow-none mb-1 font-12"},null,8,Qo),[[B,c.options]]),!c.options||c.options.trim()===""?(n(),i("small",Wo," Options are required for this field type. ")):_("",!0)])):_("",!0),c.fieldtype==="Link"?(n(),i("div",Yo,[e[57]||(e[57]=s("label",{class:"font-12 fw-light",for:"link-search"},"Search Doctype:",-1)),k(s("input",{id:"link-search",type:"text","onUpdate:modelValue":e[16]||(e[16]=v=>t.linkSearchQuery=v),onInput:e[17]||(e[17]=v=>Dt(t.linkSearchQuery)),onFocus:e[18]||(e[18]=v=>t.dropdownVisible=!0),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,544),[[B,t.linkSearchQuery]]),re.value.length&&t.dropdownVisible?(n(),i("ul",Zo,[(n(!0),i(q,null,U(re.value,(v,C)=>(n(),i("li",{key:C,onClick:y=>Ie(o,a,m,r,w,v.name),class:"list-group-item list-group-item-action"},g(v.name),9,Go))),128))])):_("",!0),k(s("input",{type:"text","onUpdate:modelValue":v=>V(p)[o].sections[a].rows[m].columns[r].fields[w].options=v,class:"form-control font-12 mb-1",placeholder:t.linkSearchQuery?"Select from list":"Selected doctype will appear here",readonly:""},null,8,Ko),[[B,V(p)[o].sections[a].rows[m].columns[r].fields[w].options]])])):_("",!0),c.fieldtype==="Table"?(n(),i("div",Xo,[e[58]||(e[58]=s("label",{class:"font-12 fw-light",for:"link-search"},"Search Doctype:",-1)),k(s("input",{id:"link-search",type:"text","onUpdate:modelValue":e[19]||(e[19]=v=>t.linkSearchQuery=v),onInput:e[20]||(e[20]=v=>Ft(t.linkSearchQuery)),onFocus:e[21]||(e[21]=v=>t.dropdownVisible=!0),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,544),[[B,t.linkSearchQuery]]),re.value.length&&t.dropdownVisible?(n(),i("ul",xo,[(n(!0),i(q,null,U(re.value,(v,C)=>(n(),i("li",{key:C,onClick:y=>Ie(o,a,m,r,w,v.name),class:"list-group-item list-group-item-action"},g(v.name),9,Io))),128))])):_("",!0),k(s("input",{type:"text","onUpdate:modelValue":v=>V(p)[o].sections[a].rows[m].columns[r].fields[w].options=v,class:"form-control font-12 mb-1",placeholder:t.linkSearchQuery?"Select from list":"Selected doctype will appear here",readonly:""},null,8,ea),[[B,V(p)[o].sections[a].rows[m].columns[r].fields[w].options]])])):_("",!0),s("div",ta,[s("div",sa,[s("div",la,[k(s("input",{class:"font-12","onUpdate:modelValue":v=>c.reqd=v,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,oa),[[ie,c.reqd]])]),e[59]||(e[59]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Mandatory")],-1))]),s("div",null,[s("button",{class:"btn btn-sm font-12",onClick:v=>c.showDescription=!c.showDescription},g(c.showDescription?"Hide Description":c.description?"Edit Description":"Add Description"),9,aa)])]),c.showDescription?k((n(),i("textarea",{key:3,"onUpdate:modelValue":v=>c.description=v,class:"form-control font-12 mt-2",placeholder:"Enter field description"},null,8,na)),[[B,c.description]]):_("",!0),c.error?(n(),i("small",ia,g(c.error),1)):_("",!0)],40,Lo),s("div",{class:"drop-zone",onDragover:e[23]||(e[23]=ce(()=>{},["prevent"])),onDrop:v=>ge(v,o,a,m,r,w)},null,40,ra),s("div",da,[s("div",null,[s("div",null,[s("div",ua,[c.fieldtype==="Table"?(n(),i("div",ca,[(n(!0),i(q,null,U(M.value,(v,C)=>(n(),i("div",{key:C,class:"childTable"},[C===c.fieldname?(n(),i("h5",pa,g(C.replace(/_/g," ")),1)):_("",!0),L[C]&&C===st.value?(n(),i("div",ma,[s("div",fa,[k(s("input",{class:"font-12","onUpdate:modelValue":y=>c.description=y,"true-value":"true","false-value":"fasle",placeholder:"Field Name",type:"checkbox"},null,8,va),[[ie,c.description]])]),e[60]||(e[60]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])):_("",!0),C===c.options||C===c.fieldname?(n(),i("table",_a,[e[64]||(e[64]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Label"),s("th",null,"Field Type")])],-1)),s("tbody",{onDragover:ce(xt,["prevent"]),onDrop:y=>It(y,v)},[(n(!0),i(q,null,U(v,(y,Y)=>{var ye,ke,we,Ce;return n(),i("tr",{key:Y,draggable:L[C],onDragstart:R=>Kt(Y),onDragend:Xt,class:T({dragging:ue.value===Y})},[s("td",null,g(Y+1),1),L[C]?(n(),i("td",ga,[k(s("input",{"onUpdate:modelValue":R=>y.label=R,placeholder:"Field Label",class:T(["form-control",{"border-1 border-danger":(ye=O.value[C])==null?void 0:ye.includes(Y)}])},null,10,ya),[[B,y.label]]),(ke=O.value[C])!=null&&ke.includes(Y)?(n(),i("span",ka,"Label required**")):_("",!0)])):(n(),i("td",wa,g(y.label),1)),L[C]?(n(),i("td",Ca,[s("div",Sa,[k(s("select",{"onUpdate:modelValue":R=>y.fieldtype=R,class:T(["form-select form-select-sm",{"border-1 border-danger":(we=O.value[C])==null?void 0:we.includes(Y)}])},[e[61]||(e[61]=s("option",{value:""},"Select Type",-1)),(n(),i(q,null,U(ze,R=>s("option",{key:R.type,value:R.type},g(R.label),9,Fa)),64))],10,Da),[[De,y.fieldtype]]),s("div",$a,[s("div",Va,[s("div",Aa,[k(s("input",{class:"font-12 form-control-sm","onUpdate:modelValue":R=>y.description=R,placeholder:"description",type:"text"},null,8,qa),[[B,y.description]])])]),s("button",{class:"btn btn-light btn-sm",onClick:R=>Gt(C,Y)},e[62]||(e[62]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Ua)])]),["Select"].includes(y.fieldtype)?(n(),i("div",Ba,[e[63]||(e[63]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),k(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":R=>y.options=R,class:"form-control shadow-none mb-1 font-12"},null,8,Ea),[[B,y.options]]),!y.options||y.options.trim()===""?(n(),i("small",La," Options are required for this field type. ")):_("",!0)])):_("",!0),(Ce=O.value[C])!=null&&Ce.includes(Y)?(n(),i("span",Ta,"Type required**")):_("",!0)])):(n(),i("td",Oa,g(y.fieldtype),1))],42,ba)}),128))],40,ha)])):_("",!0),c.fieldtype==="Table"&&(c.label===C||c.fieldname===C)?(n(),i("div",Ra,[s("button",{class:"btn btn-light btn-sm mx-2",onClick:y=>es(C,c.description)},g(L[C]?"Save":"Edit"),9,Ma),L[C]?(n(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:y=>Zt(C)}," Add More Field ",8,Na)):_("",!0)])):_("",!0)]))),128))])):_("",!0)])])])])],40,Bo))),128)),s("div",{class:"drop-zone",onDragover:e[24]||(e[24]=ce(()=>{},["prevent"])),onDrop:c=>ge(c,o,a,m,r,t.fields.length),style:{height:"10px","background-color":"transparent"}},null,40,za),s("div",Pa,[s("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:c=>Vs(o,a,m,r)},e[65]||(e[65]=[s("i",{class:"bi bi-plus fs-5"},null,-1),s("span",null,"Add Field",-1)]),8,Ha)])],40,So))),128))])])]))),128)),s("div",null,[(n(!0),i(q,null,U(d.afterCreated,(u,m)=>(n(),i("div",{key:m,class:"childTable dynamicColumn m-0 p-2"},[s("h5",ja,g(u.tableName),1),L[u.tableName]?(n(),i("div",Ja,[s("div",Qa,[k(s("input",{class:"font-12","onUpdate:modelValue":h=>u.description=h,"true-value":"true","false-value":"fasle",placeholder:"Field Name",type:"checkbox"},null,8,Wa),[[ie,u.description]])]),e[66]||(e[66]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])):_("",!0),s("table",Ya,[e[70]||(e[70]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Label"),s("th",null,"Field Type")])],-1)),s("tbody",null,[(n(!0),i(q,null,U(u.columns,(h,r)=>{var c,w,v,C;return n(),i("tr",{key:r},[s("td",null,g(r+1),1),L[u.tableName]?(n(),i("td",Za,[k(s("input",{"onUpdate:modelValue":y=>h.label=y,placeholder:"Field Label",class:T(["form-control",{"border-1 border-danger":(c=O.value[u.tableName])==null?void 0:c.includes(r)}]),onBlur:y=>Ne(h)},null,42,Ga),[[B,h.label]]),(w=O.value[m])!=null&&w.includes(r)?(n(),i("span",Ka,"Label required**")):_("",!0)])):(n(),i("td",Xa,g(h.label),1)),L[u.tableName]?(n(),i("td",xa,[s("div",Ia,[k(s("select",{"onUpdate:modelValue":y=>h.fieldtype=y,class:T(["form-select form-select-sm",{"border-1 border-danger":(v=O.value[u.tableName])==null?void 0:v.includes(r)}])},[e[67]||(e[67]=s("option",{value:""},"Select Type",-1)),(n(),i(q,null,U(ze,y=>s("option",{key:y.type,value:y.type},g(y.label),9,tn)),64))],10,en),[[De,h.fieldtype]]),s("button",{class:"btn btn-light btn-sm",onClick:y=>Qt(o,a,u.tableName,r)},e[68]||(e[68]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,sn)]),["Select"].includes(h.fieldtype)?(n(),i("div",ln,[e[69]||(e[69]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),k(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":y=>h.options=y,class:"form-control shadow-none mb-1 font-12"},null,8,on),[[B,h.options]]),!h.options||h.options.trim()===""?(n(),i("small",an," Options are required for this field type. ")):_("",!0)])):_("",!0),(C=O.value[u.tableName])!=null&&C.includes(r)?(n(),i("span",nn,"Type required**")):_("",!0)])):(n(),i("td",rn,g(h.fieldtype),1))])}),128))])]),s("div",dn,[s("button",{class:"btn btn-light btn-sm mx-2",onClick:h=>Yt(o,a,u.tableName)},g(L[u.tableName]?"Save":"Edit"),9,un),L[u.tableName]?(n(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:h=>Wt(o,a,u.tableName)}," Add More Field ",8,cn)):_("",!0)])]))),128))])]),s("div",null,[s("div",null,[s("button",{class:"btn btn-light addRow mb-3 mt-4",onClick:u=>Mt(o,a)}," Add New Table ",8,pn),(n(!0),i(q,null,U(d.childTables,(u,m)=>{var h;return n(),i("div",{key:`table-${o}-${a}-${m}`,class:"child-table"},[u.newTable?(n(),i("div",mn,[s("div",fn,[s("div",null,[s("span",{class:T(u.tableName?"d-none":"text-danger")},"*",2),k(s("input",{"onUpdate:modelValue":r=>u.tableName=r,placeholder:"Table Name",onBlur:r=>Ne(u),class:T(["border-less-input font-14 p-0 inputHeight",{"italic-style":!u.tableName,"fw-medium":u.tableName}])},null,42,vn),[[B,u.tableName]]),(h=se[`${o}-${a}-${m}`])!=null&&h.tableName?(n(),i("div",_n,g(se[`${o}-${a}-${m}`].tableName),1)):_("",!0),Ue.value?(n(),i("div",hn,g(Ue.value),1)):_("",!0),s("div",bn,[s("div",gn,[k(s("input",{class:"font-12","onUpdate:modelValue":r=>u.as_a_block=r,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,yn),[[ie,u.as_a_block]])]),e[71]||(e[71]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])]),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:r=>zt(o,a,m)},e[72]||(e[72]=[s("i",{class:"bi bi-trash"},null,-1),J(" Remove Table ")]),8,kn)]),(n(!0),i(q,null,U(u.columns,(r,c)=>{var w,v,C,y,Y,ye,ke,we,Ce,R,ut,ct;return n(),i("div",{key:c,class:"dynamicField"},[s("div",wn,[s("div",Cn,[s("div",null,[s("span",{class:T(r.label?"d-none":"text-danger")},"*",2),k(s("input",{"onUpdate:modelValue":j=>r.label=j,placeholder:"Name the field",onBlur:j=>Ne(r),class:T(["border-less-input font-14 p-0 inputHeight",{"italic-style":!r.label,"fw-medium":r.label,"is-invalid":(C=(v=(w=se[`${o}-${a}-${m}`])==null?void 0:w.columns)==null?void 0:v[c])==null?void 0:C.label}])},null,42,Sn),[[B,r.label]]),(ye=(Y=(y=se[`${o}-${a}-${m}`])==null?void 0:y.columns)==null?void 0:Y[c])!=null&&ye.label?(n(),i("div",Dn,g(se[`${o}-${a}-${m}`].columns[c].label),1)):_("",!0)]),s("div",Fn,[s("div",$n,[r.showDescription?k((n(),i("input",{key:0,"onUpdate:modelValue":j=>r.description=j,class:"form-control font-12",placeholder:"Enter field description"},null,8,Vn)),[[B,r.description]]):_("",!0),s("button",{class:"btn btn-sm text-nowrap font-12",onClick:j=>r.showDescription=!r.showDescription},g(r.showDescription?"Hide Description":r.description?"Edit Description":"Add Description"),9,An)]),s("button",{class:"btn btn-sm trash-btn py-0",onClick:j=>Pt(o,a,m,c)},e[73]||(e[73]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,qn)])]),k(s("select",{"onUpdate:modelValue":j=>r.fieldtype=j,class:T(["form-select font-13 mb-1",{"is-invalid":(Ce=(we=(ke=se[`${o}-${a}-${m}`])==null?void 0:ke.columns)==null?void 0:we[c])==null?void 0:Ce.fieldtype}])},[e[74]||(e[74]=s("option",{value:""},"Select Type",-1)),(n(),i(q,null,U(ze,j=>s("option",{key:j.type,value:j.type},g(j.label),9,Bn)),64))],10,Un),[[De,r.fieldtype]]),["Select"].includes(r.fieldtype)?(n(),i("div",En,[e[75]||(e[75]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),k(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":j=>r.options=j,class:"form-control shadow-none mb-1 font-12"},null,8,Ln),[[B,r.options]]),!r.options||r.options.trim()===""?(n(),i("small",Tn," Options are required for this field type. ")):_("",!0)])):_("",!0),(ct=(ut=(R=se[`${o}-${a}-${m}`])==null?void 0:R.columns)==null?void 0:ut[c])!=null&&ct.fieldtype?(n(),i("div",On,g(se[`${o}-${a}-${m}`].columns[c].fieldtype),1)):_("",!0)])])}),128)),s("button",{class:"btn btn-light btn-sm addField mx-1",onClick:r=>Nt(o,a,m)},e[76]||(e[76]=[s("i",{class:"bi bi-plus"},null,-1),J(" Add Field ")]),8,Rn),s("button",{class:"btn btn-dark btn-sm font-12 mx-1",onClick:r=>Jt(o,a,m)}," Create Table ",8,Mn),e[77]||(e[77]=s("hr",null,null,-1))])):_("",!0)])}),128))])]),s("div",Nn,[s("button",{class:"btn btn-light border font-12",onClick:u=>Ss(o,a)},e[78]||(e[78]=[s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),J(" Add Section ")]),8,zn)])]))),128)),o===0?(n(),i("div",Pn)):_("",!0)])]))),128)),s("div",{class:T(["d-flex justify-content-center align-items-center add-block-btn-div py-4  ",{"background-color-white":V(p).length}])},[s("button",{class:"btn btn-light border d-flex align-items-center font-12",onClick:ws},[e[79]||(e[79]=s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1)),J(" "+g(V(p).length===0?"Add Requestor Block":"Add Approval Block"),1)])],2)],512)])])):_("",!0),S.value===3?(n(),i("div",Hn,[e[80]||(e[80]=s("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[s("div",null,[s("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),s("div")],-1)),ee(xs,{blockArr:Le.value},null,8,["blockArr"])])):_("",!0)])])])])])])]),s("div",jn,[s("div",Jn,[s("div",Qn,[e[83]||(e[83]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",Wn,[k(s("input",{"onUpdate:modelValue":e[25]||(e[25]=l=>Ae.value=l),multiple:!1,placeholder:V(D).query.id,class:"font-11 form-control",searchable:!0},null,8,Yn),[[B,Ae.value]]),s("div",Zn,[s("div",Gn,[k(s("input",{class:"font-12","onUpdate:modelValue":e[26]||(e[26]=l=>fe.value=l),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[ie,fe.value]])]),e[81]||(e[81]=s("div",null,[s("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),s("div",{class:"modal-footer"},[e[82]||(e[82]=s("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{type:"button",class:"btn btn-dark",onClick:gs},"Add Print Format")])])])]),s("div",Kn,[s("div",Xn,[s("span",xn,g(E.value==0?"Add designation for Requestor":`Approval Settings For
          Level-${E.value}`),1),e[84]||(e[84]=s("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),s("div",In,[s("div",ei,[s("div",ti,[E.value!==0?(n(),i("div",si,[s("div",null,[s("div",li,[s("span",oi,"Approver Level "+g(E.value),1)])]),e[86]||(e[86]=s("div",null,[s("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),s("div",ai,[k(s("select",{"onUpdate:modelValue":e[27]||(e[27]=l=>me.value=l),class:"form-select font-12 mt-1 me-2"},[e[85]||(e[85]=s("option",{disabled:"",value:""},"Select Lower Level",-1)),(n(!0),i(q,null,U($t.value,l=>(n(),i("option",{key:l,value:l},g(l===0?"Requester":"Approver Level "+l),9,ni))),128))],512),[[De,me.value,void 0,{number:!0}]])])])):_("",!0),E.value!==0?(n(),i("div",ii,[E.value!==0?(n(),i("div",ri,[s("div",null,[k(s("input",{type:"checkbox",id:"ViewOnlyReportee","onUpdate:modelValue":e[28]||(e[28]=l=>he.value=l),class:"me-2 mt-0 form-check-input designationCheckBox"},null,512),[[ie,he.value]]),e[87]||(e[87]=s("label",{for:"ViewOnlyReportee ",class:"SelectallDesignation fw-bold mt-1 form-check-label"},"View Only Reportee",-1))])])):_("",!0)])):_("",!0)])]),s("div",di,[k(s("input",{"onUpdate:modelValue":e[29]||(e[29]=l=>$e.value=l),class:"SearchDesignation rounded-2 form-control shadow-none my-1",type:"text",placeholder:"Search Designation"},null,512),[[B,$e.value]]),Z.value.length&&E.value==0?(n(),i("div",ui,[s("div",null,[k(s("input",{type:"checkbox",id:"selectAll","onUpdate:modelValue":e[30]||(e[30]=l=>Pe.value=l),class:"me-2 mt-0 designationCheckBox form-check-input"},null,512),[[ie,Pe.value]]),e[88]||(e[88]=s("label",{for:"selectAll",class:"SelectallDesignation fw-bold mx-2 form-check-label"},"Select all",-1))])])):_("",!0),Z.value.length?(n(),i("ul",ci,[(n(!0),i(q,null,U(Vt.value,(l,o)=>(n(),i("li",{key:o,class:"designationList form-check"},[k(s("input",{type:"checkbox",id:`SelectedDisignation_${o}`,"onUpdate:modelValue":e[31]||(e[31]=d=>K.value=d),value:l,class:"designationCheckBox form-check-input mt-0",onChange:ds},null,40,pi),[[ie,K.value]]),s("label",{for:`SelectedDisignation_${o}`,class:"ps-2"},g(l),9,mi)]))),128))])):(n(),i("div",fi,e[89]||(e[89]=[s("div",{class:"d-flex justify-content-center"},[s("span",null,"No Designations Found")],-1)])))])]),s("div",vi,[s("div",_i,[ee(_t,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:us,name:" Add Designations"})])])])]))}},yi=Js(hi,[["__scopeId","data-v-335f31fd"]]);export{yi as default};
