var Lt=Object.defineProperty,Bt=Object.defineProperties;var Ft=Object.getOwnPropertyDescriptors;var Ne=Object.getOwnPropertySymbols;var At=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable;var Ue=(t,o,r)=>o in t?Lt(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,me=(t,o)=>{for(var r in o||(o={}))At.call(o,r)&&Ue(t,r,o[r]);if(Ne)for(var r of Ne(o))Tt.call(o,r)&&Ue(t,r,o[r]);return t},Re=(t,o)=>Bt(t,Ft(o));var je=(t,o,r)=>new Promise((g,O)=>{var k=a=>{try{F(r.next(a))}catch(H){O(H)}},c=a=>{try{F(r.throw(a))}catch(H){O(H)}},F=a=>a.done?g(a.value):Promise.resolve(a.value).then(k,c);F((r=r.apply(t,o)).next())});import{o as u,y as j,D as U,a as V,T as Pe,G as ue,v as N,H as x,I as A,J as G,h as $,g as M,t as b,s as L,u as E,p as Et,A as Mt,C as Nt,d as R,e as re,f as ge,w as ve,q as Ut,l as K,m as W,n as Y,j as Rt,c as d,b as s,K as D,F as He,L as qe,B as Z,M as be,E as ze,N as ye,k as _e,x as ie,O as Ge,z as jt,Q as Pt,R as Ke,S as Ht}from"./index-B-ZWE6ER.js";import{B as We}from"./ButtonComp-Ciox4MwK.js";import{F as qt}from"./FormPreview-BWxa4xB1.js";const zt="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg";function we(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function Gt(t){return(...o)=>!t(...o)}function Kt(t,o){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(o.trim())!==-1}function Qe(t,o,r,g){return o?t.filter(O=>Kt(g(O,r),o)).sort((O,k)=>g(O,r).length-g(k,r).length):t}function Wt(t){return t.filter(o=>!o.$isLabel)}function Se(t,o){return r=>r.reduce((g,O)=>O[t]&&O[t].length?(g.push({$groupLabel:O[o],$isLabel:!0}),g.concat(O[t])):g,[])}function Jt(t,o,r,g,O){return k=>k.map(c=>{if(!c[r])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const F=Qe(c[r],t,o,O);return F.length?{[g]:c[g],[r]:F}:[]})}const Je=(...t)=>o=>t.reduce((r,g)=>g(r),o);var Qt={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,o){return we(t)?"":o?t[o]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",o=t.toLowerCase().trim();let r=this.options.concat();return this.internalSearch?r=this.groupValues?this.filterAndFlat(r,o,this.label):Qe(r,o,this.label,this.customLabel):r=this.groupValues?Se(this.groupValues,this.groupLabel)(r):r,r=this.hideSelected?r.filter(Gt(this.isSelected)):r,this.taggable&&o.length&&!this.isExistingOption(o)&&(this.tagPosition==="bottom"?r.push({isTag:!0,label:t}):r.unshift({isTag:!0,label:t})),r.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(o=>this.customLabel(o,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,o,r){return Je(Jt(o,r,this.groupValues,this.groupLabel,this.customLabel),Se(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return Je(Se(this.groupValues,this.groupLabel),Wt)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const o=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(o)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(we(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const o=this.customLabel(t,this.label);return we(o)?"":o},select(t,o){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(o)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(o==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){o!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const o=this.options.find(r=>r[this.groupLabel]===t.$groupLabel);if(o){if(this.wholeGroupSelected(o)){this.$emit("remove",o[this.groupValues],this.id);const r=this.trackBy?o[this.groupValues].map(O=>O[this.trackBy]):o[this.groupValues],g=this.internalValue.filter(O=>r.indexOf(this.trackBy?O[this.trackBy]:O)===-1);this.$emit("update:modelValue",g)}else{let r=o[this.groupValues].filter(g=>!(this.isOptionDisabled(g)||this.isSelected(g)));this.max&&r.splice(this.max-this.internalValue.length),this.$emit("select",r,this.id),this.$emit("update:modelValue",this.internalValue.concat(r))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(o=>this.isSelected(o)||this.isOptionDisabled(o))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,o=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const r=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const g=this.internalValue.slice(0,r).concat(this.internalValue.slice(r+1));this.$emit("update:modelValue",g)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&o&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el!="undefined"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search!="undefined"&&this.$refs.search.blur():typeof this.$el!="undefined"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window=="undefined")return;const t=this.$el.getBoundingClientRect().top,o=window.innerHeight-this.$el.getBoundingClientRect().bottom;o>this.maxHeight||o>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(o-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},Xt={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,o){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(o)}},groupHighlight(t,o){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":o.$isLabel}];const r=this.options.find(g=>g[this.groupLabel]===o.$groupLabel);return r&&!this.wholeGroupDisabled(r)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(r)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Xe={name:"vue-multiselect",mixins:[Qt,Xt],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0},required:{type:Boolean,default:!1}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const Yt={ref:"tags",class:"multiselect__tags"},Zt={class:"multiselect__tags-wrap"},xt={class:"multiselect__spinner"},It={key:0},es={class:"multiselect__option"},ts={class:"multiselect__option"},ss=M("No elements found. Consider changing the search query."),ls={class:"multiselect__option"},is=M("List is empty.");function os(t,o,r,g,O,k){return u(),j("div",{tabindex:t.searchable?-1:r.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":r.disabled,"multiselect--above":k.isAbove,"multiselect--has-options-group":k.hasOptionGroup},"multiselect"],onFocus:o[14]||(o[14]=c=>t.activate()),onBlur:o[15]||(o[15]=c=>t.searchable?!1:t.deactivate()),onKeydown:[o[16]||(o[16]=G(A(c=>t.pointerForward(),["self","prevent"]),["down"])),o[17]||(o[17]=G(A(c=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:o[18]||(o[18]=G(A(c=>t.addPointerElement(c),["stop","self"]),["enter","tab"])),onKeyup:o[19]||(o[19]=G(c=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[U(t.$slots,"caret",{toggle:t.toggle},()=>[V("div",{onMousedown:o[1]||(o[1]=A(c=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),U(t.$slots,"clear",{search:t.search}),V("div",Yt,[U(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:k.visibleValues,isOpen:t.isOpen},()=>[N(V("div",Zt,[(u(!0),j(L,null,E(k.visibleValues,(c,F)=>U(t.$slots,"tag",{option:c,search:t.search,remove:t.removeElement},()=>[(u(),j("span",{class:"multiselect__tag",key:F},[V("span",{textContent:b(t.getOptionLabel(c))},null,8,["textContent"]),V("i",{tabindex:"1",onKeypress:G(A(a=>t.removeElement(c),["prevent"]),["enter"]),onMousedown:A(a=>t.removeElement(c),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[x,k.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>r.limit?U(t.$slots,"limit",{key:0},()=>[V("strong",{class:"multiselect__strong",textContent:b(r.limitText(t.internalValue.length-r.limit))},null,8,["textContent"])]):$("v-if",!0)]),V(Pe,{name:"multiselect__loading"},{default:ue(()=>[U(t.$slots,"loading",{},()=>[N(V("div",xt,null,512),[[x,r.loading]])])]),_:3}),t.searchable?(u(),j("input",{key:0,ref:"search",name:r.name,id:t.id,type:"text",autocomplete:"off",spellcheck:r.spellcheck,placeholder:t.placeholder,required:r.required,style:k.inputStyle,value:t.search,disabled:r.disabled,tabindex:r.tabindex,onInput:o[2]||(o[2]=c=>t.updateSearch(c.target.value)),onFocus:o[3]||(o[3]=A(c=>t.activate(),["prevent"])),onBlur:o[4]||(o[4]=A(c=>t.deactivate(),["prevent"])),onKeyup:o[5]||(o[5]=G(c=>t.deactivate(),["esc"])),onKeydown:[o[6]||(o[6]=G(A(c=>t.pointerForward(),["prevent"]),["down"])),o[7]||(o[7]=G(A(c=>t.pointerBackward(),["prevent"]),["up"])),o[9]||(o[9]=G(A(c=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:o[8]||(o[8]=G(A(c=>t.addPointerElement(c),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","spellcheck","placeholder","required","value","disabled","tabindex","aria-controls"])):$("v-if",!0),k.isSingleLabelVisible?(u(),j("span",{key:1,class:"multiselect__single",onMousedown:o[10]||(o[10]=A((...c)=>t.toggle&&t.toggle(...c),["prevent"]))},[U(t.$slots,"singleLabel",{option:k.singleValue},()=>[M(b(t.currentOptionLabel),1)])],32)):$("v-if",!0),k.isPlaceholderVisible?(u(),j("span",{key:2,class:"multiselect__placeholder",onMousedown:o[11]||(o[11]=A((...c)=>t.toggle&&t.toggle(...c),["prevent"]))},[U(t.$slots,"placeholder",{},()=>[M(b(t.placeholder),1)])],32)):$("v-if",!0)],512),V(Pe,{name:"multiselect"},{default:ue(()=>[N(V("div",{class:"multiselect__content-wrapper",onFocus:o[12]||(o[12]=(...c)=>t.activate&&t.activate(...c)),tabindex:"-1",onMousedown:o[13]||(o[13]=A(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[V("ul",{class:"multiselect__content",style:k.contentStyle,role:"listbox",id:"listbox-"+t.id,"aria-multiselectable":t.multiple},[U(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(u(),j("li",It,[V("span",es,[U(t.$slots,"maxElements",{},()=>[M("Maximum of "+b(t.max)+" options selected. First remove a selected option to select another.",1)])])])):$("v-if",!0),!t.max||t.internalValue.length<t.max?(u(!0),j(L,{key:1},E(t.filteredOptions,(c,F)=>(u(),j("li",{class:"multiselect__element",key:F,"aria-selected":t.isSelected(c),id:t.id+"-"+F,role:c&&(c.$isLabel||c.$isDisabled)?null:"option"},[c&&(c.$isLabel||c.$isDisabled)?$("v-if",!0):(u(),j("span",{key:0,class:[t.optionHighlight(F,c),"multiselect__option"],onClick:A(a=>t.select(c),["stop"]),onMouseenter:A(a=>t.pointerSet(F),["self"]),"data-select":c&&c.isTag?t.tagPlaceholder:k.selectLabelText,"data-selected":k.selectedLabelText,"data-deselect":k.deselectLabelText},[U(t.$slots,"option",{option:c,search:t.search,index:F},()=>[V("span",null,b(t.getOptionLabel(c)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),c&&(c.$isLabel||c.$isDisabled)?(u(),j("span",{key:1,"data-select":t.groupSelect&&k.selectGroupLabelText,"data-deselect":t.groupSelect&&k.deselectGroupLabelText,class:[t.groupHighlight(F,c),"multiselect__option"],onMouseenter:A(a=>t.groupSelect&&t.pointerSet(F),["self"]),onMousedown:A(a=>t.selectGroup(c),["prevent"])},[U(t.$slots,"option",{option:c,search:t.search,index:F},()=>[V("span",null,b(t.getOptionLabel(c)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):$("v-if",!0)],8,["aria-selected","id","role"]))),128)):$("v-if",!0),N(V("li",null,[V("span",ts,[U(t.$slots,"noResult",{search:t.search},()=>[ss])])],512),[[x,r.showNoResults&&t.filteredOptions.length===0&&t.search&&!r.loading]]),N(V("li",null,[V("span",ls,[U(t.$slots,"noOptions",{},()=>[is])])],512),[[x,r.showNoOptions&&(t.options.length===0||k.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!r.loading]]),U(t.$slots,"afterList")],12,["id","aria-multiselectable"])],36),[[x,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Xe.render=os;const ns={class:""},as={class:""},rs={class:"d-flex justify-content-between align-items-center CancelNdSave my-2 mx-1"},us={class:"form-container container-fluid mt-1"},ds={class:"row"},cs={class:"col-2"},ps={class:"steps-sticky-div"},hs={class:"steps"},fs=["onClick"],ms={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},gs={class:"step-text"},vs={class:"font-11"},bs={class:"font-14"},ys={class:"col-10 formbackground-color"},_s={class:""},ws={class:"form-content stepsDiv"},Ss={key:0},$s={class:""},ks={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Vs={class:"row"},Ds={class:"col-4"},Cs={class:"mt-3"},Os={class:""},Ls={key:0,class:"text-danger ErrorMsg ms-2"},Bs={class:"mt-3"},Fs={class:""},As={key:0,class:"text-danger ErrorMsg ms-2"},Ts={class:"mt-3"},Es={class:""},Ms={class:"mt-3"},Ns={class:""},Us={class:"mt-3"},Rs={class:"custom-option"},js=["checked"],Ps={key:1},Hs={class:""},qs={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},zs={class:"font-11 m-0"},Gs={class:"d-flex gap-2 align-items-center"},Ks={key:0},Ws=["disabled"],Js={class:"main-block"},Qs={class:"requestandAppHeader"},Xs={class:"d-flex justify-content-between"},Ys={class:"ps-2 pt-2"},Zs={class:"d-flex"},xs={key:0,class:"d-flex align-items-center"},Is={class:"font-10 pe-1"},el={key:0,class:"ps-1"},tl=["onClick"],sl={key:0,class:"bi bi-pencil font-14"},ll=["onClick"],il={class:"mt-2 section_block"},ol=["onDragstart","onDrop"],nl={class:"d-flex justify-content-between align-items-center"},al={class:"d-flex"},rl=["onUpdate:modelValue","onChange"],ul={key:0,class:"text-danger"},dl={class:"d-flex"},cl=["onClick"],pl={class:"container-fluid"},hl=["onDragstart","onDrop"],fl={class:"d-flex justify-content-between align-items-center"},ml={class:"rownames"},gl=["onClick"],vl=["onClick"],bl={class:"col"},yl={class:"row"},_l=["onDragstart","onDrop"],wl={class:"column_name d-flex align-items-center justify-content-between"},Sl={class:"d-flex"},$l=["onUpdate:modelValue","onChange"],kl={key:0,class:"text-danger font-10"},Vl=["onClick"],Dl=["onDragstart","onDrop"],Cl={class:"px-1 field-border"},Ol={class:"d-flex justify-content-between"},Ll={class:"d-flex"},Bl=["onUpdate:modelValue","onChange"],Fl=["onClick"],Al=["onClick"],Tl=["onUpdate:modelValue","onChange"],El=["value"],Ml={key:0},Nl=["onUpdate:modelValue"],Ul={class:"d-flex gap-2 align-items-center"},Rl={class:"d-flex align-items-center"},jl=["onUpdate:modelValue"],Pl={key:1,class:"text-danger font-10"},Hl={class:"d-flex justify-content-center align-items-center my-2"},ql=["onClick"],zl={class:"d-flex justify-content-start align-items-center my-2"},Gl=["onClick"],Kl={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},Wl=["onClick"],Jl={key:2},Ql={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Xl={class:"font-11 m-0"},Yl={class:"d-flex gap-2"},Zl=["disabled"],xl={class:"card py-3 px-0 mb-2 mt-2"},Il={class:"container-fluid"},ei={class:"row"},ti={class:"col"},si={class:"container"},li={class:"row"},ii={class:"col-9"},oi={class:"font-12 fw-bold"},ni={class:"col-9"},ai={class:"font-12 fw-bold"},ri={class:"col-9"},ui={class:"font-12 fw-bold"},di={class:"col"},ci={class:"container"},pi={class:"row"},hi={class:"col-8"},fi={class:"font-12 fw-bold"},mi={class:"col-8"},gi={class:"font-12 fw-bold"},vi={key:1,class:"p-0 mb-0 list-unstyled mt-1"},bi={key:0,class:"card p-1"},yi={class:"section-label"},_i={class:"m-0 font-13"},wi={class:"container-fluid"},Si={class:"p-3 border-bottom"},$i={class:"m-0 font-12"},ki={class:"mx-3 my-2"},Vi={key:0},Di=["for"],Ci={class:"font-12"},Oi={class:"text-danger"},Li=["multiple","onUpdate:modelValue"],Bi=["value"],Fi={key:1,class:"container-fluid"},Ai={class:"row"},Ti={class:"d-flex gap-2 align-items-center"},Ei=["type","name","id"],Mi=["for"],Ni=["id","onChange"],Ui=["onUpdate:modelValue","placeholder","name"],Ri={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},ji={class:"offcanvas-header add_designationHeader"},Pi={id:"offcanvasRightLabel font-14"},Hi={class:"offcanvas-body"},qi={class:"d-flex align-items-center gap-2 ps-2"},zi={key:0,class:"position-relative"},Gi={key:0,class:"list-unstyled"},Ki=["value"],Wi={class:"ps-2"},Ji={key:1},Qi={class:"offcanvas-footer"},Xi={class:"text-end p-3"},Yi={__name:"FormStepper",setup(t){const o=Mt(),r=Nt(),g=R(1),O=R([]);R([]);const k=R([]),c=R([]);let F=re([]),a=re([]),H=re([]);const J=R([]),q=R([]),de=R([]),I=R(""),ee=R(""),Q=R("");let z=re([]),C=R("");const te=ge(()=>(console.log(ze.value,"businessUnit from global======"),ze)),w=R({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${te.value.value}`,form_category:"",owner_of_the_form:""}),P=ge(()=>w.value);ve(te,l=>{l&&l.value&&(w.value.business_unit=l.value)},{immediate:!0}),Ut(()=>{bt(),C=o.params.paramid||"new",console.log(" === paramId:",C),C!=null&&C!=null&&C!="new"&&Le();let l=localStorage.getItem("Bu");w.value.business_unit=l,console.log("businessUnit from LocalStorage======",w.value.business_unit)});const Ye=R([{id:1,label:"About Form",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Fields & Workflow",stepno:"Step 2",icon:"bi bi-question-circle"}]),Ze=[{label:"Text",type:"Data"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Phone"},{label:"Time",type:"Time"},{label:"Color",type:"Color"},{label:"TextArea",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Check",type:"Check"},{label:"Radio",type:"radio"},{label:"Select",type:"Select"},{label:"MultiSelect",type:"multiselect"},{label:"Signature",type:"Signature"}],ce=ge({get(){return J.value.length>0&&J.value.every(l=>q.value.includes(l))},set(l){l?q.value=[...J.value]:q.value=[]}});ve(q,l=>{console.log("Selected Designations:",l)});function xe(){!ce.value&&q.value.length===1&&console.log("Selected only one designation:",q.value[0])}function Ie(){let l={type:Q.value==0?"requestor":"approver",roles:q.value,fields:a[Q.value].sections.flatMap(ye),idx:Q.value};const e=z.findIndex(i=>i.idx===l.idx);e!==-1?z[e]=l:z.push(l),wt()}function pe(l){return z.find(e=>e.idx===l)||{roles:[]}}function et(l){const e=pe(l).roles||[];q.value=[...e]}const tt=l=>{w.value.accessible_departments.length&&st(w.value.accessible_departments),Q.value=l,et(l)};function st(l){Array.isArray(l)&&l.length>0,K.get(W.resource+Y.WFRoleMatrix+`/${w.value.business_unit}`).then(e=>{e.data&&(console.log(e.data,"Fetched Designations"),J.value=[...new Set(e.data.users.map(i=>i.role_name))])}).catch(e=>{console.error("Error fetching designations data:",e)})}function $e(){r.push({name:"Created"})}const lt=l=>{l<g.value?he():l>g.value&&ke()},ke=()=>{g.value<3&&(g.value+=1)},he=()=>{g.value>1&&(g.value-=1)};ve(()=>w.owner_of_the_form,(l,e)=>{l!==e&&Oe(l)});function Ve(){const l=Pt(a),e=Re(me({},w.value),{fields:l,doctype:Y.EzyFormDefinitions,workflow_setup:z,form_status:"Draft"});e.accessible_departments=e.accessible_departments.toString(),console.log(e,"---------------------------------------------------------"),K.post(W.savedata,e).then(i=>{i&&(_e.success("Form Created Successfully",{autoClose:2e3}),r.push({params:{paramid:i.message.message}}),C=i.message.message,C.value!=="new"&&(a.splice(0,a.length),Le()))}).catch(i=>{console.error("Error saving form data:",i)})}const it=()=>{var i,n;const l=a.length,e={label:l===0?"requestor":`approver-${l}`,parent:`${(i=te.value)==null?void 0:i.value}-${(n=w.value)==null?void 0:n.form_short_name}`,sections:[{label:"",parent:`${te.value.value}-${w.value.form_short_name}`,rows:[{label:`row_0_0_${l}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]}]};a.splice(a.length,0,e)},ot=l=>{let e=a[l];e.parent&&H.push(e),a.splice(l,1)},nt=l=>{let e=a[l].sections.length,i=a[l].sections;console.log(l,"====",e," ========== ",i),a[l].sections.push({label:"",parent:`${te.value.value}-${w.value.form_short_name}`,rows:[{label:`row_0_${e}_${l}`,columns:[{label:"",fields:[]}]}]})},at=(l,e)=>{let i=a[l].sections[e];i.parent&&H.push(i),a[l].sections.splice(e,1)},rt=(l,e)=>{const i=a[l].sections[e].rows.length;a[l].sections[e].rows.push({label:`row_${i}_${e}_${l}`,columns:[{fields:[]}]})},ut=(l,e,i)=>{let n=a[l].sections[e].rows[i];n.parent&&H.push(n),a[l].sections[e].rows.splice(i,1)},dt=(l,e,i)=>{a[l].sections[e].rows[i].columns.push({label:"",fields:[]})},ct=(l,e,i,n)=>{let f=a[l].sections[e].rows[i].columns[n];f.parent&&H.push(f),a[l].sections[e].rows[i].columns.splice(n,1)},pt=(l,e,i,n)=>{a[l].sections[e].rows[i].columns[n].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},ht=(l,e,i,n,f)=>{console.log(i," field remove === ",a[l].sections[e]);let h=a[l].sections[e].rows[i].columns[n].fields[f];h.parent&&H.push(h),a[l].sections[e].rows[i].columns[n].fields.splice(f,1)},ft=(l,e,i,n,f)=>{const h=a[l].sections[e].rows[i].columns[n].fields[f],m=me({},h);m.name=`${h.name} Name the field`,a[l].sections[e].rows[i].columns[n].fields.splice(f+1,0,m)},mt=(l,e,i,n,f)=>{const h=Ke(a);a.splice(0,a.length,...h);let m=a[l].sections[e].rows[i].columns[n].fields[f].fieldtype;(m!=="Check"||m!=="Select"||m!=="radio"||m!=="multiselect")&&(a[l].sections[e].rows[i].columns[n].fields[f].options="")};function fe(l,e,i,n,f){const h=a.flatMap(Ht),m=Ct(h),v=Ke(a);a.splice(0,a.length,...v),f!==void 0&&f>=0&&n!==void 0&&n>=0&&e!==void 0&&(a[l].sections[e].rows[i].columns[n].fields[f].errorMsg=m?"Duplicate Label Name":""),f===void 0&&n!==void 0&&n>=0&&e!==void 0&&(a[l].sections[e].rows[i].columns[n].errorMsg=m?"Duplicate Label Name in Column":""),n===void 0&&f===void 0&&e!==void 0&&(a[l].sections[e].errorMsg=m?"Duplicate Label Name in Section":"")}function De(l,e){const i=l.target.value;console.log(`${e} input change === `,i);const n=[[e,"like",`%${i}%`]],f={fields:JSON.stringify(["*"]),filters:JSON.stringify(n)};K.get(`${W.resource}${Y.EzyFormDefinitions}`,{params:f}).then(h=>{console.log(`${e} response === `,h.data),de.value=h.data,e==="form_name"?I.value=i&&de.value.some(m=>m.form_name&&m.form_name.toLowerCase()===i.toLowerCase())?"Name already exists":"":e==="form_short_name"&&(ee.value=i&&de.value.some(m=>m.form_short_name&&m.form_short_name.toLowerCase()===i.toLowerCase())?"Short name already exists":"")}).catch(h=>{console.error("Error fetching ezyForms data:",h),e==="form_name"?I.value="":e==="form_short_name"&&(ee.value="")})}const gt=l=>l===0?"1st row":l===1?"2nd row":l===2?"3rd row":`${l+1}th row`,Ce=R([]),vt=()=>{a.length&&(Ce.value=a,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function bt(){const l={fields:JSON.stringify(["*"])};K.get(W.resource+Y.departments,{params:l}).then(e=>{var i;(i=e==null?void 0:e.data)!=null&&i.length&&(c.value=e.data.map(n=>n.name),k.value=e.data.map(n=>n.name))}).catch(e=>{console.error("Error fetching department data:",e)})}function Oe(l){l&&yt(l)}function yt(l){K.get(W.resource+Y.departments+`/${l}`).then(e=>{var i;(i=e==null?void 0:e.data)!=null&&i.ezy_departments_items&&(O.value=e.data.ezy_departments_items.map(n=>n.category))}).catch(e=>{console.error("Error fetching categories data:",e)})}function Le(){K.get(W.resource+Y.EzyFormDefinitions+`/${C}`).then(l=>{let e=l==null?void 0:l.data;e&&(e.accessible_departments&&(e.accessible_departments=e.accessible_departments.split(",")),w.value=e,Rt(JSON.parse(e==null?void 0:e.form_json).fields).forEach((n,f)=>{a.push(n)}),JSON.parse(e==null?void 0:e.form_json).workflow.forEach((n,f)=>{z.push(n),console.log(" Work flow setup === ",z)}))}).catch(l=>{console.error("Error fetching  data:",l)})}function _t(){K.post(W.delete_form_items,{deleted_fields:H.flatMap(ye),doctype:C}).then(l=>{var e;(e=l==null?void 0:l.message)!=null&&e.success&&Ve()})}function Be(){return je(this,null,function*(){let l=H.flatMap(ye);C!=null&&C!=null&&C!="new"&&l.length?_t():Ve()})}function wt(){K.post(W.add_roles_WF,{workflow_setup:z,doctype:w.value.form_short_name,business_unit:w.value.business_unit}).then(l=>{console.log(" =====   ",l),Q.value==0?_e.success("Requestor Added"):_e.success("Acceptor Added")})}const St=l=>{switch(l){case"Data":return"input";case"Phone":return"input";case"Time":return"input";case"Text":return"textarea";case"Color":return"input";case"Check":return"input";case"Select":return"select";case"Date":return"input";case"Datetime":return"input";case"Attach":return"file";case"radio":return"input";default:return"input"}},se=(l,e,i)=>{if(!Array.isArray(l)||e<0||i<0||e>=l.length||i>=l.length){console.warn(`Invalid swap indices: ${e}, ${i} for array`,l);return}[l[e],l[i]]=[l[i],l[e]],console.log(`Swapped items at index ${e} and ${i}`)},$t=(l,e,i)=>{var n;(n=a==null?void 0:a[i])!=null&&n.sections&&se(a[i].sections,l,e)},kt=(l,e,i,n)=>{var f,h,m;(m=(h=(f=a==null?void 0:a[n])==null?void 0:f.sections)==null?void 0:h[i])!=null&&m.rows?se(a[n].sections[i].rows,l,e):console.warn(`Row swap failed: Invalid section index ${i} or block index ${n}`)},Vt=(l,e,i,n,f)=>{var h,m,v,y,_;(_=(y=(v=(m=(h=a==null?void 0:a[f])==null?void 0:h.sections)==null?void 0:m[i])==null?void 0:v.rows)==null?void 0:y[n])!=null&&_.columns?se(a[f].sections[i].rows[n].columns,l,e):console.warn(`Column swap failed: Invalid indices - section: ${i}, row: ${n}, block: ${f}`)},Dt=(l,e,i,n,f,h,m)=>{var _,p,B,S,le,T,X,Fe,Ae,Te,Ee,Me;const v=(T=(le=(S=(B=(p=(_=a==null?void 0:a[m])==null?void 0:_.sections)==null?void 0:p[i])==null?void 0:B.rows)==null?void 0:S[n])==null?void 0:le.columns)==null?void 0:T[f],y=(Me=(Ee=(Te=(Ae=(Fe=(X=a==null?void 0:a[m])==null?void 0:X.sections)==null?void 0:Fe[i])==null?void 0:Ae.rows)==null?void 0:Te[n])==null?void 0:Ee.columns)==null?void 0:Me[h];if(v!=null&&v.fields&&(y!=null&&y.fields))if(f!==h){const Ot=v.fields.splice(l,1)[0];y.fields.splice(e,0,Ot),console.log(`Moved field from column ${f} to column ${h}`)}else se(v.fields,l,e);else console.warn(`Field swap failed: Invalid indices - section: ${i}, row: ${n}, fromColumn: ${f}, toColumn: ${h}, block: ${m}`)},oe=(l,e,i,n=null,f=null,h=null,m=null)=>{l.dataTransfer.setData("index",e),l.dataTransfer.setData("type",i),n!==null&&l.dataTransfer.setData("blockIndex",n),f!==null&&l.dataTransfer.setData("sectionIndex",f),h!==null&&l.dataTransfer.setData("rowIndex",h),m!==null&&l.dataTransfer.setData("columnIndex",m),console.log(`Dragging ${i} from index ${e}`)},ne=l=>{l.preventDefault()},ae=(l,e,i,n=null,f=null,h=null,m=null)=>{l.preventDefault();const v=Number(l.dataTransfer.getData("index")),y=l.dataTransfer.getData("type"),_=Number(l.dataTransfer.getData("blockIndex")),p=Number(l.dataTransfer.getData("sectionIndex")),B=Number(l.dataTransfer.getData("rowIndex")),S=Number(l.dataTransfer.getData("columnIndex"));console.log(`Dropping ${y} from index ${v} to ${e}`),y==="section"&&i==="section"?$t(v,e,_):y==="row"&&i==="row"?kt(v,e,p,_):y==="column"&&i==="column"?Vt(v,e,p,B,_):y==="field"&&i==="field"&&(S!==m?Dt(v,e,p,B,S,m,_):se(a[_].sections[p].rows[B].columns[S].fields,v,e))},Ct=l=>new Set(l).size!==l.length;return(l,e)=>(u(),d("div",null,[s("div",ns,[s("div",as,[s("div",rs,[s("div",{class:"ps-1 m-0 d-flex align-items-center",onClick:e[0]||(e[0]=i=>$e())},e[17]||(e[17]=[s("h1",{class:"font-13 m-0"},[s("i",{class:"bi bi-arrow-left"}),s("span",{class:"ms-2"},"Back")],-1)])),s("div",null,[s("button",{type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=i=>l.SaveAsDrafts())},e[18]||(e[18]=[s("i",{class:"bi bi-bookmark-check-fill"},null,-1),M(" Save As Draft ")]))])]),s("div",us,[s("div",ds,[s("div",cs,[s("div",ps,[s("ul",hs,[(u(!0),d(L,null,E(Ye.value,i=>(u(),d("li",{key:i.id,class:Z({active:g.value===i.id,completed:g.value>i.id})},[s("div",{class:"d-flex gap-3 align-items-center",onClick:n=>lt(i.id)},[g.value>i.id?(u(),d("i",ms)):(u(),d("i",{key:1,class:Z(i.icon)},null,2)),s("div",gs,[s("span",vs,b(i.stepno),1),e[19]||(e[19]=s("br",null,null,-1)),s("span",bs,b(i.label),1)])],8,fs)],2))),128))])])]),s("div",ys,[s("div",_s,[s("div",ws,[g.value===1?(u(),d("div",Ss,[s("div",$s,[s("div",ks,[s("h1",{class:"font-14 m-0",onClick:e[2]||(e[2]=i=>$e())},e[20]||(e[20]=[s("i",{class:"bi bi-chevron-left"},null,-1),s("span",{class:"ms-2"},"Cancel Form",-1)])),e[21]||(e[21]=s("h1",{class:"font-14 fw-bold m-0"},"About Form",-1)),g.value<3?(u(),j(We,{key:0,disabled:I.value.length||ee.value.length||!w.value.accessible_departments.length||!w.value.form_category.length||!w.value.owner_of_the_form.length,class:"btn btn-dark bg-dark text-white fw-bold font-13",name:"Next",onClick:ke},null,8,["disabled"])):$("",!0)])]),s("div",Vs,[e[26]||(e[26]=s("div",{class:"col-4"},null,-1)),s("div",Ds,[s("div",Cs,[s("div",Os,[V(He,{disabled:D(C)!=null&&D(C)!=null&&D(C)!="new",labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",placeholder:"Untitled Form",onChange:e[3]||(e[3]=i=>De(i,"form_name")),modelValue:w.value.form_name,"onUpdate:modelValue":e[4]||(e[4]=i=>w.value.form_name=i)},null,8,["disabled","modelValue"]),I.value?(u(),d("span",Ls,b(I.value),1)):$("",!0)])]),s("div",Bs,[s("div",Fs,[V(He,{disabled:D(C)!=null&&D(C)!=null&&D(C)!="new",labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",placeholder:"Untitled Form",onChange:e[5]||(e[5]=i=>De(i,"form_short_name")),modelValue:w.value.form_short_name,"onUpdate:modelValue":e[6]||(e[6]=i=>w.value.form_short_name=i)},null,8,["disabled","modelValue"]),ee.value?(u(),d("span",As,b(ee.value),1)):$("",!0)])]),s("div",Ts,[s("div",Es,[e[22]||(e[22]=s("label",{for:""},"Owner Of The Form",-1)),V(D(qe),{options:c.value,onChange:Oe,modelValue:w.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=i=>w.value.owner_of_the_form=i),placeholder:"Select Department",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["options","modelValue"])])]),s("div",Ms,[s("div",Ns,[e[23]||(e[23]=s("label",{for:""},"Form Cateogry",-1)),V(D(qe),{options:O.value,modelValue:w.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=i=>w.value.form_category=i),placeholder:"Select Cateogry",multiple:!1,searchable:!0,class:"font-11 multiselect"},null,8,["options","modelValue"])])]),s("div",Us,[e[25]||(e[25]=s("div",{class:""},null,-1)),s("div",null,[e[24]||(e[24]=s("label",{class:"typo__label"},[s("label",{for:""},"Accessibility Departments")],-1)),V(D(Xe),{modelValue:w.value.accessible_departments,"onUpdate:modelValue":e[9]||(e[9]=i=>w.value.accessible_departments=i),options:k.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Designation",class:"font-11"},{option:ue(({option:i})=>[s("div",Rs,[s("input",{type:"checkbox",checked:w.value.accessible_departments.includes(i),class:"custom-checkbox"},null,8,js),s("span",null,b(i),1)])]),selection:ue(({values:i,isOpen:n})=>[i.length?N((u(),d("span",{key:0,class:"multiselect__single font-10"},b(i.join(", "))+" selected ",513)),[[x,!n]]):$("",!0)]),_:1},8,["modelValue","options"])])])]),e[27]||(e[27]=s("div",{class:"col-4"},null,-1))])])):$("",!0),g.value===2?(u(),d("div",Ps,[s("div",Hs,[s("div",qs,[s("h1",zs,[s("i",{onClick:e[10]||(e[10]=i=>he()),class:"bi bi-chevron-left"}),e[28]||(e[28]=s("span",{class:"ms-2"},"Back To About Form",-1))]),s("div",Gs,[D(a).length?(u(),d("div",Ks,[s("button",{class:"btn btn-light previewBtn d-flex align-items-baseline font-13",type:"button",onClick:vt},e[29]||(e[29]=[s("i",{class:"bi bi-eye me-1 mt-1 ms-1 mb-0"},null,-1),M("Preview ")]))])):$("",!0),s("button",{disabled:!D(a).length,class:"btn btn-dark font-10 Withborder border",type:"button",onClick:e[11]||(e[11]=i=>Be())}," Save data ",8,Ws)])]),V(qt,{blockArr:Ce.value,formDescriptions:P.value},null,8,["blockArr","formDescriptions"]),s("div",Js,[(u(!0),d(L,null,E(D(a),(i,n)=>(u(),d("div",{class:"block-level",key:n},[s("div",Qs,[s("div",Xs,[s("div",null,[s("h6",Ys,b(n===0?"Requestor":"Approver")+" Block ",1)]),s("div",Zs,[D(C)&&D(z).length?(u(),d("div",xs,[s("span",Is,b(n==0?"Requestor : ":"Approver:"),1),pe(n)?(u(),d("label",el,b(pe(n).roles.join(", ")),1)):$("",!0)])):$("",!0),D(C)!=null&&D(C)!=null&&D(C)!="new"?(u(),d("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:f=>tt(n)},[D(C)&&D(z).length?(u(),d("i",sl)):(u(),d(L,{key:1},[e[30]||(e[30]=s("img",{src:zt,alt:"Add",class:"me-1"},null,-1)),e[31]||(e[31]=M(" Add designations "))],64))],8,tl)):$("",!0),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:f=>ot(n)},e[32]||(e[32]=[s("i",{class:"bi bi-trash me-1"},null,-1),M(" Delete Block ")]),8,ll)])])]),s("div",il,[(u(!0),d(L,null,E(i.sections,(f,h)=>(u(),d("div",{key:"section-"+h,draggable:"true",onDragstart:m=>oe(m,h,"section",n),onDragover:e[12]||(e[12]=m=>ne(m)),onDrop:m=>ae(m,h,"section",n),class:"dynamicSection section"},[s("section",nl,[s("div",al,[N(s("input",{"onUpdate:modelValue":m=>f.label=m,type:"text",class:Z(["border-less-input","font-14",{"italic-style":!f.label},{"fw-medium":f.label}]),onChange:m=>fe(h),placeholder:"Untitled section"},null,42,rl),[[ie,f.label]]),f.errorMsg?(u(),d("small",ul,b(f.errorMsg),1)):$("",!0)]),s("div",dl,[s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:m=>at(n,h)},e[33]||(e[33]=[s("i",{class:"bi bi-trash me-1"},null,-1),M(" Delete Section ")]),8,cl)])]),s("div",pl,[(u(!0),d(L,null,E(f.rows,(m,v)=>(u(),d("section",{class:"row dynamicRow row-container",key:"row-"+v,draggable:"true",onDragstart:y=>oe(y,v,"row",n,h),onDragover:ne,onDrop:y=>ae(y,v,"row",n,h)},[s("div",fl,[s("label",ml,b(gt(v)),1),s("div",null,[m.columns.length<3?(u(),d("button",{key:0,class:"btn btn-light bg-transparent border-0 font-13",onClick:y=>dt(n,h,v)},e[34]||(e[34]=[s("i",{class:"bi bi-plus"},null,-1),M(" Add Column ")]),8,gl)):$("",!0),s("button",{class:"btn btn-light bg-transparent border-0 font-12 deleteRow",onClick:y=>ut(n,h,v)},e[35]||(e[35]=[s("i",{class:"ri-subtract-line"},null,-1),M(" Delete row ")]),8,vl)])]),s("div",bl,[s("div",yl,[(u(!0),d(L,null,E(m.columns,(y,_)=>(u(),d("div",{key:"column-"+_,draggable:"true",onDragstart:p=>oe(p,_,"column",n,h,v),onDragover:ne,onDrop:p=>ae(p,_,"column",n,h,v),class:"col p-0 dynamicColumn column-container"},[s("div",wl,[s("div",Sl,[N(s("input",{"onUpdate:modelValue":p=>y.label=p,type:"text",class:Z(["border-less-input","font-14",{"italic-style":!y.label},{"fw-medium":y.label}]),onChange:p=>fe(n,h,v,_),placeholder:"Column Name"},null,42,$l),[[ie,y.label]]),y.errorMsg?(u(),d("small",kl,b(y.errorMsg),1)):$("",!0)]),s("button",{class:"btn btn-light bg-transparent btn-sm",onClick:p=>ct(n,h,v,_)},e[36]||(e[36]=[s("i",{class:"bi bi-trash"},null,-1)]),8,Vl)]),(u(!0),d(L,null,E(y.fields,(p,B)=>(u(),d("div",{key:"field-"+B,draggable:"true",onDragstart:S=>oe(S,B,"field",n,h,v,_),onDragover:ne,onDrop:S=>ae(S,B,"field",n,h,v,_),class:"dynamicField"},[s("div",Cl,[s("div",Ol,[s("div",Ll,[N(s("input",{"onUpdate:modelValue":S=>p.label=S,placeholder:"Name the field",class:Z(["border-less-input","font-14","p-0",{"italic-style":!p.label},{"fw-medium":p.label}]),onChange:S=>fe(n,h,v,_,B)},null,42,Bl),[[ie,p.label]])]),s("div",null,[s("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:S=>ft(n,h,v,_,B)},e[37]||(e[37]=[s("i",{class:"ri-file-copy-line copyIcon"},null,-1)]),8,Fl),s("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:S=>ht(n,h,v,_,B)},e[38]||(e[38]=[s("i",{class:"bi bi-trash"},null,-1)]),8,Al)])]),N(s("select",{"onUpdate:modelValue":S=>p.fieldtype=S,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:S=>mt(n,h,v,_,B)},[e[39]||(e[39]=s("option",{value:""},"Select Type ",-1)),(u(),d(L,null,E(Ze,S=>s("option",{key:S,value:S.type},b(S.label),9,El)),64))],40,Tl),[[Ge,p.fieldtype]]),["Select","multiselect"].includes(p.fieldtype)?(u(),d("div",Ml,[e[40]||(e[40]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),N(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":S=>p.options=S,class:"form-control shadow-none mb-1 font-12"},null,8,Nl),[[ie,p.options]])])):$("",!0),s("div",Ul,[s("div",Rl,[N(s("input",{class:"font-12","onUpdate:modelValue":S=>p.reqd=S,placeholder:"Field Name",type:"checkbox"},null,8,jl),[[be,p.reqd]])]),e[41]||(e[41]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Mandatory")],-1))]),p.error?(u(),d("small",Pl,b(p.error),1)):$("",!0)])],40,Dl))),128)),s("div",Hl,[s("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:p=>pt(n,h,v,_)},e[42]||(e[42]=[s("i",{class:"bi bi-plus fs-5"},null,-1),s("span",null,"Add Field",-1)]),8,ql)])],40,_l))),128))])])],40,hl))),128))]),s("div",zl,[s("button",{class:"btn btn-light addRow m-2",onClick:m=>rt(n,h,l.rowIndex)},e[43]||(e[43]=[s("i",{class:"bi bi-plus"},null,-1),M(" Add row in section ")]),8,Gl)])],40,ol))),128)),s("div",Kl,[s("button",{class:"btn btn-light border font-12",onClick:f=>nt(n)},e[44]||(e[44]=[s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),M(" Add Section ")]),8,Wl)])])]))),128)),s("div",{class:Z(["d-flex justify-content-center align-items-center add-block-btn-div py-4 ",{"background-color-white":D(a).length}])},[s("button",{class:"btn btn-light border d-flex align-items-center font-12",onClick:it},[e[45]||(e[45]=s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1)),M(" "+b(D(a).length===0?"Add Requestor Block":"Add Approval Block"),1)])],2)])])])):$("",!0),g.value===3?(u(),d("div",Jl,[s("div",Ql,[s("h1",Xl,[s("i",{onClick:e[13]||(e[13]=i=>he()),class:"bi bi-chevron-left"}),e[46]||(e[46]=s("span",{class:"ms-2"},"Back To Fields & Workflow",-1))]),s("div",Yl,[s("button",{disabled:!D(F).length,class:"btn btn-dark font-10 Withborder border",type:"button",onClick:e[14]||(e[14]=i=>Be())}," Save Data ",8,Zl)])]),s("div",null,[s("div",xl,[s("div",Il,[s("div",ei,[s("div",ti,[s("div",si,[s("div",li,[e[47]||(e[47]=s("div",{class:"col-3"},[s("div",{class:"d-flex align-items-center justify-content-between"},[s("span",{class:"font-10"}," Form Name "),s("span",{class:"text-right"},":")])],-1)),s("div",ii,[s("span",oi,b(P.value.form_name),1)]),e[48]||(e[48]=s("div",{class:"col-3"},[s("div",{class:"d-flex align-items-center justify-content-between"},[s("span",{class:"font-10"}," Form Short Code "),s("span",{class:"text-right"},":")])],-1)),s("div",ni,[s("span",ai,b(P.value.form_short_name),1)]),e[49]||(e[49]=s("div",{class:"col-3"},[s("div",{class:"d-flex align-items-center justify-content-between"},[s("span",{class:"font-10"}," Form category "),s("span",{class:"text-right"},":")])],-1)),s("div",ri,[s("span",ui,b(P.value.form_category),1)])])])]),s("div",di,[s("div",ci,[s("div",pi,[e[50]||(e[50]=s("div",{class:"col-4"},[s("div",{class:"d-flex align-items-center justify-content-between"},[s("span",{class:"font-10"}," Owner of the form "),s("span",{class:"text-right"},":")])],-1)),s("div",hi,[s("span",fi,b(P.value.owner_of_the_form),1)]),e[51]||(e[51]=s("div",{class:"col-4"},[s("div",{class:"d-flex align-items-center justify-content-between"},[s("span",{class:"font-10"}," Accessibility to departments "),s("span",{class:"text-right"},":")])],-1)),s("div",mi,[s("span",gi,[Array.isArray(P.value.accessible_departments)&&P.value.accessible_departments.length===1?(u(),d(L,{key:0},[M(b(P.value.accessible_departments[0]),1)],64)):Array.isArray(P.value.accessible_departments)&&P.value.accessible_departments.length>1?(u(),d("ul",vi,[(u(!0),d(L,null,E(P.value.accessible_departments,(i,n)=>(u(),d("li",{key:n},b(i)+", ",1))),128))])):(u(),d(L,{key:2},[M(b(P.value.accessible_departments),1)],64))])])])])])])])]),D(a).length?(u(),d("div",bi,[(u(!0),d(L,null,E(D(a),(i,n)=>(u(),d("div",{key:n},[(u(!0),d(L,null,E(i.sections,(f,h)=>(u(),d("div",{key:"preview-"+h,class:"preview-section m-2"},[s("div",yi,[s("h5",_i,b(f.label||"Untitled Section"),1)]),s("div",wi,[(u(!0),d(L,null,E(f.rows,(m,v)=>(u(),d("div",{class:"row",key:v},[(u(!0),d(L,null,E(m.columns,(y,_)=>(u(),d("div",{key:"column-preview-"+_,class:"col dynamicColumn"},[s("div",Si,[s("h6",$i,b(y.label||"-"),1)]),s("div",ki,[(u(!0),d(L,null,E(y.fields,(p,B)=>{var S,le;return u(),d("div",{key:"field-preview-"+B},[p.label?(u(),d("div",Vi,[s("label",{for:"field-"+h+"-"+_+"-"+B},[s("span",Ci,b(p.label),1),s("span",Oi,b(p.reqd===1?"*":""),1)],8,Di),p.fieldtype=="Select"||p.fieldtype=="multiselect"?N((u(),d("select",{key:0,multiple:p.fieldtype=="multiselect","onUpdate:modelValue":T=>p.value=T,class:"form-select mb-2 font-13"},[(u(!0),d(L,null,E((S=p.options)==null?void 0:S.split(`
`),(T,X)=>(u(),d("option",{key:X,value:T},b(T),9,Bi))),128))],8,Li)),[[Ge,p.value]]):p.fieldtype=="Check"||p.fieldtype=="radio"?(u(),d("div",Fi,[s("div",Ai,[(u(!0),d(L,null,E((le=p==null?void 0:p.options)==null?void 0:le.split(`
`),(T,X)=>(u(),d("div",{class:"form-check col-4 mb-4",key:X},[s("div",Ti,[s("div",null,[s("input",{class:"form-check-input",type:p.fieldtype,name:T,id:T,readonly:""},null,8,Ei)]),s("div",null,[s("label",{class:"form-check-label m-0",for:T},b(T),9,Mi)])])]))),128))])])):p.fieldtype=="Attach"?(u(),d("input",{key:2,type:"file",id:"field-"+h+"-"+_+"-"+B,class:"form-control previewInputHeight",onChange:T=>l.handleFileChange(T,p),disabled:""},null,40,Ni)):(u(),d(L,{key:3},[p.fieldtype==="Datetime"?N((u(),d("input",{key:0,type:"datetime-local","onUpdate:modelValue":T=>p.value=T,placeholder:"Enter "+p.label,name:"field-"+h+"-"+_+"-"+B,class:"form-control previewInputHeight"},null,8,Ui)),[[ie,p.value]]):$("",!0),p.fieldtype!=="Datetime"?(u(),j(jt(St(p.fieldtype)),{key:1,readonly:"",modelValue:p.value,"onUpdate:modelValue":T=>p.value=T,placeholder:"Enter "+p.label,type:p.fieldtype,name:"field-"+h+"-"+_+"-"+B,class:"form-control previewInputHeight font-10"},null,8,["modelValue","onUpdate:modelValue","placeholder","type","name"])):$("",!0)],64))])):$("",!0)])}),128))])]))),128))]))),128))])]))),128))]))),128))])):$("",!0)])])):$("",!0)])])])])])])]),s("div",Ri,[s("div",ji,[s("span",Pi," Add designation for "+b(Q.value==0?"Requestor":"Approver"),1),e[52]||(e[52]=s("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),s("div",Hi,[s("div",qi,[J.value.length?(u(),d("div",zi,[N(s("input",{type:"checkbox",id:"selectAll","onUpdate:modelValue":e[15]||(e[15]=i=>ce.value=i),class:"designationCheckBox position-absolute bg-transparent form-control border-0 ms-1"},null,512),[[be,ce.value]]),e[53]||(e[53]=s("label",{for:"selectAll fw-bold",class:"SelectallDesignation"},"Select all",-1))])):$("",!0)]),J.value.length?(u(),d("ul",Gi,[(u(!0),d(L,null,E(J.value,(i,n)=>(u(),d("li",{key:n,class:"designationList"},[N(s("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=f=>q.value=f),value:i,class:"designationCheckBox",onChange:xe},null,40,Ki),[[be,q.value]]),s("span",Wi,b(i),1)]))),128))])):(u(),d("div",Ji,e[54]||(e[54]=[s("div",{class:"d-flex justify-content-center"},[s("span",null,"No Designations Found")],-1)])))]),s("div",Qi,[s("div",Xi,[V(We,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:Ie,name:" Add Designations"})])])])]))}},to=Et(Yi,[["__scopeId","data-v-136db9ec"]]);export{to as default};
