var vt=Object.defineProperty,gt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var bt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var Re=(w,p,f)=>p in w?vt(w,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):w[p]=f,ae=(w,p)=>{for(var f in p||(p={}))bt.call(p,f)&&Re(w,f,p[f]);if(Ae)for(var f of Ae(p))_t.call(p,f)&&Re(w,f,p[f]);return w},oe=(w,p)=>gt(w,yt(p));var $e=(w,p,f)=>new Promise((U,X)=>{var se=V=>{try{Q(f.next(V))}catch(R){X(R)}},A=V=>{try{Q(f.throw(V))}catch(R){X(R)}},Q=V=>V.done?U(V.value):Promise.resolve(V.value).then(se,A);Q((f=f.apply(w,p)).next())});import{_ as ht,e as j,d,w as H,o as i,c as r,b as a,j as y,a as c,x as z,t as g,h as u,y as O,z as D,v as Z,A as G,C as re,D as de,H as ue,I as Y,B as ve,G as Et,P as kt,T as xt,i as wt,E as Ct,l as h,m as E,k as _,p as x,J as K}from"./index-DU0Ahx_I.js";const St={class:"d-flex justify-content-between align-items-center py-2"},It={class:"modal fade",id:"createDepartments","data-bs-backdrop":"static",tabindex:"-1","data-bs-keyboard":"false","aria-labelledby":"createDepartmentsLabel","aria-hidden":"true"},Dt={class:"modal-dialog modal-lg"},Vt={class:"modal-content"},Nt={class:"modal-body"},Lt={class:"container-fluid"},Pt={class:"row"},Ut={class:"col"},At={class:"mb-3"},Rt={key:0,class:"text-danger font-11 ps-1"},$t={class:"mb-3"},Tt={key:0,class:"text-danger font-11 ps-1"},Mt={class:"col"},zt={class:"position-relative mb-3"},Bt={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},Ft=["onClick"],jt={class:"modal-dialog"},Ot={class:"modal-content"},Xt={class:"modal-header"},Jt={class:"modal-body"},qt={class:"modal-footer"},Wt={class:"mb-3 font-11"},Ht={key:0,style:{"max-width":"100px","max-height":"100px"},class:"d-flex justify-center position-relative mt-2"},Zt=["src"],Gt={class:"modal-footer"},Yt={key:0,class:"font-16 me-1"},Kt={key:1},Qt={key:2,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},el={key:0,class:"mt-2"},tl={key:1},ll={class:"bulkemployee"},al={class:"insideBulkEmp"},ol={class:"d-flex justify-content-center align-content-center mb-5 gap-2"},sl={key:0,class:"loader"},nl={class:"table-container"},il={key:0,class:"d-flex justify-content-end align-content-center p-2"},rl={key:1,class:"warning-box"},dl={key:2,class:"styled-table"},ul={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ml={class:"modal-dialog modal-lg"},pl={class:"modal-content"},cl={class:"modal-body"},fl={class:"container-fluid"},vl={class:"row"},gl={class:"col"},yl={class:"mb-3"},bl={class:"input-container"},_l={key:0,class:"text-danger font-11 ps-1"},hl={class:"mb-3"},El={class:"input-container"},kl={key:0,class:"text-danger font-11 ps-1"},xl={class:"col"},wl={class:"position-relative mb-3"},Cl={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},Sl=["onClick"],Il={class:"modal-dialog"},Dl={class:"modal-content"},Vl={class:"modal-header"},Nl={class:"modal-body"},Ll={class:"modal-footer"},Pl={class:"mb-3 font-11"},Ul={key:0,class:"d-flex justify-center position-relative mt-2"},Al=["src"],Rl={class:"modal-footer"},$l={__name:"EmployeeComp",setup(w){const p=j(()=>Ct.value),f=d(!0),U=d([]),X=d(""),se=d(0),A=d([]),Q=d([]),V=d([]),R=d([]),I=d(""),ge=d(null),J=d(!1),o=d({emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",company_field:"",signature:""});H(()=>o.reporting_to,t=>{if(t){const e=P.find(l=>l.emp_mail_id===t);e?(o.reporting_designation=e.designation||"",console.log(o.reporting_designation,t,o.reporting_to)):o.reporting_designation=""}else o.reporting_designation=""});const $=d(null),me=d(""),v=d(""),C=d(!1),N=d([]),k=d([]),ye=d([{th:"Emp ID",td_key:"emp_code"},{th:"Emp Name",td_key:"emp_name"},{th:"Designation",td_key:"designation"},{th:"Department",td_key:"department"},{th:"Signature",td_key:"signature"},{th:"Reports To",td_key:"reporting_to"},{th:"Emp Status",td_key:"enable"}]),ne=d(null),pe=d(0),ce=d(!1),fe=d(""),Te=()=>{ne.value.click()},Me=t=>{const e=t.target.files[0];e&&(Be(e),ne.value&&(ne.value.value=""))},ze=()=>Math.floor(Math.random()*1e6),Be=t=>{let l=`${ze()}-@${t.name}`;const s=new FormData;s.append("file",t,l),s.append("is_private","0"),s.append("folder","Home"),ce.value=!0,pe.value=0,h.post(E.uploadfile,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{pe.value=Math.round(n.loaded/n.total*100)}}).then(n=>{n.message&&n.message.file_url?(fe.value=n.message.file_url,n.message.file_url&&fe.value&&Fe()):_.error("File upload failed: file_url not found in response.")}).catch(n=>{console.error("Upload error:",n),_.error("File upload failed. Please try again.")}).finally(()=>{setTimeout(()=>{ce.value=!1,pe.value=0},2e3)})},Fe=()=>{const t={file:fe.value,doctype:x.EzyEmployeeList};h.post(E.uploadbulkEmployeefile,t).then(e=>{var l;if(!(e!=null&&e.data)){_.error("Import response not found.");return}if(k.value=e.data,e.data.success===!1){let s=e._error_message||e.data.message||"Import failed.";if(s=s.replace(/\s*\(.*?\)\s*/g,"").trim(),_.error(s),e.data._server_messages)try{const n=JSON.parse(e.data._server_messages);Array.isArray(n)&&n.forEach(m=>{let M=JSON.parse(m).message||"Permission error.";M=M.replace(/\s*\(.*?\)\s*/g,"").trim(),_.error(M)})}catch(n){console.error("Error parsing _server_messages:",n)}return}(l=k.value.template_warnings)!=null&&l.length&&k.value.template_warnings.forEach(s=>{_.warning(`Warning: ${s}`)}),k.value.records&&(k.value.records=k.value.records.map(s=>oe(ae({},s),{message:s.message}))),k.value.template_status==="success"?_.success("Bulk data imported successfully!"):k.value.template_status==="failed"?_.error(`Import Failed: ${k.value.message}`):k.value.status==="Partial Success"&&_.warning("Partial Success: Some records failed.")}).catch(e=>{console.error("Upload error:",e),_.error("Upload failed. Please try again.")})},ie=j(()=>{var e;return(((e=k.value)==null?void 0:e.records)||[]).map((l,s)=>{let n="N/A",m="N/A";try{if(l.status.toLowerCase()==="success")n=be(l.message),m="Successfully imported";else if(l.status.toLowerCase()==="failed"){const S=JSON.parse(l.message);if(Array.isArray(S)&&S.length>0){m=S[0].title||"Unknown Issue";const M=je(S);M?(n=M,m="Invalid Email Address"):n=be(S)}}}catch(S){m="Parsing Error"}return{sNo:s+1,email:n,status:l.status,displayMessage:m}})}),be=t=>{var e,l,s;return typeof t=="string"&&(t=t.toLowerCase(),t.includes("successfully imported "))?t.split("successfully imported ")[1]||"N/A":Array.isArray(t)&&((s=(l=(e=t[0])==null?void 0:e.message)==null?void 0:l.match(/<strong>(.*?)<\/strong>/))==null?void 0:s[1])||"N/A"},je=t=>{if(Array.isArray(t)){for(const e of t)if(e.message.includes("is not a valid Email Address"))return e.message.split(" is not a valid Email Address")[0]}return null},_e=j(()=>{var t;return((t=k.value)==null?void 0:t.template_warnings)||[]}),Oe=()=>{const t=window.XLSX;if(!t){console.error("XLSX library is not loaded.");return}const e=t.utils.json_to_sheet(ie.value),l=t.utils.book_new();t.utils.book_append_sheet(l,e,"Records");const s=t.write(l,{bookType:"xlsx",type:"array"}),n=new Blob([s],{type:"application/octet-stream"}),m=document.createElement("a");m.href=URL.createObjectURL(n),m.download="Records.xlsx",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Xe=()=>$e(this,null,function*(){const t=p.value,l=yield(yield fetch("/assets/ezy_forms/ezyformsfrontend/Employee_import.xlsx")).arrayBuffer(),s=XLSX.read(l,{type:"array"}),n=s.SheetNames[0],m=s.Sheets[n];m.A2={t:"s",v:t};const S=XLSX.utils.decode_range(m["!ref"]);S.e.r<1&&(S.e.r=1),m["!ref"]=XLSX.utils.encode_range(S);const M=XLSX.write(s,{bookType:"xlsx",type:"array"}),ft=new Blob([M],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),le=document.createElement("a");le.href=URL.createObjectURL(ft),le.setAttribute("download","Employee_import.xlsx"),document.body.appendChild(le),le.click(),document.body.removeChild(le)}),L=d(""),he=()=>{var l;const t=(l=W.value||o.value.emp_mail_id)==null?void 0:l.trim().toLowerCase();/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?P.value.some(n=>{var m;return((m=n.emp_mail_id)==null?void 0:m.toLowerCase())===t})?L.value="Email already exists":L.value="":L.value="Invalid email address"};function Je(){f.value=!1}function qe(){f.value=!0}const T=d(!0),q=d(""),We=j(()=>T.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),Ee=t=>(t=t.replace(/\D/g,""),t.startsWith("91")&&t.length===12?t="+"+t:t.length===10&&(t="+91"+t),t);H(()=>o.value.emp_phone,t=>{t.startsWith("+91")||(o.value.emp_phone=Ee(t)),T.value||(q.value=o.value.emp_phone)},{immediate:!0});const ke=()=>{let t=o.value.emp_phone||"";if(t=Ee(t),/^\+91\d{10}$/.test(t))I.value="";else{I.value="Phone number must start with +91 and have 10 digits.";return}q.value=t,o.value.emp_phone=T.value?"+91 ******"+t.slice(-4):t},He=()=>{q.value&&(T.value&&!window.confirm("Are you sure you want to see the phone number?")||(T.value=!T.value,o.value.emp_phone=T.value?"+91 ******"+q.value.slice(-4):q.value))},Ze=()=>{let t=q.value.replace("+91","");/^\d{10}$/.test(t)?I.value="":I.value="Phone number must be 10 digits."},B=d(!0),W=d(""),Ge=j(()=>B.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),xe=()=>{if(!B.value||!o.value.emp_mail_id.includes("@"))return;W.value=o.value.emp_mail_id;const[t,e]=W.value.split("@");t.length>3&&(o.value.emp_mail_id=t.slice(0,3)+"***@"+e)},Ye=()=>{W.value&&(B.value&&!window.confirm("Are you sure you want to see the email address?")||(B.value=!B.value,o.value.emp_mail_id=B.value?Ke(W.value):W.value))},Ke=t=>{const[e,l]=t.split("@");return e.length>3?e.slice(0,3)+"***@"+l:t},Qe=t=>{let e=t.target.value;e=e.replace(/[^0-9+]/g,""),e.startsWith("+91")||(e="+91"+e.replace(/^91/,"")),e.length>13&&(e=e.slice(0,13)),o.value.emp_phone=e},et=()=>{if(o.value.emp_phone){const t=o.value.emp_phone.replace("+91",""),e=/^\d{10}$/;I.value=e.test(t)?"":"Invalid phone number."}},b=d({limitPageLength:20,limit_start:0}),ee=d("");H(C,t=>{t&&(ee.value=v.value)});const we=()=>{const t=v.value.toLowerCase().trim();N.value=A.value.filter(e=>e.toLowerCase().includes(t))},Ce=t=>{o.value.designation=t,v.value=t,N.value=[]},Se=j(()=>{const t=v.value.trim();return t&&!A.value.includes(t)&&t.length>1}),Ie=()=>{const t=v.value.trim();t&&h.post(E.resource+x.roles,{role_name:t}).then(e=>{var l;(l=e.data)!=null&&l.role_name&&h.post(E.resource+x.designations,{role:e.data.role_name}).then(s=>{var n;(n=s.data)!=null&&n.role&&(A.value.push(s.data.role),o.value.designation=s.data.role,v.value=s.data.role,N.value=[],C.value=!1)})}).catch(e=>{console.error("Error creating role:",e)})},De=()=>{o.value.signature=null;const t=document.getElementById("signatureInput");t&&(t.value="")};H(()=>o.value.reporting_to,t=>{if(t){const e=U.value.find(l=>l.emp_mail_id===t);e&&(o.value.reporting_designation=e.designation)}},{immediate:!0});const tt=d([{name:"Edit Employee",icon:"fa-solid fa-eye"}]),lt=j(()=>[o.value.emp_code,o.value.emp_name,o.value.emp_mail_id,o.value.department,o.value.designation].every(t=>t&&t.toString().trim()!==""));function at(){Ne(),Ue(),Pe()}function ot(t,e){(e==null?void 0:e.name)==="Edit Employee"&&(t?(I.value="",L.value="",o.value=oe(ae({},t),{department:""}),v.value=t.designation||"",Ne(()=>{const s=R.value.find(n=>n.name===t.department);o.value.department=s||""}),Ue(),Pe(),T.value=!0,B.value=!0,ke(),xe(),new bootstrap.Modal(document.getElementById("exampleModal"),{}).show()):(console.warn("No form fields provided."),formCreation(t)))}function st(t){$.value=t;const e=t.enable==="1"||t.enable===1;me.value=e?"Disable":"Enable",document.getElementById("empActionText").innerText=me.value,document.getElementById("empRowName").innerText=t.emp_name,new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show()}function nt(){const t=$.value.enable==="1"||$.value.enable===1;$.value.enable=t?0:1,h.put(`${E.resource}${x.EzyEmployeeList}/${$.value.name}`,$.value).then(()=>{const e={enabled:$.value.enable};return h.put(`${E.resource}${x.users}/${$.value.name}`,e)}).then(()=>{_.success(`Employee ${me.value}d successfully`),window.location.reload()}).catch(e=>{console.error("Toggle employee error:",e)})}const it=d({emp_code:{type:"input"},emp_name:{type:"input"},designation:{type:"input"}});function te(){o.value={emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",signature:null,company_field:p.value};const t=document.getElementById("signatureInput");t&&(t.value="")}function Ve(t){const e=t.target.files[0];e&&rt(e)}const rt=(t,e)=>{let l=`${t.name}`;const s=new FormData;s.append("file",t,l),s.append("is_private","0"),s.append("folder","Home"),h.post(E.uploadfile,s).then(n=>{n.message&&n.message.file_url?o.value.signature=n.message.file_url:console.error("file_url not found in the response.")}).catch(n=>{console.error("Upload error:",n)})};function Ne(t){const e={fields:JSON.stringify(["*"]),limit_page_length:"None",limit_start:b.value.limit_start};h.get(E.resource+x.departments,{params:e}).then(l=>{l.data&&(R.value=l.data,t&&t())}).catch(l=>{console.error("Error fetching department data:",l)})}const dt=t=>{b.value.limitPageLength=t,b.value.limit_start=0,F()},ut=([t,e])=>{b.value.limitPageLength=t,b.value.limit_start=e,F()},Le=d(null);function mt(t){clearTimeout(Le.value),Le.value=setTimeout(()=>{b.value.filters=[],ye.value.forEach(e=>{const l=e.td_key;t[l]&&b.value.filters.push([l,"like",`%${t[l]}%`])}),b.value.filters.length?(b.value.limit_start=0,F(b.value.filters)):F()},500)}function F(t){const e=[["company_field","like",`%${X.value}%`]];t&&e.push(...t);const l={fields:JSON.stringify(["*"]),filters:JSON.stringify(e),limit_page_length:b.value.limitPageLength,limit_start:b.value.limit_start,order_by:"`tabEzy Employee`.`enable` DESC,`tabEzy Employee`.`creation` DESC"},s={fields:JSON.stringify(["count(name) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(e)};h.get(`${E.resource}${x.EzyEmployeeList}`,{params:s}).then(n=>{se.value=n.data[0].total_count}).catch(n=>{console.error("Error fetching ezyForms data:",n)}),h.get(E.resource+x.EzyEmployeeList,{params:l}).then(n=>{if(n.data){const m=n.data;b.value.limit_start===0?U.value=m:U.value=U.value.concat(m)}}).catch(n=>{console.error("Error fetching department data:",n)})}const P=d([]);function Pe(){const t={fields:JSON.stringify(["*"]),limit_page_length:"None",filters:JSON.stringify([["company_field","like",`%${X.value}%`]]),order_by:"`tabEzy Employee`.`creation` desc"};h.get(E.resource+x.EzyEmployeeList,{params:t}).then(e=>{if(e.data){const l=e.data;b.value.limit_start===0?(P.value=l,Q.value=[...new Set(e.data.map(s=>s.reporting_to))],V.value=[...new Set(e.data.map(s=>s.reporting_designation))],o.value.company_field=p.value):P.value=P.value.concat(l)}}).catch(e=>{console.error("Error fetching department data:",e)})}H(()=>o.value.reporting_to,t=>{const e=P.value.find(l=>l.emp_mail_id===t);o.value.reporting_designation=e==null?void 0:e.designation},{immediate:!0});function Ue(){const t=[],e={fields:JSON.stringify(["*"]),filters:JSON.stringify(t),limit_page_length:"None",limit_start:b.value.limit_start,order_by:"`tabWF Roles`.`creation` desc"};h.get(E.resource+x.designations,{params:e}).then(l=>{l.data&&(A.value=[...new Set(l.data.map(s=>s.role))])}).catch(l=>{console.error("Error fetching designations data:",l)})}H(p,t=>{t&&t.length&&(o.value.company_field=t,X.value=t,F())},{immediate:!0});function pt(){var e;if(!lt.value){_.error("Please fill all required fields",{autoClose:1e3,transition:"zoom"});return}if(L.value){_.error("Employee Email Id already exists",{autoClose:1e3,transition:"zoom"});return}o.value.company_field=p.value;const t=oe(ae({},o.value),{department:((e=o.value.department)==null?void 0:e.name)||"",doctype:x.EzyEmployeeList});console.log(t),J.value=!0,h.post(E.resource+x.EzyEmployeeList,t).then(l=>{if(l.data){_.success("Employee Created",{autoClose:500,transition:"zoom"}),bootstrap.Modal.getInstance(document.getElementById("createDepartments")).hide(),te();const n=document.getElementById("signatureInput");n&&(n.value=""),F(),J.value=!1}}).catch(l=>{console.error("Error creating employee:",l)}).finally(()=>{J.value=!1})}function ct(){var e;if(!o.value.designation&&v.value&&(o.value.designation=v.value),o.value.reporting_to){const l=P.value.find(s=>s.emp_mail_id===o.value.reporting_to);l&&(o.value.reporting_designation=l.designation)}else o.value.reporting_designation="";const t=oe(ae({},o.value),{department:((e=o.value.department)==null?void 0:e.name)||""});h.put(`${E.resource}${x.EzyEmployeeList}/${o.value.name}`,t).then(l=>{l.data&&(_.success("Changes Saved",{autoClose:500,transition:"zoom"}),F())}).catch(l=>{console.error("Error saving employee:",l)})}return(t,e)=>(i(),r("div",null,[a("div",null,[a("div",St,[e[39]||(e[39]=a("div",null,[a("h1",{class:"m-0 font-13"}," Employees ")],-1)),a("div",{class:"d-flex align-items-center gap-2"},[a("button",{type:"button",class:"btn btn-light CreateDepartments font-12",onClick:Je}," Import Employees "),a("button",{type:"button",class:"btn btn-dark CreateDepartments","data-bs-toggle":"modal","data-bs-target":"#createDepartments",onClick:at}," Create Employee ")]),a("div",It,[a("div",Dt,[a("div",Vt,[a("div",{class:"modal-header"},[e[24]||(e[24]=a("h5",{class:"modal-title",id:"createDepartmentsLabel"}," Employee Creation ",-1)),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:te,"aria-label":"Close"})]),a("div",Nt,[a("div",Lt,[a("div",Pt,[a("div",Ut,[e[27]||(e[27]=a("label",{class:"font-13 ps-1",for:"emp_name"},[y("Emp Name"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter Emp Name",modelValue:o.value.emp_name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.emp_name=l)},null,8,["modelValue"]),e[28]||(e[28]=a("label",{class:"font-13 ps-1",for:"emp_code"},[y("Emp ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter Emp ID",modelValue:o.value.emp_code,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.emp_code=l)},null,8,["modelValue"]),a("div",At,[e[25]||(e[25]=a("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),c(z,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"13",onInput:Qe,onChange:et,placeholder:"Enter Phone Number",modelValue:o.value.emp_phone,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.emp_phone=l)},null,8,["modelValue"]),I.value?(i(),r("p",Rt,g(I.value),1)):u("",!0)]),a("div",$t,[e[26]||(e[26]=a("label",{class:"font-13 ps-1",for:"emp_mail_id"},[y("Emp Mail ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-1",tag:"input",type:"email",name:"emp_mail_id",onChange:he,required:!0,id:"emp_mail_id",placeholder:"Enter Email",modelValue:o.value.emp_mail_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.emp_mail_id=l)},null,8,["modelValue"]),L.value?(i(),r("p",Tt,g(L.value),1)):u("",!0)]),e[29]||(e[29]=a("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[y("Departments"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(Z(G),{modelValue:o.value.department,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.department=l),options:R.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:O(({values:l,isOpen:s})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-10"},g(l.map(n=>n.department_name).join(", ")),513)),[[K,!s]]):u("",!0)]),_:1},8,["modelValue","options"])]),a("div",Mt,[a("div",zt,[e[34]||(e[34]=a("label",{class:"font-13 ps-1",for:"Designation"},[y(" Designation"),a("span",{class:"text-danger ps-1"},"*")],-1)),D(a("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l),onInput:we,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[re,v.value]]),v.value&&(N.value.length||Se.value)?(i(),r("ul",Bt,[(i(!0),r(de,null,ue(N.value,(l,s)=>(i(),r("li",{key:s,class:"list-group-item list-group-item-action font-12",onClick:n=>Ce(l),style:{cursor:"pointer"}},g(l),9,Ft))),128)),v.value&&N.value.length===0?(i(),r("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[6]||(e[6]=l=>C.value=!0)},[e[30]||(e[30]=y(' ➕ Create role "')),a("strong",null,g(v.value),1),e[31]||(e[31]=y('" '))])):u("",!0)])):u("",!0),C.value?(i(),r("div",{key:1,class:Y(["modal fade",{show:C.value}]),style:{display:"block"}},[a("div",jt,[a("div",Ot,[a("div",Xt,[e[32]||(e[32]=a("h5",{class:"modal-title"},"Create New Role",-1)),a("button",{type:"button",class:"btn-close",onClick:e[7]||(e[7]=l=>C.value=!1)})]),a("div",Jt,[e[33]||(e[33]=a("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),D(a("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[8]||(e[8]=l=>ee.value=l),placeholder:"Enter role name"},null,512),[[re,ee.value]])]),a("div",qt,[a("button",{class:"btn btn-secondary",onClick:e[9]||(e[9]=l=>C.value=!1)},"Cancel"),a("button",{class:"btn btn-dark",onClick:Ie},"Save Role")])])])],2)):u("",!0)]),e[36]||(e[36]=a("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),c(Z(G),{modelValue:o.value.reporting_to,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.reporting_to=l),options:P.value.map(l=>l.emp_mail_id),multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:O(({values:l,isOpen:s})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[K,!s]]):u("",!0)]),_:1},8,["modelValue","options"]),e[37]||(e[37]=a("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),c(Z(G),{modelValue:o.value.reporting_designation,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.reporting_designation=l),options:A.value,"allow-empty":!0,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!o.value.reporting_to},{selection:O(({values:l,isOpen:s})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-10"},g(l.join(", "))+" selected ",513)),[[K,!s]]):u("",!0)]),_:1},8,["modelValue","options","disabled"]),a("div",Wt,[e[35]||(e[35]=a("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),a("input",{type:"file",ref_key:"signatureInputRef",ref:ge,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Ve,"aria-describedby":"fileHelpId"},null,544),o.value.signature?(i(),r("div",Ht,[a("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:De}),a("img",{src:o.value.signature,style:{"max-width":"100px","max-height":"100px"},alt:"Signature",class:"img-fluid signature-img border-1"},null,8,Zt)])):u("",!0)])])])])]),a("div",Gt,[c(ve,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:te,"data-bs-dismiss":"modal"}),a("button",{type:"button",class:"applyfilter btn btn-dark text-nowrap font-10 d-flex justify-content-center align-items-center",onClick:pt},[J.value?u("",!0):(i(),r("span",Yt,e[38]||(e[38]=[a("i",{class:"bi bi-check2"},null,-1)]))),J.value?u("",!0):(i(),r("span",Kt,"Create Employee")),J.value?(i(),r("span",Qt)):u("",!0)])])])])])]),f.value?(i(),r("div",el,[c(Et,{tHeaders:ye.value,tData:U.value,isAction:"true",actions:tt.value,enableDisable:"true",onActionClicked:ot,onToggleClick:st,actionType:"dropdown",isCheckbox:"true",isFiltersoption:"true","field-mapping":it.value,onUpdateFilters:mt},null,8,["tHeaders","tData","actions","field-mapping"]),c(kt,{currentRecords:U.value.length,totalRecords:se.value,onUpdateValue:dt,onLimitStart:ut},null,8,["currentRecords","totalRecords"])])):(i(),r("div",tl,[a("div",ll,[a("div",{class:"d-flex justify-content-between align-content-center"},[a("button",{type:"button",class:"font-12 btn btn-light",onClick:qe},e[40]||(e[40]=[a("i",{class:"bi bi-chevron-left"},null,-1),y(" Back to Employee List ")]))]),a("div",al,[a("div",ol,[a("div",{class:Y(k.value.length?"":"mb-5 mt-5")},[a("button",{type:"button",class:"font-12 my-1 btn btn-light",onClick:Xe},e[41]||(e[41]=[a("i",{class:"bi bi-download"},null,-1),y(" Use template ")])),a("input",{type:"file",ref_key:"fileInput",ref:ne,onChange:Me,hidden:""},null,544),a("button",{type:"button",class:"font-12 my-1 btn btn-dark",onClick:Te},e[42]||(e[42]=[a("i",{class:"bi bi-upload"},null,-1),y(" Upload Data ")]))],2)]),c(xt,{name:"fade"},{default:O(()=>[ce.value?(i(),r("div",sl)):u("",!0)]),_:1}),a("div",null,[a("div",nl,[ie.value.length>0?(i(),r("div",il,[a("button",{type:"button",class:"btn btn-light font-12",onClick:Oe},e[43]||(e[43]=[a("i",{class:"bi bi-download mx-2"},null,-1),y("Download Excel")]))])):u("",!0),_e.value.length?(i(),r("div",rl,[e[44]||(e[44]=a("h3",{class:"font-13"},"Template Warnings:",-1)),a("ul",null,[(i(!0),r(de,null,ue(_e.value,(l,s)=>(i(),r("li",{key:s},g(l),1))),128))])])):u("",!0),ie.value.length>0?(i(),r("table",dl,[e[45]||(e[45]=a("thead",null,[a("tr",null,[a("th",null,"#"),a("th",null,"Email"),a("th",null,"Status"),a("th",null,"Message")])],-1)),a("tbody",null,[(i(!0),r(de,null,ue(ie.value,(l,s)=>(i(),r("tr",{key:s},[a("td",null,g(s+1),1),a("td",null,g(l.email),1),a("td",{class:Y(l.status==="success"?"status-success":"status-failed")},g(l.status),3),a("td",null,g(l.displayMessage),1)]))),128))])])):u("",!0)])])])])]))]),a("div",ul,[a("div",ml,[a("div",pl,[a("div",{class:"modal-header"},[e[46]||(e[46]=a("h5",{class:"modal-title",id:"viewEmployeeLabel"},"Employee Data",-1)),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:te,"aria-label":"Close"})]),a("div",cl,[a("div",fl,[a("div",vl,[a("div",gl,[e[49]||(e[49]=a("label",{class:"font-13 ps-1",for:"emp_name"},[y("Emp Name"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter department code",modelValue:o.value.emp_name,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.emp_name=l)},null,8,["modelValue"]),e[50]||(e[50]=a("label",{class:"font-13 ps-1",for:"emp_code"},[y("Emp ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter department code",modelValue:o.value.emp_code,"onUpdate:modelValue":e[13]||(e[13]=l=>o.value.emp_code=l)},null,8,["modelValue"]),a("div",yl,[e[47]||(e[47]=a("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),a("div",bl,[c(z,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"10",class:"w-100",readonly:!0,placeholder:"Enter Phone Number",modelValue:o.value.emp_phone,"onUpdate:modelValue":e[14]||(e[14]=l=>o.value.emp_phone=l),onInput:ke,onChange:Ze},null,8,["modelValue"]),a("i",{class:Y([We.value,"eye-icon"]),onClick:He},null,2)]),I.value?(i(),r("p",_l,g(I.value),1)):u("",!0)]),a("div",hl,[e[48]||(e[48]=a("label",{class:"font-13 ps-1",for:"emp_mail_id"},[y("Emp Mail ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),a("div",El,[c(z,{class:"mb-1 w-100",tag:"input",type:"email",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter Email",modelValue:o.value.emp_mail_id,"onUpdate:modelValue":e[15]||(e[15]=l=>o.value.emp_mail_id=l),onInput:xe,onChange:he,required:!0},null,8,["modelValue"]),a("i",{class:Y([Ge.value,"eye-icon"]),onClick:Ye},null,2)]),L.value?(i(),r("p",kl,g(L.value),1)):u("",!0)]),e[51]||(e[51]=a("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[y("Departments"),a("span",{class:"text-danger ps-1"},"*")],-1)),c(Z(G),{modelValue:o.value.department,"onUpdate:modelValue":e[16]||(e[16]=l=>o.value.department=l),options:R.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:O(({values:l,isOpen:s})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-10"},g(l.map(n=>n.department_name).join(", ")),513)),[[K,!s]]):u("",!0)]),_:1},8,["modelValue","options"])]),a("div",xl,[a("div",wl,[e[56]||(e[56]=a("label",{class:"font-13 ps-1",for:"Designation"},[y(" Designation"),a("span",{class:"text-danger ps-1"},"*")],-1)),D(a("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=l=>v.value=l),onInput:we,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[re,v.value]]),v.value&&(N.value.length||Se.value)?(i(),r("ul",Cl,[(i(!0),r(de,null,ue(N.value,(l,s)=>(i(),r("li",{key:s,class:"list-group-item list-group-item-action font-12",onClick:n=>Ce(l),style:{cursor:"pointer"}},g(l),9,Sl))),128)),v.value&&N.value.length===0?(i(),r("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[18]||(e[18]=l=>C.value=!0)},[e[52]||(e[52]=y(' ➕ Create role "')),a("strong",null,g(v.value),1),e[53]||(e[53]=y('" '))])):u("",!0)])):u("",!0),C.value?(i(),r("div",{key:1,class:Y(["modal fade",{show:C.value}]),style:{display:"block"}},[a("div",Il,[a("div",Dl,[a("div",Vl,[e[54]||(e[54]=a("h5",{class:"modal-title"},"Create New Role",-1)),a("button",{type:"button",class:"btn-close",onClick:e[19]||(e[19]=l=>C.value=!1)})]),a("div",Nl,[e[55]||(e[55]=a("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),D(a("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[20]||(e[20]=l=>ee.value=l),placeholder:"Enter role name"},null,512),[[re,ee.value]])]),a("div",Ll,[a("button",{class:"btn btn-secondary",onClick:e[21]||(e[21]=l=>C.value=!1)},"Cancel"),a("button",{class:"btn btn-dark",onClick:Ie},"Save Role")])])])],2)):u("",!0)]),e[58]||(e[58]=a("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),c(Z(G),{modelValue:o.value.reporting_to,"onUpdate:modelValue":e[22]||(e[22]=l=>o.value.reporting_to=l),options:P.value.map(l=>l.emp_mail_id),multiple:!1,"close-on-select":!0,"allow-empty":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:O(({values:l,isOpen:s})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[K,!s]]):u("",!0)]),_:1},8,["modelValue","options"]),e[59]||(e[59]=a("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),c(Z(G),{modelValue:o.value.reporting_designation,"onUpdate:modelValue":e[23]||(e[23]=l=>o.value.reporting_designation=l),options:A.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!o.value.reporting_to},{selection:O(({values:l,isOpen:s})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-10"},g(l.join(", "))+" selected ",513)),[[K,!s]]):u("",!0)]),_:1},8,["modelValue","options","disabled"]),a("div",Pl,[e[57]||(e[57]=a("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),a("input",{type:"file",ref_key:"signatureInputRef",ref:ge,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Ve,"aria-describedby":"fileHelpId"},null,544),o.value.signature?(i(),r("div",Ul,[a("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:De}),a("img",{src:o.value.signature,alt:"Signature",class:"img-fluid signature-img"},null,8,Al)])):u("",!0)])])])])]),a("div",Rl,[c(ve,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:te,"data-bs-dismiss":"modal"}),c(ve,{type:"button",class:"btn btn-dark font-11",name:"Save Employee","data-bs-dismiss":"modal",onClick:ct})])])])]),a("div",{class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},[a("div",{class:"modal-dialog modal-dialog-centered"},[a("div",{class:"modal-content"},[e[61]||(e[61]=wt('<div class="modal-header" data-v-32a6a08e><h5 class="modal-title" data-v-32a6a08e>Confirm Employee Status</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-32a6a08e></button></div><div class="modal-body" data-v-32a6a08e> Are you sure you want to <span id="empActionText" data-v-32a6a08e></span> &quot;<span id="empRowName" data-v-32a6a08e></span>&quot;? </div>',2)),a("div",{class:"modal-footer"},[e[60]||(e[60]=a("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),a("button",{type:"button",class:"btn btn-dark",onClick:nt},"Yes, Proceed")])])])])]))}},zl=ht($l,[["__scopeId","data-v-32a6a08e"]]);export{zl as default};
