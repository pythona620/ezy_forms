var Ul=Object.defineProperty,Ol=Object.defineProperties;var Bl=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable;var Xt=(M,S,V)=>S in M?Ul(M,S,{enumerable:!0,configurable:!0,writable:!0,value:V}):M[S]=V,ee=(M,S)=>{for(var V in S||(S={}))xt.call(S,V)&&Xt(M,V,S[V]);if(pt)for(var V of pt(S))It.call(S,V)&&Xt(M,V,S[V]);return M},De=(M,S)=>Ol(M,Bl(S));var Ft=(M,S)=>{var V={};for(var F in M)xt.call(M,F)&&S.indexOf(F)<0&&(V[F]=M[F]);if(M!=null&&pt)for(var F of pt(M))S.indexOf(F)<0&&It.call(M,F)&&(V[F]=M[F]);return V};var Ue=(M,S,V)=>new Promise((F,ne)=>{var oe=K=>{try{v(V.next(K))}catch(ie){ne(ie)}},qe=K=>{try{v(V.throw(K))}catch(ie){ne(ie)}},v=K=>K.done?F(K.value):Promise.resolve(K.value).then(oe,qe);v((V=V.apply(M,S)).next())});import{_ as is,r as _,x as le,o as i,c as r,d as t,i as D,j as U,F as E,h as L,t as g,u as Nl,M as zl,e as ae,E as Pl,w as _e,f as Hl,a6 as es,K as re,y as N,z,U as x,L as $,l as b,a7 as jl,m as h,n as P,b as X,O as xe,R as Se,Q as ts,X as de,v as mt,N as Fe,k as Oe,a8 as ss,B as Wl,a9 as ls,Z as Jl,aa as Yl,S as Gl,H as pe,ab as $t,a2 as os,ac as as,D as ns,ad as Zl}from"./index-CcBin9ca.js";const Kl="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg",Ql={class:"simple-field-library"},Xl={class:"field-search"},xl={class:"field-types-grid"},Il=["onDragstart","onClick"],eo={__name:"SimpleFieldLibrary",props:{fields:{type:Array,required:!0}},emits:["field-add","field-dragstart","field-dragend"],setup(M,{emit:S}){const V=M,F=S,ne=_(""),oe=_(!1),qe=le(()=>{if(!ne.value)return V.fields;const T=ne.value.toLowerCase();return V.fields.filter(te=>te.label.toLowerCase().includes(T))}),v=(T,te)=>{oe.value=!0,T.dataTransfer.effectAllowed="copy",T.dataTransfer.setData("text/plain",te.type),F("field-dragstart",te.type)},K=()=>{oe.value=!1,F("field-dragend")},ie=T=>{F("field-add",T.type)};return(T,te)=>(i(),r("div",Ql,[t("div",Xl,[te[1]||(te[1]=t("i",{class:"bi bi-search"},null,-1)),D(t("input",{"onUpdate:modelValue":te[0]||(te[0]=J=>ne.value=J),type:"text",placeholder:"Search fields",class:"search-input"},null,512),[[U,ne.value]])]),t("div",xl,[(i(!0),r(E,null,L(qe.value,J=>(i(),r("button",{key:J.type,class:"field-type-btn",draggable:!0,onDragstart:Y=>v(Y,J),onDragend:K,onClick:Y=>ie(J)},g(J.label),41,Il))),128))])]))}},to=is(eo,[["__scopeId","data-v-cb64d6f9"]]),so={class:""},lo={class:""},oo={class:"d-flex justify-content-between align-items-center CancelNdSave"},ao={class:"d-flex align-items-center"},no={key:0,class:"font-16"},io=["disabled"],ro={class:"form-container p-0 container-fluid mt-3"},co={class:"row g-4"},uo={class:"col-lg-2 col-md-3 col-sm-12"},po={class:"steps-sticky-div"},mo={class:"steps d-sm-inline-flex d-md-block m-0 p-0"},fo=["onClick"],vo={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},bo={class:"step-text"},_o={class:"font-11"},ho={class:"font-14"},go={class:"col-lg-10 col-md-9 col-sm-12 formbackground-color"},yo={class:"px-2"},wo={class:"form-content stepsDiv"},ko={key:0},Co={class:""},Do={class:"stepperbackground ps-3 pe-3 py-2 m-0 d-flex justify-content-between align-items-center"},So={class:"d-flex gap-2 align-items-center"},Fo=["disabled"],$o={class:"container-fluid aboutFields p-0"},qo={class:"row"},Ao={class:"col-12"},Vo={class:"p-4"},Eo={class:"card border-0 shadow-sm mb-4"},Lo={class:"card-body p-4"},To={class:"row g-4"},Ro={class:"col-md-6"},Mo={class:"position-relative"},Uo={key:0,class:"badge bg-success position-absolute",style:{top:"-8px",right:"10px","z-index":"10"}},Oo={key:1,class:"text-danger font-12 ms-1"},Bo={class:"col-md-6"},No={key:0,class:"text-danger font-12 ms-1"},zo={class:"col-md-6"},Po={class:"card border-0 shadow-sm mb-4"},Ho={class:"card-body p-4"},jo={class:"row g-4"},Wo={class:"col-md-6"},Jo={class:"form-label font-13 fw-medium"},Yo={key:0,class:"text-danger"},Go={class:"col-md-6"},Zo={class:"form-label font-13 fw-medium"},Ko={key:0,class:"text-danger"},Qo={class:"col-md-12"},Xo={class:"form-label font-13 fw-medium"},xo={key:0,class:"text-danger"},Io={class:"custom-option"},ea=["checked","onChange"],ta={class:"card border-0 shadow-sm mb-4"},sa={class:"card-body p-4"},la={class:"row g-4"},oa={class:"col-md-6"},aa={class:"text-muted font-11 ms-1"},na={key:0,class:"text-success"},ia={key:1},ra={class:"col-md-6"},da={key:0,class:"col-md-6"},ca={key:0,class:"card border-0 shadow-sm mb-4"},ua={class:"card-body p-4"},pa={class:"row g-4"},ma={class:"col-md-6"},fa={class:"col-md-6"},va={key:1,class:"card border-0 shadow-sm mb-4"},ba={class:"card-body p-4"},_a={class:"row g-4"},ha={class:"col-md-12"},ga={class:"form-check"},ya=["disabled"],wa={key:0,class:"col-md-12"},ka={class:"position-relative"},Ca=["disabled"],Da={key:0,class:"list-group position-absolute w-100 z-3",style:{"max-height":"200px","overflow-y":"auto"}},Sa=["onMousedown"],Fa={key:1,class:"frappe-form-builder"},$a={class:"frappe-nav-bar"},qa={class:"nav-left"},Aa={class:"nav-center"},Va={class:"btn-group btn-group-sm",role:"group"},Ea=["onClick"],La=["onClick"],Ta={class:"nav-right"},Ra={class:"frappe-builder-container"},Ma={class:"d-flex align-items-center justify-content-between w-100"},Ua={class:"mb-0 font-14 fw-bold"},Oa={class:"btn btn-sm btn-link p-0 text-dark"},Ba={key:0,class:"library-content"},Na={class:"zoho-form-canvas"},za={class:"requestandAppHeader"},Pa={class:"d-flex justify-content-between align-items-center"},Ha={class:""},ja={class:"ps-2 mb-0 fw-bolder font-14 blockTitle"},Wa={class:"text-center ms-2 mt-1"},Ja={key:0,class:"font-12 d-flex align-items-center"},Ya={class:"font-12 approver_type_div"},Ga={class:"font-12 fw-bold"},Za={class:"font-12 text-danger ms-1"},Ka={class:"d-flex align-items-center"},Qa={key:0,class:"role-container"},Xa={key:0,class:"role-text d-flex align-items-center"},xa={class:"role-label fw-bold"},Ia={class:"role-names text-primary"},en=["onClick"],tn=["onClick"],sn=["onClick"],ln=["onClick"],on={class:"pt-0 section_block"},an={class:"d-flex justify-content-between align-items-center"},nn={class:"d-flex flex-column"},rn=["onUpdate:modelValue","onChange","onInput"],dn={key:0,class:"text-danger ps-3 font-10"},cn={class:"d-flex align-items-center"},un=["onClick"],pn={class:"container-fluid"},mn={class:"d-flex justify-content-between align-items-center"},fn={class:"rownames m-0"},vn=["onClick"],bn={class:"col"},_n={class:"row"},hn=["onMouseenter"],gn={class:"column_name d-flex align-items-center justify-content-between"},yn={class:"d-flex flex-column ps-2"},wn=["onUpdate:modelValue","onChange","onInput"],kn={key:0,class:"text-danger ps-2 font-10"},Cn={class:"position-absolute top-0 end-0"},Dn=["onClick"],Sn=["onDrop"],Fn=["onMouseenter","onDragstart","onDrop"],$n=["onDrop"],qn=["onDragstart","onDrop"],An={class:"d-flex justify-content-between"},Vn={class:"flex-column d-flex"},En=["onUpdate:modelValue","onChange","onInput"],Ln={key:0,class:"text-danger font-10"},Tn={class:"FieldcopyRemove"},Rn=["onClick"],Mn=["onClick"],Un=["onUpdate:modelValue","onChange"],On=["value"],Bn={key:0},Nn=["onUpdate:modelValue"],zn={key:0,class:"text-danger font-10"},Pn={key:1},Hn=["for"],jn=["id","onUpdate:modelValue","onInput","onFocus"],Wn={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},Jn=["onClick"],Yn={class:"d-flex align-items-center justify-content-between"},Gn={class:"d-flex align-items-center gap-2"},Zn={class:"d-flex align-items-center"},Kn=["onUpdate:modelValue","id"],Qn=["for"],Xn=["onClick"],xn=["onUpdate:modelValue"],In={key:3,class:"text-danger font-10"},ei=["onDrop"],ti={class:"childtableShow"},si={class:"mt-2"},li={key:0,class:"childTableContainer"},oi={key:0,class:"font-13"},ai={key:1,class:"d-flex align-items-center gap-2"},ni={class:"d-flex align-items-center"},ii=["onUpdate:modelValue"],ri=["onClick"],di={key:2,class:"table table-bordered rounded-table"},ci=["onDrop"],ui=["draggable","onDragstart"],pi={key:0},mi=["onUpdate:modelValue","onInput"],fi={key:0,class:"text-danger font-11"},vi={key:1},bi={key:2},_i={class:"d-flex gap-1"},hi=["onUpdate:modelValue","onChange"],gi=["value"],yi={class:"d-flex"},wi={class:"d-flex align-items-center gap-2"},ki={class:"d-flex align-items-center"},Ci=["onUpdate:modelValue"],Di=["onClick"],Si={key:0},Fi=["onUpdate:modelValue","onInput"],$i={key:0,class:"text-danger font-10"},qi={key:1,class:"font-11 text-danger"},Ai={key:3},Vi={key:3,class:"mb-2 mt-3"},Ei=["onClick"],Li=["onClick"],Ti=["onDrop"],Ri=["onDrop"],Mi={class:"d-flex justify-content-center align-items-center my-2"},Ui=["onClick"],Oi={class:"font-13"},Bi={key:0,class:"d-flex align-items-center gap-2"},Ni={class:"d-flex align-items-center"},zi=["onUpdate:modelValue"],Pi=["onClick"],Hi={class:"table table-bordered rounded-table"},ji={key:0},Wi=["onUpdate:modelValue","onBlur"],Ji={key:0,class:"text-danger font-11 mt-1"},Yi={key:1},Gi={key:2},Zi={class:"d-flex gap-1 align-items-center"},Ki=["onUpdate:modelValue","onChange"],Qi=["value"],Xi=["onClick"],xi={key:0,class:"mt-1"},Ii=["onUpdate:modelValue","onInput"],er={key:1,class:"text-danger font-11 mt-1"},tr={key:3},sr={class:"mb-2"},lr=["onClick"],or=["onClick"],ar=["onClick"],nr={key:0},ir={class:"d-flex justify-content-between align-items-center mt-1 mb-2"},rr=["onUpdate:modelValue","onBlur"],dr={key:0,class:"text-danger font-12"},cr={key:1,class:"text-danger font-12"},ur={class:"d-flex align-items-center gap-2"},pr={class:"d-flex align-items-center"},mr=["onUpdate:modelValue"],fr=["onClick"],vr=["onClick"],br={class:"px-1 field-border"},_r={class:"d-flex justify-content-between"},hr=["onUpdate:modelValue","onBlur"],gr={key:0,class:"text-danger font-12"},yr={class:"d-flex align-items-center"},wr={class:"d-flex my-1"},kr=["onUpdate:modelValue"],Cr=["onClick"],Dr=["onClick"],Sr=["onUpdate:modelValue"],Fr=["value"],$r={key:0},qr=["onUpdate:modelValue"],Ar={key:0,class:"text-danger font-10"},Vr={key:1,class:"text-danger font-12"},Er=["onClick"],Lr=["onClick"],Tr={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},Rr=["onClick"],Mr={key:0,class:"m-2"},Ur={key:0,class:"zoho-properties-panel"},Or={class:"properties-header"},Br={key:2},Nr={class:"stepperbackground d-flex align-items-center justify-content-between p-3"},zr={class:"container-fluid mt-4 p-4"},Pr={class:"card mb-4"},Hr={class:"card-body"},jr={class:"row g-3"},Wr={class:"col-md-6"},Jr={class:"btn-group w-100",role:"group"},Yr={key:0,class:"col-md-6"},Gr={key:0,class:"card mb-4"},Zr={class:"card-body"},Kr={key:0,class:"table-responsive"},Qr={class:"table table-bordered"},Xr=["onUpdate:modelValue"],xr={class:"form-check form-switch"},Ir=["onUpdate:modelValue"],ed={class:"form-check-label font-12"},td=["onClick"],sd=["onClick"],ld={key:1,class:"card mb-4"},od={class:"card-body"},ad={class:"alert alert-success"},nd={class:"table-responsive"},id={class:"table table-bordered"},rd={key:0,class:"badge bg-success"},dd={key:1,class:"badge bg-secondary"},cd={class:"text-muted"},ud={key:2,class:"card mb-4"},pd={class:"card-body"},md={class:"alert alert-success"},fd={class:"table-responsive"},vd={class:"table table-bordered table-hover"},bd={class:"badge bg-dark"},_d={key:0,class:"badge bg-danger"},hd={key:1,class:"badge bg-secondary"},gd={key:0,class:"badge bg-info"},yd={key:1,class:"badge bg-warning text-dark"},wd={key:2,class:"badge bg-success"},kd={key:3,class:"badge bg-secondary"},Cd={class:"text-muted"},Dd={key:3},Sd={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},Fd={class:"modal-dialog modal-dialog-centered"},$d={class:"modal-content"},qd={class:"modal-body"},Ad=["placeholder"],Vd={class:"d-flex align-items-center gap-2"},Ed={class:"d-flex align-items-center py-2"},Ld={class:"modal fade",id:"formViewModal",tabindex:"-1","aria-labelledby":"formViewModalLabel","aria-hidden":"true"},Td={class:"modal-dialog modal-xl modal-dialog-scrollable"},Rd={class:"modal-content"},Md={class:"modal-body"},Ud={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},Od={class:"offcanvas-header add_designationHeader"},Bd={id:"offcanvasRightLabel",class:"font-14 fw-bold"},Nd={class:"offcanvas-body add_desig_offCanvas_body p-0"},zd={class:""},Pd={key:0,class:"p-3 approval-border-bottom"},Hd={class:"px-3 listofdesignations"},jd={class:"my-1 d-flex justify-content-between"},Wd={class:"font-12 fw-bold"},Jd={class:"italic-style text-secondary font-12"},Yd={key:0,ref:"resizableDiv",class:"my-1 disgnationlist_div"},Gd={class:"d-flex align-items-center justify-content-between gap-1"},Zd={class:"form-check ps-1 d-flex align-items-center m-0"},Kd=["checked"],Qd={for:"selectAll",class:"form-check-label SelectallDesignation mt-2 fw-bold"},Xd={key:0,class:"form-check d-flex align-items-center m-0"},xd={key:1},Id={key:1,class:"p-3"},ec=["value"],tc={key:2},sc={class:""},lc={class:"px-4 py-1 mt-2 d-flex align-items-center user-select-none"},oc={key:0,class:"px-4 py-1 mt-2 d-flex align-items-center user-select-none"},ac={class:"offcanvas-footer"},nc={class:"text-end p-3"},$e="Select All",ic={__name:"FormStepper",setup(M){const S=Nl(),V=zl(),F=_(1),ne=_([]);_([]);const oe=_([]),qe=_([]);ae([]);let v=ae([]),K=ae([]);const ie=_([]),T=_([]),te=_([]),J=_(""),Y=_(""),H=_("");let O=ae([]);const Be=_("");_(!1),_(!1),_(!1);const Ae=_(""),Ie=_(""),et=_(""),rs=_([]),ds=_([]),A=ae({}),se=_([]),ft=_(!1),tt=_([]),st=_(!1);let qt=null;const cs=_("");let R=_("");const he=_(null),At=_(null);_(null),_(0);const Ne=_(0),Ve=_(!0),Vt=_(!1),Et=_(!1),Lt=_(!1);_(!1);const ze=_([]),me=_(null),fe=_("new"),lt=_([]),Ee=_([]);_([]);const ge=_([]),Le=le(()=>Pl);_(!1);const ot=ae([]),I=_({routepath:S.query.routepath,business_unit:S.query.business_unit,formId:S.query.id}),at=_(""),Te=_(!1),Re=_(!1),Tt=[{label:"Public",value:1},{label:"Private",value:0}],vt=le({get(){return Tt.find(s=>s.value===m.value.as_web_view)},set(s){m.value.as_web_view=s?s.value:null}}),Rt=le({get(){return m.value.form_name||S.query.form_name||""},set(s){m.value.form_name=s}}),m=_({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${Le.value.value||I.value.business_unit||S.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:"",is_linked:0,is_linked_form:"",is_predefined_doctype:S.query.id?1:0,as_web_view:0,mail_id:""});_e(()=>S.query.form_name,s=>{s&&(m.value.form_name=s,m.value.form_short_name=s)},{immediate:!0});const nt=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus","idx","doctype","company_field","business_unit"].map(s=>s.toLowerCase().trim()),Mt=["Approver","Approved on","Approved By"].map(s=>s.toLowerCase().trim());function us(s){return s.toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]/g,"")}le(()=>m.value),_(""),_(!1),_e(Le,s=>{s&&s.value&&(m.value.business_unit=s.value)},{immediate:!0});function ps(s){if(R==null||R==="new")return!1;const e=B(s).roles;if(s===0)return e.length===0;const l=B(s-1).roles;return l.length>0&&l[0]!==null&&l[0]!==""&&e.length===0}_e(()=>m.value.form_name,s=>{m.value.form_name=s.trim()}),_e(()=>m.value.form_short_name,s=>{m.value.form_short_name=s.trim()}),_e(()=>m.value.series,s=>{m.value.series=s.trim()}),_e(()=>fe.value,s=>{s==="existing"&&(v.splice(0,v.length),ge.value=[],O.length=0)});const Pe=_(null),Ut=(s,e,l,o,a,n)=>{Pe.value={blockIndex:e,sectionIndex:l,rowIndex:o,columnIndex:a,fieldIndex:n}},ye=(s,e,l,o,a,n)=>{if(s.preventDefault(),s.stopPropagation(),console.log("Field dropped at index:",{targetBlock:e,targetSection:l,targetRow:o,targetColumn:a,insertIndex:n,draggedField:Pe.value,draggedFieldType:he.value}),he.value){console.log("Dropping from field library:",he.value);const k=Qt(he.value);if(!k){console.error("Failed to create field from type:",he.value);return}const C=v[e];if(!C){x("Target block not found");return}C.sections||(C.sections=[]),C.sections[l]||(C.sections[l]={label:"",rows:[]}),C.sections[l].rows||(C.sections[l].rows=[]),C.sections[l].rows[o]||(C.sections[l].rows[o]={label:"",columns:[]}),C.sections[l].rows[o].columns||(C.sections[l].rows[o].columns=[]),C.sections[l].rows[o].columns[a]||(C.sections[l].rows[o].columns[a]={label:"",fields:[]}),C.sections[l].rows[o].columns[a].fields.splice(n,0,k),console.log("Field added successfully:",k),pe(`${k.label} field added`),he.value=null;return}if(!Pe.value){console.log("No dragged field found");return}const{blockIndex:c,sectionIndex:u,rowIndex:f,columnIndex:d,fieldIndex:p}=Pe.value,w=v[c].sections[u].rows[f].columns[d].fields,q=v[e].sections[l].rows[o].columns[a].fields;if(c===e&&u===l&&f===o&&d===a&&p===n)return;const y=w.splice(p,1)[0];w===q&&p<n&&n--,q.splice(n,0,y),Pe.value=null},Me=_(""),ms=s=>Ue(this,null,function*(){const e=[["module","in",["User Forms"]],["istable","=",1]];s!=null&&s.trim()&&e.push(["name","=",`${s}`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"None",doctype:re.doctypesList};try{return(yield N.get(z.GetDoctypeData,{params:l})).message.data||[]}catch(o){return console.error("Error fetching doctype list:",o),[]}}),it=_(null),Ot=s=>Ue(this,null,function*(){if(Me.value="",it.value=null,s.tableName){let e=s.tableName.trim();if(e.length>64){Me.value="Table name cannot exceed 64 characters";return}if(!/^[a-zA-Z]+( [a-zA-Z]+)*$/.test(e)){Me.value="Table name can only contain letters and spaces (no leading/trailing spaces or special characters)";return}const o=yield ms(e);it.value=o.find(a=>a.name.toLowerCase()===e.toLowerCase()),it.value&&(Me.value="Table already exists"),s.tableName=e}s.label&&(s.fieldname=us(s.label))});function fs(){const s=m.value.is_linked_form;if(!s){tt.value=[];return}clearTimeout(qt),qt=setTimeout(()=>{const e=[["business_unit","=",`${Le.value.value}`],["name","like",`%${s}%`]],l={fields:JSON.stringify(["name"]),limit_page_length:10,limit_start:0,filters:JSON.stringify(e),doctype:re.EzyFormDefinitions,order_by:"`tabEzy Form Definitions`.`enable` DESC, `tabEzy Form Definitions`.`creation` DESC"};N.get(`${z.GetDoctypeData}`,{params:l}).then(o=>{tt.value=o.message.data||[]}).catch(o=>{console.error("Error fetching form definitions:",o)})},300)}function vs(s){m.value.is_linked_form=s,st.value=!1}function bs(){setTimeout(()=>{st.value=!1},200)}ae({query:"",key:""});function ve(s,e,l,o,a){return`${s}-${e}-${l}-${o}-${a}`}ae({});const He=ae({}),bt=ae({});function _s(s){bt[s]=!0}function hs(s,e,l,o,a,n){const c=ve(e,l,o,a,n),u=[["istable","=",0]];s!=null&&s.trim()&&u.push(["name","like",`%${s}%`]);const f={fields:JSON.stringify(["name"]),filters:JSON.stringify(u),limit_page_length:"none",doctype:re.doctypesList};N.get(z.GetDoctypeData,{params:f}).then(d=>{He[c]=d.message.data||[]}).catch(d=>{console.error("Error fetching doctype list:",d),He[c]=[]})}function gs(s,e,l,o,a,n){v[s].sections[e].rows[l].columns[o].fields[a].options=n;const c=ve(s,e,l,o,a);He[c]=[],bt[c]=!1}const ys=le(()=>v!=null&&v.length?H.value===1?[0]:Array.from({length:H.value},(s,e)=>e).filter(s=>s<H.value):[]),be=_(null),we=_(null),ws=(s,e,l,o,a)=>{be.value={blockIndex:s,sectionIndex:e,rowIndex:l,columnIndex:o,fieldIndex:a}},ks=()=>{be.value=null},Cs=(s,e,l,o,a)=>be.value&&be.value.blockIndex===s&&be.value.sectionIndex===e&&be.value.rowIndex===l&&be.value.columnIndex===o&&be.value.fieldIndex===a,Ds=(s,e,l,o)=>{we.value={blockIndex:s,sectionIndex:e,rowIndex:l,columnIndex:o}},Ss=()=>{we.value=null},Fs=(s,e,l,o)=>we.value&&we.value.blockIndex===s&&we.value.sectionIndex===e&&we.value.rowIndex===l&&we.value.columnIndex===o,Bt=_([{form_json:""}]),ke=_("");Hl(()=>{Ht(),ke.value=S.query.Clone,R.value=S.query.id||"new",ke.value==="1"&&(m.value.series=""),R.value!=null&&R.value!=null&&R.value!="new"&&Pt(),sessionStorage.getItem("allow_approver_to_edit_form")=="1"?ft.value=!0:ft.value=!1;let s=localStorage.getItem("Bu");if(m.value.business_unit=s,S.query.preId==="PreDefine"){const e=localStorage.getItem("form_json");if(e){Bt.value[0].form_json=e;const l=Bt.value[0],o=JSON.parse(l.form_json),a=es(o.fields);se.value=o.child_table_fields,a.forEach(n=>{v.push(n)})}}});const Ce=_(null),G=ae({}),Nt=_(null),$s=s=>{Ce.value=s},qs=()=>{Ce.value=null},As=s=>{s.preventDefault()},Vs=(s,e)=>{const l=s.target.closest("tr");if(!l)return;const o=Array.from(l.parentNode.children).indexOf(l);if(o!==Ce.value){const a=e[Ce.value];e.splice(Ce.value,1),e.splice(o,0,a),Ce.value=o}},Es=_([]),_t=s=>{if(["Select","Table MultiSelect","Check","Small Text"].includes(s.fieldtype)&&s.options){const e=s.options.split(`
`).map(a=>a.trim()).filter(a=>a),l=[],o=new Set;return e.forEach(a=>{const n=a.toLowerCase();o.has(n)||(o.add(n),l.push(a))}),`
`+l.join(`
`)}else if(["Link","Table"].includes(s.fieldtype)&&s.options)return s.options.trim();return s.options},Ls=(s,e)=>{const l=v[s].sections[e];l.childTables||(l.childTables=[]);const o=l.childTables.length;l.childTables.push({label:"",fieldname:"",fieldtype:"Table",idx:o,reqd:!1,as_a_block:"",description:"false",columns:[ee({label:"",fieldname:"",fieldtype:"",idx:0,description:"",reqd:!1},ot.fieldtype==="Select"&&ot.options?{options:ot.options?`
${ot.options}`:`
`}:{})],newTable:!0})},Ts=(s,e,l)=>{const o=v[s].sections[e].childTables[l];o.columns||(o.columns=[]),o.columns.push(ee({label:"",fieldname:"",fieldtype:"",idx:o.columns.length,description:"",reqd:!1},o.columns.fieldtype==="Select"&&o.columns.options?{options:o.columns.options?`
${o.columns.options}`:`
`}:{}))},Rs=(s,e,l)=>{v[s].sections[e].childTables.splice(l,1)},Ms=(s,e,l,o)=>{v[s].sections[e].childTables[l].columns.splice(o,1)};function Us(s,e,l,o,a,n){var d;const c=`${e}-${l}-${o}`;A[c]||(A[c]={columns:[]});const u={},f=((d=s.label)==null?void 0:d.trim())||"";if(!f)u.label="Field Label is required";else{const p=f.toLowerCase();if(nt.includes(p)&&!Mt.includes(p))u.label=`"${f}" is a restricted field label`;else if(f.length>64)u.label="Field Label cannot exceed 64 characters";else if(!/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(f))u.label="Field Label can only contain letters, numbers, and single spaces between words";else{const w=n.map((q,y)=>{var k;return{label:(k=q.label)==null?void 0:k.trim().toLowerCase(),index:y}}).filter(q=>q.label===p);if(w.length>1){const q=w[0].index;a!==q&&(u.label=`"${f}" is already used in this table`)}}}A[c].columns[a]=u}function rt(s,e,l){var n;A[e]||(A[e]={});const o=[],a=((n=s.label)==null?void 0:n.trim())||"";a||o.push("Label is required"),a.length>64&&o.push("Label cannot exceed 64 characters"),a&&!/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(a)&&o.push("No special characters allowed"),a&&nt.includes(a.toLowerCase().trim())&&o.push("This label is restricted"),a&&se.value[e].map(f=>{var d;return(d=f.label)==null?void 0:d.trim().toLowerCase()}).filter(Boolean).filter(f=>f===a.toLowerCase()).length>1&&o.push("Duplicate label is not allowed"),s.fieldtype||o.push("Field type is required"),s.fieldtype==="Select"&&(!s.options||s.options.trim()==="")&&o.push("Options are required"),A[e][l]=o}const Os=(s,e,l)=>{var c;const o=v[s].sections[e].childTables[l],a={tableName:!1,columns:[]};let n=!1;return(c=o.tableName)!=null&&c.trim()||(a.tableName="Table name is required.",n=!0),o.columns.forEach((u,f)=>{var p,w;const d={};(p=u.label)!=null&&p.trim()||(d.label="Field Label is required",n=!0),(w=u.fieldtype)!=null&&w.trim()||(d.fieldtype="Please select field type",n=!0),a.columns[f]=d}),A[`${s}-${e}-${l}`]=a,n},Bs=(s,e,l)=>{var a,n;const o=(n=(a=v[s])==null?void 0:a.sections)==null?void 0:n[e];o&&!Array.isArray(o[l])&&(o[l]=[])},Ns=s=>s?s.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""):"",zs=(s,e,l)=>{if(Os(s,e,l)){x("Please fix validation errors before creating the table",{transition:"zoom"});return}if(it.value){x("Table already exists",{transition:"zoom"});return}const a=v[s].sections[e].childTables[l],n=v[s].sections[e];a.columns=a.columns.map((u,f)=>De(ee({},u),{idx:f,options:_t(u)})),a.newTable=!1;const c={form_short_name:a.tableName,fields:a.columns,idx:a.idx,as_a_block:a.as_a_block?a.as_a_block:"false"};N.post(z.childtable,c).then(u=>{var f,d,p;if(u){Bs(s,e,"afterCreated"),n.afterCreated[l]=ee({},a),pe("Table created successfully!");const w=(p=(d=(f=u.message)==null?void 0:f[0])==null?void 0:d[0])==null?void 0:p.child_doc;w&&(v[s].sections[e].childTables[l]=De(ee(ee({},v[s].sections[e].childTables[l]),w),{newTable:!1}))}}).catch(u=>{console.error("Error creating table:",u)})},je=(s,e,l,o=[])=>{var c;G[e]||(G[e]=[]),G[e]=G[e].filter(u=>u!==l),A[e]||(A[e]=[]),A[e][l]=[];const a=[],n=((c=s.label)==null?void 0:c.trim())||"";if(n?nt.includes(n.toLowerCase())?a.push("This label is restricted"):n.length>64?a.push("Label cannot exceed 64 characters"):/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(n)||a.push("Only letters, numbers, and single spaces allowed"):a.push("Label is required"),o.length){const u=n.toLowerCase(),f=o.map((d,p)=>{var w;return{label:(w=d.label)==null?void 0:w.trim().toLowerCase(),idx:p}}).filter(d=>d.label===u);if(f.length>1){const d=f[0].idx;l!==d?(a.push("Duplicate label not allowed"),s._duplicate=!0):s._duplicate=!1}else s._duplicate=!1}return s.fieldtype||a.push("Field type is required"),s.fieldtype==="Select"&&(!s.options||!s.options.trim())&&a.push("Options are required"),A[e][l]=a,a.length>0&&G[e].push(l),a.length===0},Ps=(s,e,l)=>{const a=v[s].sections[e].afterCreated.find(u=>u.tableName===l);if(!a)return;const n=a.columns.length,c={fieldname:"",fieldtype:"",idx:n+1,label:"",value:"",isNew:!0,description:""};a.columns.push(c),je(c,l,n,a.columns)},zt=_([]),Hs=(s,e,l,o)=>{const n=v[s].sections[e].afterCreated.find(u=>u.tableName===l);if(!n)return;n.columns.splice(o,1),n.columns.forEach((u,f)=>{u.idx=f+1});const c=G.value[l];c&&(G.value[l]=c.filter(u=>u!==o).map(u=>u>o?u-1:u))},js=(s,e,l)=>{const a=v[s].sections[e].afterCreated.find(n=>n.tableName===l);if(a){if(j[l]){G[l]=[];let n=!0;if(a.columns.forEach((f,d)=>{je(f,l,d,a.columns)||(n=!1)}),!n){x("Please fix the errors in the highlighted fields before saving!");return}const c=a.columns.map((w,p)=>{var q=w,{isNew:f}=q,d=Ft(q,["isNew"]);return De(ee({},d),{idx:p+1,options:_t(d)})}),u={form_short_name:Ns(l),fields:c,as_a_block:a.description};N.post(z.childtable,u).then(f=>{zt.value=f.data,pe("Fields updated successfully!")}).catch(f=>{console.error("❌ Saving fields failed:",f)})}j[l]=!j[l]}},j=ae({}),Ws=s=>{se.value[s]||(se.value[s]=[]);const e=se.value[s].length+1;se.value[s].push({fieldname:"",fieldtype:"",idx:e,label:"",value:"",isNew:!0,description:"",options:se.value[s].options?`
${se.value[s].options}`:""})},Js=(s,e)=>{se.value[s]&&se.value[s].splice(e,1)},Ys=(s,e)=>{if(!s)return;G.value||(G.value={}),G.value[s]||(G.value[s]=[]);const l=se.value[s];if(l){if(j[s]){G.value[s]=[];let o=!0;if(l.forEach((c,u)=>{var d;rt(c,s,u);const f=(d=A[s])==null?void 0:d[u];f&&f.length>0&&(G.value[s].push(u),o=!1),c.label&&(c.label=c.label.trim())}),!o){x("Please fix the errors before saving");return}const a=l.map((d,f)=>{var p=d,{isNew:c}=p,u=Ft(p,["isNew"]);return De(ee({},u),{idx:f+1,options:_t(u)})}),n={form_short_name:s,fields:a,as_a_block:e};N.post(z.childtable,n).then(c=>{zt.value=c.data,pe("Fields updated successfully!")}).catch(c=>{console.error("❌ Saving fields failed:",c)})}j[s]=!j[s],Nt.value=j[s]?s:null}},Gs=_([{id:1,label:"Form Info",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Form Fields",stepno:"Step 2",icon:"bi bi-grid-3x3-gap"},{id:3,label:"Workflow Setup",stepno:"Step 3",icon:"bi bi-diagram-3"},{id:4,label:"Print Format",stepno:"Step 4",icon:"ri-checkbox-circle-line"}]),ht=[{label:"Text",type:"Data"},{label:"Select",type:"Select"},{label:"Attach",type:"Attach"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Number",type:"Int"},{label:"TextArea",type:"Text"}],dt=[{label:"Data",type:"Data",icon:"bi-input-cursor-text",category:"Basic",description:"Single line text input"},{label:"Small Text",type:"Small Text",icon:"bi-textarea-t",category:"Basic",description:"Multi-line text, comma-separated values"},{label:"Text Editor",type:"Text",icon:"bi-file-earmark-richtext",category:"Basic",description:"Rich text editor"},{label:"Code",type:"Code",icon:"bi-code-slash",category:"Basic",description:"Code editor with syntax highlighting"},{label:"Int",type:"Int",icon:"bi-123",category:"Number",description:"Integer number"},{label:"Float",type:"Float",icon:"bi-hash",category:"Number",description:"Decimal number"},{label:"Currency",type:"Currency",icon:"bi-currency-dollar",category:"Number",description:"Money amount with currency"},{label:"Percent",type:"Percent",icon:"bi-percent",category:"Number",description:"Percentage value"},{label:"Check",type:"Check",icon:"bi-check-square",category:"Selection",description:"Checkbox (Yes/No)"},{label:"Select",type:"Select",icon:"bi-menu-button-wide",category:"Selection",description:"Dropdown selection"},{label:"Table MultiSelect",type:"Table MultiSelect",icon:"bi-ui-checks-grid",category:"Selection",description:"Select multiple items"},{label:"Link",type:"Link",icon:"bi-link-45deg",category:"Selection",description:"Link to another DocType"},{label:"Dynamic Link",type:"Dynamic Link",icon:"bi-diagram-3",category:"Selection",description:"Dynamic link based on another field"},{label:"Rating",type:"Rating",icon:"bi-star",category:"Selection",description:"Star rating field"},{label:"Date",type:"Date",icon:"bi-calendar",category:"DateTime",description:"Date picker"},{label:"Datetime",type:"Datetime",icon:"bi-calendar-event",category:"DateTime",description:"Date and time picker"},{label:"Time",type:"Time",icon:"bi-clock",category:"DateTime",description:"Time picker"},{label:"Duration",type:"Duration",icon:"bi-hourglass-split",category:"DateTime",description:"Time duration (HH:MM:SS)"},{label:"Attach",type:"Attach",icon:"bi-paperclip",category:"Media",description:"File attachment"},{label:"Attach Image",type:"Attach Image",icon:"bi-image",category:"Media",description:"Image upload with preview"},{label:"Image",type:"Image",icon:"bi-file-image",category:"Media",description:"Display image from URL"},{label:"Signature",type:"Signature",icon:"bi-pen",category:"Media",description:"Digital signature pad"},{label:"Password",type:"Password",icon:"bi-key",category:"Special",description:"Masked password input"},{label:"Color",type:"Color",icon:"bi-palette",category:"Special",description:"Color picker"},{label:"Barcode",type:"Barcode",icon:"bi-upc-scan",category:"Special",description:"Barcode/QR code display"},{label:"Geolocation",type:"Geolocation",icon:"bi-geo-alt",category:"Special",description:"Map location picker"},{label:"HTML",type:"HTML",icon:"bi-filetype-html",category:"Special",description:"Custom HTML content"},{label:"JSON",type:"JSON",icon:"bi-braces",category:"Special",description:"JSON data editor"},{label:"Read Only",type:"Read Only",icon:"bi-eye",category:"Special",description:"Display-only text"},{label:"Table",type:"Table",icon:"bi-table",category:"Table",description:"Child table with rows"},{label:"Column Break",type:"Column Break",icon:"bi-layout-three-columns",category:"Layout",description:"Start new column"},{label:"Section Break",type:"Section Break",icon:"bi-layout-sidebar",category:"Layout",description:"Start new section"},{label:"Heading",type:"Heading",icon:"bi-type-h1",category:"Layout",description:"Section heading text"},{label:"Button",type:"Button",icon:"bi-square",category:"Layout",description:"Custom action button"}],Zs=le(()=>[$e,...oe.value]),Ks=le(()=>{const s=m.value.accessible_departments;return s.includes($e)?"All Selected":s.length>1?`${s[0]}.. +${s.length-1} more selected`:s.join(", ")}),Qs=s=>s===$e?m.value.accessible_departments.length===oe.value.length:m.value.accessible_departments.includes(s),Xs=(s,e)=>{s===$e?e.target.checked?m.value.accessible_departments=[...oe.value]:m.value.accessible_departments=[]:(e.target.checked?m.value.accessible_departments.push(s):m.value.accessible_departments=m.value.accessible_departments.filter(l=>l!==s),m.value.accessible_departments.length===oe.value.length?m.value.accessible_departments=[...oe.value]:m.value.accessible_departments=m.value.accessible_departments.filter(l=>l!==$e))},xs=s=>{s===$e&&(m.value.accessible_departments=[...oe.value])},Is=s=>{s===$e&&(m.value.accessible_departments=[])},gt=_(!1),We=le(()=>{var e;let s=[...ie.value];if(Re.value&&(s=s.filter(l=>l.is_hod===1)),(e=Be.value)!=null&&e.trim()){const l=Be.value.toLowerCase();s=s.filter(o=>o.role.toLowerCase().includes(l))}return s.sort((l,o)=>l.role.localeCompare(o.role)),s.sort((l,o)=>{const a=T.value.includes(l.role),n=T.value.includes(o.role);return a===n?0:a?1:-1}),s.map(l=>l.role)}),el=le(()=>{const s=We.value;return s.length>0&&s.every(e=>T.value.includes(e))});_e([T,We],()=>{const s=We.value;gt.value=s.length>0&&s.every(e=>T.value.includes(e))},{immediate:!0,deep:!0});function tl(s){const e=s.target.checked,l=ie.value.filter(o=>{var a;return!(Re.value&&o.is_hod!==1||(a=Be.value)!=null&&a.trim()&&!o.role.toLowerCase().includes(Be.value.toLowerCase()))}).map(o=>o.role);e?T.value=Array.from(new Set([...T.value,...l])):T.value=T.value.filter(o=>!l.includes(o)),gt.value=e}function sl(){T.value=[],gt.value=!1,Re.value=!1}const ce=_("");function ll(){const s=v[H.value];if(!s||!s.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:H.value==0?"requestor":"approver",roles:T.value,approval_required:Ie.value,approver_can_edit:et.value,fields:s.sections.flatMap($t),idx:H.value};H.value!==0&&(e.view_only_reportee=ce.value==="ViewOnlyReportee"?1:0,e.all_approvals_required=ce.value==="all_approvals_required"?1:0,e.requester_as_a_approver=ce.value==="requester_as_a_approver"?1:0,e.on_rejection=Ae.value?Ae.value:0);const l=O.findIndex(o=>o.idx===e.idx);l!==-1?O[l]=e:O.push(e),nl()}function B(s){const e=O.filter(a=>a.idx===s);if(e.length===0)return{roles:[]};if(e.length===1)return e[0];const l=ee({},e[0]),o=[];return e.forEach(a=>{a.roles&&Array.isArray(a.roles)&&o.push(...a.roles)}),l.roles=o,console.log(`getWorkflowSetup(${s}): Found ${e.length} entries, merged roles:`,o),l}function ol(s){const e=B(s),l=e.roles||[];T.value=[...l],Ae.value=e.on_rejection,Ie.value=e.approval_required,et.value=e.approver_can_edit,e.view_only_reportee===1?ce.value="ViewOnlyReportee":e.all_approvals_required===1?ce.value="all_approvals_required":e.requester_as_a_approver===1?ce.value="requester_as_a_approver":ce.value=""}const yt=s=>{Re.value=!1,Be.value="",ce.value="",Ae.value="",m.value.accessible_departments.length&&al(s,m.value.accessible_departments),H.value=s,ol(s)};function al(s,e){let l={index:s,departments:e,property:m.value.business_unit};N.post(z.addDesignationroles,l).then(o=>{o.message&&(ie.value=o.message)}).catch(o=>{console.error("Error fetching designations data:",o)})}function nl(){N.post(z.add_roles_WF,{workflow_setup:O,doctype:m.value.form_short_name,business_unit:m.value.business_unit}).then(s=>{console.log(s),H.value==0?pe("Requestor Added"):pe(`Approver-${H.value} Added`)})}function il(){V.push({path:I.value.routepath||localStorage.getItem("routepath")}),localStorage.removeItem("form_json")}function rl(){m.value.form_name="",m.value.form_short_name="",m.value.owner_of_the_form="",m.value.form_category="",m.value.accessible_departments=[],m.value.series="",m.value.has_workflow="",m.value.is_linked=0,m.value.is_linked_form="",m.value.mail_id="",m.value.public_form_response="",J.value="",Y.value="",ne.value=[],me.value=null}const dl=s=>{if(Je.value){x("Please check all required fields before proceeding.");return}s<F.value?kt():s>F.value&&wt()},wt=()=>{if(Je.value){x("Please check all required fields before proceeding.");return}F.value<4&&(F.value+=1,F.value===4&&(ut.value=v))},kt=()=>{F.value>1&&(F.value-=1)},cl=_([]);function Pt(){Lt.value=!0;const s={fields:JSON.stringify(["*"]),limit_page_length:"none",doctype:re.EzyFormDefinitions,doc_id:R.value};N.get(z.GetDoctypeData,{params:s}).then(e=>{var o;let l=e==null?void 0:e.message.data;if(l){l.accessible_departments&&typeof l.accessible_departments=="string"?l.accessible_departments=l.accessible_departments.split(",").filter(c=>c.trim()!==""):l.accessible_departments=[],m.value=De(ee(ee({},m.value),l),{owner_of_the_form:l.owner_of_the_form||m.value.owner_of_the_form||""}),m.value.owner_of_the_form&&Ct(m.value.owner_of_the_form);const a=JSON.parse((o=e.message.data)==null?void 0:o.form_json);rs.value=a.workflow,cs.value=a.fields.filter(c=>c.fieldtype==="Table"),cl.value=a.fields.filter(c=>c.fieldtype==="Table"),Te.value=e.message.data.is_landscape;let n=es(JSON.parse(l==null?void 0:l.form_json).fields);se.value=JSON.parse(e.message.data.form_json).child_table_fields,Es.value=[],ds.value=[],n.forEach((c,u)=>{v.push(c)}),JSON.parse(l==null?void 0:l.form_json).workflow.forEach((c,u)=>{O.push(c)})}}).catch(e=>{console.error("Error fetching data:",e),x("Failed to load form data. Please try again.")}).finally(()=>{Lt.value=!1})}function ul(){const s={};at.value&&(s.print_format=at.value),Te.value!==void 0&&Te.value!==null&&(s.is_landscape=Te.value),N.put(z.resource+re.EzyFormDefinitions+`/${S.query.id}`,s).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),pe("Print Format Added Successfully")}).catch(e=>{console.error("Error fetching  data:",e)})}function Ht(){const s={fields:JSON.stringify(["name","department_name"]),limit_page_length:"none",business_unit:`${I.value.business_unit||S.query.business_unit}`,doctype:re.departments};Vt.value=!0,N.get(z.GetDoctypeData,{params:s}).then(e=>{var l;(l=e==null?void 0:e.message.data)!=null&&l.length&&(qe.value=e.message.data.map(o=>o.name),oe.value=e.message.data.map(o=>o.name))}).catch(e=>{console.error("Error fetching department data:",e),x("Failed to load departments. Please refresh the page.")}).finally(()=>{Vt.value=!1})}_(""),_e(()=>m.value.owner_of_the_form,s=>{s&&Ct(s)});function Ct(s){s&&typeof s=="string"&&s.trim()!==""&&pl(s)}function pl(s){Et.value=!0;const e={fields:JSON.stringify(["ezy_departments_items"]),doctype:re.departments,doc_id:s};N.get(z.GetDoctypeData,{params:e}).then(l=>{var o;(o=l==null?void 0:l.message.data)!=null&&o.ezy_departments_items&&(ne.value=l.message.data.ezy_departments_items.map(a=>a.category))}).catch(l=>{console.error("Error fetching categories data:",l),x("Failed to load form categories. Please try again.")}).finally(()=>{Et.value=!1})}function Dt(s){let e=Zl(v);const l=De(ee({},m.value),{fields:e,doctype:re.EzyFormDefinitions,workflow_setup:O,form_status:s==="save"?"Created":"Draft"});l.accessible_departments=l.accessible_departments.toString(),N.post(z.savedata,l).then(o=>{if(o&&o.message&&o.message.message){let a=localStorage.getItem("preName");if(a){let n={installed:"Yes"};N.put(`${z.resource}${re.preDefinedForm}/${a}`,n).then(c=>{localStorage.removeItem("preName")}).catch(c=>{console.error("Error fetching ezyForms data:",c)})}if(V.push({params:{paramid:o.message.message},query:{id:o.message.message}}),R.value=o.message.message,R&&R!=="new"&&(v.splice(0,v.length),Pt()),O.length<v.length)ns("Add Workflow");else if(Wt.value===!0){pe("Form Created Successfully!",{autoClose:2e3,transition:"zoom"});let n=localStorage.getItem("routepath");s==="save"?V.push({path:n}):s==="Draft"&&V.push({path:n})}}else console.error("Invalid response structure:",o)}).catch(o=>{console.error("Error saving form data:",o)})}const ct=_(""),jt=()=>{var l,o;const s=v.length,e={label:s===0?"requestor":`approver-${s}`,parent:`${(l=Le.value)==null?void 0:l.value}-${(o=m.value)==null?void 0:o.form_short_name}`,sections:[{label:"",parent:`${Le.value.value}-${m.value.form_short_name}`,childTables:[],afterCreated:{},rows:s===0?[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]}]}]}]};v.push(e),os(()=>{ct.value&&ct.value.scrollTo({top:ct.value.scrollHeight,behavior:"smooth"})})},Wt=_(!1),Jt=s=>{let e=v[s];e.parent&&K.push(e);let l=[];O.length>s&&O[s].roles&&(l=[...O[s].roles]),v.splice(s,1),O.length>s&&O.splice(s,1),v.forEach((o,a)=>{o.sections.forEach((n,c)=>{n.rows.forEach((u,f)=>{u.columns.forEach((d,p)=>{ue(a,c,f,p)})})})}),l.length&&ml(l,s)};function ml(s,e){const l={role:s,level:e,document_type:m.value.form_name,short_name:m.value.form_short_name,property:m.value.business_unit};N.post(z.deleteAssigneRoles,l).then(o=>{o&&Dt()})}const fl=(s,e)=>{const l={label:"",parent:`${Le.value.value}-${m.value.form_short_name}`,rows:[{label:`row_0_${e}_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]};v[s].sections.splice(e+1,0,l)},vl=(s,e)=>{let l=v[s].sections[e];l.parent&&K.push(l),v[s].sections.splice(e,1),v[s].sections.forEach((o,a)=>{o.rows.forEach((n,c)=>{n.columns.forEach((u,f)=>{ue(s,a,c,f)})})})},bl=(s,e,l)=>{v[s].sections[e].rows[l].columns.push({label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]})},_l=(s,e,l,o)=>{const n=v[s].sections[e].rows[l].columns,c=n[o];c.parent&&K.push(c),n.length===1?v[s].sections[e].rows.splice(l,1):n.splice(o,1),v[s].sections.forEach((u,f)=>{u.rows.forEach((d,p)=>{d.columns.forEach((w,q)=>{ue(s,f,p,q)})})})},hl=(s,e,l,o)=>{v[s].sections[e].rows[l].columns[o].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},gl=(s,e,l,o,a)=>{let n=v[s].sections[e].rows[l].columns[o].fields[a];n.parent&&K.push(n),v[s].sections[e].rows[l].columns[o].fields.splice(a,1)},yl=(s,e,l,o,a)=>{const n=v[s].sections[e].rows[l].columns[o].fields[a],c=ee({},n);c.name=`${n.name} Name the field`,v[s].sections[e].rows[l].columns[o].fields.splice(a+1,0,c)},wl=(s,e,l,o,a)=>{const n=as(v);v.splice(0,v.length,...n);let c=v[s].sections[e].rows[l].columns[o].fields[a].fieldtype;(c!=="Select"||c!=="radio"||c!=="multiselect")&&(v[s].sections[e].rows[l].columns[o].fields[a].options="")};function kl(s){return nt.includes(s==null?void 0:s.trim().toLowerCase())}function Cl(s){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(s)||s.includes('"')||s.includes("'")}function Dl(s){return s.flatMap(e=>{var l;return[(l=e.label)==null?void 0:l.trim().toLowerCase(),...e.sections.flatMap(o=>{var a;return[(a=o.label)==null?void 0:a.trim().toLowerCase(),...o.rows.flatMap(n=>n.columns.flatMap(c=>{var u;return[(u=c.label)==null?void 0:u.trim().toLowerCase(),...c.fields.map(f=>{var d;return(d=f.label)==null?void 0:d.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!Mt.includes(e))}function ue(s,e,l,o,a){const c=Dl(v).filter((d,p,w)=>w.indexOf(d)!==p),u=as(v);v.splice(0,v.length,...u);function f(d,p){if(!d){p.errorMsg="";return}kl(d)?p.errorMsg="Entered label is restricted":Cl(d)?p.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:d.length>64?p.errorMsg="Label should not exceed 64 characters":p.errorMsg=c.includes(d.trim().toLowerCase())?"Duplicate Label Name":""}a!==void 0&&f(v[s].sections[e].rows[l].columns[o].fields[a].label,v[s].sections[e].rows[l].columns[o].fields[a]),a===void 0&&o!==void 0&&f(v[s].sections[e].rows[l].columns[o].label,v[s].sections[e].rows[l].columns[o]),o===void 0&&a===void 0&&f(v[s].sections[e].label,v[s].sections[e]),v.forEach(d=>{d.sections.forEach(p=>{f(p.label,p),p.rows.forEach(w=>{w.columns.forEach(q=>{f(q.label,q),q.fields.forEach(y=>{f(y.label,y)})})})})})}const St=le(()=>{function s(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(s):Object.values(e).some(s)}return s(v)}),Je=le(()=>J.value.length>0||Y.value.length>0||!m.value.form_category||!m.value.owner_of_the_form||m.value.accessible_departments.length===0),Sl=le(()=>v.some(s=>s.sections.some(e=>e.rows.some(l=>l.columns.some(o=>o.fields.some(a=>a.label&&a.fieldtype))))));function Yt(s,e){let l=s.target.value.trim();if(!l){e==="form_name"?J.value="Input cannot be empty or only spaces":e==="form_short_name"&&(Y.value="Input cannot be empty or only spaces");return}if(l.length>63){e==="form_name"?J.value="Name cannot exceed 63 characters":e==="form_short_name"&&(Y.value="Short name cannot exceed 63 characters");return}if(/^\d/.test(l)){e==="form_short_name"&&(Y.value="First character must be a letter");return}else Y.value="";if(e==="form_short_name"&&l.length<2){Y.value="Short name must have at least 2 letters";return}if(e==="form_short_name"&&/[^a-zA-Z ]/.test(l)){Y.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(l)){e==="form_name"?J.value="Special characters are not allowed":e==="form_short_name"&&(Y.value="Special characters are not allowed");return}else e==="form_name"?J.value="":e==="form_short_name"&&(Y.value="");const o=[[e,"=",`${l}`],["business_unit","=",`${m.value.business_unit}`]],a={fields:JSON.stringify(["form_name","form_short_name"]),filters:JSON.stringify(o),doctype:re.EzyFormDefinitions};N.get(`${z.GetDoctypeData}`,{params:a}).then(n=>{te.value=n.message.data,e==="form_name"?J.value=l&&te.value.some(c=>c.form_name&&c.form_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(Y.value=l&&te.value.some(c=>c.form_short_name&&c.form_short_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(n=>{console.error("Error fetching ezyForms data:",n),e==="form_name"?J.value="":e==="form_short_name"&&(Y.value="")})}const Fl=s=>s===0?"1st row":s===1?"2nd row":s===2?"3rd row":`${s+1}th row`,ut=_([]),$l=()=>{v.length&&(ut.value=v,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function ql(){N.post(z.delete_form_items,{deleted_fields:K.flatMap($t),doctype:R}).then(s=>{var e;(e=s==null?void 0:s.message)!=null&&e.success&&Dt()})}function Gt(s){return Ue(this,null,function*(){if(St.value){x("Please fix the errors before proceeding.");return}Wt.value=!0;let e=K.flatMap($t);R!=null&&R!=null&&R!="new"&&e.length?ql():Dt(s)})}const Al=()=>{lt.value.push({role:"",autoApproval:!1,permissions:{}})},Vl=s=>{lt.value.splice(s,1)},El=s=>{ns("Permission configuration modal will be implemented here")},Zt=()=>Ue(this,null,function*(){var s;if(!(ze.value.length>0))try{const e={doctype:"WF Roadmap",fields:JSON.stringify(["name","roadmap_title","document_type","workflow_levels","property","cluster_name"]),filters:JSON.stringify([])},l=yield N.get(z.GetDoctypeData,{params:e});(s=l==null?void 0:l.message)!=null&&s.data&&(ze.value=l.message.data.map(o=>({roadmap_title:o.name,display_name:`${o.roadmap_title} (${o.document_type})`,document_type:o.document_type,workflow_levels:o.workflow_levels,property:o.property,cluster_name:o.cluster_name})),console.log("Fetched WF Road Maps:",ze.value))}catch(e){console.error("Error fetching WF Road Maps:",e),x("Failed to fetch workflow road maps")}}),Kt=s=>Ue(this,null,function*(){var e;try{console.log("Selected WF Road Map:",s);const l=yield N.get(`${z.resource}${re.wfRoadmap}/${s.roadmap_title}`),o=((e=l==null?void 0:l.data)==null?void 0:e.data)||(l==null?void 0:l.data)||{};console.log("WF Road Map Data:",o);const a=(o.wf_requestors&&o.wf_requestors.length>0,1),n={};o.wf_level_setup&&o.wf_level_setup.length>0&&o.wf_level_setup.forEach(d=>{n[d.level]||(n[d.level]=[]),n[d.level].push(d)});const c=Object.keys(n).length,u=a+c;for(console.log(`Required blocks: ${u} (1 requestor + ${c} approver levels)`),O=[],Ee.value=[],ge.value=[];v.length>u;)v.pop();for(;v.length<u;)jt();console.log(`Block adjustment complete: ${v.length} blocks`);let f=0;o.wf_requestors&&o.wf_requestors.length>0?(Ee.value=o.wf_requestors,console.log(`Loaded ${o.wf_requestors.length} requestor role(s)`),o.wf_requestors.forEach(d=>{O.push({type:"requestor",roles:[d.requestor],auto_approval:d.auto_approval||0,columns_allowed:d.columns_allowed||"",fields:[],idx:0})})):console.warn("No Requestors found in roadmap, creating default requestor setup"),f=1,o.wf_level_setup&&o.wf_level_setup.length>0?(ge.value=o.wf_level_setup.sort((p,w)=>p.level-w.level),console.log(`Loaded ${o.wf_level_setup.length} approver level(s)`),Object.keys(n).sort((p,w)=>parseInt(p)-parseInt(w)).forEach(p=>{const w=n[p],q=f;console.log(`Level ${p} → Block Index ${q}, Roles: ${w.length}`),w.forEach(y=>{O.push({type:"approver",level:parseInt(p),roles:[y.role],approval_required:y.mandatory?1:0,approver_can_edit:0,view_only_reportee:y.view_only_reportee||0,all_approvals_required:y.all_approvals_required||0,requester_as_a_approver:y.requester_as_a_approver||0,on_rejection:y.on_rejection||0,columns_allowed:y.columns_allowed||"",fields:[],idx:q})}),f++})):console.warn("No approver levels found in roadmap"),console.log("Final blockArr length:",v.length),console.log("Final workflowSetup:",O),pe(`Workflow configured! ${Ee.value.length} requestor role(s), ${ge.value.length} approver level(s) across ${v.length} blocks.`),os(()=>{Ne.value=0})}catch(l){console.error("Error in handleWFRoadMapSelect:",l),x("Failed to load workflow. Please try again.")}}),Ll=s=>{console.log("Field added from library:",s);const e=Ne.value,l=v[e];if(!l){x("Please create a block first before adding fields");return}const o=Qt(s);if(!o)return;l.sections||(l.sections=[]),l.sections.length===0&&l.sections.push({label:"",rows:[[{label:"",fields:[]}]]});const c=l.sections[0].rows[0][0];c.fields||(c.fields=[]),c.fields.push(o),console.log("Field added successfully:",o),pe(`${o.label} field added successfully`)},Tl=s=>{console.log("Drag started:",s),he.value=s},Rl=()=>{console.log("Drag ended")},Qt=s=>{console.log("Creating field from Frappe type:",s);const e=dt.find(n=>n.type===s);if(!e)return console.error("Field type not found:",s),console.error("Available types:",dt.map(n=>n.type)),x(`Field type "${s}" not found. Please try again.`),null;const l=Date.now(),o=Math.random().toString(36).substring(2,6),a=`field_${l}_${o}`;return{id:`field_${l}_${o}`,fieldname:a,label:e.label,fieldtype:e.type,options:"",reqd:0,read_only:0,hidden:0,description:"",default:"",placeholder:""}};return(s,e)=>(i(),r("div",null,[t("div",so,[t("div",lo,[t("div",oo,[t("div",ao,[t("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=l=>il())},e[42]||(e[42]=[t("button",{class:"btn font-13 ms-3"},[t("i",{class:"bi bi-arrow-left"}),t("span",{class:"ms-2"},"Back")],-1)])),s.$route.query.id||s.$route.query.preId?(i(),r("span",no,"("+g(I.value.formId||$(S).query.form_name)+")",1)):b("",!0)]),t("div",null,[F.value===2&&$(v).length&&!s.$route.query.id?(i(),r("button",{key:0,disabled:St.value||Je.value,style:jl({cursor:St.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=l=>Gt("Draft"))},e[43]||(e[43]=[t("i",{class:"bi bi-bookmark-check-fill"},null,-1),h(" Save As Draft ")]),12,io)):b("",!0)])]),t("div",ro,[t("div",co,[t("div",uo,[t("div",po,[t("ul",mo,[(i(!0),r(E,null,L(Gs.value,l=>(i(),r("li",{key:l.id,class:P({active:F.value===l.id,completed:F.value>l.id})},[t("div",{class:P(["d-flex gap-3 align-items-center",{"not-allowed":Je.value&&F.value+1===l.id}]),onClick:o=>dl(l.id)},[F.value>l.id?(i(),r("i",vo)):(i(),r("i",{key:1,class:P(l.icon)},null,2)),t("div",bo,[t("span",_o,g(l.stepno),1),e[44]||(e[44]=t("br",null,null,-1)),t("span",ho,g(l.label),1)])],10,fo)],2))),128))])])]),t("div",go,[t("div",yo,[t("div",wo,[F.value===1?(i(),r("div",ko,[t("div",Co,[t("div",Do,[e[47]||(e[47]=t("div",null,[t("h1",{class:"font-16 fw-bold m-0"},"Form Information"),t("p",{class:"font-12 text-muted m-0"},"Configure basic form settings and permissions")],-1)),t("div",So,[!s.$route.query.id&&!s.$route.query.preId?(i(),r("button",{key:0,class:"btn btn-outline-secondary font-13",type:"button",onClick:rl},e[45]||(e[45]=[t("i",{class:"bi bi-x-circle me-1"},null,-1),h("Clear Form ")]))):b("",!0),F.value<5?(i(),r("button",{key:1,class:"btn btn-dark font-13 px-4",disabled:Je.value,onClick:wt},e[46]||(e[46]=[h(" Next "),t("i",{class:"bi bi-arrow-right ms-1"},null,-1)]),8,Fo)):b("",!0)])])]),t("div",$o,[t("div",qo,[t("div",Ao,[t("div",Vo,[t("div",Eo,[e[52]||(e[52]=t("div",{class:"card-header bg-light border-bottom"},[t("h6",{class:"m-0 fw-bold font-14"},[t("i",{class:"bi bi-file-earmark-text me-2"}),h("Form Details")])],-1)),t("div",Lo,[t("div",To,[t("div",Ro,[t("div",Mo,[$(S).query.preId?(i(),r("span",Uo,e[48]||(e[48]=[t("i",{class:"bi bi-check2-circle me-1"},null,-1),h("Predefined ")]))):b("",!0),X(xe,{disabled:(I.value.formId&&I.value.formId.length>0||$(S).query.form_name)&&ke.value!=="1",labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Enter form name (e.g., Leave Request)",onChange:e[2]||(e[2]=l=>Yt(l,"form_name")),modelValue:Rt.value,"onUpdate:modelValue":e[3]||(e[3]=l=>Rt.value=l)},null,8,["disabled","modelValue"]),J.value?(i(),r("span",Oo,[e[49]||(e[49]=t("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),h(g(J.value),1)])):b("",!0)])]),t("div",Bo,[X(xe,{disabled:(I.value.formId&&I.value.formId.length>0||$(S).query.form_name)&&ke.value!=="1",labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Enter short code (e.g., LR, PR)",onChange:e[4]||(e[4]=l=>Yt(l,"form_short_name")),modelValue:m.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value.form_short_name=l)},null,8,["disabled","modelValue"]),Y.value?(i(),r("span",No,[e[50]||(e[50]=t("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),h(g(Y.value),1)])):b("",!0)]),t("div",zo,[X(xe,{disabled:I.value.formId&&I.value.formId.length>0&&ke.value!=="1",labeltext:"Form Naming Series",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"e.g., YY-YY, YYYY, or ABC",modelValue:m.value.series,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value.series=l)},null,8,["disabled","modelValue"]),e[51]||(e[51]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h(" Format examples: "),t("code",null,"YY-YY"),h(" → 24-25-0001, "),t("code",null,"YYYY"),h(" → 2025-0001, "),t("code",null,"ABC"),h(" → ABC-0001 ")],-1))])])])]),t("div",Po,[e[59]||(e[59]=t("div",{class:"card-header bg-light border-bottom"},[t("h6",{class:"m-0 fw-bold font-14"},[t("i",{class:"bi bi-building me-2"}),h("Department & Permissions")])],-1)),t("div",Ho,[t("div",jo,[t("div",Wo,[t("label",Jo,[e[53]||(e[53]=h(" Owner Department ")),m.value.owner_of_the_form?b("",!0):(i(),r("span",Yo,"*"))]),X($(Se),{disabled:I.value.formId&&I.value.formId.length>0&&ke.value!=="1",onOpen:Ht,options:qe.value,onChange:Ct,modelValue:m.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=l=>m.value.owner_of_the_form=l),placeholder:"Select owning department",multiple:!1,class:"font-12 multiselect",searchable:!0,openDirection:"bottom"},null,8,["disabled","options","modelValue"]),e[54]||(e[54]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h("Department that owns and manages this form ")],-1))]),t("div",Go,[t("label",Zo,[e[55]||(e[55]=h(" Form Category ")),m.value.form_category?b("",!0):(i(),r("span",Ko,"*"))]),X($(Se),{disabled:I.value.formId&&I.value.formId.length>0&&ke.value!=="1",options:ne.value,modelValue:m.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=l=>m.value.form_category=l),placeholder:"Select a category",multiple:!1,searchable:!0,class:"font-12 multiselect"},null,8,["disabled","options","modelValue"]),e[56]||(e[56]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h("Categorize this form for better organization ")],-1))]),t("div",Qo,[t("label",Xo,[e[57]||(e[57]=h(" Accessible to Departments ")),m.value.accessible_departments.length?b("",!0):(i(),r("span",xo,"*"))]),X($(Se),{modelValue:m.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=l=>m.value.accessible_departments=l),options:Zs.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select departments that can access this form",class:"font-12",onSelect:xs,onRemove:Is,openDirection:"bottom"},{option:ts(({option:l})=>[t("div",Io,[t("input",{type:"checkbox",checked:Qs(l),class:"custom-checkbox",onChange:o=>Xs(l,o),onClick:e[9]||(e[9]=de(()=>{},["stop"]))},null,40,ea),t("span",null,g(l),1)])]),selection:ts(({values:l,isOpen:o})=>[l.length?D((i(),r("span",{key:0,class:"multiselect__single font-11"},g(Ks.value),513)),[[mt,!o]]):b("",!0)]),_:1},8,["modelValue","options"]),e[58]||(e[58]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h("Users from these departments can raise requests using this form ")],-1))])])])]),t("div",ta,[e[66]||(e[66]=t("div",{class:"card-header bg-light border-bottom"},[t("h6",{class:"m-0 fw-bold font-14"},[t("i",{class:"bi bi-gear me-2"}),h("Form Settings")])],-1)),t("div",sa,[t("div",la,[t("div",oa,[e[61]||(e[61]=t("label",{class:"form-label font-13 fw-medium"},"Form Type",-1)),X($(Se),{options:Tt,modelValue:vt.value,"onUpdate:modelValue":e[11]||(e[11]=l=>vt.value=l),placeholder:"Select form visibility",multiple:!1,searchable:!0,label:"label","track-by":"value",reduce:l=>l.value,class:"font-12 multiselect",openDirection:"bottom"},null,8,["modelValue","reduce"]),t("small",aa,[e[60]||(e[60]=t("i",{class:"bi bi-info-circle me-1"},null,-1)),vt.value===1?(i(),r("span",na,"Public forms are accessible via QR code without login")):(i(),r("span",ia,"Private forms require authentication to access"))])]),t("div",ra,[e[62]||(e[62]=t("label",{class:"form-label font-13 fw-medium"},[h(" Enable Workflow "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),X($(Se),{options:["Yes","No"],modelValue:m.value.has_workflow,"onUpdate:modelValue":e[12]||(e[12]=l=>m.value.has_workflow=l),placeholder:"Enable approval workflow?",multiple:!1,class:"font-12 multiselect",searchable:!0},null,8,["modelValue"]),e[63]||(e[63]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h("Enable if this form requires multi-level approvals ")],-1))]),m.value.has_workflow==="Yes"?(i(),r("div",da,[e[64]||(e[64]=t("label",{class:"form-label font-13 fw-medium"},[h(" Use Existing Workflow "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),X($(Se),{onOpen:Zt,options:ze.value,modelValue:me.value,"onUpdate:modelValue":e[13]||(e[13]=l=>me.value=l),placeholder:"Select a workflow roadmap",multiple:!1,class:"font-12 multiselect",searchable:!0,label:"display_name","track-by":"roadmap_title",onSelect:Kt,openDirection:"bottom"},null,8,["options","modelValue"]),e[65]||(e[65]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h(" Auto-populates requestor and approver configurations from existing workflow ")],-1))])):b("",!0)])])]),m.value.as_web_view===1?(i(),r("div",ca,[e[71]||(e[71]=t("div",{class:"card-header bg-light border-bottom"},[t("h6",{class:"m-0 fw-bold font-14"},[t("i",{class:"bi bi-qr-code me-2"}),h("Public Form Settings")])],-1)),t("div",ua,[t("div",pa,[t("div",ma,[e[67]||(e[67]=t("label",{class:"form-label font-13 fw-medium"},[h(" Submit Response Message "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),X(xe,{class:"formHeight",type:"text",tag:"input",name:"Value",id:"formSubmitResponse",placeholder:"e.g., Thank you! Your request has been submitted.",modelValue:m.value.public_form_response,"onUpdate:modelValue":e[14]||(e[14]=l=>m.value.public_form_response=l)},null,8,["modelValue"]),e[68]||(e[68]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h("Message shown to users after successful form submission ")],-1))]),t("div",fa,[e[69]||(e[69]=t("label",{class:"form-label font-13 fw-medium"},[h(" Notification Email(s) "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),X(xe,{class:"formHeight",type:"text",tag:"input",name:"Value",id:"formSubmitEmail",placeholder:"email1@example.com, email2@example.com",modelValue:m.value.mail_id,"onUpdate:modelValue":e[15]||(e[15]=l=>m.value.mail_id=l)},null,8,["modelValue"]),e[70]||(e[70]=t("small",{class:"text-muted font-11 ms-1"},[t("i",{class:"bi bi-info-circle me-1"}),h("Email addresses to notify on form submission (comma-separated) ")],-1))])])])])):b("",!0),$(S).query.preId?(i(),r("div",va,[e[75]||(e[75]=t("div",{class:"card-header bg-light border-bottom"},[t("h6",{class:"m-0 fw-bold font-14"},[t("i",{class:"bi bi-link-45deg me-2"}),h("Advanced Options")])],-1)),t("div",ba,[t("div",_a,[t("div",ha,[t("div",ga,[D(t("input",{class:"form-check-input",disabled:m.value.is_predefined_doctype==1,type:"checkbox",id:"is_linked","onUpdate:modelValue":e[16]||(e[16]=l=>m.value.is_linked=l),"true-value":1,"false-value":0},null,8,ya),[[Fe,m.value.is_linked]]),e[72]||(e[72]=t("label",{class:"form-check-label font-13",for:"is_linked"}," Link this form to another form ",-1))]),e[73]||(e[73]=t("small",{class:"text-muted font-11 ms-4"},[t("i",{class:"bi bi-info-circle me-1"}),h("Create a relationship between this form and an existing form ")],-1))]),m.value.is_linked?(i(),r("div",wa,[e[74]||(e[74]=t("label",{class:"form-label font-13 fw-medium"},"Linked Form",-1)),t("div",ka,[D(t("input",{type:"text",class:"form-control font-13",id:"standardFormInput",disabled:m.value.is_predefined_doctype==1,"onUpdate:modelValue":e[17]||(e[17]=l=>m.value.is_linked_form=l),placeholder:"Type to search and select a form...",onInput:fs,onFocus:e[18]||(e[18]=l=>st.value=!0),onBlur:bs},null,40,Ca),[[U,m.value.is_linked_form]]),st.value&&tt.value.length?(i(),r("ul",Da,[(i(!0),r(E,null,L(tt.value,(l,o)=>(i(),r("li",{class:"list-group-item list-group-item-action font-12",key:o,onMousedown:de(a=>vs(l.name),["prevent"]),style:{cursor:"pointer"}},g(l.name),41,Sa))),128))])):b("",!0)])])):b("",!0)])])])):b("",!0)])])])])])):b("",!0),F.value===2?(i(),r("div",Fa,[t("div",$a,[t("div",qa,[t("button",{onClick:e[19]||(e[19]=l=>kt()),class:"btn btn-sm btn-link text-dark"},e[76]||(e[76]=[t("i",{class:"bi bi-chevron-left me-1"},null,-1),h("Back ")]))]),t("div",Aa,[t("div",Va,[(i(!0),r(E,null,L($(v),(l,o)=>(i(),r("button",{key:o,type:"button",class:P(["btn",Ne.value===o?"btn-primary":"btn-outline-secondary"]),onClick:a=>Ne.value=o},[h(g(o===0?"Requestor":`Approver ${o}`)+" ",1),$(v).length>1?(i(),r("i",{key:0,class:"bi bi-x ms-2",onClick:de(a=>Jt(o),["stop"])},null,8,La)):b("",!0)],10,Ea))),128))])]),t("div",Ta,[t("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:jt},e[77]||(e[77]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),h("Add Block ")])),Sl.value?(i(),r("button",{key:0,class:"btn btn-sm btn-outline-secondary me-2",onClick:$l},e[78]||(e[78]=[t("i",{class:"bi bi-eye me-1"},null,-1),h("Preview ")]))):b("",!0),$(v).length?(i(),r("button",{key:1,class:"btn btn-sm btn-primary",onClick:e[20]||(e[20]=l=>Gt("save"))},[e[79]||(e[79]=t("i",{class:"bi bi-save me-1"},null,-1)),h(g($(R)!=="new"?"Update":"Save"),1)])):b("",!0)])]),t("div",Ra,[t("aside",{class:P(["zoho-field-library",{collapsed:!Ve.value}])},[t("div",{class:"library-header",onClick:e[21]||(e[21]=l=>Ve.value=!Ve.value)},[t("div",Ma,[t("h6",Ua,[e[80]||(e[80]=t("i",{class:"bi bi-grid-3x3-gap me-2"},null,-1)),h(" "+g(Ve.value?"Field Types":"Fields"),1)]),t("button",Oa,[t("i",{class:P(Ve.value?"bi bi-chevron-left":"bi bi-chevron-right")},null,2)])])]),Ve.value?(i(),r("div",Ba,[X(to,{fields:dt,onFieldAdd:Ll,onFieldDragstart:Tl,onFieldDragend:Rl})])):b("",!0)],2),t("div",Na,[t("div",{class:"canvas-inner",ref_key:"mainBlockRef",ref:ct},[(i(!0),r(E,null,L($(v),(l,o)=>D((i(),r("div",{class:"block-level",key:o},[t("div",za,[t("div",Pa,[t("div",Ha,[t("h6",ja,g(o===0?"Requestor Block":`Approver
                                  Block ${o}
                                  `),1),t("div",Wa,[o!==0&&B(o).view_only_reportee||B(o).all_approvals_required||B(o).requester_as_a_approver?(i(),r("div",Ja,[t("span",Ya,g(B(o).view_only_reportee===1?"Reporting Manager only":"")+" "+g(B(o).all_approvals_required===1?"All of the selected approvers":"")+" "+g(B(o).requester_as_a_approver===1?"Approval by Requestor":""),1),t("span",null,[e[81]||(e[81]=t("span",{class:"ms-1"}," on rejection escalating to ",-1)),t("span",Ga,g(B(o).on_rejection?`Level ${B(o).on_rejection}`:"Requestor"),1)]),t("span",Za,g(B(o).all_approvals_required===1?"":"(Skipping multi approval)"),1)])):b("",!0)])]),t("div",Ka,[$(R)&&$(O).length?(i(),r("div",Qa,[B(o)?(i(),r("label",Xa,[t("span",xa,g(B(o).roles.length>0?o===0?"Requestor Roles: ":"Approver Roles: ":""),1),t("span",Ia,g(B(o).roles.slice(0,2).join(", ")),1),B(o).roles.length>2?(i(),r("span",{key:0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:a=>yt(o),class:"more-count badge bg-primary ms-2",style:{cursor:"pointer"}}," +"+g(B(o).roles.length-2)+" more ",9,en)):b("",!0)])):b("",!0)])):b("",!0),ps(o)&&$(R)!=null&&$(R)!=null&&$(R)!="new"&&B(o).roles.length===0?(i(),r("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:a=>yt(o)},[e[82]||(e[82]=t("img",{src:Kl,alt:"Add",class:"me-1"},null,-1)),h(" "+g(o===0?"Add Requestors":"Add Approvers"),1)],8,tn)):b("",!0),$(R)!=null&&$(R)!=null&&$(R)!="new"&&B(o).roles.length>0?(i(),r("button",{key:2,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:a=>yt(o)},e[83]||(e[83]=[t("i",{class:"bi bi-pencil font-14"},null,-1)]),8,sn)):b("",!0),t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:a=>Jt(o)},e[84]||(e[84]=[t("i",{class:"bi bi-trash me-1"},null,-1),h(" Delete Block ")]),8,ln)])])]),t("div",on,[(i(!0),r(E,null,L(l.sections,(a,n)=>(i(),r("div",{key:"section-"+n,class:"dynamicSection mt-0 section"},[t("section",an,[t("div",nn,[D(t("input",{"onUpdate:modelValue":c=>a.label=c,type:"text",class:P(["border-less-input","font-14",{"italic-style":!a.label},{"fw-medium":a.label}]),onChange:c=>ue(o,n),onInput:c=>ue(o,n),placeholder:"Untitled section"},null,42,rn),[[U,a.label]]),a.errorMsg?(i(),r("small",dn,g(a.errorMsg),1)):b("",!0)]),t("div",cn,[t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:c=>vl(o,n)},e[85]||(e[85]=[t("i",{class:"bi bi-trash me-1"},null,-1),h(" Delete Section ")]),8,un)])]),t("div",pn,[(i(!0),r(E,null,L(a.rows,(c,u)=>(i(),r("section",{class:"row dynamicRow row-container",key:"row-"+u},[t("div",mn,[t("label",fn,g(Fl(u)),1),t("div",null,[c.columns.length<3?(i(),r("button",{key:0,class:"btn btn-light bg-transparent border-0 p-1 font-12",onClick:f=>bl(o,n,u)},e[86]||(e[86]=[t("i",{class:"bi bi-plus font-14"},null,-1),h(" Add Column ")]),8,vn)):b("",!0)])]),t("div",bn,[t("div",_n,[(i(!0),r(E,null,L(c.columns,(f,d)=>(i(),r("div",{key:"column-"+d,onMouseenter:p=>Ds(o,n,u,d),onMouseleave:Ss,class:"col p-0 dynamicColumn position-relative column-container"},[t("div",gn,[t("div",yn,[D(t("input",{"onUpdate:modelValue":p=>f.label=p,type:"text",class:P(["border-less-input","ps-1","font-14","inputHeight",{"italic-style":!f.label},{"fw-medium":f.label}]),onChange:p=>ue(o,n,u,d),onInput:p=>ue(o,n,u,d),placeholder:"Column Name"},null,42,wn),[[U,f.label]]),f.errorMsg?(i(),r("small",kn,g(f.errorMsg),1)):b("",!0)]),D(t("div",Cn,[t("button",{class:"btn btn-light bg-transparent me-1 btn-sm",onClick:p=>_l(o,n,u,d)},e[87]||(e[87]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Dn)],512),[[mt,Fs(o,n,u,d)]])]),f.fields.length===0?(i(),r("div",{key:0,class:"empty-drop-zone",onDragover:e[22]||(e[22]=de(()=>{},["prevent"])),onDrop:p=>ye(p,o,n,u,d,s.fieldIndex)},null,40,Sn)):b("",!0),(i(!0),r(E,null,L(f.fields,(p,w)=>{var q;return i(),r("div",{key:"field-"+w,onMouseenter:y=>ws(o,n,u,d,w),onMouseleave:ks,class:"dynamicField m-1 draggable-item",draggable:"true",onDragstart:y=>Ut(y,o,n,u,d,w),onDragover:e[26]||(e[26]=de(()=>{},["prevent"])),onDrop:y=>ye(y,o,n,u,d,w)},[t("div",{class:"drop-zone",onDragover:e[23]||(e[23]=de(()=>{},["prevent"])),onDrop:y=>ye(y,o,n,u,d,w)},null,40,$n),p.fieldtype!=="Table"?(i(),r("div",{key:0,class:"px-1 dynamic_fied field-border",draggable:"true",onDragstart:y=>Ut(y,o,n,u,d,w),onDragover:e[24]||(e[24]=de(()=>{},["prevent"])),onDrop:y=>ye(y,o,n,u,d,w)},[t("div",An,[t("div",Vn,[D(t("input",{"onUpdate:modelValue":y=>p.label=y,placeholder:"Name the field",class:P(["border-less-input","font-14","p-0","inputHeight",{"italic-style":!p.label},{"fw-medium":p.label}]),onChange:y=>ue(o,n,u,d,w),onInput:y=>ue(o,n,u,d,w)},null,42,En),[[U,p.label]]),p.errorMsg?(i(),r("small",Ln,g(p.errorMsg),1)):b("",!0)]),D(t("div",Tn,[t("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:y=>yl(o,n,u,d,w)},e[88]||(e[88]=[t("i",{class:"ri-file-copy-line font-13 copyIcon"},null,-1)]),8,Rn),t("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:y=>{gl(o,n,u,d,w),ue(o,n,u,d)}},e[89]||(e[89]=[t("i",{class:"bi bi-x-lg font-13"},null,-1)]),8,Mn)],512),[[mt,Cs(o,n,u,d,w)]])]),D(t("select",{"onUpdate:modelValue":y=>p.fieldtype=y,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:y=>wl(o,n,u,d,w)},[e[90]||(e[90]=t("option",{value:""},"Select Type",-1)),(i(),r(E,null,L(dt,y=>t("option",{key:y,value:y.type},g(y.label),9,On)),64))],40,Un),[[Oe,p.fieldtype]]),["Select","Table MultiSelect","Small Text"].includes(p.fieldtype)?(i(),r("div",Bn,[e[91]||(e[91]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),D(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":y=>p.options=y,class:"form-control shadow-none mb-1 font-12"},null,8,Nn),[[U,p.options]]),!p.options||p.options.trim()===""?(i(),r("small",zn," Options are required for this field type. ")):b("",!0)])):b("",!0),p.fieldtype==="Link"?(i(),r("div",Pn,[t("label",{class:"font-11 fw-light",for:"link-search-"+ve(o,n,u,d,w)}," Search Doctype: ",8,Hn),D(t("input",{id:"link-search-"+ve(o,n,u,d,w),type:"text","onUpdate:modelValue":y=>$(v)[o].sections[n].rows[u].columns[d].fields[w].options=y,onInput:y=>hs($(v)[o].sections[n].rows[u].columns[d].fields[w].options,o,n,u,d,w),onFocus:y=>_s(ve(o,n,u,d,w)),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,40,jn),[[U,$(v)[o].sections[n].rows[u].columns[d].fields[w].options]]),(q=He[ve(o,n,u,d,w)])!=null&&q.length&&bt[ve(o,n,u,d,w)]?(i(),r("ul",Wn,[(i(!0),r(E,null,L(He[ve(o,n,u,d,w)],(y,k)=>(i(),r("li",{key:k,onClick:C=>gs(o,n,u,d,w,y.name),class:"list-group-item list-group-item-action"},g(y.name),9,Jn))),128))])):b("",!0)])):b("",!0),t("div",Yn,[t("div",Gn,[t("div",Zn,[D(t("input",{class:"font-12","onUpdate:modelValue":y=>p.reqd=y,"true-value":1,id:"mandatory-"+o+"-"+n+"-"+u+"-"+d+"-"+w,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,Kn),[[Fe,p.reqd]])]),t("div",null,[t("label",{class:"font-12 m-0 fw-light",for:"mandatory-"+o+"-"+n+"-"+u+"-"+d+"-"+w},"Mandatory",8,Qn)])]),t("div",null,[t("button",{class:"btn btn-sm font-12",onClick:y=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,Xn)])]),p.showDescription?D((i(),r("textarea",{key:2,"onUpdate:modelValue":y=>p.description=y,class:"form-control font-12 mt-2",placeholder:"Enter field description"},null,8,xn)),[[U,p.description]]):b("",!0),p.error?(i(),r("small",In,g(p.error),1)):b("",!0)],40,qn)):b("",!0),t("div",{class:"drop-zone",onDragover:e[25]||(e[25]=de(()=>{},["prevent"])),onDrop:y=>ye(y,o,n,u,d,w)},null,40,ei),t("div",ti,[t("div",null,[t("div",null,[t("div",si,[p.fieldtype==="Table"?(i(),r("div",li,[(i(!0),r(E,null,L(se.value,(y,k)=>(i(),r("div",{key:k,class:"childTable"},[k===p.fieldname||k===p.options?(i(),r("h5",oi,g(k.replace(/_/g," ")),1)):b("",!0),j[k]&&k===Nt.value?(i(),r("div",ai,[t("div",ni,[p.showDescription?D((i(),r("input",{key:0,"onUpdate:modelValue":C=>p.description=C,class:"form-control font-12",placeholder:"Enter field description"},null,8,ii)),[[U,p.description]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:C=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,ri)])])):b("",!0),k===p.options||k===p.fieldname?(i(),r("table",di,[e[95]||(e[95]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Label"),t("th",null,"Field Type")])],-1)),t("tbody",{onDragover:de(As,["prevent"]),onDrop:C=>Vs(C,y)},[(i(!0),r(E,null,L(y,(C,Z)=>{var Ye,Ge,Ze,Ke,Qe,Xe,Q;return i(),r("tr",{key:Z,draggable:j[k],onDragstart:W=>$s(Z),onDragend:qs,class:P({dragging:Ce.value===Z})},[t("td",null,g(Z+1),1),j[k]?(i(),r("td",pi,[D(t("input",{"onUpdate:modelValue":W=>C.label=W,onInput:W=>rt(C,k,Z),placeholder:"Field Label",class:P(["form-control",{"border-1 border-danger":(Ge=(Ye=A[k])==null?void 0:Ye[Z])==null?void 0:Ge.length}])},null,42,mi),[[U,C.label]]),(Ke=(Ze=A[k])==null?void 0:Ze[Z])!=null&&Ke.length?(i(),r("div",fi,[(i(!0),r(E,null,L(A[k][Z],(W,Ml)=>(i(),r("div",{key:Ml},g(W),1))),128))])):b("",!0)])):(i(),r("td",vi,g(C.label),1)),j[k]?(i(),r("td",bi,[t("div",_i,[D(t("select",{"onUpdate:modelValue":W=>C.fieldtype=W,onChange:W=>rt(C,k,Z),class:P(["form-select form-select-sm",{"border-1 border-danger":(Xe=(Qe=A[k])==null?void 0:Qe[Z])==null?void 0:Xe.length}])},[e[92]||(e[92]=t("option",{value:""},"Select Type",-1)),(i(),r(E,null,L(ht,W=>t("option",{key:W.type,value:W.type},g(W.label),9,gi)),64))],42,hi),[[Oe,C.fieldtype]]),t("div",yi,[t("div",wi,[t("div",ki,[D(t("input",{class:"font-12 form-control-sm","onUpdate:modelValue":W=>C.description=W,placeholder:"description",type:"text"},null,8,Ci),[[U,C.description]])])]),t("button",{class:"btn btn-light btn-sm",onClick:W=>Js(k,Z)},e[93]||(e[93]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Di)])]),["Select"].includes(C.fieldtype)?(i(),r("div",Si,[e[94]||(e[94]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),D(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":W=>C.options=W,onInput:W=>rt(C,k,Z),class:"form-control shadow-none mb-1 font-12"},null,40,Fi),[[U,C.options]]),!C.options||C.options.trim()===""?(i(),r("small",$i," Options are required for this field type. ")):b("",!0)])):b("",!0),(Q=G[k])!=null&&Q.includes(Z)?(i(),r("span",qi,"Type required**")):b("",!0)])):(i(),r("td",Ai,g(C.fieldtype),1))],42,ui)}),128))],40,ci)])):b("",!0),p.fieldtype==="Table"&&(p.label===k||p.fieldname===k)?(i(),r("div",Vi,[t("button",{class:"btn btn-light btn-sm mx-2",onClick:C=>Ys(k,p.description)},g(j[k]?"Save":"Edit"),9,Ei),j[k]?(i(),r("button",{key:0,class:"btn btn-light btn-sm",onClick:C=>Ws(k)}," Add More Field ",8,Li)):b("",!0)])):b("",!0)]))),128))])):b("",!0)])])])])],40,Fn)}),128)),t("div",{class:"drop-zone-bottom",onDragover:e[27]||(e[27]=de(()=>{},["prevent"])),onDrop:p=>ye(p,o,n,u,d,f.fields.length),style:{"background-color":"#f0f0f0",border:"1px dashed #ccc",margin:"4px"}},null,40,Ti),t("div",{class:"drop-zone",onDragover:e[28]||(e[28]=de(()=>{},["prevent"])),onDrop:p=>ye(p,o,n,u,d,s.fields.length),style:{height:"10px","background-color":"transparent"}},null,40,Ri),t("div",Mi,[t("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:p=>hl(o,n,u,d)},e[96]||(e[96]=[t("i",{class:"bi bi-plus fs-5"},null,-1),t("span",null,"Add Field",-1)]),8,Ui)])],40,hn))),128))])])]))),128)),t("div",null,[(i(!0),r(E,null,L(a.afterCreated,(c,u)=>(i(),r("div",{key:u,class:"childTable dynamicColumn m-0 p-2"},[t("h5",Oi,g(c.tableName),1),j[c.tableName]?(i(),r("div",Bi,[t("div",Ni,[c.showDescription?D((i(),r("input",{key:0,"onUpdate:modelValue":f=>c.description=f,class:"form-control font-12",placeholder:"Enter field description"},null,8,zi)),[[U,c.description]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:f=>c.showDescription=!c.showDescription},g(c.showDescription?"Hide Description":c.description?"Edit Description":"Add Description"),9,Pi)])])):b("",!0),t("table",Hi,[e[102]||(e[102]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Label"),t("th",null,"Field Type")])],-1)),t("tbody",null,[(i(!0),r(E,null,L(c.columns,(f,d)=>{var p,w,q,y;return i(),r("tr",{key:d},[t("td",null,g(d+1),1),j[c.tableName]?(i(),r("td",ji,[D(t("input",{"onUpdate:modelValue":k=>f.label=k,placeholder:"Field Label",class:P(["form-control",{"border-1 border-danger":(p=G[c.tableName])==null?void 0:p.includes(d)}]),onBlur:k=>{var C;f.label=(C=f.label)==null?void 0:C.trim(),je(f,c.tableName,d,c.columns)}},null,42,Wi),[[U,f.label]]),(w=A[c.tableName])!=null&&w[d]?(i(),r("div",Ji,[(i(!0),r(E,null,L(A[c.tableName][d],(k,C)=>(i(),r("span",{key:C},[h(g(k)+" ",1),e[97]||(e[97]=t("br",null,null,-1))]))),128))])):b("",!0)])):(i(),r("td",Yi,g(f.label),1)),j[c.tableName]?(i(),r("td",Gi,[t("div",Zi,[D(t("select",{"onUpdate:modelValue":k=>f.fieldtype=k,class:P(["form-select form-select-sm",{"border-1 border-danger":(q=G[c.tableName])==null?void 0:q.includes(d)}]),onChange:k=>je(f,c.tableName,d,c.columns)},[e[98]||(e[98]=t("option",{value:""},"Select Type",-1)),(i(),r(E,null,L(ht,k=>t("option",{key:k.type,value:k.type},g(k.label),9,Qi)),64))],42,Ki),[[Oe,f.fieldtype]]),t("button",{class:"btn btn-light btn-sm",onClick:k=>Hs(o,n,c.tableName,d)},e[99]||(e[99]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Xi)]),f.fieldtype==="Select"?(i(),r("div",xi,[e[100]||(e[100]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),D(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":k=>f.options=k,class:"form-control shadow-none mb-1 font-12",onInput:k=>je(f,c.tableName,d,c.columns)},null,40,Ii),[[U,f.options]])])):b("",!0),(y=A[c.tableName])!=null&&y[d]?(i(),r("div",er,[(i(!0),r(E,null,L(A[c.tableName][d],(k,C)=>(i(),r("span",{key:C},[h(g(k),1),e[101]||(e[101]=t("br",null,null,-1))]))),128))])):b("",!0)])):(i(),r("td",tr,g(f.fieldtype),1))])}),128))])]),t("div",sr,[t("button",{class:"btn btn-light btn-sm mx-2",onClick:f=>js(o,n,c.tableName)},g(j[c.tableName]?"Save":"Edit"),9,lr),j[c.tableName]?(i(),r("button",{key:0,class:"btn btn-light btn-sm",onClick:f=>Ps(o,n,c.tableName)}," Add More Field ",8,or)):b("",!0)])]))),128))])]),t("div",null,[t("div",null,[o==0?(i(),r("button",{key:0,class:"btn btn-light addRow mb-3 mt-4",onClick:c=>Ls(o,n)}," Add New Table ",8,ar)):b("",!0),(i(!0),r(E,null,L(a.childTables,(c,u)=>{var f;return i(),r("div",{key:`table-${o}-${n}-${u}`,class:"child-table"},[c.newTable?(i(),r("div",nr,[t("div",ir,[t("div",null,[t("span",{class:P(c.tableName?"d-none":"text-danger")},"*",2),D(t("input",{"onUpdate:modelValue":d=>c.tableName=d,placeholder:"Table Name",onBlur:d=>Ot(c),class:P(["border-less-input font-14 p-0 inputHeight",{"italic-style":!c.tableName,"fw-medium":c.tableName}])},null,42,rr),[[U,c.tableName]]),(f=A[`${o}-${n}-${u}`])!=null&&f.tableName?(i(),r("div",dr,g(A[`${o}-${n}-${u}`].tableName),1)):b("",!0),Me.value?(i(),r("div",cr,g(Me.value),1)):b("",!0),t("div",ur,[t("div",pr,[c.showDescription?D((i(),r("input",{key:0,"onUpdate:modelValue":d=>c.as_a_block=d,class:"form-control font-12",placeholder:"Enter field description"},null,8,mr)),[[U,c.as_a_block]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:d=>c.showDescription=!c.showDescription},g(c.showDescription?"Hide Description":c.description?"Edit Description":"Add Description"),9,fr)])])]),t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:d=>Rs(o,n,u)},e[103]||(e[103]=[t("i",{class:"bi bi-trash"},null,-1),h(" Remove Table ")]),8,vr)]),(i(!0),r(E,null,L(c.columns,(d,p)=>{var w,q,y,k,C,Z,Ye,Ge,Ze,Ke,Qe,Xe;return i(),r("div",{key:p,class:"dynamicField"},[t("div",br,[t("div",_r,[t("div",null,[t("span",{class:P(d.label?"d-none":"text-danger")},"*",2),D(t("input",{"onUpdate:modelValue":Q=>d.label=Q,placeholder:"Name the field",onBlur:()=>{Ot(d),Us(d,o,n,u,p,c.columns)},class:P(["border-less-input font-14 p-0 inputHeight",{"italic-style":!d.label,"fw-medium":d.label,"is-invalid":(y=(q=(w=A[`${o}-${n}-${u}`])==null?void 0:w.columns)==null?void 0:q[p])==null?void 0:y.label}])},null,42,hr),[[U,d.label]]),(Z=(C=(k=A[`${o}-${n}-${u}`])==null?void 0:k.columns)==null?void 0:C[p])!=null&&Z.label?(i(),r("div",gr,g(A[`${o}-${n}-${u}`].columns[p].label),1)):b("",!0)]),t("div",yr,[t("div",wr,[d.showDescription?D((i(),r("input",{key:0,"onUpdate:modelValue":Q=>d.description=Q,class:"form-control font-12",placeholder:"Enter field description"},null,8,kr)),[[U,d.description]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:Q=>d.showDescription=!d.showDescription},g(d.showDescription?"Hide Description":d.description?"Edit Description":"Add Description"),9,Cr)]),t("button",{class:"btn btn-sm trash-btn py-0",onClick:Q=>Ms(o,n,u,p)},e[104]||(e[104]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Dr)])]),D(t("select",{"onUpdate:modelValue":Q=>d.fieldtype=Q,class:P(["form-select font-13 mb-1",{"is-invalid":(Ze=(Ge=(Ye=A[`${o}-${n}-${u}`])==null?void 0:Ye.columns)==null?void 0:Ge[p])==null?void 0:Ze.fieldtype}])},[e[105]||(e[105]=t("option",{value:""},"Select Type",-1)),(i(),r(E,null,L(ht,Q=>t("option",{key:Q.type,value:Q.type},g(Q.label),9,Fr)),64))],10,Sr),[[Oe,d.fieldtype]]),["Select"].includes(d.fieldtype)?(i(),r("div",$r,[e[106]||(e[106]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),D(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":Q=>d.options=Q,class:"form-control shadow-none mb-1 font-12"},null,8,qr),[[U,d.options]]),!d.options||d.options.trim()===""?(i(),r("small",Ar," Options are required for this field type. ")):b("",!0)])):b("",!0),(Xe=(Qe=(Ke=A[`${o}-${n}-${u}`])==null?void 0:Ke.columns)==null?void 0:Qe[p])!=null&&Xe.fieldtype?(i(),r("div",Vr,g(A[`${o}-${n}-${u}`].columns[p].fieldtype),1)):b("",!0)])])}),128)),t("button",{class:"btn btn-light btn-sm addField mx-1",onClick:d=>Ts(o,n,u)},e[107]||(e[107]=[t("i",{class:"bi bi-plus"},null,-1),h(" Add Field ")]),8,Er),t("button",{class:"btn btn-dark btn-sm font-12 mx-1",onClick:d=>zs(o,n,u)}," Create Table ",8,Lr),e[108]||(e[108]=t("hr",null,null,-1))])):b("",!0)])}),128))])]),t("div",Tr,[t("button",{class:"btn btn-light border font-12",onClick:c=>fl(o,n)},e[109]||(e[109]=[t("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),h(" Add Section ")]),8,Rr)])]))),128)),o===0?(i(),r("div",Mr)):b("",!0)])])),[[mt,o===Ne.value]])),128))],512)]),At.value?(i(),r("aside",Ur,[t("div",Or,[e[111]||(e[111]=t("h6",{class:"mb-0"},"Field Properties",-1)),t("button",{class:"btn btn-sm btn-link p-0",onClick:e[29]||(e[29]=l=>At.value=null)},e[110]||(e[110]=[t("i",{class:"bi bi-x-lg"},null,-1)]))]),e[112]||(e[112]=t("div",{class:"properties-content"},[t("p",{class:"text-muted small"},"Select a field to edit its properties")],-1))])):b("",!0)])])):b("",!0),F.value===3?(i(),r("div",Br,[t("div",Nr,[t("button",{onClick:e[30]||(e[30]=l=>kt()),class:"btn btn-sm btn-light"},e[113]||(e[113]=[t("i",{class:"bi bi-chevron-left"},null,-1),h(" Back ")])),e[115]||(e[115]=t("h1",{class:"font-14 fw-bold m-0"},"Workflow Setup",-1)),t("button",{class:"btn btn-sm btn-dark",onClick:wt},e[114]||(e[114]=[h(" Next "),t("i",{class:"bi bi-chevron-right"},null,-1)]))]),t("div",zr,[t("div",Pr,[e[121]||(e[121]=t("div",{class:"card-header bg-light"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-diagram-3 me-2"}),h("Workflow Configuration")])],-1)),t("div",Hr,[t("div",jr,[t("div",Wr,[e[118]||(e[118]=t("label",{class:"form-label fw-bold"},"Workflow Type",-1)),t("div",Jr,[D(t("input",{type:"radio",class:"btn-check",name:"workflowType",id:"existingWorkflow",value:"existing","onUpdate:modelValue":e[31]||(e[31]=l=>fe.value=l)},null,512),[[ss,fe.value]]),e[116]||(e[116]=t("label",{class:"btn btn-outline-primary",for:"existingWorkflow"},[t("i",{class:"bi bi-folder me-1"}),h("Use Existing ")],-1)),D(t("input",{type:"radio",class:"btn-check",name:"workflowType",id:"newWorkflow",value:"new","onUpdate:modelValue":e[32]||(e[32]=l=>fe.value=l),checked:""},null,512),[[ss,fe.value]]),e[117]||(e[117]=t("label",{class:"btn btn-outline-primary",for:"newWorkflow"},[t("i",{class:"bi bi-plus-circle me-1"}),h("Create New ")],-1))])]),fe.value==="existing"?(i(),r("div",Yr,[e[119]||(e[119]=t("label",{class:"form-label fw-bold"},"Select Workflow",-1)),X($(Se),{onOpen:Zt,options:ze.value,modelValue:me.value,"onUpdate:modelValue":e[33]||(e[33]=l=>me.value=l),placeholder:"Select WF Road Map",multiple:!1,class:"font-11 multiselect",searchable:!0,label:"display_name","track-by":"roadmap_title",onSelect:Kt,openDirection:"bottom"},null,8,["options","modelValue"]),e[120]||(e[120]=t("small",{class:"text-muted font-12 mt-1 d-block"},[t("i",{class:"bi bi-info-circle me-1"}),h("Auto-populates requestors and approvers ")],-1))])):b("",!0)])])]),fe.value==="new"?(i(),r("div",Gr,[e[127]||(e[127]=t("div",{class:"card-header bg-light"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-person-plus me-2"}),h("Requestor Configuration")])],-1)),t("div",Zr,[e[126]||(e[126]=t("p",{class:"text-muted font-12 mb-3"},[t("i",{class:"bi bi-info-circle me-1"}),h(" Define who can submit requests for this form based on WF Requestors ")],-1)),t("button",{class:"btn btn-primary btn-sm mb-3",onClick:Al},e[122]||(e[122]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),h("Add Requestor Role ")])),lt.value.length>0?(i(),r("div",Kr,[t("table",Qr,[e[125]||(e[125]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"40%"},"Role"),t("th",{width:"30%"},"Auto Approval"),t("th",{width:"20%"},"Permissions"),t("th",{width:"10%"},"Action")])],-1)),t("tbody",null,[(i(!0),r(E,null,L(lt.value,(l,o)=>(i(),r("tr",{key:o},[t("td",null,[D(t("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":a=>l.role=a,placeholder:"Enter role name"},null,8,Xr),[[U,l.role]])]),t("td",null,[t("div",xr,[D(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a=>l.autoApproval=a},null,8,Ir),[[Fe,l.autoApproval]]),t("label",ed,g(l.autoApproval?"Yes":"No"),1)])]),t("td",null,[t("button",{class:"btn btn-sm btn-outline-secondary",onClick:a=>El()},e[123]||(e[123]=[t("i",{class:"bi bi-gear"},null,-1),h(" Configure ")]),8,td)]),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:a=>Vl(o)},e[124]||(e[124]=[t("i",{class:"bi bi-trash"},null,-1)]),8,sd)])]))),128))])])])):b("",!0)])])):b("",!0),fe.value==="existing"&&me.value&&Ee.value.length>0?(i(),r("div",ld,[e[133]||(e[133]=t("div",{class:"card-header bg-success text-white"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-check-circle me-2"}),h("Loaded Requestors")])],-1)),t("div",od,[t("div",ad,[e[128]||(e[128]=t("i",{class:"bi bi-check-circle me-1"},null,-1)),t("strong",null,g(Ee.value.length),1),e[129]||(e[129]=h(" requestor role(s) loaded from ")),t("strong",null,g(me.value.display_name),1)]),t("div",nd,[t("table",id,[e[131]||(e[131]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Role"),t("th",null,"Auto Approval"),t("th",null,"Columns Allowed")])],-1)),t("tbody",null,[(i(!0),r(E,null,L(Ee.value,(l,o)=>(i(),r("tr",{key:o},[t("td",null,[t("strong",null,g(l.requestor),1)]),t("td",null,[l.auto_approval?(i(),r("span",rd,e[130]||(e[130]=[t("i",{class:"bi bi-check-circle me-1"},null,-1),h("Yes ")]))):(i(),r("span",dd,"No"))]),t("td",null,[t("small",cd,g(l.columns_allowed||"All fields"),1)])]))),128))])])]),e[132]||(e[132]=t("div",{class:"alert alert-info mt-3"},[t("i",{class:"bi bi-info-circle me-1"}),h(" Go to "),t("strong",null,"Step 2"),h(" and click "),t("strong",null,'"Add Requestors"'),h(" to select specific designations for these roles ")],-1))])])):b("",!0),fe.value==="existing"&&me.value&&ge.value.length>0?(i(),r("div",ud,[e[142]||(e[142]=t("div",{class:"card-header bg-primary text-white"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-diagram-3 me-2"}),h("Loaded Approval Workflow")])],-1)),t("div",pd,[t("div",md,[e[134]||(e[134]=t("i",{class:"bi bi-check-circle me-1"},null,-1)),t("strong",null,g(ge.value.length),1),e[135]||(e[135]=h(" approval level(s) loaded from ")),t("strong",null,g(me.value.display_name),1)]),t("div",fd,[t("table",vd,[e[140]||(e[140]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"10%"},"Level"),t("th",{width:"25%"},"Role"),t("th",{width:"15%"},"Mandatory"),t("th",{width:"20%"},"Approval Type"),t("th",{width:"30%"},"Columns Allowed")])],-1)),t("tbody",null,[(i(!0),r(E,null,L(ge.value,(l,o)=>(i(),r("tr",{key:o},[t("td",null,[t("span",bd,"Level "+g(l.level),1)]),t("td",null,[t("strong",null,g(l.role),1)]),t("td",null,[l.mandatory?(i(),r("span",_d,e[136]||(e[136]=[t("i",{class:"bi bi-exclamation-circle me-1"},null,-1),h("Required ")]))):(i(),r("span",hd,"Optional"))]),t("td",null,[l.view_only_reportee?(i(),r("span",gd,e[137]||(e[137]=[t("i",{class:"bi bi-person me-1"},null,-1),h("Reporting Manager ")]))):l.all_approvals_required?(i(),r("span",yd,e[138]||(e[138]=[t("i",{class:"bi bi-people me-1"},null,-1),h("All Users ")]))):l.requester_as_a_approver?(i(),r("span",wd,e[139]||(e[139]=[t("i",{class:"bi bi-person-check me-1"},null,-1),h("Requestor ")]))):(i(),r("span",kd," Any One "))]),t("td",null,[t("small",Cd,g(l.columns_allowed||"All fields"),1)])]))),128))])])]),e[141]||(e[141]=t("div",{class:"alert alert-info mt-3"},[t("i",{class:"bi bi-info-circle me-1"}),h(" Go to "),t("strong",null,"Step 2"),h(" and click "),t("strong",null,'"Add Approvers"'),h(" for each level to select specific designations ")],-1))])])):b("",!0),e[143]||(e[143]=Wl('<div class="card mt-4" data-v-93fd5168><div class="card-header bg-light" data-v-93fd5168><h6 class="mb-0 fw-bold" data-v-93fd5168><i class="bi bi-shield-check me-2" data-v-93fd5168></i>System Generated Fields</h6></div><div class="card-body" data-v-93fd5168><div class="alert alert-secondary mb-3" data-v-93fd5168><i class="bi bi-info-circle me-2" data-v-93fd5168></i> These fields are automatically included for all requestors. </div><div class="row g-3" data-v-93fd5168><div class="col-md-6" data-v-93fd5168><div class="field-preview-card" data-v-93fd5168><label class="form-label fw-bold" data-v-93fd5168>Requestor Name</label><input type="text" class="form-control" value="Auto-populated from user profile" disabled data-v-93fd5168></div></div><div class="col-md-6" data-v-93fd5168><div class="field-preview-card" data-v-93fd5168><label class="form-label fw-bold" data-v-93fd5168>Requestor Email</label><input type="email" class="form-control" value="Auto-populated from user profile" disabled data-v-93fd5168></div></div><div class="col-md-6" data-v-93fd5168><div class="field-preview-card" data-v-93fd5168><label class="form-label fw-bold" data-v-93fd5168>Request Date</label><input type="text" class="form-control" value="Auto-populated on submission" disabled data-v-93fd5168></div></div><div class="col-md-6" data-v-93fd5168><div class="field-preview-card" data-v-93fd5168><label class="form-label fw-bold" data-v-93fd5168>Department</label><input type="text" class="form-control" value="Auto-populated from user profile" disabled data-v-93fd5168></div></div></div></div></div>',1))])])):b("",!0),F.value===4?(i(),r("div",Dd,[e[144]||(e[144]=t("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[t("div",null,[t("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),t("div")],-1)),X(ls,{blockArr:ut.value},null,8,["blockArr"])])):b("",!0)])])])])])])]),t("div",Sd,[t("div",Fd,[t("div",$d,[e[148]||(e[148]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",qd,[e[146]||(e[146]=t("label",{for:""},"Form Name",-1)),D(t("input",{"onUpdate:modelValue":e[34]||(e[34]=l=>at.value=l),multiple:!1,placeholder:$(S).query.id,class:"font-11 form-control",id:"Form_name_print",searchable:!0},null,8,Ad),[[U,at.value]]),t("div",Vd,[t("div",Ed,[D(t("input",{class:"font-12","onUpdate:modelValue":e[35]||(e[35]=l=>Te.value=l),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[Fe,Te.value]])]),e[145]||(e[145]=t("div",null,[t("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),t("div",{class:"modal-footer"},[e[147]||(e[147]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:ul},"Add Print Format")])])])]),t("div",Ld,[t("div",Td,[t("div",Rd,[e[149]||(e[149]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"formViewModalLabel"},"Form Preview"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Md,[X(ls,{blockArr:ut.value},null,8,["blockArr"])]),e[150]||(e[150]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),t("div",Ud,[t("div",Od,[t("span",Bd,g(H.value==0?"Add Requestors":`Approval Settings - Level ${H.value}`),1),e[151]||(e[151]=t("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),t("div",Nd,[t("div",zd,[H.value!==0?(i(),r("div",Pd,[e[153]||(e[153]=t("label",{class:"fw-bold font-12 mb-2"},"Approver Type",-1)),D(t("select",{"onUpdate:modelValue":e[36]||(e[36]=l=>ce.value=l),class:"form-select shadow-none font-12"},e[152]||(e[152]=[t("option",{value:""},"Any one of the selected approvers",-1),t("option",{value:"ViewOnlyReportee"},"Reporting Manager only",-1),t("option",{value:"all_approvals_required"},"All of the selected approvers",-1),t("option",{value:"requester_as_a_approver"},"Approval by Requestor",-1)]),512),[[Oe,ce.value]])])):b("",!0),t("div",Hd,[t("div",jd,[t("span",Wd," Select "+g(H.value===0?"Requestors":"Approvers"),1),t("span",Jd,g(T.value.length)+" Selected ",1)]),ie.value.length?(i(),r("div",Yd,[t("div",Gd,[t("div",Zd,[t("input",{type:"checkbox",id:"selectAll",checked:el.value,onChange:tl,class:"form-check-input me-2 designationCheckBox"},null,40,Kd),t("label",Qd," Select all designation ("+g(We.value.length)+") ",1)]),H.value!==0?(i(),r("div",Xd,[D(t("input",{type:"checkbox",id:"showHods","onUpdate:modelValue":e[37]||(e[37]=l=>Re.value=l),class:"form-check-input me-2 designationCheckBox"},null,512),[[Fe,Re.value]]),e[154]||(e[154]=t("label",{for:"showHods",class:"form-check-label mt-2 fw-bold"}," Show HODs Only ",-1))])):b("",!0),t("div",null,[T.value.length?(i(),r("button",{key:0,type:"button",class:"btn btn-sm font-12 text-danger",onClick:sl},e[155]||(e[155]=[t("i",{class:"bi bi-x"},null,-1),h(" Clear all ")]))):b("",!0)])]),ie.value.length?(i(),Jl($(Yl),{key:0,multiple:!0,modelValue:T.value,"onUpdate:modelValue":e[38]||(e[38]=l=>T.value=l),options:We.value,"close-on-select":!1,"clear-search-on-select":!0,placeholder:"Search & Select Designations"},null,8,["modelValue","options"])):b("",!0)],512)):(i(),r("div",xd,e[156]||(e[156]=[t("div",{class:"d-flex justify-content-center"},[t("span",null,"No Designations Found")],-1)])))]),H.value!==0?(i(),r("div",Id,[e[157]||(e[157]=t("div",null,[t("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),D(t("select",{"onUpdate:modelValue":e[39]||(e[39]=l=>Ae.value=l),class:"form-select shadow-none font-12 mt-1 me-2"},[(i(!0),r(E,null,L(ys.value,l=>(i(),r("option",{key:l,value:l},g(l===0?"Requestor":"Approver Level "+l),9,ec))),128))],512),[[Oe,Ae.value,void 0,{number:!0}]])])):b("",!0),H.value!==0?(i(),r("div",tc,[t("div",sc,[t("div",lc,[D(t("input",{"onUpdate:modelValue":e[40]||(e[40]=l=>Ie.value=l),type:"checkbox","true-value":1,"false-value":0,id:"Approver",class:"me-2 m-0 form-check-input designationCheckBox"},null,512),[[Fe,Ie.value]]),e[158]||(e[158]=t("label",{for:"Approver",class:"m-0"},"Approval Mandatory",-1))]),ft.value===!0?(i(),r("div",oc,[D(t("input",{"onUpdate:modelValue":e[41]||(e[41]=l=>et.value=l),type:"checkbox","true-value":1,"false-value":0,id:"approver_can_edit",class:"me-2 m-0 form-check-input designationCheckBox"},null,512),[[Fe,et.value]]),e[159]||(e[159]=t("label",{for:"approver_can_edit",class:"m-0"}," Allow this approver to edit the form ",-1))])):b("",!0)])])):b("",!0)]),t("div",ac,[t("div",nc,[X(Gl,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:ll,name:H.value===0?"Add Requestor":"Add Approvers"},null,8,["name"])])])])])]))}},cc=is(ic,[["__scopeId","data-v-93fd5168"]]);export{cc as default};
