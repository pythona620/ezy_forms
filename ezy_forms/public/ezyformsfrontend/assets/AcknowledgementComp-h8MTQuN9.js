import{_ as G,r as l,x as H,E as J,w as _,e as Q,K as g,y as v,z as b,o as h,c as C,d as t,b as f,G as q,P as K,O as Y,L as W,m as E,t as M,H as N,U as X}from"./index-C5QI0lcP.js";import{Q as Z}from"./vue-quill.snow-01tkiT0a.js";const ee={class:"mt-2"},te={class:"modal fade",id:"AcknowledgementModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"AcknowledgementLabel","aria-hidden":"true"},ae={class:"modal-dialog modal-lg modal-dialog-centered"},ne={class:"modal-content"},le={class:"modal-body"},se={class:"modal-footer"},oe=["disabled"],de=["disabled"],ie={class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},me={class:"modal-dialog modal-dialog-centered"},ce={class:"modal-content"},re={class:"modal-body"},ue={class:"fw-bold"},pe={class:"fw-semibold"},ge={__name:"AcknowledgementComp",setup(ve){const A=l(0),U=l([]),r=l([]);l({ezy_departments_items:[]});const P=l([]),d=l(""),m=l(""),u=l(!1);function S(){u.value=!0,d.value="",m.value=""}function T(){const a={acknowledgement:m.value,naming_series:d.value,doctype:g.acknowledgement};v.post(b.DataUpdate,a).then(e=>{e.message.data&&(bootstrap.Modal.getInstance(document.getElementById("AcknowledgementModal")).hide(),u.value=!1,i())})}function B(){const a={acknowledgement:m.value,naming_series:d.value,doctype:g.acknowledgement,name:y.value.name};v.put(`${b.DataUpdate}/${y.value.name}`,a).then(e=>{e.message.success==!0&&(N("acknowledgement Updated successfully"),i(),bootstrap.Modal.getInstance(document.getElementById("AcknowledgementModal")).hide()),e.message.success==!1&&X(e.message.message)}).catch(e=>{console.error("Error updating toggle:",e)})}const y=l("");function x(){d.value="",m.value="",u.value=!1}function V(a){d.value=a.naming_series||"",m.value=a.acknowledgement||"",y.value=a,new bootstrap.Modal(document.getElementById("AcknowledgementModal")).show()}const c=l({}),w=l("");function I(a){c.value=a;const e=a.enable===0;w.value=e?"Enable":"Disable",new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show()}function F(){const a=c.value.enable==="1"||c.value.enable===1;c.value.enable=a?0:1,v.put(`${b.resource}${g.acknowledgement}/${c.value.name}`,c.value).then(e=>{e.data&&(N(`acknowledgement ${w.value}d successfully`),i())}).catch(e=>{console.error("Error updating toggle:",e)})}const $=H(()=>J.value),s=l({limitPageLength:20,limit_start:0,filters:[]}),p=l({department_code:"",department_name:""}),D=l([{th:"Name",td_key:"name"},{th:"Status",td_key:"activate"}]),R=l({full_name:{type:"input"},subject:{type:"input"},status:{type:"select",options:["Success","Failed"]}}),k=l({department_code:"",department_name:"",business_unit:"",ezy_departments_items:[]});_(()=>k.value.department_code,a=>{const e=a.trim().toLowerCase();U.value.filter(o=>o!==null).map(o=>o.trim().toLowerCase()).includes(e)?p.value.department_code="Department code already exists.":p.value.department_code=""}),_(()=>k.value.department_name,a=>{const e=a.trim().toLowerCase();P.value.filter(o=>o!==null).map(o=>o.trim().toLowerCase()).includes(e)?p.value.department_name="Department name already exists.":p.value.department_name=""}),Q({applieddepartment_name:!1,applieddepartment_code:!1,department_name:"",department_code:""}),_($,a=>{k.value.business_unit=a,a.length&&i()},{immediate:!0});const L=l(null);function O(a){clearTimeout(L.value),L.value=setTimeout(()=>{s.value.filters=[],D.value.forEach(e=>{const n=e.td_key;a[n]&&s.value.filters.push([n,"like",`%${a[n]}%`])}),s.value.filters.length?i(s.value.filters):i()},500)}const j=a=>{s.value.limitPageLength=a,s.value.limit_start=0,i()},z=([a,e])=>{s.value.limitPageLength=a,s.value.limit_start=e,i()};function i(a){a&&s.value.filters.push(...a);const e={fields:JSON.stringify(["name","acknowledgement","naming_series","enable"]),filters:JSON.stringify(s.value.filters),limit_page_length:s.value.limitPageLength,limit_start:s.value.limit_start,doctype:g.acknowledgement,order_by:"`tabAcknowledgement`.`creation` desc"};v.get(b.GetDoctypeData,{params:e}).then(n=>{if(n){const o=n.message.data;A.value=n.message.total_count,s.value.limit_start===0?r.value=o:r.value=r.value.concat(o)}}).catch(n=>{console.error("Error fetching department data:",n)})}return(a,e)=>(h(),C("div",null,[t("div",{class:"d-flex justify-content-between align-items-center py-2"},[e[2]||(e[2]=t("div",null,[t("h1",{class:"mt-3 font-13"}," Acknowledgement ")],-1)),t("div",{class:"d-flex gap-2 align-items-center"},[t("div",{class:"d-flex align-items-center"},[t("button",{type:"button",class:"btn btn-dark CreateDepartments","data-bs-toggle":"modal","data-bs-target":"#AcknowledgementModal",onClick:S}," Create Acknowledgement ")])])]),t("div",ee,[f(q,{tHeaders:D.value,tData:r.value,enableDisable:"true",isAction:"true",viewType:"viewPdf",isFiltersoption:"true",onCellClick:V,"field-mapping":R.value,onUpdateFilters:O,onToggleClick:I},null,8,["tHeaders","tData","field-mapping"]),f(K,{currentRecords:r.value.length,totalRecords:A.value,onUpdateValue:j,onLimitStart:z},null,8,["currentRecords","totalRecords"])]),t("div",te,[t("div",ae,[t("div",ne,[t("div",{class:"modal-header"},[e[3]||(e[3]=t("h5",{class:"modal-title",id:"AcknowledgementLabel"},"Acknowledgement",-1)),t("button",{onClick:x,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",le,[e[4]||(e[4]=t("label",{for:"password",class:"font-13"},"Acknowledgement Name",-1)),e[5]||(e[5]=t("br",null,null,-1)),f(Y,{tag:"input",type:"text",name:"acknowledgementName",id:"acknowledgementName",placeholder:"Enter Name",class:"mb-4",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[6]||(e[6]=t("label",{for:"password",class:"font-13"},"Acknowledgement",-1)),e[7]||(e[7]=t("br",null,null,-1)),f(W(Z),{content:m.value,"onUpdate:content":e[1]||(e[1]=n=>m.value=n),contentType:"html",theme:"snow",style:{height:"300px"}},null,8,["content"])]),t("div",se,[t("button",{onClick:x,type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Close "),u.value?(h(),C("button",{key:0,type:"button",class:"btn btn-dark",disabled:!d.value,onClick:T}," Submit ",8,oe)):(h(),C("button",{key:1,type:"button",class:"btn btn-dark",disabled:!d.value,onClick:B}," Update ",8,de))])])])]),t("div",ie,[t("div",me,[t("div",ce,[e[12]||(e[12]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Confirm Acknowledgement Status"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",re,[e[8]||(e[8]=E(" Are you sure you want to ")),t("span",ue,M(w.value),1),e[9]||(e[9]=E(' "')),t("span",pe,M(c.value.name),1),e[10]||(e[10]=E('"? '))]),t("div",{class:"modal-footer"},[e[11]||(e[11]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal",onClick:F},"Yes, Proceed")])])])])]))}},ye=G(ge,[["__scopeId","data-v-f7fab2e1"]]);export{ye as default};
