import{_ as we,u as xe,a as Ne,o as s,c as a,d as e,F as S,h as q,b as E,Q as $,n as y,t as c,M as Me,r,E as Z,x as w,f as Ve,K as fe,y as O,z as J,w as Ae,a3 as De,O as ye,l as i,S as be,L as Pe,a4 as qe,i as k,a5 as Ee,H as Qe,U as B,I as Ye,g as Ke,Z as G,m as ke}from"./index-BICkGThB.js";const Ge="/assets/ezy_forms/ezyformsfrontend/assets/Image-DGmvfUlV.svg",Xe={class:"tabs-div"},et={class:"tab-list m-0 p-0"},tt={class:"ms-1"},st={__name:"TabsComp",props:{tabs:{type:Array,required:!0}},emits:["activeTabValue"],setup(u,{emit:ae}){const I=ae,j=xe();function C(L){I("activeTabValue",L)}function F(L){return L.name==="Forms"?j.path.startsWith("/forms/department/"):j.path.startsWith(L.route)}return(L,_)=>{const h=Ne("router-link");return s(),a("div",Xe,[e("ul",et,[(s(!0),a(S,null,q(u.tabs,(p,Q)=>(s(),a("li",{key:Q,class:"tab-item"},[E(h,{to:p.route,class:y(["tab-link",F(p)?"active-link":""]),onClick:x=>C(p.name)},{default:$(()=>[e("i",{class:y(p.icon)},null,2),e("span",tt,c(p.name),1)]),_:2},1032,["to","class","onClick"])]))),128))])])}}},Le=we(st,[["__scopeId","data-v-9a70e7a2"]]),ot={class:""},at={class:"d-md-none mobile_header_top"},nt={class:"d-flex justify-content-between align-content-center p-2 shadow-sm"},lt={class:"d-flex gap-3 justify-content-end align-items-center m-0 me-3"},it={class:"logooutbtn m-0"},rt={class:"btn-group dropdown navbar-nav ms-auto"},ct={class:"dropdown-menu dropdown-menu-start p-2"},dt={class:"d-flex gap-2 align-items-center"},ut={key:0},mt={class:"d-flex justify-content-center align-items-center btn btn-dark"},pt={key:0,class:""},vt={class:"fw-medium font-13"},ft={key:1,class:""},bt={class:"fw-medium font-11"},ht={class:"mt-2"},gt={class:"d-flex justify-content-center align-items-center"},_t={class:"mt-2"},yt={class:"d-flex justify-content-center align-items-center"},kt={class:"d-none d-md-block"},wt={class:"position-sticky top-0 stickyheader"},xt={class:"container-fluid p-0"},$t={class:"headerbackgound py-1"},St={class:"row"},Ct={class:"col-2"},Rt={class:"d-sm-block d-md-none p-2"},Dt={class:""},Pt={class:"col-7"},qt={class:"mt-2 ms-2"},Et={class:"col-3 d-flex justify-content-end align-items-center pe-1"},Gt={class:"d-flex gap-3 justify-content-end align-items-center m-0 me-3"},Lt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},Nt={class:"offcanvas-body"},Mt={class:"list-unstyled designation-scroll"},Vt={class:"d-none d-md-block"},At={class:"logooutbtn m-0"},It={class:"btn-group dropdown navbar-nav ms-auto"},Ft={class:"dropdown-menu dropdown-menu-start p-2"},Tt={class:"d-flex gap-2 align-items-center"},Ut={key:0},jt={class:"d-flex justify-content-center align-items-center btn btn-dark"},zt={key:0,class:""},Bt={class:"fw-medium font-13"},Ot={key:1,class:""},Jt={class:"fw-medium font-11"},Wt={class:"mt-2"},Ht={class:"d-flex justify-content-center align-items-center"},Zt={class:"mt-2"},Qt={class:"d-flex justify-content-center align-items-center"},Yt={class:"d-md-none mobile-nav"},Kt={class:"modal fade",id:"riaseRequestModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"riaseRequestModalLabel","aria-hidden":"true"},Xt={class:"modal-dialog modal-dialog-centered modal-md"},es={class:"modal-content"},ts={class:"modal-header"},ss={class:"modal-body"},os={class:"mb-2"},as={class:"mb-2"},ns={class:"modal fade",id:"changePassword","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"changePasswordLabel","aria-hidden":"true"},ls={class:"modal-dialog modal-dialog-centered modal-md"},is={class:"modal-content"},rs={class:"modal-header"},cs={class:"modal-body"},ds={class:"mb-2"},us={class:"position-relative"},ms=["type"],ps={key:0,class:"text-danger font-10 m-0 ps-1 mt-1"},vs={class:"mb-2"},fs={class:"position-relative"},bs=["type"],hs={key:0,class:"text-danger font-10 m-0 ps-2"},gs={class:"font-12"},_s={class:"d-flex justify-content-center align-items-center p-3"},ys=["disabled"],ks={class:"modal fade",id:"confirmMailModal",tabindex:"-1","aria-labelledby":"confirmMailModalLabel","aria-hidden":"true",ref:"confirmModal"},ws={__name:"HeaderComp",props:["id"],emits:["toggleSidebar"],setup(u,{emit:ae}){const I=Me();r(!0);const j=r([{name:"Dashboard",icon:"bi bi-columns-gap",route:"/dashboard"},{name:"To do",icon:"fa-solid fa-list-check",route:"/todo"},{name:"Forms",icon:"bi bi-file-earmark-text",route:"/forms"},{name:"Settings",icon:"bi bi-gear",route:"/settings"},{name:"Archive",icon:"bi bi-archive",route:"/archived"}]),C=r({SelectedDepartment:"",selectedCategory:"",selectedform:""});r(!1);const F=xe();r([]);const L=r([]),_=r(Z.value),h=r(""),p=r(""),Q=r(""),x=r(""),M=r(""),N=r(""),W=r(""),H=r([]),V=r([]),he=r([]),Y=r([]);r([]);const d=r(""),ge=r({limit_start:0,limitPageLength:100}),R=r(""),K=r(""),ne=r([]),le=r([]),T=r(""),ie=r([]),_e=r([]),X=w(()=>j.value);function D(){O.post(J.logout).then(l=>{sessionStorage.clear(),localStorage.clear(),I.push({path:"/"}).then(()=>{})})}function g(){C.value.selectedCategory="",C.value.selectedform="",H.value=[]}const v=()=>{const l="System Settings",t={fields:JSON.stringify(["minimum_password_score"])};O.get(`${J.resource}${fe.SystemSettings}/${encodeURIComponent(l)}`,{params:t}).then(o=>{o.data&&(T.value=o.data.minimum_password_score)}).catch(o=>{console.error("Error fetching system settings:",o)})};function f(l){return l==2?{regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{8,}$/,message:"Password must be at least 8 characters with at least one uppercase, lowercase, number, and special character."}:l==3?{regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{10,}$/,message:"Password must be at least 10 characters and fully mixed (uppercase, lowercase, numbers, special characters)."}:l==4?{regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&]).{14,}$/,message:"Password must be at least 14+ characters with a random mix of all character types."}:{regex:/.*/,message:"Password must meet the system's security requirements."}}Ve(()=>{var o;Be(),d.value=F.path,localStorage.setItem("Bu",Z.value);const l=JSON.parse(localStorage.getItem("employeeData")),t=JSON.parse(localStorage.getItem("UserName"));le.value=l.company_field,ie.value=(o=l.responsible_units)==null?void 0:o.map(b=>b.company),t?(Q.value=t.full_name,t.full_name==="Administrator"?(W.value=t.full_name,h.value=t.full_name.charAt(0).toUpperCase()):l&&(W.value=t.full_name,h.value=l.emp_name.charAt(0).toUpperCase()||l.full_name.charAt(0).toUpperCase(),M.value=l.name,N.value=l.designation||"")):console.warn("No user data found in localStorage.")});const n=()=>{const l="support@caratred.com",t="example@caratred.com";let o="";t.includes("@gmail.com")?o=`https://mail.google.com/mail/?view=cm&fs=1&to=${l}`:t.includes("@outlook.com")||t.includes("@hotmail.com")||t.includes("@live.com")?o=`https://outlook.office.com/mail/deeplink/compose?to=${l}`:o=`mailto:${l}`,window.open(o,"_blank")};function m(){p.value="",x.value="",ee.value="",de.value=""}const re=r(!1),ce=r(!1),ee=r(""),Ie=()=>{re.value=!re.value},Fe=()=>{ce.value=!ce.value},Te=()=>{const{regex:l,message:t}=f(T.value);l.test(p.value)?ee.value="":ee.value=t,$e()},$e=()=>{de.value=p.value&&x.value&&p.value!==x.value},Ue=w(()=>{const{regex:l}=f(T.value);return l.test(p.value)}),je=w(()=>!p.value||!x.value||!Ue.value||p.value!==x.value),de=w(()=>p.value&&x.value&&p.value!==x.value);function ze(){if(de.value){console.error("Passwords do not match.");return}const l=JSON.parse(localStorage.getItem("employeeData")),t={new_password:p.value};O.put(`${J.resource}${fe.users}/${l.name}`,t).then(o=>{Qe("Password changed Successfully"),bootstrap.Modal.getInstance(document.getElementById("changePassword")).hide(),p.value="",x.value=""}).catch(o=>{console.error("Error:",o)})}const Be=()=>{const l={fields:JSON.stringify(["name","bu_code","allow_approver_to_edit_form","attachment_view_required"]),doctype:fe.wfSettingEzyForms,limit_page_length:"none"};O.get(J.GetDoctypeData,{params:l}).then(t=>{if(t!=null&&t.message){const o=t.message.data||[];ne.value=o,V.value=o.map(A=>A.bu_code),V.value.length&&!_.value.length&&(_.value=V.value[0]);const b=o.find(A=>A.bu_code===_.value);b&&(R.value=b.allow_approver_to_edit_form,K.value=b.attachment_view_required,sessionStorage.setItem("attachmentViewRequired",b.attachment_view_required),sessionStorage.setItem("allow_approver_to_edit_form",b.allow_approver_to_edit_form))}}).catch(t=>{console.error("Error fetching ezyForms data:",t)})};Ae(_,(l,t)=>{Z.value=l,localStorage.setItem("Bu",Z.value),sessionStorage.setItem("Bu",Z.value);const o=ne.value.find(b=>b.bu_code===l);o&&(R.value=o.allow_approver_to_edit_form,K.value=o.attachment_view_required,sessionStorage.setItem("attachmentViewRequired",o.attachment_view_required),sessionStorage.setItem("allow_approver_to_edit_form",o.allow_approver_to_edit_form)),(F.path.includes("forms")&&l!==t||F.path.includes("forms")&&l===t)&&Ce()});function Se(){I.push({path:"/dashboard/maindash"})}function Ce(){let l={business_unit:_.value};O.post(J.DepartmentNames,l).then(t=>{Y.value=t.message,he.value=Y.value.sort((o,b)=>o.department_name.localeCompare(b.department_name)).map(o=>({name:o.department_name,route:o.name}))}).catch(t=>{console.log(t)})}function Oe(l){var b,A;if(H.value=[],C.value.selectedform=l,!l)return;let t=(b=localStorage.getItem("USERROLE"))==null?void 0:b.trim().toLowerCase();if(t=t==null?void 0:t.replace(/^"|"$/g,""),!t){B("User role is missing. Please log in again.");return}const o=L.value.find(z=>z.form_short_name===l);if(!o){B("Selected form does not exist in the fetched list.");return}try{const ue=(A=JSON.parse(o.form_json).workflow)==null?void 0:A.find(P=>P.type==="requestor");if(!ue||!Array.isArray(ue.roles)){B("Invalid requestor data.");return}const me=ue.roles.map(P=>P.trim().toLowerCase()),te=P=>P.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),se=me.map(P=>te(P)),U=te(t);se.forEach((P,ve)=>{console.log(`Comparing role[${ve}]: "${P}" with userRole: "${U}"`)}),se.some(P=>P===U)?We():B("You do not have permission to raise this request.")}catch(z){B("Invalid form data. Please contact support.")}}function Je(l){var A;let t=(A=localStorage.getItem("USERROLE"))==null?void 0:A.trim().toLowerCase();if(t=t==null?void 0:t.replace(/^"|"$/g,""),!t){B("User role is missing. Please log in again.");return}const o=[["enable","=",1]];l&&o.push(["owner_of_the_form","like",l]);const b={fields:JSON.stringify(["*"]),limit_page_length:"None",limit_start:ge.value.limit_start,filters:JSON.stringify(o),order_by:"`tabEzy Form Definitions`.`creation` desc"};O.get(`${J.resource}${fe.EzyFormDefinitions}`,{params:b}).then(z=>{let me=z.data.filter(te=>{var se;try{const U=JSON.parse(te.form_json),pe=(se=U==null?void 0:U.workflow)==null?void 0:se.find(oe=>oe.type==="requestor");if(!pe||!Array.isArray(pe.roles))return!1;const P=pe.roles.map(oe=>oe.trim().toLowerCase()),ve=oe=>oe.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),He=P.map(ve),Ze=ve(t);return He.includes(Ze)}catch(U){return console.error("Error parsing form_json for form:",te.form_short_name,U),!1}});me.length===0&&Ye("No forms have been created in this department."),L.value=me}).catch(z=>{console.error("Error fetching ezyForms data:",z),B("Error fetching forms. Please try again.")})}r([]),r("");function We(){bootstrap.Modal.getInstance(document.getElementById("riaseRequestModal")).hide(),I.push({name:"RaiseRequest",query:{routepath:F.path,selectedCategory:C.value.selectedCategory,selectedForm:C.value.selectedform,business_unit:_.value}})}const Re=l=>{d.value=l.route,I.push(l.route)};return(l,t)=>(s(),a("div",ot,[e("div",at,[e("div",nt,[e("div",null,[e("img",{onClick:Se,class:"imgmix img-fluid",src:De})]),e("div",lt,[t[13]||(t[13]=e("div",null,[e("i",{class:"bi bi-question-circle-fill fs-5",style:{cursor:"pointer"},"data-bs-toggle":"modal","data-bs-target":"#confirmMailModal",title:"Contact Support"})],-1)),e("div",null,[E(ye,{tag:"select",placeholder:"",class:"font-12",name:"roles",id:"roles",Required:!1,modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=o=>_.value=o),options:V.value},null,8,["modelValue","options"])]),e("div",null,[e("div",it,[e("div",rt,[t[12]||(t[12]=e("button",{type:"button",class:"btn border-0 p-0 me-2 mt-0","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("img",{src:Ge})],-1)),e("ul",ct,[e("div",dt,[h.value?(s(),a("div",ut,[e("li",mt,c(h.value),1)])):i("",!0),e("div",null,[e("li",null,[M.value?(s(),a("div",pt,[e("span",vt,c(M.value),1)])):i("",!0),N.value?(s(),a("div",ft,[e("span",bt,c(N.value),1)])):i("",!0)])])]),e("li",ht,[e("div",gt,[E(be,{onClick:v,class:"changepass rounded-2 text-left",icon:"lock","data-bs-toggle":"modal","data-bs-target":"#changePassword",name:"Change Password"})])]),e("li",_t,[e("div",yt,[E(be,{class:"logout rounded-2 text-left",icon:"box-arrow-right",onClick:t[1]||(t[1]=o=>D()),name:"Log Out"})])])])])])])])])]),e("div",kt,[e("div",wt,[e("div",xt,[e("div",$t,[e("div",St,[e("div",Ct,[e("img",{onClick:Se,class:"imgmix img-fluid d-none d-md-block",src:De}),e("div",Rt,[e("div",Dt,[E(ye,{tag:"select",placeholder:"",class:"font-12",name:"roles",id:"roles",Required:!1,modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),options:V.value},null,8,["modelValue","options"])])])]),e("div",Pt,[e("div",qt,[E(Le,{tabs:X.value,onChangeTab:Re},null,8,["tabs"])])]),e("div",Et,[e("div",Gt,[e("div",Lt,[t[14]||(t[14]=e("div",{class:"offcanvas-header"},[e("h5",{id:"offcanvasRightLabel"},"Notifications"),e("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),e("div",Nt,[e("ul",Mt,[(s(!0),a(S,null,q(_e.value,(o,b)=>(s(),a("li",{key:b,class:"designationList form-check"},c(o),1))),128))])])]),t[16]||(t[16]=e("div",null,[e("i",{class:"bi bi-question-circle-fill fs-5",style:{cursor:"pointer"},"data-bs-toggle":"modal","data-bs-target":"#confirmMailModal",title:"Contact Support"})],-1)),e("div",Vt,[E(ye,{tag:"select",placeholder:"",class:"font-12",name:"roles",id:"roles",Required:!1,modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=o=>_.value=o),options:V.value},null,8,["modelValue","options"])]),e("div",At,[e("div",It,[t[15]||(t[15]=e("button",{type:"button",class:"btn border-0 p-0 me-2 mt-0","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("img",{src:Ge})],-1)),e("ul",Ft,[e("div",Tt,[h.value?(s(),a("div",Ut,[e("li",jt,c(h.value),1)])):i("",!0),e("div",null,[e("li",null,[M.value?(s(),a("div",zt,[e("span",Bt,c(M.value),1)])):i("",!0),N.value?(s(),a("div",Ot,[e("span",Jt,c(N.value),1)])):i("",!0)])])]),e("li",Wt,[e("div",Ht,[E(be,{onClick:v,class:"changepass rounded-2 text-left",icon:"lock","data-bs-toggle":"modal","data-bs-target":"#changePassword",name:"Change Password"})])]),e("li",Zt,[e("div",Qt,[E(be,{class:"logout rounded-2 text-left",icon:"box-arrow-right",onClick:t[4]||(t[4]=o=>D()),name:"Log Out"})])])])])])])])])])])])]),e("div",Yt,[E(Le,{tabs:X.value,onChangeTab:Re},null,8,["tabs"])]),e("div",Kt,[e("div",Xt,[e("div",es,[e("div",ts,[t[17]||(t[17]=e("h5",{class:"modal-title font-14 fw-bold",id:"riaseRequestModalLabel"},"Raise Request",-1)),e("button",{onClick:t[5]||(t[5]=o=>g()),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",ss,[e("div",os,[t[18]||(t[18]=e("label",{class:"raise-label",for:""},"Department to raise",-1)),E(Pe(qe),{options:Y.value.map(o=>o.name),onChange:Je,modelValue:C.value.SelectedDepartment,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value.SelectedDepartment=o),placeholder:"Select",multiple:!1,class:"font-11",searchable:!0},null,8,["options","modelValue"])]),e("div",as,[t[19]||(t[19]=e("label",{class:"raise-label",for:""},"Form list",-1)),E(Pe(qe),{options:L.value.map(o=>o.name),modelValue:C.value.selectedform,"onUpdate:modelValue":t[7]||(t[7]=o=>C.value.selectedform=o),placeholder:"Select",onChange:Oe,multiple:!1,class:"font-11",searchable:!0},null,8,["options","modelValue"])])]),t[20]||(t[20]=e("div",null,[e("div",{class:"d-flex justify-content-center align-items-center p-3"})],-1))])])]),e("div",ns,[e("div",ls,[e("div",is,[e("div",rs,[t[21]||(t[21]=e("h5",{class:"modal-title font-14 fw-bold",id:"changePasswordLabel"},"Change Password",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=o=>m()),class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",cs,[e("div",ds,[e("div",us,[t[22]||(t[22]=e("label",{class:"raise-label",for:"changepass"},"New Password",-1)),k(e("input",{class:"form-control m-0 shadow-none font-13","onUpdate:modelValue":t[9]||(t[9]=o=>p.value=o),placeholder:"Enter New Password",type:re.value?"text":"password",id:"changepass",onInput:Te},null,40,ms),[[Ee,p.value,void 0,{trim:!0}]]),p.value?(s(),a("span",{key:0,class:"new-pwd-toggle-icon",onClick:Ie},[e("i",{class:y(re.value?"bi bi-eye":"bi bi-eye-slash")},null,2)])):i("",!0)]),ee.value?(s(),a("p",ps,c(ee.value),1)):i("",!0)]),e("div",vs,[e("div",fs,[t[23]||(t[23]=e("label",{class:"raise-label",for:"confirmpass"},"Confirm Password",-1)),k(e("input",{class:"form-control m-0 shadow-none font-13","onUpdate:modelValue":t[10]||(t[10]=o=>x.value=o),placeholder:"Enter Confirm Password",type:ce.value?"text":"password",id:"confirmpass",onInput:$e},null,40,bs),[[Ee,x.value,void 0,{trim:!0}]]),x.value?(s(),a("span",{key:0,class:"cnf-pwd-toggle-icon",onClick:Fe},[e("i",{class:y(ce.value?"bi bi-eye":"bi bi-eye-slash")},null,2)])):i("",!0)]),de.value?(s(),a("span",hs,"Passwords do not match.")):i("",!0)]),e("label",gs," Note : "+c(f(T.value).message),1)]),e("div",null,[e("div",_s,[e("button",{disabled:je.value,class:"btn btn-dark font-12 w-100",type:"submit",onClick:t[11]||(t[11]=o=>ze())}," Confirm New Password",8,ys)])])])])]),e("div",ks,[e("div",{class:"modal-dialog modal-dialog-centered"},[e("div",{class:"modal-content"},[t[25]||(t[25]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"confirmMailModalLabel"},"Confirm Action"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t[26]||(t[26]=e("div",{class:"modal-body"}," Are you sure you want to contact support? ",-1)),e("div",{class:"modal-footer"},[t[24]||(t[24]=e("button",{type:"button",class:"btn font-13","data-bs-dismiss":"modal"},"Cancel",-1)),e("button",{type:"button",class:"btn btn-secondary font-13 text-white",onClick:n},"Yes, Continue")])])])],512)]))}},_o=we(ws,[["__scopeId","data-v-d2efd36c"]]),xs={class:""},$s={class:"d-flex justify-content-between align-items-center"},Ss={key:0,class:"font-12 m-0 text-muted ps-2 d-none d-md-inline"},Cs={key:0,class:"bi bi-chevron-double-left fs-6"},Rs={key:1,class:"bi bi-chevron-double-right fs-6"},Ds={class:"mt-1"},Ps={key:0,class:"font-10 m-0 text-muted ps-2"},qs={class:"list-unstyled"},Es={key:0,class:"d-none d-md-inline"},Gs={key:1,class:"font-10 m-0 text-muted ps-2"},Ls={key:2,class:"list-unstyled"},Ns={key:0,class:"d-none d-md-inline"},Ms={key:3,class:"font-10 m-0 text-muted ps-2"},Vs={key:4,class:"list-unstyled"},As={key:0,class:"d-none d-md-inline"},Is={key:5,class:"font-10 m-0 text-muted ps-2"},Fs={key:6,class:"list-unstyled"},Ts={key:0,class:"d-none d-md-inline"},Us={key:7,class:"font-10 m-0 text-muted ps-2"},js={key:8,class:"list-unstyled"},zs={key:0,class:"d-none d-md-inline"},Bs={key:9,class:"font-10 m-0 text-muted ps-2"},Os={key:10,class:"list-unstyled"},Js={key:0,class:"d-none d-md-inline"},Ws={key:11,class:"font-10 m-0 text-muted ps-2"},Hs={key:12,class:"list-unstyled"},Zs={key:0,class:"d-none d-md-inline"},Qs={key:13,class:"font-10 m-0 text-muted ps-2"},Ys={key:14,class:"list-unstyled"},Ks={key:0,class:"d-none d-md-inline"},Xs={key:15,class:"font-10 m-0 text-muted ps-2"},eo={key:16,class:"list-unstyled"},to={key:0,class:"d-none d-md-inline"},so={key:1,class:"list-unstyled"},oo={class:"bi-icon fs-6 bi bi-file-earmark-richtext me-3"},ao={class:"bi-icon fs-6 bi bi-file-earmark-richtext me-3"},no={key:2,class:"list-unstyled"},lo={key:0,class:"d-none d-md-inline"},io="My Details",ro="Master",co="Employee",uo="System Settings",mo="Audits",po="Forms",vo="Acknowledgement",fo="Email Template",bo="Password Policy",ho={__name:"SideBar",props:{collapsed:Boolean},emits:["toggleSidebar"],setup(u,{emit:ae}){const I=w(()=>Z.value),j=r({business_unit:""});r({limitPageLength:"None",limitstart:0});const C=u,F=ae,L=()=>{F("toggleSidebar")},_=r([]),h=[{name:"Profile",icon:"bi bi-person-circle",route:"profile"},{name:"Department",icon:"bi bi-clock-history",route:"department"},{name:"Designation",icon:"bi bi-people",route:"designations"},{name:"Active Employees",icon:"bi bi-people",route:"employee"},{name:"Inactive Employees",icon:"bi bi-people",route:"inactiveEmployee"},{name:"Employee Approvals",icon:"bi bi-people",route:"employeeapproval"},{name:"System Settings",icon:"bi bi-gear",route:"authenticationpage"},{name:"Activity Log",icon:"bi bi-clock-history",route:"activitylog"},{name:"Audit Log",icon:"bi bi-clock",route:"auditlog"},{name:"Email Queue",icon:"bi bi-file-earmark-text",route:"emailqueue"},{name:"Form Creation",icon:"bi bi-file-earmark-text",route:"CreateForm"},{name:"Form Templates",icon:"bi bi-envelope-paper",route:"predefinedforms"},{name:"Acknowledgement",icon:"bi bi-clipboard2-check",route:"acknowledgement"},{name:"Email Template",icon:"bi bi-file-earmark-text",route:"emailtemplate"},{name:"Password Policy",icon:"bi bi-lock",route:"passwordpolicy"}],p=[{name:"Assigned To Me",icon:"bi bi-bucket",route:"receivedform"},{name:"My Requests",icon:"bi bi-send",route:"raisedbyme"},{name:"My Team Requests",icon:"bi bi-people",route:"myteam"},{name:"My Approvals",icon:"bi bi-clock-history",route:"history"},{name:"Reports",icon:"bi bi-gear",route:"reports"},{name:"insights",icon:"bi-graph-up",route:"insights"}],Q=[{name:"Created",icon:"bi bi-file-earmark-plus",route:"created"},{name:"Draft",icon:"bi bi-file-earmark-text",route:"draft"},{name:"Trash",icon:"bi bi-trash3",route:"trash"}],x=w(()=>p.filter(D=>D.name==="My Team"?T.value==1:!0)),M=xe();Me();const N=w(()=>M.path.startsWith("/forms")),W=w(()=>M.path.startsWith("/settings")),H=w(()=>M.path.startsWith("/todo")),V=w(()=>M.path.startsWith("/create-form")),he=w(()=>N.value?_.value:H.value?x.value:V.value?Q:[]),Y=w(()=>h.slice(0,1)),d=w(()=>T.value==1?{thirdSettingsGroup:h.slice(1,3),forthSettingsGroup:h.slice(3,6),fifthSettingsGroup:h.slice(6,7),sixthGroup:h.slice(7,10),seventhGroup:h.slice(10,12),eightGroup:h.slice(12,13),ninthGroup:h.slice(13,14),tenthGroup:h.slice(14)}:{thirdSettingsGroup:[],forthSettingsGroup:[]}),ge=w(()=>N.value?"Departments":H.value?"Requests":V.value?"Forms":W.value?"Settings":""),R=w(()=>N.value?"/forms":W.value?"/settings":H.value?"/todo":V.value?"/create-form":"/"),K=r([]),ne=r(""),le=r(""),T=r(""),ie=r("");Ve(()=>{const D=JSON.parse(localStorage.getItem("employeeData")),g=JSON.parse(localStorage.getItem("UserName"));g?(ne.value=g.full_name,g.full_name==="Administrator"?le.value=g.full_name:D&&(le.value=g.full_name,T.value=D.is_admin||"")):console.warn("No user data found in localStorage.")});function _e(){let D={business_unit:j.value.business_unit};O.post(J.DepartmentNames,D).then(g=>{K.value=g.message,_.value=K.value.sort((v,f)=>v.department_name.localeCompare(f.department_name)).map(v=>({name:v.department_name,route:v.name})),ie.value=sessionStorage.getItem("VendorComparison")==="true"}).catch(g=>{console.log(g)})}const X=["bi-file-earmark-check","bi-question-octagon","bi-file-earmark-bar-graph","bi-card-checklist","bi-file-earmark-ruled","bi-journal-x","bi-clock-history","bi-percent"];return Ae([I,N],([D,g])=>{j.value.business_unit=D,g&&D.length&&_e()},{immediate:!0}),(D,g)=>{const v=Ne("router-link"),f=Ke("tooltip");return s(),a("div",xs,[e("div",{class:y(["sidebar",{collapsed:C.collapsed}])},[e("div",$s,[u.collapsed?i("",!0):(s(),a("h1",Ss,c(ge.value),1)),e("button",{class:"btn border me-2 ms-2 toggle-btn d-none d-md-inline",type:"button",onClick:L},[u.collapsed?i("",!0):(s(),a("i",Cs)),u.collapsed?(s(),a("i",Rs)):i("",!0)])]),e("aside",Ds,[W.value?(s(),a(S,{key:0},[u.collapsed?i("",!0):(s(),a("h2",Ps,c(io))),e("ul",qs,[(s(!0),a(S,null,q(Y.value,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",Es,c(n.name),1))])]),_:2},1032,["to"]))),128))]),d.value.thirdSettingsGroup.length&&!u.collapsed?(s(),a("h2",Gs,c(ro))):i("",!0),d.value.thirdSettingsGroup.length?(s(),a("ul",Ls,[(s(!0),a(S,null,q(d.value.thirdSettingsGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",Ns,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.forthSettingsGroup.length&&!u.collapsed?(s(),a("h2",Ms,c(co))):i("",!0),d.value.forthSettingsGroup.length?(s(),a("ul",Vs,[(s(!0),a(S,null,q(d.value.forthSettingsGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",As,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.fifthSettingsGroup&&!u.collapsed?(s(),a("h2",Is,c(uo))):i("",!0),d.value.fifthSettingsGroup?(s(),a("ul",Fs,[(s(!0),a(S,null,q(d.value.fifthSettingsGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",Ts,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.sixthGroup&&!u.collapsed?(s(),a("h2",Us,c(mo))):i("",!0),d.value.sixthGroup?(s(),a("ul",js,[(s(!0),a(S,null,q(d.value.sixthGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",zs,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.seventhGroup&&!u.collapsed?(s(),a("h2",Bs,c(po))):i("",!0),d.value.seventhGroup?(s(),a("ul",Os,[(s(!0),a(S,null,q(d.value.seventhGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",Js,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.eightGroup&&!u.collapsed?(s(),a("h2",Ws,c(vo))):i("",!0),d.value.eightGroup?(s(),a("ul",Hs,[(s(!0),a(S,null,q(d.value.eightGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",Zs,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.ninthGroup&&!u.collapsed?(s(),a("h2",Qs,c(fo))):i("",!0),d.value.ninthGroup?(s(),a("ul",Ys,[(s(!0),a(S,null,q(d.value.ninthGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",Ks,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0),d.value.tenthGroup&&!u.collapsed?(s(),a("h2",Xs,c(bo))):i("",!0),d.value.tenthGroup?(s(),a("ul",eo,[(s(!0),a(S,null,q(d.value.tenthGroup,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route.toLowerCase()}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",to,c(n.name),1))])]),_:2},1032,["to"]))),128))])):i("",!0)],64)):i("",!0),N.value?(s(),a("ul",so,[E(v,{to:"/forms/department/allforms",class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",oo,null,512),[[f,"All Forms",void 0,{right:!0}]]),g[0]||(g[0]=ke("All Forms"))])]),_:1}),(s(!0),a(S,null,q(_.value,(n,m)=>(s(),G(v,{key:n.route,to:`/forms/department/${n.route}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(["bi-icon","fs-6","bg-transparent",X[m%X.length],"me-3"])},null,2),[[f,n.name,void 0,{right:!0}]]),ke(" "+c(n.name),1)])]),_:2},1032,["to"]))),128)),ie.value?(s(),G(v,{key:0,to:"/settings/vendorcomparison",class:"text-decoration-none text-black"},{default:$(()=>[e("li",null,[k(e("i",ao,null,512),[[f,"Vendor",void 0,{right:!0}]]),g[1]||(g[1]=ke("Vendor Comparison"))])]),_:1})):i("",!0)])):(s(),a("ul",no,[(s(!0),a(S,null,q(he.value,(n,m)=>(s(),G(v,{key:m,to:`${R.value}/${n.route?n.route.toLowerCase():""}`,class:"text-decoration-none text-black","active-class":"active-link"},{default:$(()=>[e("li",null,[k(e("i",{class:y(`bi-icon ps-1 bg-transparent bi ${n.icon} me-3`)},null,2),[[f,n.name,void 0,{right:!0}]]),u.collapsed?i("",!0):(s(),a("span",lo,c(n.name),1))])]),_:2},1032,["to"]))),128))]))])],2)])}}},yo=we(ho,[["__scopeId","data-v-0c9103a0"]]);export{_o as H,yo as S};
