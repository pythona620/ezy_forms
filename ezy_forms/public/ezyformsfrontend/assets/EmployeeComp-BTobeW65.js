var st=Object.defineProperty,ot=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var ke=(k,p,f)=>p in k?st(k,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):k[p]=f,Q=(k,p)=>{for(var f in p||(p={}))it.call(p,f)&&ke(k,f,p[f]);if(Ee)for(var f of Ee(p))rt.call(p,f)&&ke(k,f,p[f]);return k},oe=(k,p)=>ot(k,nt(p));var xe=(k,p,f)=>new Promise((C,J)=>{var Y=I=>{try{W(f.next(I))}catch($){J($)}},V=I=>{try{W(f.throw(I))}catch($){J($)}},W=I=>I.done?C(I.value):Promise.resolve(I.value).then(Y,V);W((f=f.apply(k,p)).next())});import{q as dt,e as q,d as i,w as ne,o as r,c as d,b as a,j as b,a as u,F as U,t as g,h as m,v as D,x as A,s as R,B as ie,_ as ut,P as mt,y as ee,T as pt,z as we,A as Ce,i as ct,E as ft,l as h,m as E,k as y,p as x,C as T}from"./index-DXneRfP_.js";import{s as M}from"./vue-multiselect.min.css_vue_type_style_index_0_src_true_lang-BBX7B8I1.js";const gt={class:"d-flex justify-content-between align-items-center py-2"},vt={class:"modal fade",id:"createDepartments","data-bs-backdrop":"static",tabindex:"-1","data-bs-keyboard":"false","aria-labelledby":"createDepartmentsLabel","aria-hidden":"true"},bt={class:"modal-dialog modal-lg"},yt={class:"modal-content"},_t={class:"modal-body"},ht={class:"container-fluid"},Et={class:"row"},kt={class:"col"},xt={class:"mb-3"},wt={key:0,class:"text-danger font-11 ps-1"},Ct={class:"mb-3"},St={key:0,class:"text-danger font-11 ps-1"},Vt={class:"col"},It={class:"mb-3 font-11"},Dt={key:0,style:{"max-width":"100px","max-height":"100px"},class:"d-flex justify-center position-relative mt-2"},Nt=["src"],Pt={class:"modal-footer"},Lt={key:0,class:"font-16 me-1"},Ut={key:1},At={key:2,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Rt={key:0,class:"mt-2"},Tt={key:1},Mt={class:"bulkemployee"},$t={class:"insideBulkEmp"},zt={class:"d-flex justify-content-center align-content-center mb-5 gap-2"},Bt={key:0,class:"loader"},Ft={class:"table-container"},jt={key:0,class:"d-flex justify-content-end align-content-center p-2"},Ot={key:1,class:"warning-box"},Xt={key:2,class:"styled-table"},qt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Jt={class:"modal-dialog modal-lg"},Wt={class:"modal-content"},Ht={class:"modal-body"},Zt={class:"container-fluid"},Yt={class:"row"},Gt={class:"col"},Kt={class:"mb-3"},Qt={class:"input-container"},ea={key:0,class:"text-danger font-11 ps-1"},ta={class:"mb-3"},aa={class:"input-container"},la={key:0,class:"text-danger font-11 ps-1"},sa={class:"col"},oa={class:"mb-3 font-11"},na={key:0,class:"d-flex justify-center position-relative mt-2"},ia=["src"],ra={class:"modal-footer"},da={__name:"EmployeeComp",setup(k){const p=q(()=>ft.value),f=i(!0),C=i([]),J=i(""),Y=i(0),V=i([]),W=i([]),I=i([]),$=i([]),S=i(""),re=i(null),F=i(!1),s=i({emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",company_field:"",signature:""}),N=i(null),te=i(""),_=i([]),de=i([{th:"Emp ID",td_key:"emp_code"},{th:"Emp Name",td_key:"emp_name"},{th:"Designation",td_key:"designation"},{th:"Department",td_key:"department"},{th:"Signature",td_key:"signature"},{th:"Reports To",td_key:"reporting_to"},{th:"Emp Status",td_key:"enable"}]),G=i(null),ae=i(0),le=i(!1),se=i(""),Se=()=>{G.value.click()},Ve=t=>{const e=t.target.files[0];e&&(De(e),G.value&&(G.value.value=""))},Ie=()=>Math.floor(Math.random()*1e6),De=t=>{let l=`${Ie()}-@${t.name}`;const o=new FormData;o.append("file",t,l),o.append("is_private","0"),o.append("folder","Home"),le.value=!0,ae.value=0,h.post(E.uploadfile,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{ae.value=Math.round(n.loaded/n.total*100)}}).then(n=>{n.message&&n.message.file_url?(se.value=n.message.file_url,n.message.file_url&&se.value&&Ne()):y.error("File upload failed: file_url not found in response.")}).catch(n=>{console.error("Upload error:",n),y.error("File upload failed. Please try again.")}).finally(()=>{setTimeout(()=>{le.value=!1,ae.value=0},2e3)})},Ne=()=>{const t={file:se.value,doctype:x.EzyEmployeeList};h.post(E.uploadbulkEmployeefile,t).then(e=>{var l;if(!(e!=null&&e.data)){y.error("Import response not found.");return}if(_.value=e.data,e.data.success===!1){let o=e._error_message||e.data.message||"Import failed.";if(o=o.replace(/\s*\(.*?\)\s*/g,"").trim(),y.error(o),e.data._server_messages)try{const n=JSON.parse(e.data._server_messages);Array.isArray(n)&&n.forEach(c=>{let L=JSON.parse(c).message||"Permission error.";L=L.replace(/\s*\(.*?\)\s*/g,"").trim(),y.error(L)})}catch(n){console.error("Error parsing _server_messages:",n)}return}(l=_.value.template_warnings)!=null&&l.length&&_.value.template_warnings.forEach(o=>{y.warning(`Warning: ${o}`)}),_.value.records&&(_.value.records=_.value.records.map(o=>oe(Q({},o),{message:o.message}))),_.value.template_status==="success"?y.success("Bulk data imported successfully!"):_.value.template_status==="failed"?y.error(`Import Failed: ${_.value.message}`):_.value.status==="Partial Success"&&y.warning("Partial Success: Some records failed.")}).catch(e=>{console.error("Upload error:",e),y.error("Upload failed. Please try again.")})},K=q(()=>{var e;return(((e=_.value)==null?void 0:e.records)||[]).map((l,o)=>{let n="N/A",c="N/A";try{if(l.status.toLowerCase()==="success")n=ue(l.message),c="Successfully imported";else if(l.status.toLowerCase()==="failed"){const v=JSON.parse(l.message);if(Array.isArray(v)&&v.length>0){c=v[0].title||"Unknown Issue";const L=Pe(v);L?(n=L,c="Invalid Email Address"):n=ue(v)}}}catch(v){c="Parsing Error"}return{sNo:o+1,email:n,status:l.status,displayMessage:c}})}),ue=t=>{var e,l,o;return typeof t=="string"&&(t=t.toLowerCase(),t.includes("successfully imported "))?t.split("successfully imported ")[1]||"N/A":Array.isArray(t)&&((o=(l=(e=t[0])==null?void 0:e.message)==null?void 0:l.match(/<strong>(.*?)<\/strong>/))==null?void 0:o[1])||"N/A"},Pe=t=>{if(Array.isArray(t)){for(const e of t)if(e.message.includes("is not a valid Email Address"))return e.message.split(" is not a valid Email Address")[0]}return null},me=q(()=>{var t;return((t=_.value)==null?void 0:t.template_warnings)||[]}),Le=()=>{const t=window.XLSX;if(!t){console.error("XLSX library is not loaded.");return}const e=t.utils.json_to_sheet(K.value),l=t.utils.book_new();t.utils.book_append_sheet(l,e,"Records");const o=t.write(l,{bookType:"xlsx",type:"array"}),n=new Blob([o],{type:"application/octet-stream"}),c=document.createElement("a");c.href=URL.createObjectURL(n),c.download="Records.xlsx",document.body.appendChild(c),c.click(),document.body.removeChild(c)},Ue=()=>xe(this,null,function*(){const t=p.value,l=yield(yield fetch("/assets/ezy_forms/ezyformsfrontend/Employee_import.xlsx")).arrayBuffer(),o=XLSX.read(l,{type:"array"}),n=o.SheetNames[0],c=o.Sheets[n];c.A2={t:"s",v:t};const v=XLSX.utils.decode_range(c["!ref"]);v.e.r<1&&(v.e.r=1),c["!ref"]=XLSX.utils.encode_range(v);const L=XLSX.write(o,{bookType:"xlsx",type:"array"}),lt=new Blob([L],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Z=document.createElement("a");Z.href=URL.createObjectURL(lt),Z.setAttribute("download","Employee_import.xlsx"),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)}),j=i(""),pe=()=>{const t=X.value||s.value.emp_mail_id;/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?j.value="":j.value="Invalid email address"};function Ae(){f.value=!1}function Re(){f.value=!0}const P=i(!0),O=i(""),Te=q(()=>P.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),ce=t=>(t=t.replace(/\D/g,""),t.startsWith("91")&&t.length===12?t="+"+t:t.length===10&&(t="+91"+t),t);ne(()=>s.value.emp_phone,t=>{t.startsWith("+91")||(s.value.emp_phone=ce(t)),P.value||(O.value=s.value.emp_phone)},{immediate:!0});const fe=()=>{let t=s.value.emp_phone||"";if(t=ce(t),/^\+91\d{10}$/.test(t))S.value="";else{S.value="Phone number must start with +91 and have 10 digits.";return}O.value=t,s.value.emp_phone=P.value?"+91 ******"+t.slice(-4):t},Me=()=>{O.value&&(P.value&&!window.confirm("Are you sure you want to see the phone number?")||(P.value=!P.value,s.value.emp_phone=P.value?"+91 ******"+O.value.slice(-4):O.value))},$e=()=>{let t=O.value.replace("+91","");/^\d{10}$/.test(t)?S.value="":S.value="Phone number must be 10 digits."},z=i(!0),X=i(""),ze=q(()=>z.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),ge=()=>{if(!z.value||!s.value.emp_mail_id.includes("@"))return;X.value=s.value.emp_mail_id;const[t,e]=X.value.split("@");t.length>3&&(s.value.emp_mail_id=t.slice(0,3)+"***@"+e)},Be=()=>{X.value&&(z.value&&!window.confirm("Are you sure you want to see the email address?")||(z.value=!z.value,s.value.emp_mail_id=z.value?Fe(X.value):X.value))},Fe=t=>{const[e,l]=t.split("@");return e.length>3?e.slice(0,3)+"***@"+l:t},je=t=>{let e=t.target.value;e=e.replace(/[^0-9+]/g,""),e.startsWith("+91")||(e="+91"+e.replace(/^91/,"")),e.length>13&&(e=e.slice(0,13)),s.value.emp_phone=e},Oe=()=>{if(s.value.emp_phone){const t=s.value.emp_phone.replace("+91",""),e=/^\d{10}$/;S.value=e.test(t)?"":"Invalid phone number."}},w=i({limitPageLength:"None",limit_start:0}),ve=t=>{V.value.includes(t)||h.post(E.resource+x.roles,{role_name:t}).then(e=>{e.data&&h.post(E.resource+x.designations,{role:e.data.role_name}).then(l=>{l.data&&(V.value.push(l.data.role),s.value.designation=l.data.role)}).catch(l=>{console.error("Error creating designation:",l)})}).catch(e=>{console.error("Error creating designation:",e)})},be=()=>{s.value.signature=null;const t=document.getElementById("signatureInput");t&&(t.value="")};ne(()=>s.value.reporting_to,t=>{if(t){const e=C.value.find(l=>l.emp_mail_id===t);e?s.value.reporting_designation=e.designation||"":s.value.reporting_designation=""}});const Xe=i([{name:"Edit Employee",icon:"fa-solid fa-eye"}]),qe=q(()=>[s.value.emp_code,s.value.emp_name,s.value.emp_mail_id,s.value.department,s.value.designation].every(t=>t&&t.toString().trim()!==""));function Je(){_e(),he()}function We(t,e){(e==null?void 0:e.name)==="Edit Employee"&&(t?(S.value="",_e(),he(),s.value=Q({},t),P.value=!0,z.value=!0,fe(),ge(),new bootstrap.Modal(document.getElementById("exampleModal"),{}).show()):(console.warn("No form fields provided."),formCreation(t)))}function He(t){N.value=t;const e=t.enable==="1"||t.enable===1;te.value=e?"Disable":"Enable",document.getElementById("empActionText").innerText=te.value,document.getElementById("empRowName").innerText=t.emp_name,new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show()}function Ze(){const t=N.value.enable==="1"||N.value.enable===1;N.value.enable=t?0:1,h.put(`${E.resource}${x.EzyEmployeeList}/${N.value.name}`,N.value).then(()=>{const e={enabled:N.value.enable};return h.put(`${E.resource}${x.users}/${N.value.name}`,e)}).then(()=>{y.success(`Employee ${te.value}d successfully`),window.location.reload()}).catch(e=>{console.error("Toggle employee error:",e)})}const Ye=i({emp_code:{type:"input"},emp_name:{type:"input"},designation:{type:"input"}});function H(){s.value={emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",signature:null,company_field:p.value};const t=document.getElementById("signatureInput");t&&(t.value="")}function ye(t){const e=t.target.files[0];e&&Ge(e)}const Ge=(t,e)=>{let l=`${t.name}`;const o=new FormData;o.append("file",t,l),o.append("is_private","0"),o.append("folder","Home"),h.post(E.uploadfile,o).then(n=>{n.message&&n.message.file_url?s.value.signature=n.message.file_url:console.error("file_url not found in the response.")}).catch(n=>{console.error("Upload error:",n)})};function _e(){const t={fields:JSON.stringify(["*"]),limit_page_length:w.value.limitPageLength,limit_start:w.value.limit_start};h.get(E.resource+x.departments,{params:t}).then(e=>{e.data&&($.value=e.data.map(l=>l.name))}).catch(e=>{console.error("Error fetching department data:",e)})}const Ke=t=>{w.value.limitPageLength=t,w.value.limit_start=0,B()},Qe=([t,e])=>{w.value.limitPageLength=t,w.value.limit_start=e,B()};function et(t){const e=[];de.value.forEach(l=>{const o=l.td_key;t[o]&&e.push(o,"like",`%${t[o]}%`)}),e.length?B(e):B()}function B(t){const e=[["company_field","like",`%${J.value}%`]];t&&e.push(t);const l={fields:JSON.stringify(["*"]),filters:JSON.stringify(e),limit_page_length:w.value.limitPageLength,limit_start:w.value.limit_start,order_by:"`tabEzy Employee`.`creation` desc"},o={fields:JSON.stringify(["count(name) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(e)};h.get(`${E.resource}${x.EzyEmployeeList}`,{params:o}).then(n=>{Y.value=n.data[0].total_count}).catch(n=>{console.error("Error fetching ezyForms data:",n)}),h.get(E.resource+x.EzyEmployeeList,{params:l}).then(n=>{if(n.data){const c=n.data;w.value.limit_start===0?(C.value=c,W.value=[...new Set(n.data.map(v=>v.reporting_to))],I.value=[...new Set(n.data.map(v=>v.reporting_designation))],s.value.company_field=p.value):C.value=C.value.concat(c)}}).catch(n=>{console.error("Error fetching department data:",n)})}function he(){const t=[],e={fields:JSON.stringify(["*"]),filters:JSON.stringify(t),limit_page_length:w.value.limitPageLength,limit_start:w.value.limit_start,order_by:"`tabWF Roles`.`creation` desc"};h.get(E.resource+x.designations,{params:e}).then(l=>{l.data&&(V.value=[...new Set(l.data.map(o=>o.role))])}).catch(l=>{console.error("Error fetching designations data:",l)})}ne(p,t=>{t&&t.length&&(s.value.company_field=t,J.value=t,B())},{immediate:!0});function tt(){if(!qe.value){y.error("Please fill all required fields",{autoClose:1e3,transition:"zoom"});return}s.value.company_field=p.value;const t=oe(Q({},s.value),{doctype:x.EzyEmployeeList});F.value=!0,h.post(E.resource+x.EzyEmployeeList,t).then(e=>{if(e.data){y.success("Employee Created",{autoClose:500,transition:"zoom"}),bootstrap.Modal.getInstance(document.getElementById("createDepartments")).hide(),H();const o=document.getElementById("signatureInput");o&&(o.value=""),B(),F.value=!1}}).catch(e=>{console.error("Error creating employee:",e)}).finally(()=>{F.value=!1})}function at(){h.put(`${E.resource}${x.EzyEmployeeList}/${s.value.name}`,s.value).then(t=>{t.data&&(y.success("Changes Saved",{autoClose:500,transition:"zoom"}),B())}).catch(t=>{console.error("Error saving categories:",t)})}return(t,e)=>(r(),d("div",null,[a("div",null,[a("div",gt,[e[27]||(e[27]=a("div",null,[a("h1",{class:"m-0 font-13"}," Employees ")],-1)),a("div",{class:"d-flex align-items-center gap-2"},[a("button",{type:"button",class:"btn btn-light CreateDepartments font-12",onClick:Ae}," Import Employees "),a("button",{type:"button",class:"btn btn-dark CreateDepartments","data-bs-toggle":"modal","data-bs-target":"#createDepartments",onClick:Je}," Create Employee ")]),a("div",vt,[a("div",bt,[a("div",yt,[a("div",{class:"modal-header"},[e[16]||(e[16]=a("h5",{class:"modal-title",id:"createDepartmentsLabel"}," Ezy Employee ",-1)),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:H,"aria-label":"Close"})]),a("div",_t,[a("div",ht,[a("div",Et,[a("div",kt,[e[19]||(e[19]=a("label",{class:"font-13 ps-1",for:"emp_name"},[b("Emp Name"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(U,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter Emp Name",modelValue:s.value.emp_name,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.emp_name=l)},null,8,["modelValue"]),e[20]||(e[20]=a("label",{class:"font-13 ps-1",for:"emp_code"},[b("Emp ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(U,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter Emp ID",modelValue:s.value.emp_code,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.emp_code=l)},null,8,["modelValue"]),a("div",xt,[e[17]||(e[17]=a("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),u(U,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"13",onInput:je,onChange:Oe,placeholder:"Enter Phone Number",modelValue:s.value.emp_phone,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.emp_phone=l)},null,8,["modelValue"]),S.value?(r(),d("p",wt,g(S.value),1)):m("",!0)]),a("div",Ct,[e[18]||(e[18]=a("label",{class:"font-13 ps-1",for:"emp_mail_id"},[b("Emp Mail ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(U,{class:"mb-1",tag:"input",type:"email",name:"emp_mail_id",onChange:pe,required:!0,id:"emp_mail_id",placeholder:"Enter Email",modelValue:s.value.emp_mail_id,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.emp_mail_id=l)},null,8,["modelValue"]),j.value?(r(),d("p",St,g(j.value),1)):m("",!0)]),e[21]||(e[21]=a("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[b("Departments"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(R(M),{modelValue:s.value.department,"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.department=l),options:$.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",class:"font-11 mb-3"},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options"])]),a("div",Vt,[e[23]||(e[23]=a("label",{class:"font-13 ps-1",for:"Designation"},[b("Designation"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(R(M),{modelValue:s.value.designation,"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.designation=l),options:V.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select designation",class:"font-11 mb-3",taggable:"",onTag:ve,"tag-placeholder":"Press enter to add designation"},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options"]),e[24]||(e[24]=a("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),u(R(M),{modelValue:s.value.reporting_to,"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.reporting_to=l),options:C.value.map(l=>l.emp_mail_id),multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options"]),e[25]||(e[25]=a("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),u(R(M),{modelValue:s.value.reporting_designation,"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.reporting_designation=l),options:V.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!s.value.reporting_to},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", "))+" selected ",513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options","disabled"]),a("div",It,[e[22]||(e[22]=a("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),a("input",{type:"file",ref_key:"signatureInputRef",ref:re,class:"form-control font-12 mb-2",id:"signatureInput",onChange:ye,"aria-describedby":"fileHelpId"},null,544),s.value.signature?(r(),d("div",Dt,[a("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:be}),a("img",{src:s.value.signature,style:{"max-width":"100px","max-height":"100px"},alt:"Signature",class:"img-fluid signature-img border-1"},null,8,Nt)])):m("",!0)])])])])]),a("div",Pt,[u(ie,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:H,"data-bs-dismiss":"modal"}),a("button",{type:"button",class:"applyfilter btn btn-dark text-nowrap font-10 d-flex justify-content-center align-items-center",onClick:tt},[F.value?m("",!0):(r(),d("span",Lt,e[26]||(e[26]=[a("i",{class:"bi bi-check2"},null,-1)]))),F.value?m("",!0):(r(),d("span",Ut,"Create Employee")),F.value?(r(),d("span",At)):m("",!0)])])])])])]),f.value?(r(),d("div",Rt,[u(ut,{tHeaders:de.value,tData:C.value,isAction:"true",actions:Xe.value,enableDisable:"true",onActionClicked:We,onToggleClick:He,actionType:"dropdown",isCheckbox:"true",isFiltersoption:"true","field-mapping":Ye.value,onUpdateFilters:et},null,8,["tHeaders","tData","actions","field-mapping"]),u(mt,{currentRecords:C.value.length,totalRecords:Y.value,onUpdateValue:Ke,onLimitStart:Qe},null,8,["currentRecords","totalRecords"])])):(r(),d("div",Tt,[a("div",Mt,[a("div",{class:"d-flex justify-content-between align-content-center"},[a("button",{type:"button",class:"font-12 btn btn-light",onClick:Re},e[28]||(e[28]=[a("i",{class:"bi bi-chevron-left"},null,-1),b(" Back to Employee List ")]))]),a("div",$t,[a("div",zt,[a("div",{class:ee(_.value.length?"":"mb-5 mt-5")},[a("button",{type:"button",class:"font-12 my-1 btn btn-light",onClick:Ue},e[29]||(e[29]=[a("i",{class:"bi bi-download"},null,-1),b(" Use template ")])),a("input",{type:"file",ref_key:"fileInput",ref:G,onChange:Ve,hidden:""},null,544),a("button",{type:"button",class:"font-12 my-1 btn btn-dark",onClick:Se},e[30]||(e[30]=[a("i",{class:"bi bi-upload"},null,-1),b(" Upload Data ")]))],2)]),u(pt,{name:"fade"},{default:D(()=>[le.value?(r(),d("div",Bt)):m("",!0)]),_:1}),a("div",null,[a("div",Ft,[K.value.length>0?(r(),d("div",jt,[a("button",{type:"button",class:"btn btn-light font-12",onClick:Le},e[31]||(e[31]=[a("i",{class:"bi bi-download mx-2"},null,-1),b("Download Excel")]))])):m("",!0),me.value.length?(r(),d("div",Ot,[e[32]||(e[32]=a("h3",{class:"font-13"},"Template Warnings:",-1)),a("ul",null,[(r(!0),d(we,null,Ce(me.value,(l,o)=>(r(),d("li",{key:o},g(l),1))),128))])])):m("",!0),K.value.length>0?(r(),d("table",Xt,[e[33]||(e[33]=a("thead",null,[a("tr",null,[a("th",null,"#"),a("th",null,"Email"),a("th",null,"Status"),a("th",null,"Message")])],-1)),a("tbody",null,[(r(!0),d(we,null,Ce(K.value,(l,o)=>(r(),d("tr",{key:o},[a("td",null,g(o+1),1),a("td",null,g(l.email),1),a("td",{class:ee(l.status==="success"?"status-success":"status-failed")},g(l.status),3),a("td",null,g(l.displayMessage),1)]))),128))])])):m("",!0)])])])])]))]),a("div",qt,[a("div",Jt,[a("div",Wt,[a("div",{class:"modal-header"},[e[34]||(e[34]=a("h5",{class:"modal-title",id:"viewEmployeeLabel"},"Employee Data",-1)),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:H,"aria-label":"Close"})]),a("div",Ht,[a("div",Zt,[a("div",Yt,[a("div",Gt,[e[37]||(e[37]=a("label",{class:"font-13 ps-1",for:"emp_name"},[b("Emp Name"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(U,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter department code",modelValue:s.value.emp_name,"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.emp_name=l)},null,8,["modelValue"]),e[38]||(e[38]=a("label",{class:"font-13 ps-1",for:"emp_code"},[b("Emp ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(U,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter department code",modelValue:s.value.emp_code,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.emp_code=l)},null,8,["modelValue"]),a("div",Kt,[e[35]||(e[35]=a("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),a("div",Qt,[u(U,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"10",class:"w-100",readonly:!0,placeholder:"Enter Phone Number",modelValue:s.value.emp_phone,"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.emp_phone=l),onInput:fe,onChange:$e},null,8,["modelValue"]),a("i",{class:ee([Te.value,"eye-icon"]),onClick:Me},null,2)]),S.value?(r(),d("p",ea,g(S.value),1)):m("",!0)]),a("div",ta,[e[36]||(e[36]=a("label",{class:"font-13 ps-1",for:"emp_mail_id"},[b("Emp Mail ID"),a("span",{class:"text-danger ps-1"},"*")],-1)),a("div",aa,[u(U,{class:"mb-1 w-100",tag:"input",type:"email",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter Email",modelValue:s.value.emp_mail_id,"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.emp_mail_id=l),onInput:ge,onChange:pe,required:!0},null,8,["modelValue"]),a("i",{class:ee([ze.value,"eye-icon"]),onClick:Be},null,2)]),j.value?(r(),d("p",la,g(j.value),1)):m("",!0)]),e[39]||(e[39]=a("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[b("Departments"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(R(M),{modelValue:s.value.department,"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.department=l),options:$.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",class:"font-11 mb-3"},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options"])]),a("div",sa,[e[41]||(e[41]=a("label",{class:"font-13 ps-1",for:"Designation"},[b("Designation"),a("span",{class:"text-danger ps-1"},"*")],-1)),u(R(M),{modelValue:s.value.designation,"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.designation=l),options:V.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select designation",class:"font-11 mb-3",taggable:"",onTag:ve,"tag-placeholder":"Press enter to add designation"},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options"]),e[42]||(e[42]=a("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),u(R(M),{modelValue:s.value.reporting_to,"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.reporting_to=l),options:C.value.map(l=>l.emp_mail_id),multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", ")),513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options"]),e[43]||(e[43]=a("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),u(R(M),{modelValue:s.value.reporting_designation,"onUpdate:modelValue":e[15]||(e[15]=l=>s.value.reporting_designation=l),options:V.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!s.value.reporting_to},{selection:D(({values:l,isOpen:o})=>[l.length?A((r(),d("span",{key:0,class:"multiselect__single font-10"},g(l.join(", "))+" selected ",513)),[[T,!o]]):m("",!0)]),_:1},8,["modelValue","options","disabled"]),a("div",oa,[e[40]||(e[40]=a("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),a("input",{type:"file",ref_key:"signatureInputRef",ref:re,class:"form-control font-12 mb-2",id:"signatureInput",onChange:ye,"aria-describedby":"fileHelpId"},null,544),s.value.signature?(r(),d("div",na,[a("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:be}),a("img",{src:s.value.signature,alt:"Signature",class:"img-fluid signature-img"},null,8,ia)])):m("",!0)])])])])]),a("div",ra,[u(ie,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:H,"data-bs-dismiss":"modal"}),u(ie,{type:"button",class:"btn btn-dark font-11",name:"Save Employee","data-bs-dismiss":"modal",onClick:at})])])])]),a("div",{class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},[a("div",{class:"modal-dialog modal-dialog-centered"},[a("div",{class:"modal-content"},[e[45]||(e[45]=ct('<div class="modal-header" data-v-313a3372><h5 class="modal-title" data-v-313a3372>Confirm Employee Status</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-313a3372></button></div><div class="modal-body" data-v-313a3372> Are you sure you want to <span id="empActionText" data-v-313a3372></span> &quot;<span id="empRowName" data-v-313a3372></span>&quot;? </div>',2)),a("div",{class:"modal-footer"},[e[44]||(e[44]=a("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),a("button",{type:"button",class:"btn btn-dark",onClick:Ze},"Yes, Proceed")])])])])]))}},ca=dt(da,[["__scopeId","data-v-313a3372"]]);export{ca as default};
