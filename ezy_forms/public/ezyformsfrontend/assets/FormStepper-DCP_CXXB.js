var Qs=Object.defineProperty,Zs=Object.defineProperties;var Gs=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var _t=(A,S,F)=>S in A?Qs(A,S,{enumerable:!0,configurable:!0,writable:!0,value:F}):A[S]=F,oe=(A,S)=>{for(var F in S||(S={}))ht.call(S,F)&&_t(A,F,S[F]);if(Be)for(var F of Be(S))bt.call(S,F)&&_t(A,F,S[F]);return A},Ce=(A,S)=>Zs(A,Gs(S));var Ze=(A,S)=>{var F={};for(var D in A)ht.call(A,D)&&S.indexOf(D)<0&&(F[D]=A[D]);if(A!=null&&Be)for(var D of Be(A))S.indexOf(D)<0&&bt.call(A,D)&&(F[D]=A[D]);return F};var Ge=(A,S,F)=>new Promise((D,he)=>{var se=P=>{try{p(F.next(P))}catch(Z){he(Z)}},De=P=>{try{p(F.throw(P))}catch(Z){he(Z)}},p=P=>P.done?D(P.value):Promise.resolve(P.value).then(se,De);p((F=F.apply(A,S)).next())});import{_ as Ks,u as Xs,s as xs,d as b,q as re,e as K,w as me,f as Is,L as gt,l as z,m as N,p as I,o as a,c as i,b as s,v as V,O as el,j as J,h as v,D as E,H as U,I as M,t as g,N as tl,B as yt,a as ee,x as Ke,i as sl,A as Re,y as kt,K as te,z as y,Q as ne,C as T,F as ll,J as Xe,R as Se,S as ol,E as nl,k as W,U as xe,V as al,W as wt,X as il}from"./index-B4_9ZtV1.js";const rl="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg",ul={class:""},dl={class:""},cl={class:"d-flex justify-content-between align-items-center CancelNdSave my-2 py-2"},ml=["disabled"],pl={class:"form-container p-0 container-fluid mt-1"},fl={class:"row"},vl={class:"col-2"},_l={class:"steps-sticky-div"},hl={class:"steps"},bl=["onClick"],gl={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},yl={class:"step-text"},kl={class:"font-11"},wl={class:"font-14"},Cl={class:"col-10 formbackground-color"},Sl={class:""},Dl={class:"form-content stepsDiv"},Fl={key:0},$l={class:""},Vl={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Al={class:"container-fluid aboutFields p-0"},El={class:"row"},Ul={class:"col-4"},Tl={class:""},ql={class:"mt-3"},Ll={class:"position-relative"},Ml={key:0,class:"font-12 position-absolute PredefinedLabel"},Ol={key:1,class:"text-danger ErrorMsg ms-2"},Bl={class:"mt-3"},Rl={class:""},zl={key:0,class:"text-danger ErrorMsg ms-2"},Nl={class:"mt-3"},Pl={class:""},jl={for:""},Hl={key:0,class:"text-danger"},Jl={class:"mt-3"},Wl={class:""},Yl={for:""},Ql={key:0,class:"text-danger"},Zl={class:"mt-3"},Gl={class:"typo__label"},Kl={for:""},Xl={key:0,class:"text-danger"},xl={class:"custom-option"},Il=["checked","onChange"],eo={class:"mt-3"},to={class:""},so={class:"my-2 mb-5"},lo={class:"form-check d-flex align-items-center p-0 pe-3"},oo={key:0,class:"mt-2 position-relative mb-5"},no={key:0,class:"list-group position-absolute w-100 z-3 formslist"},ao=["onMousedown"],io={key:1},ro={class:""},uo={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},co={class:"d-flex gap-2 align-items-center"},mo={class:"requestandAppHeader"},po={class:"d-flex justify-content-between"},fo={class:"ps-2 pt-2"},vo={class:"d-flex"},_o={key:0,class:"role-container"},ho={key:0,class:"role-text d-flex align-items-center"},bo={class:"role-label"},go={class:"role-names"},yo=["onClick"],ko=["onClick"],wo=["onClick"],Co=["onClick"],So={class:"pt-0 section_block"},Do={class:"d-flex justify-content-between align-items-center"},Fo={class:"d-flex flex-column"},$o=["onUpdate:modelValue","onChange"],Vo={key:0,class:"text-danger font-10"},Ao={class:"d-flex align-items-center"},Eo=["onClick"],Uo={class:"container-fluid"},To={class:"d-flex justify-content-between align-items-center"},qo={class:"rownames"},Lo=["onClick"],Mo={class:"col"},Oo={class:"row"},Bo=["onMouseenter"],Ro={class:"column_name d-flex align-items-center justify-content-between"},zo={class:"d-flex flex-column ps-2"},No=["onUpdate:modelValue","onChange"],Po={key:0,class:"text-danger font-10"},jo={class:"position-absolute top-0 end-0"},Ho=["onClick"],Jo=["onDrop"],Wo=["onMouseenter","onDragstart","onDrop"],Yo=["onDrop"],Qo=["onDragstart","onDrop"],Zo={class:"d-flex justify-content-between"},Go={class:"flex-column d-flex"},Ko=["onUpdate:modelValue","onChange"],Xo={key:0,class:"text-danger font-10"},xo={class:"FieldcopyRemove"},Io=["onClick"],en=["onClick"],tn=["onUpdate:modelValue","onChange"],sn=["value"],ln={key:0},on=["onUpdate:modelValue"],nn={key:0,class:"text-danger font-10"},an={key:1},rn={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},un=["onClick"],dn=["onUpdate:modelValue","placeholder"],cn={class:"d-flex align-items-center justify-content-between"},mn={class:"d-flex align-items-center gap-2"},pn={class:"d-flex align-items-center"},fn=["onUpdate:modelValue"],vn=["onClick"],_n=["onUpdate:modelValue"],hn={key:3,class:"text-danger font-10"},bn=["onDrop"],gn={class:"childtableShow"},yn={class:"mt-2"},kn={key:0,class:"childTableContainer"},wn={key:0,class:"font-13"},Cn={key:1,class:"d-flex align-items-center gap-2"},Sn={class:"d-flex align-items-center"},Dn=["onUpdate:modelValue"],Fn={key:2,class:"table table-bordered rounded-table"},$n=["onDrop"],Vn=["draggable","onDragstart"],An={key:0},En=["onUpdate:modelValue"],Un={key:0,class:"font-11 text-danger"},Tn={key:1},qn={key:2},Ln={class:"d-flex gap-1"},Mn=["onUpdate:modelValue"],On=["value"],Bn={class:"d-flex"},Rn={class:"d-flex align-items-center gap-2"},zn={class:"d-flex align-items-center"},Nn=["onUpdate:modelValue"],Pn=["onClick"],jn={key:0},Hn=["onUpdate:modelValue"],Jn={key:0,class:"text-danger font-10"},Wn={key:1,class:"font-11 text-danger"},Yn={key:3},Qn={key:3,class:"mb-2 mt-3"},Zn=["onClick"],Gn=["onClick"],Kn=["onDrop"],Xn=["onDrop"],xn={class:"d-flex justify-content-center align-items-center my-2"},In=["onClick"],ea={class:"font-13"},ta={key:0,class:"d-flex align-items-center gap-2"},sa={class:"d-flex align-items-center"},la=["onUpdate:modelValue"],oa={class:"table table-bordered rounded-table"},na={key:0},aa=["onUpdate:modelValue","onBlur"],ia={key:0,class:"font-11 text-danger"},ra={key:1},ua={key:2},da={class:"d-flex gap-1"},ca=["onUpdate:modelValue"],ma=["value"],pa=["onClick"],fa={key:0},va=["onUpdate:modelValue"],_a={key:0,class:"text-danger font-10"},ha={key:1,class:"font-11 text-danger"},ba={key:3},ga={class:"mb-2"},ya=["onClick"],ka=["onClick"],wa=["onClick"],Ca={key:0},Sa={class:"d-flex justify-content-between align-items-center mt-1 mb-2"},Da=["onUpdate:modelValue","onBlur"],Fa={key:0,class:"text-danger font-12"},$a={key:1,class:"text-danger font-12"},Va={class:"d-flex align-items-center gap-2"},Aa={class:"d-flex align-items-center"},Ea=["onUpdate:modelValue"],Ua=["onClick"],Ta={class:"px-1 field-border"},qa={class:"d-flex justify-content-between"},La=["onUpdate:modelValue","onBlur"],Ma={key:0,class:"text-danger font-12"},Oa={class:"d-flex align-items-center"},Ba={class:"d-flex my-1"},Ra=["onUpdate:modelValue"],za=["onClick"],Na=["onClick"],Pa=["onUpdate:modelValue"],ja=["value"],Ha={key:0},Ja=["onUpdate:modelValue"],Wa={key:0,class:"text-danger font-10"},Ya={key:1,class:"text-danger font-12"},Qa=["onClick"],Za=["onClick"],Ga={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},Ka=["onClick"],Xa={key:0,class:"m-2"},xa={key:2},Ia={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},ei={class:"modal-dialog modal-dialog-centered"},ti={class:"modal-content"},si={class:"modal-body"},li=["placeholder"],oi={class:"d-flex align-items-center gap-2"},ni={class:"d-flex align-items-center py-2"},ai={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},ii={class:"offcanvas-header add_designationHeader"},ri={id:"offcanvasRightLabel",class:"font-14"},ui={class:"offcanvas-body p-0"},di={class:""},ci={class:""},mi={key:0,class:"p-3 py-4 approval-border-bottom d-flex align-items-center gap-3"},pi={class:"form-control","aria-disabled":""},fi={class:"font-12"},vi={class:"ms-2"},_i=["value"],hi={key:1,class:"p-3 approval-border-bottom"},bi={key:0,class:"form-check ps-0"},gi={class:"p-3 listofdesignations"},yi={key:0,class:"form-check ps-1 mt-3"},ki={key:1,class:"list-unstyled designation-scroll"},wi=["id","value"],Ci=["for"],Si={key:2},Di={class:"offcanvas-footer"},Fi={class:"text-end p-3"},pe="Select All",$i={__name:"FormStepper",setup(A){const S=Xs(),F=xs(),D=b(1),he=b([]);b([]);const se=b([]),De=b([]);re([]);let p=re([]),P=re([]);const Z=b([]),X=b([]),ze=b([]),ae=b(""),G=b(""),L=b("");let j=re([]);const Fe=b(""),be=b(!1),fe=b(""),Ct=b([]),St=b([]),le=re({}),R=b([]),$e=b([]),Ve=b(!1);let Ie=null;const Dt=b("");let $=b("");const ve=K(()=>nl);b(!1);const Ae=re([]),Y=b({routepath:S.query.routepath,business_unit:S.query.business_unit,formId:S.query.id}),Ee=b(""),_e=b(!1),et=K({get(){return f.value.form_name||S.query.form_name||""},set(t){f.value.form_name=t}}),f=b({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${ve.value.value||Y.value.business_unit||S.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:"",is_linked:0,is_linked_form:"",is_predefined_doctype:S.query.id?1:0});me(()=>S.query.form_name,t=>{t&&(f.value.form_name=t,f.value.form_short_name=t)},{immediate:!0});const Ft=K(()=>f.value);b(""),b(!1),me(ve,t=>{t&&t.value&&(f.value.business_unit=t.value)},{immediate:!0});function $t(t){if($==null||$==="new")return!1;const e=x(t).roles;if(t===0)return e.length===0;const l=x(t-1).roles;return l.length>0&&l[0]!==null&&l[0]!==""&&e.length===0}me(()=>f.value.form_name,t=>{f.value.form_name=t.trim()}),me(()=>f.value.form_short_name,t=>{f.value.form_short_name=t.trim()}),me(()=>f.value.series,t=>{f.value.series=t.trim()});const Ue=b(null),tt=(t,e,l,o,r,n)=>{Ue.value={blockIndex:e,sectionIndex:l,rowIndex:o,columnIndex:r,fieldIndex:n}},ue=(t,e,l,o,r,n)=>{if(!Ue.value)return;const{blockIndex:c,sectionIndex:m,rowIndex:_,columnIndex:u,fieldIndex:d}=Ue.value,w=p[c].sections[m].rows[_].columns[u].fields,h=p[e].sections[l].rows[o].columns[r].fields;if(c===e&&m===l&&_===o&&u===r&&d===n)return;const C=w.splice(d,1)[0];w===h&&d<n&&n--,h.splice(n,0,C),Ue.value=null},Te=b(""),Vt=t=>{const e=[["module","in",["User Forms"]],["istable","=",1]];t!=null&&t.trim()&&e.push(["name","like",`%${t}%`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};return z.get(N.resource+I.doctypesList,{params:l}).then(o=>o.data||[]).catch(o=>(console.error("Error fetching doctype list:",o),[]))},Ne=b(null),Pe=t=>Ge(this,null,function*(){if(t.tableName){const e=t.tableName.trim(),l=yield Vt(e);Ne.value=l.find(o=>o.name.toLowerCase()===e.toLowerCase()),Ne.value&&(Te.value="Table already exists")}else Te.value="";t.label&&(t.fieldname=Ht(t.label))});function At(){const t=f.value.is_linked_form;if(!t){$e.value=[];return}clearTimeout(Ie),Ie=setTimeout(()=>{const e=[["business_unit","like",`%${ve.value.value}%`],["name","like",`%${t}%`]],l={fields:JSON.stringify(["name"]),limit_page_length:10,limit_start:0,filters:JSON.stringify(e),order_by:"`tabEzy Form Definitions`.`enable` DESC, `tabEzy Form Definitions`.`creation` DESC"};z.get(`${N.resource}${I.EzyFormDefinitions}`,{params:l}).then(o=>{$e.value=o.data||[]}).catch(o=>{console.error("Error fetching form definitions:",o)})},300)}function Et(t){f.value.is_linked_form=t,Ve.value=!1}function Ut(){setTimeout(()=>{Ve.value=!1},200)}const qe=b([]),st=re({query:"",key:""});function Tt(t){const e=[["istable","=",0]];t!=null&&t.trim()&&e.push(["name","like",`%${t}%`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};z.get(N.resource+I.doctypesList,{params:l}).then(o=>{qe.value=o.data||[]}).catch(o=>{console.error("Error fetching doctype list:",o)})}function qt(t,e,l,o,r,n){p[t].sections[e].rows[l].columns[o].fields[r].options=n,qe.value=[],st.query="",st.key=""}const Lt=K(()=>p!=null&&p.length?L.value===1?[0]:Array.from({length:L.value},(t,e)=>e).filter(t=>t<L.value):[]),Mt=K(()=>Z.value.filter(t=>t.toLowerCase().includes(Fe.value.toLowerCase())).sort((t,e)=>{const l=X.value.includes(t),o=X.value.includes(e);return l===o?0:l?-1:1})),ie=b(null),de=b(null),Ot=(t,e,l,o,r)=>{ie.value={blockIndex:t,sectionIndex:e,rowIndex:l,columnIndex:o,fieldIndex:r}},Bt=()=>{ie.value=null},Rt=(t,e,l,o,r)=>ie.value&&ie.value.blockIndex===t&&ie.value.sectionIndex===e&&ie.value.rowIndex===l&&ie.value.columnIndex===o&&ie.value.fieldIndex===r,zt=(t,e,l,o)=>{de.value={blockIndex:t,sectionIndex:e,rowIndex:l,columnIndex:o}},Nt=()=>{de.value=null},Pt=(t,e,l,o)=>de.value&&de.value.blockIndex===t&&de.value.sectionIndex===e&&de.value.rowIndex===l&&de.value.columnIndex===o,lt=b([{form_json:""}]);Is(()=>{Fs(),$.value=S.params.paramid||"new",$.value!=null&&$.value!=null&&$.value!="new"&&(ut(),We());let t=localStorage.getItem("Bu");if(f.value.business_unit=t,S.query.preId==="PreDefine"){const e=localStorage.getItem("form_json");if(e){lt.value[0].form_json=e;const l=lt.value[0],o=JSON.parse(l.form_json),r=gt(o.fields);R.value=o.child_table_fields,r.forEach(n=>{p.push(n)})}}});const jt=b([]);function Ht(t){return t.toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]/g,"")}const Jt=(t,e)=>{const l=p[t].sections[e];l.childTables||(l.childTables=[]);const o=l.childTables.length;l.childTables.push({label:"",fieldname:"",fieldtype:"Table",idx:o,reqd:!1,as_a_block:"",description:"false",columns:[oe({label:"",fieldname:"",fieldtype:"",idx:0,description:"",reqd:!1},Ae.fieldtype==="Select"&&Ae.options?{options:Ae.options?`
${Ae.options}`:`
`}:{})],newTable:!0})},Wt=(t,e,l)=>{const o=p[t].sections[e].childTables[l];o.columns||(o.columns=[]),o.columns.push(oe({label:"",fieldname:"",fieldtype:"",idx:o.columns.length,description:"",reqd:!1},o.columns.fieldtype==="Select"&&o.columns.options?{options:o.columns.options?`
${o.columns.options}`:`
`}:{}))},Yt=(t,e,l)=>{p[t].sections[e].childTables.splice(l,1)},Qt=(t,e,l,o)=>{p[t].sections[e].childTables[l].columns.splice(o,1)},Zt=(t,e,l)=>{var c;const o=p[t].sections[e].childTables[l],r={tableName:!1,columns:[]};let n=!1;return(c=o.tableName)!=null&&c.trim()||(r.tableName="Table name is required.",n=!0),o.columns.forEach((m,_)=>{var d,w;const u={};(d=m.label)!=null&&d.trim()||(u.label="Field Label is required",n=!0),(w=m.fieldtype)!=null&&w.trim()||(u.fieldtype="Please select field type",n=!0),r.columns[_]=u}),le[`${t}-${e}-${l}`]=r,n},Gt=(t,e,l)=>{var r,n;const o=(n=(r=p[t])==null?void 0:r.sections)==null?void 0:n[e];o&&!Array.isArray(o[l])&&(o[l]=[])},ot=t=>t?t.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""):"",Kt=(t,e,l)=>{if(Zt(t,e,l)){W.error("Please fix validation errors before creating the table",{transition:"zoom"});return}if(Ne.value){W.error("Table already exists",{transition:"zoom"});return}const r=p[t].sections[e].childTables[l],n=p[t].sections[e];r.newTable=!1;const c={form_short_name:ot(r.tableName),fields:r.columns,idx:r.idx,as_a_block:r.as_a_block===1?"true":"false"};z.post(N.childtable,c).then(m=>{var _,u,d;if(m){Gt(t,e,"afterCreated"),n.afterCreated[l]=r,p[t].sections[e].childTables[l]=[],W.success("Table created successfully!",{autoClose:500,transition:"zoom"});const w=(d=(u=(_=m.message)==null?void 0:_[0])==null?void 0:u[0])==null?void 0:d.child_doc;p[t].sections[e].childTables[l]=w}}).catch(m=>{console.error("Error creating table:",m)})},Xt=(t,e,l,o)=>{const n=p[t].sections[e].afterCreated.find(m=>m.tableName===l);if(!n)return;n.columns.splice(o,1),n.columns.forEach((m,_)=>{m.idx=_+1});const c=O.value[l];c&&(O.value[l]=c.filter(m=>m!==o).map(m=>m>o?m-1:m))},xt=(t,e,l)=>{const r=p[t].sections[e].afterCreated.find(c=>c.tableName===l);if(!r)return;const n=r.columns.length;r.columns.push({fieldname:"",fieldtype:"",idx:n+1,label:"",value:"",isNew:!0,description:""})},nt=b([]),It=(t,e,l)=>{const r=p[t].sections[e].afterCreated.find(n=>n.tableName===l);if(r){if(q[l]){O.value[l]=[];let n=!0;if(r.columns.forEach((_,u)=>{(!_.label||!_.fieldtype)&&(O.value[l].push(u),n=!1)}),!n)return;const c=r.columns.map((w,d)=>{var h=w,{isNew:_}=h,u=Ze(h,["isNew"]);return Ce(oe({},u),{idx:d+1})}),m={form_short_name:ot(l),fields:c,as_a_block:r.description};z.post(N.childtable,m).then(_=>{nt.value=_.data,W.success("Fields updated successfully!",{autoClose:500})}).catch(_=>{console.error("❌ Saving fields failed:",_)})}q[l]=!q[l]}},q=re({}),es=t=>{R.value[t]||(R.value[t]=[]);const e=R.value[t].length+1;R.value[t].push({fieldname:"",fieldtype:"",idx:e,label:"",value:"",isNew:!0,description:"",options:R.value[t].options?`
${R.value[t].options}`:""})},ts=(t,e)=>{R.value[t]&&R.value[t].splice(e,1)},ce=b(null),O=b({}),at=b(null),ss=t=>{ce.value=t},ls=()=>{ce.value=null},os=t=>{t.preventDefault()},ns=(t,e)=>{const l=t.target.closest("tr");if(!l)return;const o=Array.from(l.parentNode.children).indexOf(l);if(o!==ce.value){const r=e[ce.value];e.splice(ce.value,1),e.splice(o,0,r),ce.value=o}},as=(t,e)=>{if(q[t]){O.value[t]=[];let l=!0;if(R.value[t].forEach((n,c)=>{(!n.label||!n.fieldtype)&&(O.value[t].push(c),l=!1)}),!l)return;let o=R.value[t].map((_,m)=>{var u=_,{isNew:n}=u,c=Ze(u,["isNew"]);return Ce(oe({},c),{idx:m})});const r={form_short_name:t,fields:o,as_a_block:e};z.post(N.childtable,r).then(n=>{W.success("Fields updated successfully!",{autoClose:500},{transition:"zoom"}),nt.value=n.data}).catch(n=>{console.error("❌ Saving fields failed:",n)})}q[t]=!q[t],at.value=q[t]?t:null};me(R,t=>{Object.keys(t).forEach(e=>{t[e].forEach((l,o)=>{var r;l.label&&l.fieldtype&&(O.value[e]=(r=O.value[e])==null?void 0:r.filter(n=>n!==o))})})},{deep:!0});const is=b([{id:1,label:"About Form",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Fields & Workflow",stepno:"Step 2",icon:"bi bi-question-circle"},{id:3,label:"Print Format",stepno:"Step 3",icon:"ri-checkbox-circle-line"}]),je=[{label:"Text",type:"Data"},{label:"Select",type:"Select"},{label:"Attach",type:"Attach"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Number",type:"Int"},{label:"TextArea",type:"Text"}],rs=[{label:"Text",type:"Data"},{label:"Table",type:"Table"},{label:"Number",type:"Int"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Phone"},{label:"Time",type:"Time"},{label:"TextArea",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Check",type:"Check"},{label:"Select",type:"Select"},{label:"Multi Select",type:"Small Text"},{label:"Link",type:"Link"}],us=K(()=>[pe,...se.value]),ds=K(()=>{const t=f.value.accessible_departments;return t.includes(pe)?"All Selected":t.length>1?`${t[0]}.. +${t.length-1} more selected`:t.join(", ")}),cs=t=>t===pe?f.value.accessible_departments.length===se.value.length:f.value.accessible_departments.includes(t),ms=(t,e)=>{t===pe?e.target.checked?f.value.accessible_departments=[...se.value]:f.value.accessible_departments=[]:(e.target.checked?f.value.accessible_departments.push(t):f.value.accessible_departments=f.value.accessible_departments.filter(l=>l!==t),f.value.accessible_departments.length===se.value.length?f.value.accessible_departments=[...se.value]:f.value.accessible_departments=f.value.accessible_departments.filter(l=>l!==pe))},ps=t=>{t===pe&&(f.value.accessible_departments=[...se.value])},fs=t=>{t===pe&&(f.value.accessible_departments=[])},He=K({get(){return Z.value.length>0&&Z.value.every(t=>X.value.includes(t))},set(t){t?X.value=[...Z.value]:X.value=[]}});function vs(){!He.value&&X.value.length}function _s(){const t=p[L.value];if(!t||!t.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:L.value==0?"requestor":"approver",roles:X.value,fields:t.sections.flatMap(xe),idx:L.value};L.value!==0&&(e.view_only_reportee=be.value===!0?1:0),L.value!==0&&(e.on_rejection=fe.value?fe.value:0);const l=j.findIndex(o=>o.idx===e.idx);l!==-1?j[l]=e:j.push(e),ys()}function x(t){return j.find(e=>e.idx===t)||{roles:[]}}function hs(t){const e=x(t),l=e.roles||[];X.value=[...l],be.value=e.view_only_reportee===1,fe.value=e.on_rejection}const Je=t=>{Fe.value="",be.value=!1,fe.value="",f.value.accessible_departments.length&&gs(f.value.accessible_departments),L.value=t,hs(t)},bs=b([]);function gs(t){Array.isArray(t)&&t.length>0,z.get(N.resource+I.WFRoleMatrix+`/${f.value.business_unit}`).then(e=>{e.data&&(bs.value=e.data.users,Z.value=[...new Set(e.data.users.map(l=>l.role_name))])}).catch(e=>{console.error("Error fetching designations data:",e)})}function ys(){z.post(N.add_roles_WF,{workflow_setup:j,doctype:f.value.form_short_name,business_unit:f.value.business_unit}).then(t=>{console.log(t),L.value==0?W.success("Requestor Added",{autoClose:1e3,transition:"zoom"}):W.success(`Approver-${L.value} Added`,{autoClose:1e3,transition:"zoom"})})}function ks(){F.push({path:Y.value.routepath||localStorage.getItem("routepath")}),localStorage.removeItem("form_json")}function ws(){f.value.form_name="",f.value.form_short_name="",f.value.owner_of_the_form="",f.value.business_unit="",f.value.form_category="",f.value.accessible_departments=[]}const Cs=t=>{if(Me.value){W.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}t<D.value?rt():t>D.value&&it()},it=()=>{if(Me.value){W.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}D.value<3&&(D.value+=1,D.value===3&&(Oe.value=p))},rt=()=>{D.value>1&&(D.value-=1)},Ss=b([]);function ut(){z.get(N.resource+I.EzyFormDefinitions+`/${$.value}`).then(t=>{var l;let e=t==null?void 0:t.data;if(e){F.push({query:{id:e.name}}),e.accessible_departments&&(e.accessible_departments=e.accessible_departments.split(",")),f.value=Ce(oe(oe({},f.value),e),{owner_of_the_form:e.owner_of_the_form||f.value.owner_of_the_form||""});const o=JSON.parse((l=t.data)==null?void 0:l.form_json);Ct.value=o.workflow,Dt.value=o.fields.filter(n=>n.fieldtype==="Table"),Ss.value=o.fields.filter(n=>n.fieldtype==="Table"),_e.value=t.data.is_landscape;let r=gt(JSON.parse(e==null?void 0:e.form_json).fields);R.value=JSON.parse(t.data.form_json).child_table_fields,jt.value=[],St.value=[],r.forEach((n,c)=>{p.push(n)}),JSON.parse(e==null?void 0:e.form_json).workflow.forEach((n,c)=>{j.push(n)})}}).catch(t=>{console.error("Error fetching  data:",t)})}function Ds(){const t={};Ee.value&&(t.print_format=Ee.value),_e.value!==void 0&&_e.value!==null&&(t.is_landscape=_e.value),z.put(N.resource+I.EzyFormDefinitions+`/${S.query.id}`,t).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),W.success("Print Format Added Successfully",{autoClose:1e3,transition:"zoom"})}).catch(e=>{console.error("Error fetching  data:",e)})}function Fs(){const t={fields:JSON.stringify(["*"]),limit_page_length:"none"};z.get(N.resource+I.departments,{params:t}).then(e=>{var l;(l=e==null?void 0:e.data)!=null&&l.length&&(De.value=e.data.map(o=>o.name),se.value=e.data.map(o=>o.name))}).catch(e=>{console.error("Error fetching department data:",e)})}me(()=>f.value.owner_of_the_form,t=>{t&&We(t)});function We(t){t&&typeof t=="string"&&t.trim()!==""&&$s(t)}function $s(t){z.get(N.resource+I.departments+`/${t}`).then(e=>{var l;(l=e==null?void 0:e.data)!=null&&l.ezy_departments_items&&(he.value=e.data.ezy_departments_items.map(o=>o.category))}).catch(e=>{console.error("Error fetching categories data:",e)})}function dt(t){let e=il(p);const l=Ce(oe({},f.value),{fields:e,doctype:I.EzyFormDefinitions,workflow_setup:j,form_status:t==="save"?"Created":"Draft"});l.accessible_departments=l.accessible_departments.toString(),console.log(l,"---data obj"),z.post(N.savedata,l).then(o=>{o&&o.message&&o.message.message?(F.push({params:{paramid:o.message.message},query:{id:o.message.message}}),$.value=o.message.message,$&&$!=="new"&&(p.splice(0,p.length),ut()),j.length<p.length?W.info("Add Workflow",{autoClose:2e3,transition:"zoom"}):ct.value===!0&&W.success("Form Created Successfully!",{autoClose:2e3,transition:"zoom",onClose:()=>{let r=localStorage.getItem("routepath");t==="save"?F.push({path:r}):t==="Draft"&&F.push({path:r})}})):console.error("Invalid response structure:",o)}).catch(o=>{console.error("Error saving form data:",o)})}const Le=b(""),Vs=()=>{var l,o;const t=p.length,e={label:t===0?"requestor":`approver-${t}`,parent:`${(l=ve.value)==null?void 0:l.value}-${(o=f.value)==null?void 0:o.form_short_name}`,sections:[{label:"",parent:`${ve.value.value}-${f.value.form_short_name}`,childTables:[],afterCreated:{},rows:t===0?[{label:`row_0_0_${t}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${t}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${t}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1},{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]}]}]}]};p.push(e),al(()=>{Le.value&&Le.value.scrollTo({top:Le.value.scrollHeight,behavior:"smooth"})})},ct=b(!1),As=t=>{let e=p[t];e.parent&&P.push(e),j.length>t&&j[t].roles&&[...j[t].roles],p.splice(t,1),j.length>t&&j.splice(t,1)},Es=(t,e)=>{const l={label:"",parent:`${ve.value.value}-${f.value.form_short_name}`,rows:[{label:`row_0_${e}_${t}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]};p[t].sections.splice(e+1,0,l)},Us=(t,e)=>{let l=p[t].sections[e];l.parent&&P.push(l),p[t].sections.splice(e,1)},Ts=(t,e,l)=>{p[t].sections[e].rows[l].columns.push({label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]})},qs=(t,e,l,o)=>{const n=p[t].sections[e].rows[l].columns,c=n[o];c.parent&&P.push(c),n.length===1?p[t].sections[e].rows.splice(l,1):n.splice(o,1)},Ls=(t,e,l,o)=>{p[t].sections[e].rows[l].columns[o].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},Ms=(t,e,l,o,r)=>{let n=p[t].sections[e].rows[l].columns[o].fields[r];n.parent&&P.push(n),p[t].sections[e].rows[l].columns[o].fields.splice(r,1)},Os=(t,e,l,o,r)=>{const n=p[t].sections[e].rows[l].columns[o].fields[r],c=oe({},n);c.name=`${n.name} Name the field`,p[t].sections[e].rows[l].columns[o].fields.splice(r+1,0,c)},Bs=(t,e,l,o,r)=>{const n=wt(p);p.splice(0,p.length,...n);let c=p[t].sections[e].rows[l].columns[o].fields[r].fieldtype;(c!=="Select"||c!=="radio"||c!=="multiselect")&&(p[t].sections[e].rows[l].columns[o].fields[r].options="")},Rs=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus"].map(t=>t.toLowerCase().trim()),zs=["Approver","Approved on","Approved By"].map(t=>t.toLowerCase().trim());function Ns(t){return Rs.includes(t==null?void 0:t.trim().toLowerCase())}function Ps(t){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(t)||t.includes('"')||t.includes("'")}function js(t){return t.flatMap(e=>{var l;return[(l=e.label)==null?void 0:l.trim().toLowerCase(),...e.sections.flatMap(o=>{var r;return[(r=o.label)==null?void 0:r.trim().toLowerCase(),...o.rows.flatMap(n=>n.columns.flatMap(c=>{var m;return[(m=c.label)==null?void 0:m.trim().toLowerCase(),...c.fields.map(_=>{var u;return(u=_.label)==null?void 0:u.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!zs.includes(e))}function Ye(t,e,l,o,r){const c=js(p).filter((u,d,w)=>w.indexOf(u)!==d),m=wt(p);p.splice(0,p.length,...m);function _(u,d){Ns(u)?d.errorMsg="Entered label is restricted":Ps(u)?d.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:d.errorMsg=c.includes(u.trim().toLowerCase())?"Duplicate Label Name":""}r!==void 0&&_(p[t].sections[e].rows[l].columns[o].fields[r].label,p[t].sections[e].rows[l].columns[o].fields[r]),r===void 0&&o!==void 0&&_(p[t].sections[e].rows[l].columns[o].label,p[t].sections[e].rows[l].columns[o]),o===void 0&&r===void 0&&_(p[t].sections[e].label,p[t].sections[e])}const Qe=K(()=>{function t(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(t):Object.values(e).some(t)}return t(p)}),Me=K(()=>ae.value.length>0||G.value.length>0||!f.value.form_category||!f.value.owner_of_the_form||f.value.accessible_departments.length===0),Hs=K(()=>p.some(t=>t.sections.some(e=>e.rows.some(l=>l.columns.some(o=>o.fields.some(r=>r.label&&r.fieldtype))))));function mt(t,e){let l=t.target.value.trim();if(!l){e==="form_name"?ae.value="Input cannot be empty or only spaces":e==="form_short_name"&&(G.value="Input cannot be empty or only spaces");return}if(/^\d/.test(l)){e==="form_short_name"&&(G.value="First character must be a letter");return}else G.value="";if(e==="form_short_name"&&/[^a-zA-Z ]/.test(l)){G.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(l)){e==="form_name"?ae.value="Special characters are not allowed":e==="form_short_name"&&(G.value="Special characters are not allowed");return}else e==="form_name"?ae.value="":e==="form_short_name"&&(G.value="");const o=[[e,"=",`%${l}%`],["business_unit","like",`%${f.value.business_unit}%`]],r={fields:JSON.stringify(["*"]),filters:JSON.stringify(o)};z.get(`${N.resource}${I.EzyFormDefinitions}`,{params:r}).then(n=>{ze.value=n.data,e==="form_name"?ae.value=l&&ze.value.some(c=>c.form_name&&c.form_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(G.value=l&&ze.value.some(c=>c.form_short_name&&c.form_short_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(n=>{console.error("Error fetching ezyForms data:",n),e==="form_name"?ae.value="":e==="form_short_name"&&(G.value="")})}const Js=t=>t===0?"1st row":t===1?"2nd row":t===2?"3rd row":`${t+1}th row`,Oe=b([]),Ws=()=>{p.length&&(Oe.value=p,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function Ys(){z.post(N.delete_form_items,{deleted_fields:P.flatMap(xe),doctype:$}).then(t=>{var e;(e=t==null?void 0:t.message)!=null&&e.success&&dt()})}function pt(t){return Ge(this,null,function*(){if(Qe.value){W.error("Please fix the errors before proceeding.");return}ct.value=!0;let e=P.flatMap(xe);$!=null&&$!=null&&$!="new"&&e.length?Ys():dt(t)})}return(t,e)=>(a(),i("div",null,[s("div",ul,[s("div",dl,[s("div",cl,[s("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=l=>ks())},e[34]||(e[34]=[s("h1",{class:"font-13 ms-3"},[s("i",{class:"bi bi-arrow-left"}),s("span",{class:"ms-2"},"Back")],-1)])),s("div",null,[D.value===2&&V(p).length&&!t.$route.query.id?(a(),i("button",{key:0,disabled:Qe.value||Me.value,style:el({cursor:Qe.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=l=>pt("Draft"))},e[35]||(e[35]=[s("i",{class:"bi bi-bookmark-check-fill"},null,-1),J(" Save As Draft ")]),12,ml)):v("",!0)])]),s("div",pl,[s("div",fl,[s("div",vl,[s("div",_l,[s("ul",hl,[(a(!0),i(E,null,U(is.value,l=>(a(),i("li",{key:l.id,class:M({active:D.value===l.id,completed:D.value>l.id})},[s("div",{class:M(["d-flex gap-3 align-items-center",{"not-allowed":Me.value&&D.value+1===l.id}]),onClick:o=>Cs(l.id)},[D.value>l.id?(a(),i("i",gl)):(a(),i("i",{key:1,class:M(l.icon)},null,2)),s("div",yl,[s("span",kl,g(l.stepno),1),e[36]||(e[36]=s("br",null,null,-1)),s("span",wl,g(l.label),1)])],10,bl)],2))),128))])])]),s("div",Cl,[s("div",Sl,[s("div",Dl,[D.value===1?(a(),i("div",Fl,[s("div",$l,[s("div",Vl,[e[37]||(e[37]=s("div",null,null,-1)),e[38]||(e[38]=s("h1",{class:"font-14 fw-bold m-0"},"About Form",-1)),s("div",null,[t.$route.query.id?v("",!0):(a(),i("button",{key:0,class:"btn btn-light font-12 mx-2",type:"button",onClick:ws},"Clear Form")),D.value<3?(a(),tl(yt,{key:1,class:"btn btn-dark bg-dark text-white fw-bold font-13",name:"Next",onClick:it})):v("",!0)])])]),s("div",Al,[s("div",El,[e[48]||(e[48]=s("div",{class:"col-4"},null,-1)),s("div",Ul,[s("div",Tl,[s("div",ql,[s("div",Ll,[V(S).query.preId?(a(),i("span",Ml,e[39]||(e[39]=[J("Predefined"),s("i",{class:"bi bi-check2-circle"},null,-1)]))):v("",!0),ee(Ke,{disabled:Y.value.formId&&Y.value.formId.length>0||V(S).query.form_name,labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Untitled Form",onChange:e[2]||(e[2]=l=>mt(l,"form_name")),modelValue:et.value,"onUpdate:modelValue":e[3]||(e[3]=l=>et.value=l)},null,8,["disabled","modelValue"]),ae.value?(a(),i("span",Ol,g(ae.value),1)):v("",!0)])]),s("div",Bl,[s("div",Rl,[ee(Ke,{disabled:Y.value.formId&&Y.value.formId.length>0,labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Untitled Form",onChange:e[4]||(e[4]=l=>mt(l,"form_short_name")),modelValue:f.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=l=>f.value.form_short_name=l)},null,8,["disabled","modelValue"]),G.value?(a(),i("span",zl,g(G.value),1)):v("",!0)]),s("div",null,[ee(Ke,{disabled:Y.value.formId&&Y.value.formId.length>0,labeltext:"Form Naming series",class:"formHeight mt-2",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Naming series",modelValue:f.value.series,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value.series=l)},null,8,["disabled","modelValue"]),e[40]||(e[40]=sl('<small class="text-muted" style="font-size:12px;" data-v-54a111f9> Note : Enter <code data-v-54a111f9>YY-YY</code>, <code data-v-54a111f9>YYYY</code>, or <code data-v-54a111f9>ABC</code>. The system will default to the format <code data-v-54a111f9> 24-25-0001</code>, <code data-v-54a111f9> 2025-0001</code>, or <code data-v-54a111f9> ABC-0001</code> respectively. </small>',1))])]),s("div",Nl,[s("div",Pl,[s("label",jl,[e[41]||(e[41]=J("Owner Of The Form ")),f.value.owner_of_the_form?v("",!0):(a(),i("span",Hl,"*"))]),ee(V(Re),{disabled:Y.value.formId&&Y.value.formId.length>0,options:De.value,onChange:We,modelValue:f.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=l=>f.value.owner_of_the_form=l),placeholder:"Select Department",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["disabled","options","modelValue"])])]),s("div",Jl,[s("div",Wl,[s("label",Yl,[e[42]||(e[42]=J("Form Cateogry ")),f.value.form_category?v("",!0):(a(),i("span",Ql,"*"))]),ee(V(Re),{disabled:Y.value.formId&&Y.value.formId.length>0,options:he.value,modelValue:f.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=l=>f.value.form_category=l),placeholder:"Select Cateogry",multiple:!1,searchable:!0,class:"font-11 multiselect"},null,8,["disabled","options","modelValue"])])]),s("div",Zl,[s("label",Gl,[s("label",Kl,[e[43]||(e[43]=J("Accessibility Departments ")),f.value.accessible_departments.length?v("",!0):(a(),i("span",Xl,"*"))])]),ee(V(Re),{modelValue:f.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=l=>f.value.accessible_departments=l),options:us.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Department",class:"font-11",onSelect:ps,onRemove:fs},{option:kt(({option:l})=>[s("div",xl,[s("input",{type:"checkbox",checked:cs(l),class:"custom-checkbox",onChange:o=>ms(l,o),onClick:e[9]||(e[9]=te(()=>{},["stop"]))},null,40,Il),s("span",null,g(l),1)])]),selection:kt(({values:l,isOpen:o})=>[l.length?y((a(),i("span",{key:0,class:"multiselect__single font-10"},g(ds.value),513)),[[Xe,!o]]):v("",!0)]),_:1},8,["modelValue","options"])]),s("div",eo,[s("div",to,[e[44]||(e[44]=s("label",{for:""},"Has Workflow ",-1)),ee(V(Re),{options:["No"],modelValue:f.value.has_workflow,"onUpdate:modelValue":e[11]||(e[11]=l=>f.value.has_workflow=l),placeholder:"Select",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["modelValue"])])]),s("div",so,[s("div",lo,[y(s("input",{class:"form-check-input linketoCheck p-1",type:"checkbox",id:"is_linked","onUpdate:modelValue":e[12]||(e[12]=l=>f.value.is_linked=l),"true-value":1,"false-value":0},null,512),[[ne,f.value.is_linked]]),e[45]||(e[45]=s("label",{class:"form-check-label font-12 mx-2 mb-0 ps-1",for:"is_linked"}," Link ",-1))]),e[47]||(e[47]=s("div",null,null,-1)),f.value.is_linked?(a(),i("div",oo,[e[46]||(e[46]=s("label",{for:"standardFormInput"},"Standard Form",-1)),y(s("input",{type:"text",class:"form-control standardFormInput",id:"standardFormInput","onUpdate:modelValue":e[13]||(e[13]=l=>f.value.is_linked_form=l),placeholder:"Type to search Form Name...",onInput:At,onFocus:e[14]||(e[14]=l=>Ve.value=!0),onBlur:Ut},null,544),[[T,f.value.is_linked_form]]),Ve.value&&$e.value.length?(a(),i("ul",no,[(a(!0),i(E,null,U($e.value,(l,o)=>(a(),i("li",{class:"list-group-item formlistitem",key:o,onMousedown:te(r=>Et(l.name),["prevent"])},g(l.name),41,ao))),128))])):v("",!0)])):v("",!0)])])]),e[49]||(e[49]=s("div",{class:"col-4"},null,-1))])])])):v("",!0),D.value===2?(a(),i("div",io,[s("div",ro,[s("div",uo,[s("h1",{onClick:e[15]||(e[15]=l=>rt()),class:"font-11 m-0"},e[50]||(e[50]=[s("i",{class:"bi bi-chevron-left"},null,-1),s("span",{class:"ms-2"},"Back To About Form",-1)])),s("div",co,[s("div",null,[Hs.value?(a(),i("button",{key:0,class:"btn btn-light previewBtn d-flex align-items-center font-13",type:"button",onClick:Ws},e[51]||(e[51]=[s("i",{class:"bi bi-eye me-1 ms-1 mb-0"},null,-1),J("Preview ")]))):v("",!0)]),V(p).length?(a(),i("button",{key:0,class:"btn btn-dark font-10 Withborder border",type:"button",onClick:e[16]||(e[16]=l=>pt("save"))},g(V($)!=="new"?"Update Form":"Create Form"),1)):v("",!0)])]),ee(ll,{blockArr:Oe.value,formDescriptions:Ft.value,childHeaders:R.value},null,8,["blockArr","formDescriptions","childHeaders"]),s("div",{class:"main-block",ref_key:"mainBlockRef",ref:Le},[(a(!0),i(E,null,U(V(p),(l,o)=>(a(),i("div",{class:"block-level",key:o},[s("div",mo,[s("div",po,[s("div",null,[s("h6",fo,g(o===0?"Requestor Block":`Approver
                                  Block ${o}
                                  `),1)]),s("div",vo,[V($)&&V(j).length?(a(),i("div",_o,[x(o)?(a(),i("label",ho,[s("span",bo,g(x(o).roles.length>0?o===0?"Requestor: ":"Approver: ":""),1),s("span",go,g(x(o).roles.slice(0,2).join(", ")),1),x(o).roles.length>2?(a(),i("span",{key:0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:r=>Je(o),class:"more-count"}," +"+g(x(o).roles.length-2)+" more ",9,yo)):v("",!0)])):v("",!0)])):v("",!0),$t(o)&&V($)!=null&&V($)!=null&&V($)!="new"&&x(o).roles.length===0?(a(),i("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:r=>Je(o)},e[52]||(e[52]=[s("img",{src:rl,alt:"Add",class:"me-1"},null,-1),J(" Add designations ")]),8,ko)):v("",!0),V($)!=null&&V($)!=null&&V($)!="new"&&x(o).roles.length>0?(a(),i("button",{key:2,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:r=>Je(o)},e[53]||(e[53]=[s("i",{class:"bi bi-pencil font-14"},null,-1)]),8,wo)):v("",!0),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:r=>As(o)},e[54]||(e[54]=[s("i",{class:"bi bi-trash me-1"},null,-1),J(" Delete Block ")]),8,Co)])])]),s("div",So,[(a(!0),i(E,null,U(l.sections,(r,n)=>(a(),i("div",{key:"section-"+n,class:"dynamicSection mt-0 section"},[s("section",Do,[s("div",Fo,[y(s("input",{"onUpdate:modelValue":c=>r.label=c,type:"text",class:M(["border-less-input","font-14",{"italic-style":!r.label},{"fw-medium":r.label}]),onChange:c=>Ye(o,n),placeholder:"Untitled section"},null,42,$o),[[T,r.label]]),r.errorMsg?(a(),i("small",Vo,g(r.errorMsg),1)):v("",!0)]),s("div",Ao,[s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:c=>Us(o,n)},e[55]||(e[55]=[s("i",{class:"bi bi-trash me-1"},null,-1),J(" Delete Section ")]),8,Eo)])]),s("div",Uo,[(a(!0),i(E,null,U(r.rows,(c,m)=>(a(),i("section",{class:"row dynamicRow row-container",key:"row-"+m},[s("div",To,[s("label",qo,g(Js(m)),1),s("div",null,[c.columns.length<3?(a(),i("button",{key:0,class:"btn btn-light bg-transparent border-0 font-12",onClick:_=>Ts(o,n,m)},e[56]||(e[56]=[s("i",{class:"bi bi-plus font-14"},null,-1),J(" Add Column ")]),8,Lo)):v("",!0)])]),s("div",Mo,[s("div",Oo,[(a(!0),i(E,null,U(c.columns,(_,u)=>(a(),i("div",{key:"column-"+u,onMouseenter:d=>zt(o,n,m,u),onMouseleave:Nt,class:"col p-0 dynamicColumn position-relative column-container"},[s("div",Ro,[s("div",zo,[y(s("input",{"onUpdate:modelValue":d=>_.label=d,type:"text",class:M(["border-less-input","ps-1","font-14","inputHeight",{"italic-style":!_.label},{"fw-medium":_.label}]),onChange:d=>Ye(o,n,m,u),placeholder:"Column Name"},null,42,No),[[T,_.label]]),_.errorMsg?(a(),i("small",Po,g(_.errorMsg),1)):v("",!0)]),y(s("div",jo,[s("button",{class:"btn btn-light bg-transparent me-1 btn-sm",onClick:d=>qs(o,n,m,u)},e[57]||(e[57]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Ho)],512),[[Xe,Pt(o,n,m,u)]])]),_.fields.length===0?(a(),i("div",{key:0,class:"empty-drop-zone",onDragover:e[17]||(e[17]=te(()=>{},["prevent"])),onDrop:d=>ue(d,o,n,m,u,t.fieldIndex)},null,40,Jo)):v("",!0),(a(!0),i(E,null,U(_.fields,(d,w)=>(a(),i("div",{key:"field-"+w,onMouseenter:h=>Ot(o,n,m,u,w),onMouseleave:Bt,class:"dynamicField m-1 draggable-item",draggable:"true",onDragstart:h=>tt(h,o,n,m,u,w),onDragover:e[24]||(e[24]=te(()=>{},["prevent"])),onDrop:h=>ue(h,o,n,m,u,w)},[s("div",{class:"drop-zone",onDragover:e[18]||(e[18]=te(()=>{},["prevent"])),onDrop:h=>ue(h,o,n,m,u,w)},null,40,Yo),d.fieldtype!=="Table"?(a(),i("div",{key:0,class:"px-1 dynamic_fied field-border",draggable:"true",onDragstart:h=>tt(h,o,n,m,u,w),onDragover:e[22]||(e[22]=te(()=>{},["prevent"])),onDrop:h=>ue(h,o,n,m,u,w)},[s("div",Zo,[s("div",Go,[y(s("input",{"onUpdate:modelValue":h=>d.label=h,placeholder:"Name the field",class:M(["border-less-input","font-14","p-0","inputHeight",{"italic-style":!d.label},{"fw-medium":d.label}]),onChange:h=>Ye(o,n,m,u,w)},null,42,Ko),[[T,d.label]]),d.errorMsg?(a(),i("small",Xo,g(d.errorMsg),1)):v("",!0)]),y(s("div",xo,[s("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:h=>Os(o,n,m,u,w)},e[58]||(e[58]=[s("i",{class:"ri-file-copy-line font-13 copyIcon"},null,-1)]),8,Io),s("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:h=>Ms(o,n,m,u,w)},e[59]||(e[59]=[s("i",{class:"bi bi-x-lg font-13"},null,-1)]),8,en)],512),[[Xe,Rt(o,n,m,u,w)]])]),y(s("select",{"onUpdate:modelValue":h=>d.fieldtype=h,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:h=>Bs(o,n,m,u,w)},[e[60]||(e[60]=s("option",{value:""},"Select Type",-1)),(a(),i(E,null,U(rs,h=>s("option",{key:h,value:h.type},g(h.label),9,sn)),64))],40,tn),[[Se,d.fieldtype]]),["Select","Table MultiSelect","Small Text"].includes(d.fieldtype)?(a(),i("div",ln,[e[61]||(e[61]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),y(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":h=>d.options=h,class:"form-control shadow-none mb-1 font-12"},null,8,on),[[T,d.options]]),!d.options||d.options.trim()===""?(a(),i("small",nn," Options are required for this field type. ")):v("",!0)])):v("",!0),d.fieldtype==="Link"?(a(),i("div",an,[e[62]||(e[62]=s("label",{class:"font-12 fw-light",for:"link-search"},"Search Doctype:",-1)),y(s("input",{id:"link-search",type:"text","onUpdate:modelValue":e[19]||(e[19]=h=>t.linkSearchQuery=h),onInput:e[20]||(e[20]=h=>Tt(t.linkSearchQuery)),onFocus:e[21]||(e[21]=h=>t.dropdownVisible=!0),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,544),[[T,t.linkSearchQuery]]),qe.value.length&&t.dropdownVisible?(a(),i("ul",rn,[(a(!0),i(E,null,U(qe.value,(h,C)=>(a(),i("li",{key:C,onClick:k=>qt(o,n,m,u,w,h.name),class:"list-group-item list-group-item-action"},g(h.name),9,un))),128))])):v("",!0),y(s("input",{type:"text","onUpdate:modelValue":h=>V(p)[o].sections[n].rows[m].columns[u].fields[w].options=h,class:"form-control font-12 mb-1",placeholder:t.linkSearchQuery?"Select from list":"Selected doctype will appear here",readonly:""},null,8,dn),[[T,V(p)[o].sections[n].rows[m].columns[u].fields[w].options]])])):v("",!0),s("div",cn,[s("div",mn,[s("div",pn,[y(s("input",{class:"font-12","onUpdate:modelValue":h=>d.reqd=h,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,fn),[[ne,d.reqd]])]),e[63]||(e[63]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Mandatory")],-1))]),s("div",null,[s("button",{class:"btn btn-sm font-12",onClick:h=>d.showDescription=!d.showDescription},g(d.showDescription?"Hide Description":d.description?"Edit Description":"Add Description"),9,vn)])]),d.showDescription?y((a(),i("textarea",{key:2,"onUpdate:modelValue":h=>d.description=h,class:"form-control font-12 mt-2",placeholder:"Enter field description"},null,8,_n)),[[T,d.description]]):v("",!0),d.error?(a(),i("small",hn,g(d.error),1)):v("",!0)],40,Qo)):v("",!0),s("div",{class:"drop-zone",onDragover:e[23]||(e[23]=te(()=>{},["prevent"])),onDrop:h=>ue(h,o,n,m,u,w)},null,40,bn),s("div",gn,[s("div",null,[s("div",null,[s("div",yn,[d.fieldtype==="Table"?(a(),i("div",kn,[(a(!0),i(E,null,U(R.value,(h,C)=>(a(),i("div",{key:C,class:"childTable"},[C===d.fieldname||C===d.options?(a(),i("h5",wn,g(C.replace(/_/g," ")),1)):v("",!0),q[C]&&C===at.value?(a(),i("div",Cn,[s("div",Sn,[y(s("input",{class:"font-12","onUpdate:modelValue":k=>d.description=k,"true-value":"true","false-value":"fasle",placeholder:"Field Name",type:"checkbox"},null,8,Dn),[[ne,d.description]])]),e[64]||(e[64]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])):v("",!0),C===d.options||C===d.fieldname?(a(),i("table",Fn,[e[68]||(e[68]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Label"),s("th",null,"Field Type")])],-1)),s("tbody",{onDragover:te(os,["prevent"]),onDrop:k=>ns(k,h)},[(a(!0),i(E,null,U(h,(k,Q)=>{var ge,ye,ke,we;return a(),i("tr",{key:Q,draggable:q[C],onDragstart:B=>ss(Q),onDragend:ls,class:M({dragging:ce.value===Q})},[s("td",null,g(Q+1),1),q[C]?(a(),i("td",An,[y(s("input",{"onUpdate:modelValue":B=>k.label=B,placeholder:"Field Label",class:M(["form-control",{"border-1 border-danger":(ge=O.value[C])==null?void 0:ge.includes(Q)}])},null,10,En),[[T,k.label]]),(ye=O.value[C])!=null&&ye.includes(Q)?(a(),i("span",Un,"Label required**")):v("",!0)])):(a(),i("td",Tn,g(k.label),1)),q[C]?(a(),i("td",qn,[s("div",Ln,[y(s("select",{"onUpdate:modelValue":B=>k.fieldtype=B,class:M(["form-select form-select-sm",{"border-1 border-danger":(ke=O.value[C])==null?void 0:ke.includes(Q)}])},[e[65]||(e[65]=s("option",{value:""},"Select Type",-1)),(a(),i(E,null,U(je,B=>s("option",{key:B.type,value:B.type},g(B.label),9,On)),64))],10,Mn),[[Se,k.fieldtype]]),s("div",Bn,[s("div",Rn,[s("div",zn,[y(s("input",{class:"font-12 form-control-sm","onUpdate:modelValue":B=>k.description=B,placeholder:"description",type:"text"},null,8,Nn),[[T,k.description]])])]),s("button",{class:"btn btn-light btn-sm",onClick:B=>ts(C,Q)},e[66]||(e[66]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Pn)])]),["Select"].includes(k.fieldtype)?(a(),i("div",jn,[e[67]||(e[67]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),y(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":B=>k.options=B,class:"form-control shadow-none mb-1 font-12"},null,8,Hn),[[T,k.options]]),!k.options||k.options.trim()===""?(a(),i("small",Jn," Options are required for this field type. ")):v("",!0)])):v("",!0),(we=O.value[C])!=null&&we.includes(Q)?(a(),i("span",Wn,"Type required**")):v("",!0)])):(a(),i("td",Yn,g(k.fieldtype),1))],42,Vn)}),128))],40,$n)])):v("",!0),d.fieldtype==="Table"&&(d.label===C||d.fieldname===C)?(a(),i("div",Qn,[s("button",{class:"btn btn-light btn-sm mx-2",onClick:k=>as(C,d.description)},g(q[C]?"Save":"Edit"),9,Zn),q[C]?(a(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:k=>es(C)}," Add More Field ",8,Gn)):v("",!0)])):v("",!0)]))),128))])):v("",!0)])])])])],40,Wo))),128)),s("div",{class:"drop-zone-bottom",onDragover:e[25]||(e[25]=te(()=>{},["prevent"])),onDrop:d=>ue(d,o,n,m,u,_.fields.length),style:{"background-color":"#f0f0f0",border:"1px dashed #ccc",margin:"4px"}},null,40,Kn),s("div",{class:"drop-zone",onDragover:e[26]||(e[26]=te(()=>{},["prevent"])),onDrop:d=>ue(d,o,n,m,u,t.fields.length),style:{height:"10px","background-color":"transparent"}},null,40,Xn),s("div",xn,[s("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:d=>Ls(o,n,m,u)},e[69]||(e[69]=[s("i",{class:"bi bi-plus fs-5"},null,-1),s("span",null,"Add Field",-1)]),8,In)])],40,Bo))),128))])])]))),128)),s("div",null,[(a(!0),i(E,null,U(r.afterCreated,(c,m)=>(a(),i("div",{key:m,class:"childTable dynamicColumn m-0 p-2"},[s("h5",ea,g(c.tableName),1),q[c.tableName]?(a(),i("div",ta,[s("div",sa,[y(s("input",{class:"font-12","onUpdate:modelValue":_=>c.description=_,"true-value":"true","false-value":"fasle",placeholder:"Field Name",type:"checkbox"},null,8,la),[[ne,c.description]])]),e[70]||(e[70]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])):v("",!0),s("table",oa,[e[74]||(e[74]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Label"),s("th",null,"Field Type")])],-1)),s("tbody",null,[(a(!0),i(E,null,U(c.columns,(_,u)=>{var d,w,h,C;return a(),i("tr",{key:u},[s("td",null,g(u+1),1),q[c.tableName]?(a(),i("td",na,[y(s("input",{"onUpdate:modelValue":k=>_.label=k,placeholder:"Field Label",class:M(["form-control",{"border-1 border-danger":(d=O.value[c.tableName])==null?void 0:d.includes(u)}]),onBlur:k=>Pe(_)},null,42,aa),[[T,_.label]]),(w=O.value[m])!=null&&w.includes(u)?(a(),i("span",ia,"Label required**")):v("",!0)])):(a(),i("td",ra,g(_.label),1)),q[c.tableName]?(a(),i("td",ua,[s("div",da,[y(s("select",{"onUpdate:modelValue":k=>_.fieldtype=k,class:M(["form-select form-select-sm",{"border-1 border-danger":(h=O.value[c.tableName])==null?void 0:h.includes(u)}])},[e[71]||(e[71]=s("option",{value:""},"Select Type",-1)),(a(),i(E,null,U(je,k=>s("option",{key:k.type,value:k.type},g(k.label),9,ma)),64))],10,ca),[[Se,_.fieldtype]]),s("button",{class:"btn btn-light btn-sm",onClick:k=>Xt(o,n,c.tableName,u)},e[72]||(e[72]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,pa)]),["Select"].includes(_.fieldtype)?(a(),i("div",fa,[e[73]||(e[73]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),y(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":k=>_.options=k,class:"form-control shadow-none mb-1 font-12"},null,8,va),[[T,_.options]]),!_.options||_.options.trim()===""?(a(),i("small",_a," Options are required for this field type. ")):v("",!0)])):v("",!0),(C=O.value[c.tableName])!=null&&C.includes(u)?(a(),i("span",ha,"Type required**")):v("",!0)])):(a(),i("td",ba,g(_.fieldtype),1))])}),128))])]),s("div",ga,[s("button",{class:"btn btn-light btn-sm mx-2",onClick:_=>It(o,n,c.tableName)},g(q[c.tableName]?"Save":"Edit"),9,ya),q[c.tableName]?(a(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:_=>xt(o,n,c.tableName)}," Add More Field ",8,ka)):v("",!0)])]))),128))])]),s("div",null,[s("div",null,[s("button",{class:"btn btn-light addRow mb-3 mt-4",onClick:c=>Jt(o,n)}," Add New Table ",8,wa),(a(!0),i(E,null,U(r.childTables,(c,m)=>{var _;return a(),i("div",{key:`table-${o}-${n}-${m}`,class:"child-table"},[c.newTable?(a(),i("div",Ca,[s("div",Sa,[s("div",null,[s("span",{class:M(c.tableName?"d-none":"text-danger")},"*",2),y(s("input",{"onUpdate:modelValue":u=>c.tableName=u,placeholder:"Table Name",onBlur:u=>Pe(c),class:M(["border-less-input font-14 p-0 inputHeight",{"italic-style":!c.tableName,"fw-medium":c.tableName}])},null,42,Da),[[T,c.tableName]]),(_=le[`${o}-${n}-${m}`])!=null&&_.tableName?(a(),i("div",Fa,g(le[`${o}-${n}-${m}`].tableName),1)):v("",!0),Te.value?(a(),i("div",$a,g(Te.value),1)):v("",!0),s("div",Va,[s("div",Aa,[y(s("input",{class:"font-12","onUpdate:modelValue":u=>c.as_a_block=u,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,Ea),[[ne,c.as_a_block]])]),e[75]||(e[75]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])]),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:u=>Yt(o,n,m)},e[76]||(e[76]=[s("i",{class:"bi bi-trash"},null,-1),J(" Remove Table ")]),8,Ua)]),(a(!0),i(E,null,U(c.columns,(u,d)=>{var w,h,C,k,Q,ge,ye,ke,we,B,ft,vt;return a(),i("div",{key:d,class:"dynamicField"},[s("div",Ta,[s("div",qa,[s("div",null,[s("span",{class:M(u.label?"d-none":"text-danger")},"*",2),y(s("input",{"onUpdate:modelValue":H=>u.label=H,placeholder:"Name the field",onBlur:H=>Pe(u),class:M(["border-less-input font-14 p-0 inputHeight",{"italic-style":!u.label,"fw-medium":u.label,"is-invalid":(C=(h=(w=le[`${o}-${n}-${m}`])==null?void 0:w.columns)==null?void 0:h[d])==null?void 0:C.label}])},null,42,La),[[T,u.label]]),(ge=(Q=(k=le[`${o}-${n}-${m}`])==null?void 0:k.columns)==null?void 0:Q[d])!=null&&ge.label?(a(),i("div",Ma,g(le[`${o}-${n}-${m}`].columns[d].label),1)):v("",!0)]),s("div",Oa,[s("div",Ba,[u.showDescription?y((a(),i("input",{key:0,"onUpdate:modelValue":H=>u.description=H,class:"form-control font-12",placeholder:"Enter field description"},null,8,Ra)),[[T,u.description]]):v("",!0),s("button",{class:"btn btn-sm text-nowrap font-12",onClick:H=>u.showDescription=!u.showDescription},g(u.showDescription?"Hide Description":u.description?"Edit Description":"Add Description"),9,za)]),s("button",{class:"btn btn-sm trash-btn py-0",onClick:H=>Qt(o,n,m,d)},e[77]||(e[77]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Na)])]),y(s("select",{"onUpdate:modelValue":H=>u.fieldtype=H,class:M(["form-select font-13 mb-1",{"is-invalid":(we=(ke=(ye=le[`${o}-${n}-${m}`])==null?void 0:ye.columns)==null?void 0:ke[d])==null?void 0:we.fieldtype}])},[e[78]||(e[78]=s("option",{value:""},"Select Type",-1)),(a(),i(E,null,U(je,H=>s("option",{key:H.type,value:H.type},g(H.label),9,ja)),64))],10,Pa),[[Se,u.fieldtype]]),["Select"].includes(u.fieldtype)?(a(),i("div",Ha,[e[79]||(e[79]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),y(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":H=>u.options=H,class:"form-control shadow-none mb-1 font-12"},null,8,Ja),[[T,u.options]]),!u.options||u.options.trim()===""?(a(),i("small",Wa," Options are required for this field type. ")):v("",!0)])):v("",!0),(vt=(ft=(B=le[`${o}-${n}-${m}`])==null?void 0:B.columns)==null?void 0:ft[d])!=null&&vt.fieldtype?(a(),i("div",Ya,g(le[`${o}-${n}-${m}`].columns[d].fieldtype),1)):v("",!0)])])}),128)),s("button",{class:"btn btn-light btn-sm addField mx-1",onClick:u=>Wt(o,n,m)},e[80]||(e[80]=[s("i",{class:"bi bi-plus"},null,-1),J(" Add Field ")]),8,Qa),s("button",{class:"btn btn-dark btn-sm font-12 mx-1",onClick:u=>Kt(o,n,m)}," Create Table ",8,Za),e[81]||(e[81]=s("hr",null,null,-1))])):v("",!0)])}),128))])]),s("div",Ga,[s("button",{class:"btn btn-light border font-12",onClick:c=>Es(o,n)},e[82]||(e[82]=[s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),J(" Add Section ")]),8,Ka)])]))),128)),o===0?(a(),i("div",Xa)):v("",!0)])]))),128)),s("div",{class:M(["d-flex justify-content-center align-items-center add-block-btn-div py-4  ",{"background-color-white":V(p).length}])},[s("button",{class:"btn btn-light border d-flex align-items-center font-12",onClick:Vs},[e[83]||(e[83]=s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1)),J(" "+g(V(p).length===0?"Add Requestor Block":"Add Approval Block"),1)])],2)],512)])])):v("",!0),D.value===3?(a(),i("div",xa,[e[84]||(e[84]=s("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[s("div",null,[s("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),s("div")],-1)),ee(ol,{blockArr:Oe.value},null,8,["blockArr"])])):v("",!0)])])])])])])]),s("div",Ia,[s("div",ei,[s("div",ti,[e[87]||(e[87]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",si,[y(s("input",{"onUpdate:modelValue":e[27]||(e[27]=l=>Ee.value=l),multiple:!1,placeholder:V(S).query.id,class:"font-11 form-control",searchable:!0},null,8,li),[[T,Ee.value]]),s("div",oi,[s("div",ni,[y(s("input",{class:"font-12","onUpdate:modelValue":e[28]||(e[28]=l=>_e.value=l),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[ne,_e.value]])]),e[85]||(e[85]=s("div",null,[s("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),s("div",{class:"modal-footer"},[e[86]||(e[86]=s("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{type:"button",class:"btn btn-dark",onClick:Ds},"Add Print Format")])])])]),s("div",ai,[s("div",ii,[s("span",ri,g(L.value==0?"Add designation for Requestor":`Approval Settings For
          Level-${L.value}`),1),e[88]||(e[88]=s("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),s("div",ui,[s("div",di,[s("div",ci,[L.value!==0?(a(),i("div",mi,[s("div",null,[s("div",pi,[s("span",fi,"Approver Level "+g(L.value),1)])]),e[90]||(e[90]=s("div",null,[s("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),s("div",vi,[y(s("select",{"onUpdate:modelValue":e[29]||(e[29]=l=>fe.value=l),class:"form-select font-12 mt-1 me-2"},[e[89]||(e[89]=s("option",{disabled:"",value:""},"Select Lower Level",-1)),(a(!0),i(E,null,U(Lt.value,l=>(a(),i("option",{key:l,value:l},g(l===0?"Requester":"Approver Level "+l),9,_i))),128))],512),[[Se,fe.value,void 0,{number:!0}]])])])):v("",!0),L.value!==0?(a(),i("div",hi,[L.value!==0?(a(),i("div",bi,[s("div",null,[y(s("input",{type:"checkbox",id:"ViewOnlyReportee","onUpdate:modelValue":e[30]||(e[30]=l=>be.value=l),class:"me-2 mt-0 form-check-input designationCheckBox"},null,512),[[ne,be.value]]),e[91]||(e[91]=s("label",{for:"ViewOnlyReportee ",class:"SelectallDesignation fw-bold mt-1 form-check-label"},"View Only Reportee",-1))])])):v("",!0)])):v("",!0)])]),s("div",gi,[y(s("input",{"onUpdate:modelValue":e[31]||(e[31]=l=>Fe.value=l),class:"SearchDesignation rounded-2 form-control shadow-none my-1",type:"text",placeholder:"Search Designation"},null,512),[[T,Fe.value]]),Z.value.length?(a(),i("div",yi,[s("div",null,[y(s("input",{type:"checkbox",id:"selectAll","onUpdate:modelValue":e[32]||(e[32]=l=>He.value=l),class:"me-2 mt-0 designationCheckBox form-check-input"},null,512),[[ne,He.value]]),e[92]||(e[92]=s("label",{for:"selectAll",class:"SelectallDesignation fw-bold mx-2 form-check-label"},"Select all",-1))])])):v("",!0),Z.value.length?(a(),i("ul",ki,[(a(!0),i(E,null,U(Mt.value,(l,o)=>(a(),i("li",{key:o,class:"designationList form-check"},[y(s("input",{type:"checkbox",id:`SelectedDisignation_${o}`,"onUpdate:modelValue":e[33]||(e[33]=r=>X.value=r),value:l,class:"designationCheckBox form-check-input mt-0",onChange:vs},null,40,wi),[[ne,X.value]]),s("label",{for:`SelectedDisignation_${o}`,class:"ps-2"},g(l),9,Ci)]))),128))])):(a(),i("div",Si,e[93]||(e[93]=[s("div",{class:"d-flex justify-content-center"},[s("span",null,"No Designations Found")],-1)])))])]),s("div",Di,[s("div",Fi,[ee(yt,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:_s,name:" Add Designations"})])])])]))}},Ei=Ks($i,[["__scopeId","data-v-54a111f9"]]);export{Ei as default};
