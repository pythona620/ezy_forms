import{q as E,d as i,f as $,o as y,c as p,b as t,z as M,A as F,t as g,H as D,l as u,m as d,p as r,k as n}from"./index-DXneRfP_.js";const I={class:"p-1 mt-3"},T={class:"table"},B={class:"form-check form-switch"},N=["checked","onClick"],P={class:"form-check-label mt-1"},J={class:"modal fade",id:"EnableDisable",tabindex:"-1","aria-labelledby":"EnableDisableLabel","aria-hidden":"true"},O={class:"modal-dialog modal-dialog-centered"},R={class:"modal-content"},U={class:"modal-body"},W={__name:"AuthenticationPage",setup(q){const l=i([{title:"Two Factor Authentication",checked:!1},{title:"Send Form as an Attachment Via an E-Mail ",checked:!1},{title:"Welcome E-Mail Configuration",checked:!1}]),c=i(!1),b=i(null),m=i(!1),f=i(""),v=i(!1),w=o=>{b.value=o,m.value=l.value[o].checked,v.value=m.value;const a=m.value===!1?1:0;o===0?f.value=a?"Are you sure you want to enable Two Factor Authentication?":"Are you sure you want to disable Two Factor Authentication?":o===1?f.value=a?"Are you sure you want to enable Send Form As an Attachment Through Mail?":"Are you sure you want to disable Send Form As an Attachment Through Mail?":o===2&&(f.value=a?"Are you sure you want to enable Welcome Mail Configuration?":"Are you sure you want to disable Welcome Mail Configuration?"),new bootstrap.Modal(document.getElementById("EnableDisable")).show()},k=()=>{l.value[b.value].checked=v.value},A=()=>{const o=b.value,a=m.value===!1?1:0;console.log(m.value);const e=a?1:0;l.value[o].checked=!a;const s=o===0?"System Settings":localStorage.getItem("Bu")||"";o===0?u.put(`${d.resource}${r.SystemSettings}/${encodeURIComponent(s)}`,{enable_two_factor_auth:e}).then(()=>{n.success(`Two Factor Authentication ${e===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),S()}).catch(()=>{n.error("Failed to update Two Factor Authentication!")}):o===1?u.put(`${d.resource}${r.wfSettingEzyForms}/${encodeURIComponent(s)}`,{send_form_as_a_attach_through_mail:e}).then(()=>{n.success(`Send Form As an Attachment Through Mail ${e===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),_()}).catch(()=>{n.error("Failed to update Send Form As an Attachment Through Mail!")}):o===2&&(c.value===!0?u.put(`${d.resource}${r.wfSettingEzyForms}/${encodeURIComponent(s)}`,{welcome_mail_to_employee:e}).then(()=>{n.success(`Welcome Mail Configuration ${e===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),_()}).catch(()=>{n.error("Failed to update Welcome Mail Configuration!")}):(n.info("Please Configure Default Mail First!"),l.value[o].checked=!1))},_=()=>{const o=localStorage.getItem("Bu")||"",a={fields:JSON.stringify(["*"]),filters:JSON.stringify([["bu_name","=",o]])};u.get(`${d.resource}${r.wfSettingEzyForms}`,{params:a}).then(e=>{if(e.data.length>0){const s=e.data[0].send_form_as_a_attach_through_mail;l.value[1].checked=s==1;const h=e.data[0].welcome_mail_to_employee;l.value[2].checked=h==1}}).catch(e=>{console.error("Error fetching business unit settings:",e)})},S=()=>{const o="System Settings",a={fields:JSON.stringify(["*"])};u.get(`${d.resource}${r.SystemSettings}/${encodeURIComponent(o)}`,{params:a}).then(e=>{e.data&&(l.value[0].checked=e.data.enable_two_factor_auth==1)}).catch(e=>{console.error("Error fetching system settings:",e)})},C=()=>{const o={fields:JSON.stringify(["default_outgoing","enable_outgoing"]),filters:JSON.stringify([["default_outgoing","=",1],["enable_outgoing","=",1]])};u.get(`${d.resource}${r.Email_Account}`,{params:o}).then(a=>{if(a.data&&a.data.length>0){const e=a.data[0];console.log(e,"response"),e.default_outgoing===1&&e.enable_outgoing===1?c.value=!0:c.value=!1,console.log(typeof c.value,c.value)}else c.value=!1}).catch(a=>{console.error("Error fetching system settings:",a)})};return $(()=>{S(),_(),C()}),(o,a)=>(y(),p("div",I,[a[2]||(a[2]=t("h1",{class:"m-0 font-13 mb-3"},"Settings",-1)),t("table",T,[a[0]||(a[0]=t("thead",null,[t("tr",null,[t("th",null,"S.No"),t("th",null,"Title"),t("th",null,"Actions")])],-1)),t("tbody",null,[(y(!0),p(M,null,F(l.value,(e,s)=>(y(),p("tr",{key:s},[t("td",null,g(s+1),1),t("td",null,g(e.title),1),t("td",null,[t("div",B,[t("input",{class:"form-check-input shadow-none",type:"checkbox",role:"switch",checked:e.checked,onClick:D(h=>w(s),["prevent"])},null,8,N),t("label",P,g(e.checked?"Enabled":"Disabled"),1)])])]))),128))])]),t("div",J,[t("div",O,[t("div",R,[t("div",{class:"modal-header"},[a[1]||(a[1]=t("h5",{class:"modal-title",id:"EnableDisableLabel"},"Confirm Action",-1)),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]),t("div",U,g(f.value),1),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:k},"Close"),t("button",{type:"button",class:"btn btn-dark",onClick:A},"Yes, Proceed")])])])])]))}},L=E(W,[["__scopeId","data-v-abc7df66"]]);export{L as default};
