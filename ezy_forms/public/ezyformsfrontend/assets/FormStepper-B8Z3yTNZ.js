var Qs=Object.defineProperty,Xs=Object.defineProperties;var xs=Object.getOwnPropertyDescriptors;var ze=Object.getOwnPropertySymbols;var gt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var bt=(E,C,$)=>C in E?Qs(E,C,{enumerable:!0,configurable:!0,writable:!0,value:$}):E[C]=$,oe=(E,C)=>{for(var $ in C||(C={}))gt.call(C,$)&&bt(E,$,C[$]);if(ze)for(var $ of ze(C))yt.call(C,$)&&bt(E,$,C[$]);return E},ge=(E,C)=>Xs(E,xs(C));var xe=(E,C)=>{var $={};for(var D in E)gt.call(E,D)&&C.indexOf(D)<0&&($[D]=E[D]);if(E!=null&&ze)for(var D of ze(E))C.indexOf(D)<0&&yt.call(E,D)&&($[D]=E[D]);return $};var Ie=(E,C,$)=>new Promise((D,ke)=>{var ae=H=>{try{f($.next(H))}catch(G){ke(G)}},Ve=H=>{try{f($.throw(H))}catch(G){ke(G)}},f=H=>H.done?D(H.value):Promise.resolve(H.value).then(ae,Ve);f(($=$.apply(E,C)).next())});import{_ as Is,u as eo,L as to,r as b,I as X,e as x,E as so,w as fe,i as oo,W as kt,f as B,g as R,h as I,o as a,c as i,d as s,q as S,a0 as lo,l as N,s as v,C as q,D as U,n as L,t as g,N as no,H as wt,b as le,F as et,k as ao,z as Ne,v as Ct,K as ne,x as w,y as tt,A as Fe,B as A,M as io,a1 as ye,a2 as ro,m as Y,a3 as st,U as uo,a4 as Dt,a5 as co}from"./index-DxID15hf.js";const po="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg",mo={class:""},fo={class:""},vo={class:"d-flex justify-content-between align-items-center CancelNdSave"},_o=["disabled"],ho={class:"form-container p-0 container-fluid mt-1"},bo={class:"row"},go={class:"col-2"},yo={class:"steps-sticky-div"},ko={class:"steps"},wo=["onClick"],Co={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},Do={class:"step-text"},So={class:"font-11"},$o={class:"font-14"},Fo={class:"col-10 formbackground-color"},Vo={class:""},Ao={class:"form-content stepsDiv"},Eo={key:0},qo={class:""},Uo={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},To={class:"container-fluid aboutFields p-0"},Lo={class:"row"},Oo={class:"col-4"},Mo={class:""},Bo={class:"mt-3"},Ro={class:"position-relative"},zo={key:0,class:"font-12 position-absolute PredefinedLabel"},No={key:1,class:"text-danger ErrorMsg ms-2"},Ho={class:"mt-3"},Po={class:""},jo={key:0,class:"text-danger ErrorMsg ms-2"},Jo={class:"mt-3"},Wo={class:""},Yo={for:""},Ko={key:0,class:"text-danger"},Zo={class:"mt-3"},Go={class:""},Qo={for:""},Xo={key:0,class:"text-danger"},xo={class:"mt-3"},Io={class:"typo__label"},el={for:""},tl={key:0,class:"text-danger"},sl={class:"custom-option"},ol=["checked","onChange"],ll={class:"mt-3"},nl={class:""},al={class:"my-2 mb-5"},il={key:0,class:"form-check d-flex align-items-center p-0 pe-3"},rl=["disabled"],ul={key:1,class:"mt-2 position-relative mb-5"},dl=["disabled"],cl={key:0,class:"list-group position-absolute w-100 z-3 formslist"},pl=["onMousedown"],ml={key:1},fl={class:""},vl={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},_l={class:"d-flex gap-2 align-items-center"},hl={class:"requestandAppHeader"},bl={class:"d-flex justify-content-between"},gl={class:"ps-2 pt-2"},yl={class:"d-flex"},kl={key:0,class:"role-container"},wl={key:0,class:"role-text d-flex align-items-center"},Cl={class:"role-label"},Dl={class:"role-names"},Sl=["onClick"],$l=["onClick"],Fl=["onClick"],Vl=["onClick"],Al={class:"pt-0 section_block"},El={class:"d-flex justify-content-between align-items-center"},ql={class:"d-flex flex-column"},Ul=["onUpdate:modelValue","onChange"],Tl={key:0,class:"text-danger font-10"},Ll={class:"d-flex align-items-center"},Ol=["onClick"],Ml={class:"container-fluid"},Bl={class:"d-flex justify-content-between align-items-center"},Rl={class:"rownames"},zl=["onClick"],Nl={class:"col"},Hl={class:"row"},Pl=["onMouseenter"],jl={class:"column_name d-flex align-items-center justify-content-between"},Jl={class:"d-flex flex-column ps-2"},Wl=["onUpdate:modelValue","onChange"],Yl={key:0,class:"text-danger font-10"},Kl={class:"position-absolute top-0 end-0"},Zl=["onClick"],Gl=["onDrop"],Ql=["onMouseenter","onDragstart","onDrop"],Xl=["onDrop"],xl=["onDragstart","onDrop"],Il={class:"d-flex justify-content-between"},en={class:"flex-column d-flex"},tn=["onUpdate:modelValue","onChange"],sn={key:0,class:"text-danger font-10"},on={class:"FieldcopyRemove"},ln=["onClick"],nn=["onClick"],an=["onUpdate:modelValue","onChange"],rn=["value"],un={key:0},dn=["onUpdate:modelValue"],cn={key:0,class:"text-danger font-10"},pn={key:1},mn=["for"],fn=["id","onUpdate:modelValue","onInput","onFocus"],vn={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},_n=["onClick"],hn={class:"d-flex align-items-center justify-content-between"},bn={class:"d-flex align-items-center gap-2"},gn={class:"d-flex align-items-center"},yn=["onUpdate:modelValue"],kn=["onClick"],wn=["onUpdate:modelValue"],Cn={key:3,class:"text-danger font-10"},Dn=["onDrop"],Sn={class:"childtableShow"},$n={class:"mt-2"},Fn={key:0,class:"childTableContainer"},Vn={key:0,class:"font-13"},An={key:1,class:"d-flex align-items-center gap-2"},En={class:"d-flex align-items-center"},qn=["onUpdate:modelValue"],Un=["onClick"],Tn={key:2,class:"table table-bordered rounded-table"},Ln=["onDrop"],On=["draggable","onDragstart"],Mn={key:0},Bn=["onUpdate:modelValue"],Rn={key:0,class:"font-11 text-danger"},zn={key:1},Nn={key:2},Hn={class:"d-flex gap-1"},Pn=["onUpdate:modelValue"],jn=["value"],Jn={class:"d-flex"},Wn={class:"d-flex align-items-center gap-2"},Yn={class:"d-flex align-items-center"},Kn=["onUpdate:modelValue"],Zn=["onClick"],Gn={key:0},Qn=["onUpdate:modelValue"],Xn={key:0,class:"text-danger font-10"},xn={key:1,class:"font-11 text-danger"},In={key:3},ea={key:3,class:"mb-2 mt-3"},ta=["onClick"],sa=["onClick"],oa=["onDrop"],la=["onDrop"],na={class:"d-flex justify-content-center align-items-center my-2"},aa=["onClick"],ia={class:"font-13"},ra={key:0,class:"d-flex align-items-center gap-2"},ua={class:"d-flex align-items-center"},da=["onUpdate:modelValue"],ca=["onClick"],pa={class:"table table-bordered rounded-table"},ma={key:0},fa=["onUpdate:modelValue","onBlur"],va={key:0,class:"font-11 text-danger"},_a={key:1},ha={key:2},ba={class:"d-flex gap-1"},ga=["onUpdate:modelValue"],ya=["value"],ka=["onClick"],wa={key:0},Ca=["onUpdate:modelValue"],Da={key:0,class:"text-danger font-10"},Sa={key:1,class:"font-11 text-danger"},$a={key:3},Fa={class:"mb-2"},Va=["onClick"],Aa=["onClick"],Ea=["onClick"],qa={key:0},Ua={class:"d-flex justify-content-between align-items-center mt-1 mb-2"},Ta=["onUpdate:modelValue","onBlur"],La={key:0,class:"text-danger font-12"},Oa={key:1,class:"text-danger font-12"},Ma={class:"d-flex align-items-center gap-2"},Ba={class:"d-flex align-items-center"},Ra=["onUpdate:modelValue"],za=["onClick"],Na=["onClick"],Ha={class:"px-1 field-border"},Pa={class:"d-flex justify-content-between"},ja=["onUpdate:modelValue","onBlur"],Ja={key:0,class:"text-danger font-12"},Wa={class:"d-flex align-items-center"},Ya={class:"d-flex my-1"},Ka=["onUpdate:modelValue"],Za=["onClick"],Ga=["onClick"],Qa=["onUpdate:modelValue"],Xa=["value"],xa={key:0},Ia=["onUpdate:modelValue"],ei={key:0,class:"text-danger font-10"},ti={key:1,class:"text-danger font-12"},si=["onClick"],oi=["onClick"],li={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},ni=["onClick"],ai={key:0,class:"m-2"},ii={key:2},ri={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},ui={class:"modal-dialog modal-dialog-centered"},di={class:"modal-content"},ci={class:"modal-body"},pi=["placeholder"],mi={class:"d-flex align-items-center gap-2"},fi={class:"d-flex align-items-center py-2"},vi={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},_i={class:"offcanvas-header add_designationHeader"},hi={id:"offcanvasRightLabel",class:"font-14"},bi={class:"offcanvas-body p-0"},gi={class:""},yi={class:""},ki={key:0,class:"p-3 approval-border-bottom"},wi={key:0,class:"p-2"},Ci={class:"p-2"},Di=["value"],Si={class:"p-3 listofdesignations"},$i={key:0,class:"form-check ps-1 mt-3"},Fi={key:1,class:"list-unstyled designation-scroll"},Vi=["id","value"],Ai=["for"],Ei={key:2},qi={class:"offcanvas-footer"},Ui={class:"text-end p-3"},ve="Select All",Ti={__name:"FormStepper",setup(E){const C=eo(),$=to(),D=b(1),ke=b([]);b([]);const ae=b([]),Ve=b([]);X([]);let f=X([]),H=X([]);const G=b([]),ee=b([]),He=b([]),re=b(""),Q=b(""),P=b("");let j=X([]);const Ae=b("");b(!1),b(!1),b(!1);const _e=b(""),St=b([]),$t=b([]),ie=X({}),z=b([]),Ee=b([]),qe=b(!1);let ot=null;const Ft=b("");let V=b("");const he=x(()=>so);b(!1);const Ue=X([]),K=b({routepath:C.query.routepath,business_unit:C.query.business_unit,formId:C.query.id}),Te=b(""),be=b(!1),lt=x({get(){return m.value.form_name||C.query.form_name||""},set(t){m.value.form_name=t}}),m=b({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${he.value.value||K.value.business_unit||C.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:"",is_linked:0,is_linked_form:"",is_predefined_doctype:C.query.id?1:0});fe(()=>C.query.form_name,t=>{t&&(m.value.form_name=t,m.value.form_short_name=t)},{immediate:!0});const Vt=x(()=>m.value);b(""),b(!1),fe(he,t=>{t&&t.value&&(m.value.business_unit=t.value)},{immediate:!0});function At(t){if(V==null||V==="new")return!1;const e=se(t).roles;if(t===0)return e.length===0;const o=se(t-1).roles;return o.length>0&&o[0]!==null&&o[0]!==""&&e.length===0}fe(()=>m.value.form_name,t=>{m.value.form_name=t.trim()}),fe(()=>m.value.form_short_name,t=>{m.value.form_short_name=t.trim()}),fe(()=>m.value.series,t=>{m.value.series=t.trim()});const Le=b(null),nt=(t,e,o,l,r,n)=>{Le.value={blockIndex:e,sectionIndex:o,rowIndex:l,columnIndex:r,fieldIndex:n}},ce=(t,e,o,l,r,n)=>{if(!Le.value)return;const{blockIndex:d,sectionIndex:c,rowIndex:_,columnIndex:u,fieldIndex:p}=Le.value,y=f[d].sections[c].rows[_].columns[u].fields,J=f[e].sections[o].rows[l].columns[r].fields;if(d===e&&c===o&&_===l&&u===r&&p===n)return;const h=y.splice(p,1)[0];y===J&&p<n&&n--,J.splice(n,0,h),Le.value=null},Oe=b(""),Et=t=>{const e=[["module","in",["User Forms"]],["istable","=",1]];t!=null&&t.trim()&&e.push(["name","like",`%${t}%`]);const o={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};return B.get(R.resource+I.doctypesList,{params:o}).then(l=>l.data||[]).catch(l=>(console.error("Error fetching doctype list:",l),[]))},Pe=b(null),je=t=>Ie(this,null,function*(){if(t.tableName){const e=t.tableName.trim(),o=yield Et(e);Pe.value=o.find(l=>l.name.toLowerCase()===e.toLowerCase()),Pe.value&&(Oe.value="Table already exists")}else Oe.value="";t.label&&(t.fieldname=Qt(t.label))});function qt(){const t=m.value.is_linked_form;if(!t){Ee.value=[];return}clearTimeout(ot),ot=setTimeout(()=>{const e=[["business_unit","like",`%${he.value.value}%`],["name","like",`%${t}%`]],o={fields:JSON.stringify(["name"]),limit_page_length:10,limit_start:0,filters:JSON.stringify(e),order_by:"`tabEzy Form Definitions`.`enable` DESC, `tabEzy Form Definitions`.`creation` DESC"};B.get(`${R.resource}${I.EzyFormDefinitions}`,{params:o}).then(l=>{Ee.value=l.data||[]}).catch(l=>{console.error("Error fetching form definitions:",l)})},300)}function Ut(t){m.value.is_linked_form=t,qe.value=!1}function Tt(){setTimeout(()=>{qe.value=!1},200)}X({query:"",key:""});function ue(t,e,o,l,r){return`${t}-${e}-${o}-${l}-${r}`}X({});const we=X({}),Je=X({});function Lt(t){Je[t]=!0}function Ot(t,e,o,l,r,n){const d=ue(e,o,l,r,n),c=[["istable","=",0]];t!=null&&t.trim()&&c.push(["name","like",`%${t}%`]);const _={fields:JSON.stringify(["name"]),filters:JSON.stringify(c),limit_page_length:"10"};B.get(R.resource+I.doctypesList,{params:_}).then(u=>{we[d]=u.data||[]}).catch(u=>{console.error("Error fetching doctype list:",u),we[d]=[]})}function Mt(t,e,o,l,r,n){f[t].sections[e].rows[o].columns[l].fields[r].options=n;const d=ue(t,e,o,l,r);we[d]=[],Je[d]=!1}const Bt=x(()=>f!=null&&f.length?P.value===1?[0]:Array.from({length:P.value},(t,e)=>e).filter(t=>t<P.value):[]),Rt=x(()=>G.value.filter(t=>t.toLowerCase().includes(Ae.value.toLowerCase())).sort((t,e)=>{const o=ee.value.includes(t),l=ee.value.includes(e);return o===l?0:o?-1:1})),de=b(null),pe=b(null),zt=(t,e,o,l,r)=>{de.value={blockIndex:t,sectionIndex:e,rowIndex:o,columnIndex:l,fieldIndex:r}},Nt=()=>{de.value=null},Ht=(t,e,o,l,r)=>de.value&&de.value.blockIndex===t&&de.value.sectionIndex===e&&de.value.rowIndex===o&&de.value.columnIndex===l&&de.value.fieldIndex===r,Pt=(t,e,o,l)=>{pe.value={blockIndex:t,sectionIndex:e,rowIndex:o,columnIndex:l}},jt=()=>{pe.value=null},Jt=(t,e,o,l)=>pe.value&&pe.value.blockIndex===t&&pe.value.sectionIndex===e&&pe.value.rowIndex===o&&pe.value.columnIndex===l,at=b([{form_json:""}]);oo(()=>{As(),V.value=C.params.paramid||"new",V.value!=null&&V.value!=null&&V.value!="new"&&(pt(),Ge());let t=localStorage.getItem("Bu");if(m.value.business_unit=t,C.query.preId==="PreDefine"){const e=localStorage.getItem("form_json");if(e){at.value[0].form_json=e;const o=at.value[0],l=JSON.parse(o.form_json),r=kt(l.fields);z.value=l.child_table_fields,r.forEach(n=>{f.push(n)})}}});const me=b(null),O=b({}),it=b(null),Wt=t=>{me.value=t},Yt=()=>{me.value=null},Kt=t=>{t.preventDefault()},Zt=(t,e)=>{const o=t.target.closest("tr");if(!o)return;const l=Array.from(o.parentNode.children).indexOf(o);if(l!==me.value){const r=e[me.value];e.splice(me.value,1),e.splice(l,0,r),me.value=l}},Gt=b([]);function Qt(t){return t.toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]/g,"")}const We=t=>{if(["Select","Table MultiSelect","Check","Small Text"].includes(t.fieldtype)&&t.options){const e=t.options.split(`
`).map(r=>r.trim()).filter(r=>r),o=[],l=new Set;return e.forEach(r=>{const n=r.toLowerCase();l.has(n)||(l.add(n),o.push(r))}),`
`+o.join(`
`)}else if(["Link","Table"].includes(t.fieldtype)&&t.options)return t.options.trim();return t.options},Xt=(t,e)=>{const o=f[t].sections[e];o.childTables||(o.childTables=[]);const l=o.childTables.length;o.childTables.push({label:"",fieldname:"",fieldtype:"Table",idx:l,reqd:!1,as_a_block:"",description:"false",columns:[oe({label:"",fieldname:"",fieldtype:"",idx:0,description:"",reqd:!1},Ue.fieldtype==="Select"&&Ue.options?{options:Ue.options?`
${Ue.options}`:`
`}:{})],newTable:!0})},xt=(t,e,o)=>{const l=f[t].sections[e].childTables[o];l.columns||(l.columns=[]),l.columns.push(oe({label:"",fieldname:"",fieldtype:"",idx:l.columns.length,description:"",reqd:!1},l.columns.fieldtype==="Select"&&l.columns.options?{options:l.columns.options?`
${l.columns.options}`:`
`}:{}))},It=(t,e,o)=>{f[t].sections[e].childTables.splice(o,1)},es=(t,e,o,l)=>{f[t].sections[e].childTables[o].columns.splice(l,1)},ts=(t,e,o)=>{var d;const l=f[t].sections[e].childTables[o],r={tableName:!1,columns:[]};let n=!1;return(d=l.tableName)!=null&&d.trim()||(r.tableName="Table name is required.",n=!0),l.columns.forEach((c,_)=>{var p,y;const u={};(p=c.label)!=null&&p.trim()||(u.label="Field Label is required",n=!0),(y=c.fieldtype)!=null&&y.trim()||(u.fieldtype="Please select field type",n=!0),r.columns[_]=u}),ie[`${t}-${e}-${o}`]=r,n},ss=(t,e,o)=>{var r,n;const l=(n=(r=f[t])==null?void 0:r.sections)==null?void 0:n[e];l&&!Array.isArray(l[o])&&(l[o]=[])},rt=t=>t?t.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""):"",os=(t,e,o)=>{if(ts(t,e,o)){Y.error("Please fix validation errors before creating the table",{transition:"zoom"});return}if(Pe.value){Y.error("Table already exists",{transition:"zoom"});return}const r=f[t].sections[e].childTables[o],n=f[t].sections[e];r.columns=r.columns.map((c,_)=>ge(oe({},c),{idx:_,options:We(c)})),r.newTable=!1;const d={form_short_name:rt(r.tableName),fields:r.columns,idx:r.idx,as_a_block:r.as_a_block?r.as_a_block:"false"};B.post(R.childtable,d).then(c=>{var _,u,p;if(c){ss(t,e,"afterCreated"),n.afterCreated[o]=r,f[t].sections[e].childTables[o]=[],Y.success("Table created successfully!",{autoClose:500,transition:"zoom"});const y=(p=(u=(_=c.message)==null?void 0:_[0])==null?void 0:u[0])==null?void 0:p.child_doc;f[t].sections[e].childTables[o]=y}}).catch(c=>{console.error("Error creating table:",c)})},ls=(t,e,o,l)=>{const n=f[t].sections[e].afterCreated.find(c=>c.tableName===o);if(!n)return;n.columns.splice(l,1),n.columns.forEach((c,_)=>{c.idx=_+1});const d=O.value[o];d&&(O.value[o]=d.filter(c=>c!==l).map(c=>c>l?c-1:c))},ns=(t,e,o)=>{const r=f[t].sections[e].afterCreated.find(d=>d.tableName===o);if(!r)return;const n=r.columns.length;r.columns.push({fieldname:"",fieldtype:"",idx:n+1,label:"",value:"",isNew:!0,description:""})},ut=b([]),as=(t,e,o)=>{const r=f[t].sections[e].afterCreated.find(n=>n.tableName===o);if(r){if(T[o]){O.value[o]=[];let n=!0;if(r.columns.forEach((_,u)=>{(!_.label||!_.fieldtype)&&(O.value[o].push(u),n=!1)}),!n)return;const d=r.columns.map((y,p)=>{var J=y,{isNew:_}=J,u=xe(J,["isNew"]);return ge(oe({},u),{idx:p+1,options:We(u)})}),c={form_short_name:rt(o),fields:d,as_a_block:r.description};B.post(R.childtable,c).then(_=>{ut.value=_.data,Y.success("Fields updated successfully!",{autoClose:500})}).catch(_=>{console.error("❌ Saving fields failed:",_)})}T[o]=!T[o]}},T=X({}),is=t=>{z.value[t]||(z.value[t]=[]);const e=z.value[t].length+1;z.value[t].push({fieldname:"",fieldtype:"",idx:e,label:"",value:"",isNew:!0,description:"",options:z.value[t].options?`
${z.value[t].options}`:""})},rs=(t,e)=>{z.value[t]&&z.value[t].splice(e,1)},us=(t,e)=>{if(T[t]){O.value[t]=[];let o=!0;if(z.value[t].forEach((n,d)=>{(!n.label||!n.fieldtype)&&(O.value[t].push(d),o=!1)}),!o)return;let l=z.value[t].map((_,c)=>{var u=_,{isNew:n}=u,d=xe(u,["isNew"]);return ge(oe({},d),{idx:c,options:We(d)})});const r={form_short_name:t,fields:l,as_a_block:e};B.post(R.childtable,r).then(n=>{Y.success("Fields updated successfully!",{autoClose:500},{transition:"zoom"}),ut.value=n.data}).catch(n=>{console.error("❌ Saving fields failed:",n)})}T[t]=!T[t],it.value=T[t]?t:null};fe(z,t=>{Object.keys(t).forEach(e=>{t[e].forEach((o,l)=>{var r;o.label&&o.fieldtype&&(O.value[e]=(r=O.value[e])==null?void 0:r.filter(n=>n!==l))})})},{deep:!0});const ds=b([{id:1,label:"About Form",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Fields & Workflow",stepno:"Step 2",icon:"bi bi-question-circle"},{id:3,label:"Print Format",stepno:"Step 3",icon:"ri-checkbox-circle-line"}]),Ye=[{label:"Text",type:"Data"},{label:"Select",type:"Select"},{label:"Attach",type:"Attach"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Number",type:"Int"},{label:"TextArea",type:"Text"}],cs=[{label:"Text",type:"Data"},{label:"Time",type:"Time"},{label:"Text Area",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Data"},{label:"Check",type:"Check"},{label:"Number",type:"Int"},{label:"Select",type:"Select"},{label:"Multi Select",type:"Small Text"},{label:"Link",type:"Link"}],ps=x(()=>[ve,...ae.value]),ms=x(()=>{const t=m.value.accessible_departments;return t.includes(ve)?"All Selected":t.length>1?`${t[0]}.. +${t.length-1} more selected`:t.join(", ")}),fs=t=>t===ve?m.value.accessible_departments.length===ae.value.length:m.value.accessible_departments.includes(t),vs=(t,e)=>{t===ve?e.target.checked?m.value.accessible_departments=[...ae.value]:m.value.accessible_departments=[]:(e.target.checked?m.value.accessible_departments.push(t):m.value.accessible_departments=m.value.accessible_departments.filter(o=>o!==t),m.value.accessible_departments.length===ae.value.length?m.value.accessible_departments=[...ae.value]:m.value.accessible_departments=m.value.accessible_departments.filter(o=>o!==ve))},_s=t=>{t===ve&&(m.value.accessible_departments=[...ae.value])},hs=t=>{t===ve&&(m.value.accessible_departments=[])},Ke=x({get(){return G.value.length>0&&G.value.every(t=>ee.value.includes(t))},set(t){t?ee.value=[...G.value]:ee.value=[]}});function bs(){!Ke.value&&ee.value.length}const te=b("");function gs(){const t=f[P.value];if(!t||!t.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:P.value==0?"requestor":"approver",roles:ee.value,fields:t.sections.flatMap(st),idx:P.value};P.value!==0&&(e.view_only_reportee=te.value==="ViewOnlyReportee"?1:0,e.all_approvals_required=te.value==="all_approvals_required"?1:0,e.requester_as_a_approver=te.value==="requester_as_a_approver"?1:0,e.on_rejection=_e.value?_e.value:0);const o=j.findIndex(l=>l.idx===e.idx);o!==-1?j[o]=e:j.push(e),Cs()}function se(t){return j.find(e=>e.idx===t)||{roles:[]}}function ys(t){const e=se(t),o=e.roles||[];ee.value=[...o],_e.value=e.on_rejection,e.view_only_reportee===1?te.value="ViewOnlyReportee":e.all_approvals_required===1?te.value="all_approvals_required":e.requester_as_a_approver===1?te.value="requester_as_a_approver":te.value=""}const Ze=t=>{Ae.value="",te.value="",_e.value="",m.value.accessible_departments.length&&ws(m.value.accessible_departments),P.value=t,ys(t)},ks=b([]);function ws(t){Array.isArray(t)&&t.length>0,B.get(R.resource+I.WFRoleMatrix+`/${m.value.business_unit}`).then(e=>{e.data&&(ks.value=e.data.users,G.value=[...new Set(e.data.users.map(o=>o.role_name))])}).catch(e=>{console.error("Error fetching designations data:",e)})}function Cs(){B.post(R.add_roles_WF,{workflow_setup:j,doctype:m.value.form_short_name,business_unit:m.value.business_unit}).then(t=>{console.log(t),P.value==0?Y.success("Requestor Added",{autoClose:1e3,transition:"zoom"}):Y.success(`Approver-${P.value} Added`,{autoClose:1e3,transition:"zoom"})})}function Ds(){$.push({path:K.value.routepath||localStorage.getItem("routepath")}),localStorage.removeItem("form_json")}function Ss(){m.value.form_name="",m.value.form_short_name="",m.value.owner_of_the_form="",m.value.business_unit="",m.value.form_category="",m.value.accessible_departments=[]}const $s=t=>{if(Be.value){Y.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}t<D.value?ct():t>D.value&&dt()},dt=()=>{if(Be.value){Y.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}D.value<3&&(D.value+=1,D.value===3&&(Re.value=f))},ct=()=>{D.value>1&&(D.value-=1)},Fs=b([]);function pt(){B.get(R.resource+I.EzyFormDefinitions+`/${V.value}`).then(t=>{var o;let e=t==null?void 0:t.data;if(e){$.push({query:{id:e.name}}),e.accessible_departments&&(e.accessible_departments=e.accessible_departments.split(",")),m.value=ge(oe(oe({},m.value),e),{owner_of_the_form:e.owner_of_the_form||m.value.owner_of_the_form||""});const l=JSON.parse((o=t.data)==null?void 0:o.form_json);St.value=l.workflow,Ft.value=l.fields.filter(n=>n.fieldtype==="Table"),Fs.value=l.fields.filter(n=>n.fieldtype==="Table"),be.value=t.data.is_landscape;let r=kt(JSON.parse(e==null?void 0:e.form_json).fields);z.value=JSON.parse(t.data.form_json).child_table_fields,Gt.value=[],$t.value=[],r.forEach((n,d)=>{f.push(n)}),JSON.parse(e==null?void 0:e.form_json).workflow.forEach((n,d)=>{j.push(n)})}}).catch(t=>{console.error("Error fetching  data:",t)})}function Vs(){const t={};Te.value&&(t.print_format=Te.value),be.value!==void 0&&be.value!==null&&(t.is_landscape=be.value),B.put(R.resource+I.EzyFormDefinitions+`/${C.query.id}`,t).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),Y.success("Print Format Added Successfully",{autoClose:1e3,transition:"zoom"})}).catch(e=>{console.error("Error fetching  data:",e)})}function As(){const t={fields:JSON.stringify(["*"]),limit_page_length:"none"};B.get(R.resource+I.departments,{params:t}).then(e=>{var o;(o=e==null?void 0:e.data)!=null&&o.length&&(Ve.value=e.data.map(l=>l.name),ae.value=e.data.map(l=>l.name))}).catch(e=>{console.error("Error fetching department data:",e)})}fe(()=>m.value.owner_of_the_form,t=>{t&&Ge(t)});function Ge(t){t&&typeof t=="string"&&t.trim()!==""&&Es(t)}function Es(t){B.get(R.resource+I.departments+`/${t}`).then(e=>{var o;(o=e==null?void 0:e.data)!=null&&o.ezy_departments_items&&(ke.value=e.data.ezy_departments_items.map(l=>l.category))}).catch(e=>{console.error("Error fetching categories data:",e)})}function mt(t){let e=co(f);const o=ge(oe({},m.value),{fields:e,doctype:I.EzyFormDefinitions,workflow_setup:j,form_status:t==="save"?"Created":"Draft"});o.accessible_departments=o.accessible_departments.toString(),console.log(o,"---data obj"),B.post(R.savedata,o).then(l=>{if(l&&l.message&&l.message.message){let r=localStorage.getItem("preName");if(r){let n={installed:"Yes"};B.put(`${R.resource}${I.preDefinedForm}/${r}`,n).then(d=>{console.log(d),localStorage.removeItem("preName")}).catch(d=>{console.error("Error fetching ezyForms data:",d)})}$.push({params:{paramid:l.message.message},query:{id:l.message.message}}),V.value=l.message.message,V&&V!=="new"&&(f.splice(0,f.length),pt()),j.length<f.length?Y.info("Add Workflow",{autoClose:2e3,transition:"zoom"}):ft.value===!0&&Y.success("Form Created Successfully!",{autoClose:2e3,transition:"zoom",onClose:()=>{let n=localStorage.getItem("routepath");t==="save"?$.push({path:n}):t==="Draft"&&$.push({path:n})}})}else console.error("Invalid response structure:",l)}).catch(l=>{console.error("Error saving form data:",l)})}const Me=b(""),qs=()=>{var o,l;const t=f.length,e={label:t===0?"requestor":`approver-${t}`,parent:`${(o=he.value)==null?void 0:o.value}-${(l=m.value)==null?void 0:l.form_short_name}`,sections:[{label:"",parent:`${he.value.value}-${m.value.form_short_name}`,childTables:[],afterCreated:{},rows:t===0?[{label:`row_0_0_${t}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${t}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${t}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]}]}]}]};f.push(e),uo(()=>{Me.value&&Me.value.scrollTo({top:Me.value.scrollHeight,behavior:"smooth"})})},ft=b(!1),Us=t=>{let e=f[t];e.parent&&H.push(e),j.length>t&&j[t].roles&&[...j[t].roles],f.splice(t,1),j.length>t&&j.splice(t,1)},Ts=(t,e)=>{const o={label:"",parent:`${he.value.value}-${m.value.form_short_name}`,rows:[{label:`row_0_${e}_${t}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]};f[t].sections.splice(e+1,0,o)},Ls=(t,e)=>{let o=f[t].sections[e];o.parent&&H.push(o),f[t].sections.splice(e,1)},Os=(t,e,o)=>{f[t].sections[e].rows[o].columns.push({label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]})},Ms=(t,e,o,l)=>{const n=f[t].sections[e].rows[o].columns,d=n[l];d.parent&&H.push(d),n.length===1?f[t].sections[e].rows.splice(o,1):n.splice(l,1)},Bs=(t,e,o,l)=>{f[t].sections[e].rows[o].columns[l].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},Rs=(t,e,o,l,r)=>{let n=f[t].sections[e].rows[o].columns[l].fields[r];n.parent&&H.push(n),f[t].sections[e].rows[o].columns[l].fields.splice(r,1)},zs=(t,e,o,l,r)=>{const n=f[t].sections[e].rows[o].columns[l].fields[r],d=oe({},n);d.name=`${n.name} Name the field`,f[t].sections[e].rows[o].columns[l].fields.splice(r+1,0,d)},Ns=(t,e,o,l,r)=>{const n=Dt(f);f.splice(0,f.length,...n);let d=f[t].sections[e].rows[o].columns[l].fields[r].fieldtype;(d!=="Select"||d!=="radio"||d!=="multiselect")&&(f[t].sections[e].rows[o].columns[l].fields[r].options="")},Hs=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus"].map(t=>t.toLowerCase().trim()),Ps=["Approver","Approved on","Approved By"].map(t=>t.toLowerCase().trim());function js(t){return Hs.includes(t==null?void 0:t.trim().toLowerCase())}function Js(t){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(t)||t.includes('"')||t.includes("'")}function Ws(t){return t.flatMap(e=>{var o;return[(o=e.label)==null?void 0:o.trim().toLowerCase(),...e.sections.flatMap(l=>{var r;return[(r=l.label)==null?void 0:r.trim().toLowerCase(),...l.rows.flatMap(n=>n.columns.flatMap(d=>{var c;return[(c=d.label)==null?void 0:c.trim().toLowerCase(),...d.fields.map(_=>{var u;return(u=_.label)==null?void 0:u.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!Ps.includes(e))}function Qe(t,e,o,l,r){const d=Ws(f).filter((u,p,y)=>y.indexOf(u)!==p),c=Dt(f);f.splice(0,f.length,...c);function _(u,p){js(u)?p.errorMsg="Entered label is restricted":Js(u)?p.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:p.errorMsg=d.includes(u.trim().toLowerCase())?"Duplicate Label Name":""}r!==void 0&&_(f[t].sections[e].rows[o].columns[l].fields[r].label,f[t].sections[e].rows[o].columns[l].fields[r]),r===void 0&&l!==void 0&&_(f[t].sections[e].rows[o].columns[l].label,f[t].sections[e].rows[o].columns[l]),l===void 0&&r===void 0&&_(f[t].sections[e].label,f[t].sections[e])}const Xe=x(()=>{function t(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(t):Object.values(e).some(t)}return t(f)}),Be=x(()=>re.value.length>0||Q.value.length>0||!m.value.form_category||!m.value.owner_of_the_form||m.value.accessible_departments.length===0),Ys=x(()=>f.some(t=>t.sections.some(e=>e.rows.some(o=>o.columns.some(l=>l.fields.some(r=>r.label&&r.fieldtype))))));function vt(t,e){let o=t.target.value.trim();if(!o){e==="form_name"?re.value="Input cannot be empty or only spaces":e==="form_short_name"&&(Q.value="Input cannot be empty or only spaces");return}if(/^\d/.test(o)){e==="form_short_name"&&(Q.value="First character must be a letter");return}else Q.value="";if(e==="form_short_name"&&/[^a-zA-Z ]/.test(o)){Q.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(o)){e==="form_name"?re.value="Special characters are not allowed":e==="form_short_name"&&(Q.value="Special characters are not allowed");return}else e==="form_name"?re.value="":e==="form_short_name"&&(Q.value="");const l=[[e,"=",`${o}`],["business_unit","like",`%${m.value.business_unit}%`]],r={fields:JSON.stringify(["form_name","form_short_name"]),filters:JSON.stringify(l)};B.get(`${R.resource}${I.EzyFormDefinitions}`,{params:r}).then(n=>{He.value=n.data,e==="form_name"?re.value=o&&He.value.some(d=>d.form_name&&d.form_name.replace(/\s+/g,"").toLowerCase()===o.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(Q.value=o&&He.value.some(d=>d.form_short_name&&d.form_short_name.replace(/\s+/g,"").toLowerCase()===o.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(n=>{console.error("Error fetching ezyForms data:",n),e==="form_name"?re.value="":e==="form_short_name"&&(Q.value="")})}const Ks=t=>t===0?"1st row":t===1?"2nd row":t===2?"3rd row":`${t+1}th row`,Re=b([]),Zs=()=>{f.length&&(Re.value=f,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function Gs(){B.post(R.delete_form_items,{deleted_fields:H.flatMap(st),doctype:V}).then(t=>{var e;(e=t==null?void 0:t.message)!=null&&e.success&&mt()})}function _t(t){return Ie(this,null,function*(){if(Xe.value){Y.error("Please fix the errors before proceeding.");return}ft.value=!0;let e=H.flatMap(st);V!=null&&V!=null&&V!="new"&&e.length?Gs():mt(t)})}return(t,e)=>(a(),i("div",null,[s("div",mo,[s("div",fo,[s("div",vo,[s("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=o=>Ds())},e[31]||(e[31]=[s("button",{class:"btn font-13 ms-3"},[s("i",{class:"bi bi-arrow-left"}),s("span",{class:"ms-2"},"Back")],-1)])),s("div",null,[D.value===2&&S(f).length&&!t.$route.query.id?(a(),i("button",{key:0,disabled:Xe.value||Be.value,style:lo({cursor:Xe.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=o=>_t("Draft"))},e[32]||(e[32]=[s("i",{class:"bi bi-bookmark-check-fill"},null,-1),N(" Save As Draft ")]),12,_o)):v("",!0)])]),s("div",ho,[s("div",bo,[s("div",go,[s("div",yo,[s("ul",ko,[(a(!0),i(q,null,U(ds.value,o=>(a(),i("li",{key:o.id,class:L({active:D.value===o.id,completed:D.value>o.id})},[s("div",{class:L(["d-flex gap-3 align-items-center",{"not-allowed":Be.value&&D.value+1===o.id}]),onClick:l=>$s(o.id)},[D.value>o.id?(a(),i("i",Co)):(a(),i("i",{key:1,class:L(o.icon)},null,2)),s("div",Do,[s("span",So,g(o.stepno),1),e[33]||(e[33]=s("br",null,null,-1)),s("span",$o,g(o.label),1)])],10,wo)],2))),128))])])]),s("div",Fo,[s("div",Vo,[s("div",Ao,[D.value===1?(a(),i("div",Eo,[s("div",qo,[s("div",Uo,[e[34]||(e[34]=s("div",null,null,-1)),e[35]||(e[35]=s("h1",{class:"font-14 fw-bold m-0"},"About Form",-1)),s("div",null,[t.$route.query.id?v("",!0):(a(),i("button",{key:0,class:"btn btn-light font-12 mx-2",type:"button",onClick:Ss},"Clear Form")),D.value<3?(a(),no(wt,{key:1,class:"btn btn-dark bg-dark text-white fw-bold font-13",name:"Next",onClick:dt})):v("",!0)])])]),s("div",To,[s("div",Lo,[e[45]||(e[45]=s("div",{class:"col-4"},null,-1)),s("div",Oo,[s("div",Mo,[s("div",Bo,[s("div",Ro,[S(C).query.preId?(a(),i("span",zo,e[36]||(e[36]=[N("Predefined"),s("i",{class:"bi bi-check2-circle"},null,-1)]))):v("",!0),le(et,{disabled:K.value.formId&&K.value.formId.length>0||S(C).query.form_name,labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Untitled Form",onChange:e[2]||(e[2]=o=>vt(o,"form_name")),modelValue:lt.value,"onUpdate:modelValue":e[3]||(e[3]=o=>lt.value=o)},null,8,["disabled","modelValue"]),re.value?(a(),i("span",No,g(re.value),1)):v("",!0)])]),s("div",Ho,[s("div",Po,[le(et,{disabled:K.value.formId&&K.value.formId.length>0||S(C).query.form_name,labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Untitled Form",onChange:e[4]||(e[4]=o=>vt(o,"form_short_name")),modelValue:m.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=o=>m.value.form_short_name=o)},null,8,["disabled","modelValue"]),Q.value?(a(),i("span",jo,g(Q.value),1)):v("",!0)]),s("div",null,[le(et,{disabled:K.value.formId&&K.value.formId.length>0,labeltext:"Form Naming series",class:"formHeight mt-2",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Naming series",modelValue:m.value.series,"onUpdate:modelValue":e[6]||(e[6]=o=>m.value.series=o)},null,8,["disabled","modelValue"]),e[37]||(e[37]=ao('<small class="text-muted" style="font-size:12px;" data-v-10b2be34> Note : Enter <code data-v-10b2be34>YY-YY</code>, <code data-v-10b2be34>YYYY</code>, or <code data-v-10b2be34>ABC</code>. The system will default to the format <code data-v-10b2be34> 24-25-0001</code>, <code data-v-10b2be34> 2025-0001</code>, or <code data-v-10b2be34> ABC-0001</code> respectively. </small>',1))])]),s("div",Jo,[s("div",Wo,[s("label",Yo,[e[38]||(e[38]=N("Owner Of The Form ")),m.value.owner_of_the_form?v("",!0):(a(),i("span",Ko,"*"))]),le(S(Ne),{disabled:K.value.formId&&K.value.formId.length>0,options:Ve.value,onChange:Ge,modelValue:m.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=o=>m.value.owner_of_the_form=o),placeholder:"Select Department",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["disabled","options","modelValue"])])]),s("div",Zo,[s("div",Go,[s("label",Qo,[e[39]||(e[39]=N("Form Cateogry ")),m.value.form_category?v("",!0):(a(),i("span",Xo,"*"))]),le(S(Ne),{disabled:K.value.formId&&K.value.formId.length>0,options:ke.value,modelValue:m.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=o=>m.value.form_category=o),placeholder:"Select Cateogry",multiple:!1,searchable:!0,class:"font-11 multiselect"},null,8,["disabled","options","modelValue"])])]),s("div",xo,[s("label",Io,[s("label",el,[e[40]||(e[40]=N("Accessible to department ")),m.value.accessible_departments.length?v("",!0):(a(),i("span",tl,"*"))])]),le(S(Ne),{modelValue:m.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=o=>m.value.accessible_departments=o),options:ps.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Department",class:"font-11",onSelect:_s,onRemove:hs},{option:Ct(({option:o})=>[s("div",sl,[s("input",{type:"checkbox",checked:fs(o),class:"custom-checkbox",onChange:l=>vs(o,l),onClick:e[9]||(e[9]=ne(()=>{},["stop"]))},null,40,ol),s("span",null,g(o),1)])]),selection:Ct(({values:o,isOpen:l})=>[o.length?w((a(),i("span",{key:0,class:"multiselect__single font-10"},g(ms.value),513)),[[tt,!l]]):v("",!0)]),_:1},8,["modelValue","options"])]),s("div",ll,[s("div",nl,[e[41]||(e[41]=s("label",{for:""},[N("Has Workflow "),s("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),le(S(Ne),{options:["Yes","No"],modelValue:m.value.has_workflow,"onUpdate:modelValue":e[11]||(e[11]=o=>m.value.has_workflow=o),placeholder:"Select",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["modelValue"])])]),s("div",al,[S(C).query.preId?(a(),i("div",il,[w(s("input",{class:"form-check-input linketoCheck p-1",disabled:m.value.is_predefined_doctype==1,type:"checkbox",id:"is_linked","onUpdate:modelValue":e[12]||(e[12]=o=>m.value.is_linked=o),"true-value":1,"false-value":0},null,8,rl),[[Fe,m.value.is_linked]]),e[42]||(e[42]=s("label",{class:"form-check-label font-12 mx-2 mb-0 ps-1",for:"is_linked"}," Link ",-1))])):v("",!0),e[44]||(e[44]=s("div",null,null,-1)),m.value.is_linked?(a(),i("div",ul,[e[43]||(e[43]=s("label",{for:"standardFormInput"},"Form",-1)),w(s("input",{type:"text",class:"form-control standardFormInput",id:"standardFormInput",disabled:m.value.is_predefined_doctype==1,"onUpdate:modelValue":e[13]||(e[13]=o=>m.value.is_linked_form=o),placeholder:"Type to search Form Name...",onInput:qt,onFocus:e[14]||(e[14]=o=>qe.value=!0),onBlur:Tt},null,40,dl),[[A,m.value.is_linked_form]]),qe.value&&Ee.value.length?(a(),i("ul",cl,[(a(!0),i(q,null,U(Ee.value,(o,l)=>(a(),i("li",{class:"list-group-item formlistitem",key:l,onMousedown:ne(r=>Ut(o.name),["prevent"])},g(o.name),41,pl))),128))])):v("",!0)])):v("",!0)])])]),e[46]||(e[46]=s("div",{class:"col-4"},null,-1))])])])):v("",!0),D.value===2?(a(),i("div",ml,[s("div",fl,[s("div",vl,[s("h1",{onClick:e[15]||(e[15]=o=>ct()),class:"font-11 m-0"},e[47]||(e[47]=[s("i",{class:"bi bi-chevron-left"},null,-1),s("span",{class:"ms-2"},"Back To About Form",-1)])),s("div",_l,[s("div",null,[Ys.value?(a(),i("button",{key:0,class:"btn btn-light previewBtn d-flex align-items-center font-13",type:"button",onClick:Zs},e[48]||(e[48]=[s("i",{class:"bi bi-eye me-1 ms-1 mb-0"},null,-1),N("Preview ")]))):v("",!0)]),S(f).length?(a(),i("button",{key:0,class:"btn btn-dark font-10 Withborder border",type:"button",onClick:e[16]||(e[16]=o=>_t("save"))},g(S(V)!=="new"?"Update Form":"Create Form"),1)):v("",!0)])]),le(io,{blockArr:Re.value,formDescriptions:Vt.value,childHeaders:z.value},null,8,["blockArr","formDescriptions","childHeaders"]),s("div",{class:"main-block",ref_key:"mainBlockRef",ref:Me},[(a(!0),i(q,null,U(S(f),(o,l)=>(a(),i("div",{class:"block-level",key:l},[s("div",hl,[s("div",bl,[s("div",null,[s("h6",gl,g(l===0?"Requestor Block":`Approver
                                  Block ${l}
                                  `),1)]),s("div",yl,[S(V)&&S(j).length?(a(),i("div",kl,[se(l)?(a(),i("label",wl,[s("span",Cl,g(se(l).roles.length>0?l===0?"Requestor: ":"Approver: ":""),1),s("span",Dl,g(se(l).roles.slice(0,2).join(", ")),1),se(l).roles.length>2?(a(),i("span",{key:0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:r=>Ze(l),class:"more-count"}," +"+g(se(l).roles.length-2)+" more ",9,Sl)):v("",!0)])):v("",!0)])):v("",!0),At(l)&&S(V)!=null&&S(V)!=null&&S(V)!="new"&&se(l).roles.length===0?(a(),i("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:r=>Ze(l)},e[49]||(e[49]=[s("img",{src:po,alt:"Add",class:"me-1"},null,-1),N(" Add designations ")]),8,$l)):v("",!0),S(V)!=null&&S(V)!=null&&S(V)!="new"&&se(l).roles.length>0?(a(),i("button",{key:2,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:r=>Ze(l)},e[50]||(e[50]=[s("i",{class:"bi bi-pencil font-14"},null,-1)]),8,Fl)):v("",!0),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:r=>Us(l)},e[51]||(e[51]=[s("i",{class:"bi bi-trash me-1"},null,-1),N(" Delete Block ")]),8,Vl)])])]),s("div",Al,[(a(!0),i(q,null,U(o.sections,(r,n)=>(a(),i("div",{key:"section-"+n,class:"dynamicSection mt-0 section"},[s("section",El,[s("div",ql,[w(s("input",{"onUpdate:modelValue":d=>r.label=d,type:"text",class:L(["border-less-input","font-14",{"italic-style":!r.label},{"fw-medium":r.label}]),onChange:d=>Qe(l,n),placeholder:"Untitled section"},null,42,Ul),[[A,r.label]]),r.errorMsg?(a(),i("small",Tl,g(r.errorMsg),1)):v("",!0)]),s("div",Ll,[s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:d=>Ls(l,n)},e[52]||(e[52]=[s("i",{class:"bi bi-trash me-1"},null,-1),N(" Delete Section ")]),8,Ol)])]),s("div",Ml,[(a(!0),i(q,null,U(r.rows,(d,c)=>(a(),i("section",{class:"row dynamicRow row-container",key:"row-"+c},[s("div",Bl,[s("label",Rl,g(Ks(c)),1),s("div",null,[d.columns.length<3?(a(),i("button",{key:0,class:"btn btn-light bg-transparent border-0 font-12",onClick:_=>Os(l,n,c)},e[53]||(e[53]=[s("i",{class:"bi bi-plus font-14"},null,-1),N(" Add Column ")]),8,zl)):v("",!0)])]),s("div",Nl,[s("div",Hl,[(a(!0),i(q,null,U(d.columns,(_,u)=>(a(),i("div",{key:"column-"+u,onMouseenter:p=>Pt(l,n,c,u),onMouseleave:jt,class:"col p-0 dynamicColumn position-relative column-container"},[s("div",jl,[s("div",Jl,[w(s("input",{"onUpdate:modelValue":p=>_.label=p,type:"text",class:L(["border-less-input","ps-1","font-14","inputHeight",{"italic-style":!_.label},{"fw-medium":_.label}]),onChange:p=>Qe(l,n,c,u),placeholder:"Column Name"},null,42,Wl),[[A,_.label]]),_.errorMsg?(a(),i("small",Yl,g(_.errorMsg),1)):v("",!0)]),w(s("div",Kl,[s("button",{class:"btn btn-light bg-transparent me-1 btn-sm",onClick:p=>Ms(l,n,c,u)},e[54]||(e[54]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Zl)],512),[[tt,Jt(l,n,c,u)]])]),_.fields.length===0?(a(),i("div",{key:0,class:"empty-drop-zone",onDragover:e[17]||(e[17]=ne(()=>{},["prevent"])),onDrop:p=>ce(p,l,n,c,u,t.fieldIndex)},null,40,Gl)):v("",!0),(a(!0),i(q,null,U(_.fields,(p,y)=>{var J;return a(),i("div",{key:"field-"+y,onMouseenter:h=>zt(l,n,c,u,y),onMouseleave:Nt,class:"dynamicField m-1 draggable-item",draggable:"true",onDragstart:h=>nt(h,l,n,c,u,y),onDragover:e[21]||(e[21]=ne(()=>{},["prevent"])),onDrop:h=>ce(h,l,n,c,u,y)},[s("div",{class:"drop-zone",onDragover:e[18]||(e[18]=ne(()=>{},["prevent"])),onDrop:h=>ce(h,l,n,c,u,y)},null,40,Xl),p.fieldtype!=="Table"?(a(),i("div",{key:0,class:"px-1 dynamic_fied field-border",draggable:"true",onDragstart:h=>nt(h,l,n,c,u,y),onDragover:e[19]||(e[19]=ne(()=>{},["prevent"])),onDrop:h=>ce(h,l,n,c,u,y)},[s("div",Il,[s("div",en,[w(s("input",{"onUpdate:modelValue":h=>p.label=h,placeholder:"Name the field",class:L(["border-less-input","font-14","p-0","inputHeight",{"italic-style":!p.label},{"fw-medium":p.label}]),onChange:h=>Qe(l,n,c,u,y)},null,42,tn),[[A,p.label]]),p.errorMsg?(a(),i("small",sn,g(p.errorMsg),1)):v("",!0)]),w(s("div",on,[s("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:h=>zs(l,n,c,u,y)},e[55]||(e[55]=[s("i",{class:"ri-file-copy-line font-13 copyIcon"},null,-1)]),8,ln),s("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:h=>Rs(l,n,c,u,y)},e[56]||(e[56]=[s("i",{class:"bi bi-x-lg font-13"},null,-1)]),8,nn)],512),[[tt,Ht(l,n,c,u,y)]])]),w(s("select",{"onUpdate:modelValue":h=>p.fieldtype=h,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:h=>Ns(l,n,c,u,y)},[e[57]||(e[57]=s("option",{value:""},"Select Type",-1)),(a(),i(q,null,U(cs,h=>s("option",{key:h,value:h.type},g(h.label),9,rn)),64))],40,an),[[ye,p.fieldtype]]),["Select","Table MultiSelect","Small Text"].includes(p.fieldtype)?(a(),i("div",un,[e[58]||(e[58]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":h=>p.options=h,class:"form-control shadow-none mb-1 font-12"},null,8,dn),[[A,p.options]]),!p.options||p.options.trim()===""?(a(),i("small",cn," Options are required for this field type. ")):v("",!0)])):v("",!0),p.fieldtype==="Link"?(a(),i("div",pn,[s("label",{class:"font-11 fw-light",for:"link-search-"+ue(l,n,c,u,y)}," Search Doctype: ",8,mn),w(s("input",{id:"link-search-"+ue(l,n,c,u,y),type:"text","onUpdate:modelValue":h=>S(f)[l].sections[n].rows[c].columns[u].fields[y].options=h,onInput:h=>Ot(S(f)[l].sections[n].rows[c].columns[u].fields[y].options,l,n,c,u,y),onFocus:h=>Lt(ue(l,n,c,u,y)),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,40,fn),[[A,S(f)[l].sections[n].rows[c].columns[u].fields[y].options]]),(J=we[ue(l,n,c,u,y)])!=null&&J.length&&Je[ue(l,n,c,u,y)]?(a(),i("ul",vn,[(a(!0),i(q,null,U(we[ue(l,n,c,u,y)],(h,k)=>(a(),i("li",{key:k,onClick:F=>Mt(l,n,c,u,y,h.name),class:"list-group-item list-group-item-action"},g(h.name),9,_n))),128))])):v("",!0)])):v("",!0),s("div",hn,[s("div",bn,[s("div",gn,[w(s("input",{class:"font-12","onUpdate:modelValue":h=>p.reqd=h,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,yn),[[Fe,p.reqd]])]),e[59]||(e[59]=s("div",null,[s("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Mandatory")],-1))]),s("div",null,[s("button",{class:"btn btn-sm font-12",onClick:h=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,kn)])]),p.showDescription?w((a(),i("textarea",{key:2,"onUpdate:modelValue":h=>p.description=h,class:"form-control font-12 mt-2",placeholder:"Enter field description"},null,8,wn)),[[A,p.description]]):v("",!0),p.error?(a(),i("small",Cn,g(p.error),1)):v("",!0)],40,xl)):v("",!0),s("div",{class:"drop-zone",onDragover:e[20]||(e[20]=ne(()=>{},["prevent"])),onDrop:h=>ce(h,l,n,c,u,y)},null,40,Dn),s("div",Sn,[s("div",null,[s("div",null,[s("div",$n,[p.fieldtype==="Table"?(a(),i("div",Fn,[(a(!0),i(q,null,U(z.value,(h,k)=>(a(),i("div",{key:k,class:"childTable"},[k===p.fieldname||k===p.options?(a(),i("h5",Vn,g(k.replace(/_/g," ")),1)):v("",!0),T[k]&&k===it.value?(a(),i("div",An,[s("div",En,[p.showDescription?w((a(),i("input",{key:0,"onUpdate:modelValue":F=>p.description=F,class:"form-control font-12",placeholder:"Enter field description"},null,8,qn)),[[A,p.description]]):v("",!0),s("button",{class:"btn btn-sm text-nowrap font-12",onClick:F=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,Un)])])):v("",!0),k===p.options||k===p.fieldname?(a(),i("table",Tn,[e[63]||(e[63]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Label"),s("th",null,"Field Type")])],-1)),s("tbody",{onDragover:ne(Kt,["prevent"]),onDrop:F=>Zt(F,h)},[(a(!0),i(q,null,U(h,(F,Z)=>{var Ce,De,Se,$e;return a(),i("tr",{key:Z,draggable:T[k],onDragstart:M=>Wt(Z),onDragend:Yt,class:L({dragging:me.value===Z})},[s("td",null,g(Z+1),1),T[k]?(a(),i("td",Mn,[w(s("input",{"onUpdate:modelValue":M=>F.label=M,placeholder:"Field Label",class:L(["form-control",{"border-1 border-danger":(Ce=O.value[k])==null?void 0:Ce.includes(Z)}])},null,10,Bn),[[A,F.label]]),(De=O.value[k])!=null&&De.includes(Z)?(a(),i("span",Rn,"Label required**")):v("",!0)])):(a(),i("td",zn,g(F.label),1)),T[k]?(a(),i("td",Nn,[s("div",Hn,[w(s("select",{"onUpdate:modelValue":M=>F.fieldtype=M,class:L(["form-select form-select-sm",{"border-1 border-danger":(Se=O.value[k])==null?void 0:Se.includes(Z)}])},[e[60]||(e[60]=s("option",{value:""},"Select Type",-1)),(a(),i(q,null,U(Ye,M=>s("option",{key:M.type,value:M.type},g(M.label),9,jn)),64))],10,Pn),[[ye,F.fieldtype]]),s("div",Jn,[s("div",Wn,[s("div",Yn,[w(s("input",{class:"font-12 form-control-sm","onUpdate:modelValue":M=>F.description=M,placeholder:"description",type:"text"},null,8,Kn),[[A,F.description]])])]),s("button",{class:"btn btn-light btn-sm",onClick:M=>rs(k,Z)},e[61]||(e[61]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Zn)])]),["Select"].includes(F.fieldtype)?(a(),i("div",Gn,[e[62]||(e[62]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":M=>F.options=M,class:"form-control shadow-none mb-1 font-12"},null,8,Qn),[[A,F.options]]),!F.options||F.options.trim()===""?(a(),i("small",Xn," Options are required for this field type. ")):v("",!0)])):v("",!0),($e=O.value[k])!=null&&$e.includes(Z)?(a(),i("span",xn,"Type required**")):v("",!0)])):(a(),i("td",In,g(F.fieldtype),1))],42,On)}),128))],40,Ln)])):v("",!0),p.fieldtype==="Table"&&(p.label===k||p.fieldname===k)?(a(),i("div",ea,[s("button",{class:"btn btn-light btn-sm mx-2",onClick:F=>us(k,p.description)},g(T[k]?"Save":"Edit"),9,ta),T[k]?(a(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:F=>is(k)}," Add More Field ",8,sa)):v("",!0)])):v("",!0)]))),128))])):v("",!0)])])])])],40,Ql)}),128)),s("div",{class:"drop-zone-bottom",onDragover:e[22]||(e[22]=ne(()=>{},["prevent"])),onDrop:p=>ce(p,l,n,c,u,_.fields.length),style:{"background-color":"#f0f0f0",border:"1px dashed #ccc",margin:"4px"}},null,40,oa),s("div",{class:"drop-zone",onDragover:e[23]||(e[23]=ne(()=>{},["prevent"])),onDrop:p=>ce(p,l,n,c,u,t.fields.length),style:{height:"10px","background-color":"transparent"}},null,40,la),s("div",na,[s("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:p=>Bs(l,n,c,u)},e[64]||(e[64]=[s("i",{class:"bi bi-plus fs-5"},null,-1),s("span",null,"Add Field",-1)]),8,aa)])],40,Pl))),128))])])]))),128)),s("div",null,[(a(!0),i(q,null,U(r.afterCreated,(d,c)=>(a(),i("div",{key:c,class:"childTable dynamicColumn m-0 p-2"},[s("h5",ia,g(d.tableName),1),T[d.tableName]?(a(),i("div",ra,[s("div",ua,[d.showDescription?w((a(),i("input",{key:0,"onUpdate:modelValue":_=>d.description=_,class:"form-control font-12",placeholder:"Enter field description"},null,8,da)),[[A,d.description]]):v("",!0),s("button",{class:"btn btn-sm text-nowrap font-12",onClick:_=>d.showDescription=!d.showDescription},g(d.showDescription?"Hide Description":d.description?"Edit Description":"Add Description"),9,ca)])])):v("",!0),s("table",pa,[e[68]||(e[68]=s("thead",null,[s("tr",null,[s("th",null,"#"),s("th",null,"Label"),s("th",null,"Field Type")])],-1)),s("tbody",null,[(a(!0),i(q,null,U(d.columns,(_,u)=>{var p,y,J,h;return a(),i("tr",{key:u},[s("td",null,g(u+1),1),T[d.tableName]?(a(),i("td",ma,[w(s("input",{"onUpdate:modelValue":k=>_.label=k,placeholder:"Field Label",class:L(["form-control",{"border-1 border-danger":(p=O.value[d.tableName])==null?void 0:p.includes(u)}]),onBlur:k=>je(_)},null,42,fa),[[A,_.label]]),(y=O.value[c])!=null&&y.includes(u)?(a(),i("span",va,"Label required**")):v("",!0)])):(a(),i("td",_a,g(_.label),1)),T[d.tableName]?(a(),i("td",ha,[s("div",ba,[w(s("select",{"onUpdate:modelValue":k=>_.fieldtype=k,class:L(["form-select form-select-sm",{"border-1 border-danger":(J=O.value[d.tableName])==null?void 0:J.includes(u)}])},[e[65]||(e[65]=s("option",{value:""},"Select Type",-1)),(a(),i(q,null,U(Ye,k=>s("option",{key:k.type,value:k.type},g(k.label),9,ya)),64))],10,ga),[[ye,_.fieldtype]]),s("button",{class:"btn btn-light btn-sm",onClick:k=>ls(l,n,d.tableName,u)},e[66]||(e[66]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,ka)]),["Select"].includes(_.fieldtype)?(a(),i("div",wa,[e[67]||(e[67]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":k=>_.options=k,class:"form-control shadow-none mb-1 font-12"},null,8,Ca),[[A,_.options]]),!_.options||_.options.trim()===""?(a(),i("small",Da," Options are required for this field type. ")):v("",!0)])):v("",!0),(h=O.value[d.tableName])!=null&&h.includes(u)?(a(),i("span",Sa,"Type required**")):v("",!0)])):(a(),i("td",$a,g(_.fieldtype),1))])}),128))])]),s("div",Fa,[s("button",{class:"btn btn-light btn-sm mx-2",onClick:_=>as(l,n,d.tableName)},g(T[d.tableName]?"Save":"Edit"),9,Va),T[d.tableName]?(a(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:_=>ns(l,n,d.tableName)}," Add More Field ",8,Aa)):v("",!0)])]))),128))])]),s("div",null,[s("div",null,[l==0?(a(),i("button",{key:0,class:"btn btn-light addRow mb-3 mt-4",onClick:d=>Xt(l,n)}," Add New Table ",8,Ea)):v("",!0),(a(!0),i(q,null,U(r.childTables,(d,c)=>{var _;return a(),i("div",{key:`table-${l}-${n}-${c}`,class:"child-table"},[d.newTable?(a(),i("div",qa,[s("div",Ua,[s("div",null,[s("span",{class:L(d.tableName?"d-none":"text-danger")},"*",2),w(s("input",{"onUpdate:modelValue":u=>d.tableName=u,placeholder:"Table Name",onBlur:u=>je(d),class:L(["border-less-input font-14 p-0 inputHeight",{"italic-style":!d.tableName,"fw-medium":d.tableName}])},null,42,Ta),[[A,d.tableName]]),(_=ie[`${l}-${n}-${c}`])!=null&&_.tableName?(a(),i("div",La,g(ie[`${l}-${n}-${c}`].tableName),1)):v("",!0),Oe.value?(a(),i("div",Oa,g(Oe.value),1)):v("",!0),s("div",Ma,[s("div",Ba,[d.showDescription?w((a(),i("input",{key:0,"onUpdate:modelValue":u=>d.as_a_block=u,class:"form-control font-12",placeholder:"Enter field description"},null,8,Ra)),[[A,d.as_a_block]]):v("",!0),s("button",{class:"btn btn-sm text-nowrap font-12",onClick:u=>d.showDescription=!d.showDescription},g(d.showDescription?"Hide Description":d.description?"Edit Description":"Add Description"),9,za)])])]),s("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:u=>It(l,n,c)},e[69]||(e[69]=[s("i",{class:"bi bi-trash"},null,-1),N(" Remove Table ")]),8,Na)]),(a(!0),i(q,null,U(d.columns,(u,p)=>{var y,J,h,k,F,Z,Ce,De,Se,$e,M,ht;return a(),i("div",{key:p,class:"dynamicField"},[s("div",Ha,[s("div",Pa,[s("div",null,[s("span",{class:L(u.label?"d-none":"text-danger")},"*",2),w(s("input",{"onUpdate:modelValue":W=>u.label=W,placeholder:"Name the field",onBlur:W=>je(u),class:L(["border-less-input font-14 p-0 inputHeight",{"italic-style":!u.label,"fw-medium":u.label,"is-invalid":(h=(J=(y=ie[`${l}-${n}-${c}`])==null?void 0:y.columns)==null?void 0:J[p])==null?void 0:h.label}])},null,42,ja),[[A,u.label]]),(Z=(F=(k=ie[`${l}-${n}-${c}`])==null?void 0:k.columns)==null?void 0:F[p])!=null&&Z.label?(a(),i("div",Ja,g(ie[`${l}-${n}-${c}`].columns[p].label),1)):v("",!0)]),s("div",Wa,[s("div",Ya,[u.showDescription?w((a(),i("input",{key:0,"onUpdate:modelValue":W=>u.description=W,class:"form-control font-12",placeholder:"Enter field description"},null,8,Ka)),[[A,u.description]]):v("",!0),s("button",{class:"btn btn-sm text-nowrap font-12",onClick:W=>u.showDescription=!u.showDescription},g(u.showDescription?"Hide Description":u.description?"Edit Description":"Add Description"),9,Za)]),s("button",{class:"btn btn-sm trash-btn py-0",onClick:W=>es(l,n,c,p)},e[70]||(e[70]=[s("i",{class:"bi bi-x-lg"},null,-1)]),8,Ga)])]),w(s("select",{"onUpdate:modelValue":W=>u.fieldtype=W,class:L(["form-select font-13 mb-1",{"is-invalid":(Se=(De=(Ce=ie[`${l}-${n}-${c}`])==null?void 0:Ce.columns)==null?void 0:De[p])==null?void 0:Se.fieldtype}])},[e[71]||(e[71]=s("option",{value:""},"Select Type",-1)),(a(),i(q,null,U(Ye,W=>s("option",{key:W.type,value:W.type},g(W.label),9,Xa)),64))],10,Qa),[[ye,u.fieldtype]]),["Select"].includes(u.fieldtype)?(a(),i("div",xa,[e[72]||(e[72]=s("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(s("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":W=>u.options=W,class:"form-control shadow-none mb-1 font-12"},null,8,Ia),[[A,u.options]]),!u.options||u.options.trim()===""?(a(),i("small",ei," Options are required for this field type. ")):v("",!0)])):v("",!0),(ht=(M=($e=ie[`${l}-${n}-${c}`])==null?void 0:$e.columns)==null?void 0:M[p])!=null&&ht.fieldtype?(a(),i("div",ti,g(ie[`${l}-${n}-${c}`].columns[p].fieldtype),1)):v("",!0)])])}),128)),s("button",{class:"btn btn-light btn-sm addField mx-1",onClick:u=>xt(l,n,c)},e[73]||(e[73]=[s("i",{class:"bi bi-plus"},null,-1),N(" Add Field ")]),8,si),s("button",{class:"btn btn-dark btn-sm font-12 mx-1",onClick:u=>os(l,n,c)}," Create Table ",8,oi),e[74]||(e[74]=s("hr",null,null,-1))])):v("",!0)])}),128))])]),s("div",li,[s("button",{class:"btn btn-light border font-12",onClick:d=>Ts(l,n)},e[75]||(e[75]=[s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),N(" Add Section ")]),8,ni)])]))),128)),l===0?(a(),i("div",ai)):v("",!0)])]))),128)),s("div",{class:L(["d-flex justify-content-center align-items-center add-block-btn-div py-4  ",{"background-color-white":S(f).length}])},[s("button",{class:"btn btn-light border d-flex align-items-center font-12",onClick:qs},[e[76]||(e[76]=s("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1)),N(" "+g(S(f).length===0?"Add Requestor Block":"Add Approval Block"),1)])],2)],512)])])):v("",!0),D.value===3?(a(),i("div",ii,[e[77]||(e[77]=s("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[s("div",null,[s("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),s("div")],-1)),le(ro,{blockArr:Re.value},null,8,["blockArr"])])):v("",!0)])])])])])])]),s("div",ri,[s("div",ui,[s("div",di,[e[80]||(e[80]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",ci,[w(s("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>Te.value=o),multiple:!1,placeholder:S(C).query.id,class:"font-11 form-control",searchable:!0},null,8,pi),[[A,Te.value]]),s("div",mi,[s("div",fi,[w(s("input",{class:"font-12","onUpdate:modelValue":e[25]||(e[25]=o=>be.value=o),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[Fe,be.value]])]),e[78]||(e[78]=s("div",null,[s("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),s("div",{class:"modal-footer"},[e[79]||(e[79]=s("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),s("button",{type:"button",class:"btn btn-dark",onClick:Vs},"Add Print Format")])])])]),s("div",vi,[s("div",_i,[s("span",hi,g(P.value==0?"Add designation for Requestor":`Approval Settings For
          Level-${P.value}`),1),e[81]||(e[81]=s("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),s("div",bi,[s("div",gi,[s("div",yi,[P.value!==0?(a(),i("div",ki,[P.value!==0?(a(),i("div",wi,[e[83]||(e[83]=s("label",{class:"fw-bold font-12 mb-2"},"Approver Type",-1)),w(s("select",{"onUpdate:modelValue":e[26]||(e[26]=o=>te.value=o),class:"form-select shadow-none font-12"},e[82]||(e[82]=[s("option",{value:""},"Send To Selected Approvers",-1),s("option",{value:"ViewOnlyReportee"},"View Only Reportee",-1),s("option",{value:"all_approvals_required"},"All Approvers Required",-1),s("option",{value:"requester_as_a_approver"},"Requested Only",-1)]),512),[[ye,te.value]])])):v("",!0),s("div",Ci,[e[85]||(e[85]=s("div",null,[s("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),w(s("select",{"onUpdate:modelValue":e[27]||(e[27]=o=>_e.value=o),class:"form-select shadow-none font-12 mt-1 me-2"},[e[84]||(e[84]=s("option",{disabled:"",value:""},"Select Lower Level",-1)),(a(!0),i(q,null,U(Bt.value,o=>(a(),i("option",{key:o,value:o},g(o===0?"Requestor":"Approver Level "+o),9,Di))),128))],512),[[ye,_e.value,void 0,{number:!0}]])])])):v("",!0)])]),s("div",Si,[w(s("input",{"onUpdate:modelValue":e[28]||(e[28]=o=>Ae.value=o),class:"SearchDesignation rounded-2 form-control shadow-none my-1",type:"text",placeholder:"Search Designation"},null,512),[[A,Ae.value]]),G.value.length?(a(),i("div",$i,[s("div",null,[w(s("input",{type:"checkbox",id:"selectAll","onUpdate:modelValue":e[29]||(e[29]=o=>Ke.value=o),class:"me-2 mt-0 designationCheckBox form-check-input"},null,512),[[Fe,Ke.value]]),e[86]||(e[86]=s("label",{for:"selectAll",class:"SelectallDesignation fw-bold mx-2 form-check-label"},"Select all",-1))])])):v("",!0),G.value.length?(a(),i("ul",Fi,[(a(!0),i(q,null,U(Rt.value,(o,l)=>(a(),i("li",{key:l,class:"designationList form-check"},[w(s("input",{type:"checkbox",id:`SelectedDisignation_${l}`,"onUpdate:modelValue":e[30]||(e[30]=r=>ee.value=r),value:o,class:"designationCheckBox form-check-input mt-0",onChange:bs},null,40,Vi),[[Fe,ee.value]]),s("label",{for:`SelectedDisignation_${l}`,class:"ps-2"},g(o),9,Ai)]))),128))])):(a(),i("div",Ei,e[87]||(e[87]=[s("div",{class:"d-flex justify-content-center"},[s("span",null,"No Designations Found")],-1)])))])]),s("div",qi,[s("div",Ui,[le(wt,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:gs,name:" Add Designations"})])])])]))}},Mi=Is(Ti,[["__scopeId","data-v-10b2be34"]]);export{Mi as default};
