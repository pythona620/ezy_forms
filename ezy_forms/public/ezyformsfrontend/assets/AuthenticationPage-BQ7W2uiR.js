import{_ as D,d,e as I,f as B,k as c,l as i,n as u,w as N,o as p,c as S,b as o,A as T,B as U,t as f,J as P,E as J,j as n}from"./index-BHd6CXej.js";const R={class:"p-1 mt-3"},O={class:"table"},W={class:"form-check form-switch"},q=["checked","onClick"],z={class:"form-check-label mt-1"},L={class:"modal fade",id:"EnableDisable",tabindex:"-1","aria-labelledby":"EnableDisableLabel","aria-hidden":"true"},j={class:"modal-dialog modal-dialog-centered"},Y={class:"modal-content"},x={class:"modal-body"},G={__name:"AuthenticationPage",setup(H){const s=d([{title:"Two Factor Authentication",checked:!1},{title:"Send Form as an Attachment Via an E-Mail ",checked:!1},{title:"Welcome E-Mail Configuration",checked:!1},{title:"Sign Up",checked:!1}]),h=d(!1),b=d(null),r=d(!1),m=d(""),v=d(!1),E=d(""),C=I(()=>J.value);B(()=>{A()});const $=t=>{b.value=t,r.value=s.value[t].checked,v.value=r.value;const e=r.value===!1?1:0;t===0?m.value=e?"Are you sure you want to enable Two Factor Authentication?":"Are you sure you want to disable Two Factor Authentication?":t===1?m.value=e?"Are you sure you want to enable Send Form As an Attachment Through E-Mail?":"Are you sure you want to disable Send Form As an Attachment Through E-Mail?":t===2?m.value=e?"Are you sure you want to enable E-Mail Configuration?":"Are you sure you want to disable E-Mail Configuration?":t===3&&(m.value=e?"Are you sure you want to enable Sign up?":"Are you sure you want to disable Sign up?"),new bootstrap.Modal(document.getElementById("EnableDisable")).show()},k=()=>{s.value[b.value].checked=v.value},M=()=>{const t=b.value,e=r.value===!1?1:0;console.log(r.value);const a=e?1:0,l=e?0:1;s.value[t].checked=!e;const g=t===0?"System Settings":localStorage.getItem("Bu")||"";t===0?c.put(`${i.resource}${u.SystemSettings}/${encodeURIComponent(g)}`,{enable_two_factor_auth:a}).then(()=>{n.success(`Two Factor Authentication ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),w()}).catch(()=>{n.error("Failed to update Two Factor Authentication!")}):t===1?c.put(`${i.resource}${u.wfSettingEzyForms}/${encodeURIComponent(g)}`,{send_form_as_a_attach_through_mail:a}).then(()=>{n.success(`Send Form As an Attachment Through Mail ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),_()}).catch(()=>{n.error("Failed to update Send Form As an Attachment Through Mail!")}):t===2?h.value===!0?c.put(`${i.resource}${u.wfSettingEzyForms}/${encodeURIComponent(g)}`,{welcome_mail_to_employee:a}).then(()=>{n.success(`Welcome Mail Configuration ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),_()}).catch(()=>{n.error("Failed to update Welcome Mail Configuration!")}):(n.info("Please Configure Default Mail First!"),s.value[t].checked=!1):t===3&&c.put(`${i.resource}${u.websiteSettings}/${encodeURIComponent("Website Settings")}`,{disable_signup:l}).then(()=>{n.success(`Sign up ${l===1?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),A()}).catch(()=>{n.error("Failed to update Sign up!")})};function _(){const t={fields:JSON.stringify(["*"]),filters:JSON.stringify([["name","=",E.value]])};c.get(`${i.resource}${u.wfSettingEzyForms}`,{params:t}).then(e=>{if(e.data.length>0){const a=e.data[0].send_form_as_a_attach_through_mail;s.value[1].checked=a==1;const l=e.data[0].welcome_mail_to_employee;s.value[2].checked=l==1}}).catch(e=>{console.error("Error fetching business unit settings:",e)})}const w=()=>{const t="System Settings",e={fields:JSON.stringify(["*"])};c.get(`${i.resource}${u.SystemSettings}/${encodeURIComponent(t)}`,{params:e}).then(a=>{a.data&&(s.value[0].checked=a.data.enable_two_factor_auth==1)}).catch(a=>{console.error("Error fetching system settings:",a)})},A=()=>{const t="Website Settings",e={fields:JSON.stringify(["*"])};c.get(`${i.resource}${u.websiteSettings}/${encodeURIComponent(t)}`,{params:e}).then(a=>{a.data&&(s.value[3].checked=a.data.disable_signup==0)}).catch(a=>{console.error("Error fetching system settings:",a)})},F=()=>{const t={fields:JSON.stringify(["default_outgoing","enable_outgoing"]),filters:JSON.stringify([["default_outgoing","=",1],["enable_outgoing","=",1]])};c.get(`${i.resource}${u.Email_Account}`,{params:t}).then(e=>{if(e.data&&e.data.length>0){const a=e.data[0];a.default_outgoing===1&&a.enable_outgoing===1?h.value=!0:h.value=!1}else h.value=!1}).catch(e=>{console.error("Error fetching system settings:",e)})};return N(C,t=>{t&&t.length&&(E.value=t,_(),F(),w())},{immediate:!0}),(t,e)=>(p(),S("div",R,[e[2]||(e[2]=o("h1",{class:"m-0 font-13 mb-3"},"Settings",-1)),o("table",O,[e[0]||(e[0]=o("thead",null,[o("tr",null,[o("th",null,"S.No"),o("th",null,"Title"),o("th",null,"Actions")])],-1)),o("tbody",null,[(p(!0),S(T,null,U(s.value,(a,l)=>(p(),S("tr",{key:l},[o("td",null,f(l+1),1),o("td",null,f(a.title),1),o("td",null,[o("div",W,[o("input",{class:"form-check-input shadow-none",type:"checkbox",role:"switch",checked:a.checked,onClick:P(g=>$(l),["prevent"])},null,8,q),o("label",z,f(a.checked?"Enabled":"Disabled"),1)])])]))),128))])]),o("div",L,[o("div",j,[o("div",Y,[o("div",{class:"modal-header"},[e[1]||(e[1]=o("h5",{class:"modal-title",id:"EnableDisableLabel"},"Confirm Action",-1)),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]),o("div",x,f(m.value),1),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:k},"Close"),o("button",{type:"button",class:"btn btn-dark",onClick:M},"Yes, Proceed")])])])])]))}},Q=D(G,[["__scopeId","data-v-cd36695f"]]);export{Q as default};
