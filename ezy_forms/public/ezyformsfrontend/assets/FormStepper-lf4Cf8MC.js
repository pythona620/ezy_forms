var Xs=Object.defineProperty,xs=Object.defineProperties;var Is=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var yt=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable;var gt=(A,C,S)=>C in A?Xs(A,C,{enumerable:!0,configurable:!0,writable:!0,value:S}):A[C]=S,ie=(A,C)=>{for(var S in C||(C={}))yt.call(C,S)&&gt(A,S,C[S]);if(je)for(var S of je(C))kt.call(C,S)&&gt(A,S,C[S]);return A},Ve=(A,C)=>xs(A,Is(C));var Ie=(A,C)=>{var S={};for(var D in A)yt.call(A,D)&&C.indexOf(D)<0&&(S[D]=A[D]);if(A!=null&&je)for(var D of je(A))C.indexOf(D)<0&&kt.call(A,D)&&(S[D]=A[D]);return S};var et=(A,C,S)=>new Promise((D,we)=>{var ae=P=>{try{f(S.next(P))}catch(G){we(G)}},qe=P=>{try{f(S.throw(P))}catch(G){we(G)}},f=P=>P.done?D(P.value):Promise.resolve(P.value).then(ae,qe);f((S=S.apply(A,C)).next())});import{_ as el,u as tl,O as sl,d as b,I as X,e as x,w as he,f as ll,R as wt,k as R,l as z,n as I,o as n,c as i,b as t,p as F,W as ol,i as j,q as v,A as q,B as E,C as B,t as g,S as al,D as Ct,a as le,F as tt,h as nl,x as Pe,s as Dt,J as oe,v as w,y as ee,z as L,Q as il,H as st,X as Ae,Y as rl,E as ul,j as W,Z as lt,M as dl,$ as St,a0 as cl}from"./index-BHd6CXej.js";const pl="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg",ml={class:""},fl={class:""},vl={class:"d-flex justify-content-between align-items-center CancelNdSave my-2 py-2"},_l=["disabled"],hl={class:"form-container p-0 container-fluid mt-1"},bl={class:"row"},gl={class:"col-2"},yl={class:"steps-sticky-div"},kl={class:"steps"},wl=["onClick"],Cl={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},Dl={class:"step-text"},Sl={class:"font-11"},Fl={class:"font-14"},$l={class:"col-10 formbackground-color"},Vl={class:""},Al={class:"form-content stepsDiv"},ql={key:0},El={class:""},Ul={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},Tl={class:"container-fluid aboutFields p-0"},Ll={class:"row"},Bl={class:"col-4"},Ml={class:""},Ol={class:"mt-3"},Rl={class:"position-relative"},zl={key:0,class:"font-12 position-absolute PredefinedLabel"},Nl={key:1,class:"text-danger ErrorMsg ms-2"},jl={class:"mt-3"},Pl={class:""},Hl={key:0,class:"text-danger ErrorMsg ms-2"},Jl={class:"mt-3"},Yl={class:""},Wl={for:""},Zl={key:0,class:"text-danger"},Kl={class:"mt-3"},Gl={class:""},Ql={for:""},Xl={key:0,class:"text-danger"},xl={class:"mt-3"},Il={class:"typo__label"},eo={for:""},to={key:0,class:"text-danger"},so={class:"custom-option"},lo=["checked","onChange"],oo={class:"mt-3"},ao={class:""},no={class:"my-2 mb-5"},io={key:0,class:"form-check d-flex align-items-center p-0 pe-3"},ro=["disabled"],uo={key:1,class:"mt-2 position-relative mb-5"},co=["disabled"],po={key:0,class:"list-group position-absolute w-100 z-3 formslist"},mo=["onMousedown"],fo={key:1},vo={class:""},_o={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},ho={class:"d-flex gap-2 align-items-center"},bo={class:"requestandAppHeader"},go={class:"d-flex justify-content-between"},yo={class:"ps-2 pt-2"},ko={class:"d-flex"},wo={key:0,class:"role-container"},Co={key:0,class:"role-text d-flex align-items-center"},Do={class:"role-label"},So={class:"role-names"},Fo=["onClick"],$o=["onClick"],Vo=["onClick"],Ao=["onClick"],qo={class:"pt-0 section_block"},Eo={class:"d-flex justify-content-between align-items-center"},Uo={class:"d-flex flex-column"},To=["onUpdate:modelValue","onChange"],Lo={key:0,class:"text-danger font-10"},Bo={class:"d-flex align-items-center"},Mo=["onClick"],Oo={class:"container-fluid"},Ro={class:"d-flex justify-content-between align-items-center"},zo={class:"rownames"},No=["onClick"],jo={class:"col"},Po={class:"row"},Ho=["onMouseenter"],Jo={class:"column_name d-flex align-items-center justify-content-between"},Yo={class:"d-flex flex-column ps-2"},Wo=["onUpdate:modelValue","onChange"],Zo={key:0,class:"text-danger font-10"},Ko={class:"position-absolute top-0 end-0"},Go=["onClick"],Qo=["onDrop"],Xo=["onMouseenter","onDragstart","onDrop"],xo=["onDrop"],Io=["onDragstart","onDrop"],ea={class:"d-flex justify-content-between"},ta={class:"flex-column d-flex"},sa=["onUpdate:modelValue","onChange"],la={key:0,class:"text-danger font-10"},oa={class:"FieldcopyRemove"},aa=["onClick"],na=["onClick"],ia=["onUpdate:modelValue","onChange"],ra=["value"],ua={key:0},da=["onUpdate:modelValue"],ca={key:0,class:"text-danger font-10"},pa={key:1},ma=["for"],fa=["id","onUpdate:modelValue","onInput","onFocus"],va={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},_a=["onClick"],ha={class:"d-flex align-items-center justify-content-between"},ba={class:"d-flex align-items-center gap-2"},ga={class:"d-flex align-items-center"},ya=["onUpdate:modelValue"],ka=["onClick"],wa=["onUpdate:modelValue"],Ca={key:3,class:"text-danger font-10"},Da=["onDrop"],Sa={class:"childtableShow"},Fa={class:"mt-2"},$a={key:0,class:"childTableContainer"},Va={key:0,class:"font-13"},Aa={key:1,class:"d-flex align-items-center gap-2"},qa={class:"d-flex align-items-center"},Ea=["onUpdate:modelValue"],Ua={key:2,class:"table table-bordered rounded-table"},Ta=["onDrop"],La=["draggable","onDragstart"],Ba={key:0},Ma=["onUpdate:modelValue"],Oa={key:0,class:"font-11 text-danger"},Ra={key:1},za={key:2},Na={class:"d-flex gap-1"},ja=["onUpdate:modelValue"],Pa=["value"],Ha={class:"d-flex"},Ja={class:"d-flex align-items-center gap-2"},Ya={class:"d-flex align-items-center"},Wa=["onUpdate:modelValue"],Za=["onClick"],Ka={key:0},Ga=["onUpdate:modelValue"],Qa={key:0,class:"text-danger font-10"},Xa={key:1,class:"font-11 text-danger"},xa={key:3},Ia={key:3,class:"mb-2 mt-3"},en=["onClick"],tn=["onClick"],sn=["onDrop"],ln=["onDrop"],on={class:"d-flex justify-content-center align-items-center my-2"},an=["onClick"],nn={class:"font-13"},rn={key:0,class:"d-flex align-items-center gap-2"},un={class:"d-flex align-items-center"},dn=["onUpdate:modelValue"],cn={class:"table table-bordered rounded-table"},pn={key:0},mn=["onUpdate:modelValue","onBlur"],fn={key:0,class:"font-11 text-danger"},vn={key:1},_n={key:2},hn={class:"d-flex gap-1"},bn=["onUpdate:modelValue"],gn=["value"],yn=["onClick"],kn={key:0},wn=["onUpdate:modelValue"],Cn={key:0,class:"text-danger font-10"},Dn={key:1,class:"font-11 text-danger"},Sn={key:3},Fn={class:"mb-2"},$n=["onClick"],Vn=["onClick"],An=["onClick"],qn={key:0},En={class:"d-flex justify-content-between align-items-center mt-1 mb-2"},Un=["onUpdate:modelValue","onBlur"],Tn={key:0,class:"text-danger font-12"},Ln={key:1,class:"text-danger font-12"},Bn={class:"d-flex align-items-center gap-2"},Mn={class:"d-flex align-items-center"},On=["onUpdate:modelValue"],Rn=["onClick"],zn={class:"px-1 field-border"},Nn={class:"d-flex justify-content-between"},jn=["onUpdate:modelValue","onBlur"],Pn={key:0,class:"text-danger font-12"},Hn={class:"d-flex align-items-center"},Jn={class:"d-flex my-1"},Yn=["onUpdate:modelValue"],Wn=["onClick"],Zn=["onClick"],Kn=["onUpdate:modelValue"],Gn=["value"],Qn={key:0},Xn=["onUpdate:modelValue"],xn={key:0,class:"text-danger font-10"},In={key:1,class:"text-danger font-12"},ei=["onClick"],ti=["onClick"],si={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},li=["onClick"],oi={key:0,class:"m-2"},ai={key:2},ni={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},ii={class:"modal-dialog modal-dialog-centered"},ri={class:"modal-content"},ui={class:"modal-body"},di=["placeholder"],ci={class:"d-flex align-items-center gap-2"},pi={class:"d-flex align-items-center py-2"},mi={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},fi={class:"offcanvas-header add_designationHeader"},vi={id:"offcanvasRightLabel",class:"font-14"},_i={class:"offcanvas-body p-0"},hi={class:""},bi={class:""},gi={key:0,class:"p-3 py-4 approval-border-bottom d-flex align-items-center gap-3"},yi={class:"form-control","aria-disabled":""},ki={class:"font-12"},wi={class:"ms-2"},Ci=["value"],Di={key:1,class:"p-3 approval-border-bottom"},Si={class:"d-flex justify-content-start gap-5 mb-3"},Fi={key:0,class:"form-check ps-0"},$i=["disabled"],Vi={key:1,class:"form-check ps-0"},Ai=["disabled"],qi={key:0,class:"form-check ps-0"},Ei=["disabled"],Ui={class:"p-3 listofdesignations"},Ti={key:0,class:"form-check ps-1 mt-3"},Li={key:1,class:"list-unstyled designation-scroll"},Bi=["id","value"],Mi=["for"],Oi={key:2},Ri={class:"offcanvas-footer"},zi={class:"text-end p-3"},be="Select All",Ni={__name:"FormStepper",setup(A){const C=tl(),S=sl(),D=b(1),we=b([]);b([]);const ae=b([]),qe=b([]);X([]);let f=X([]),P=X([]);const G=b([]),te=b([]),He=b([]),re=b(""),Q=b(""),U=b("");let H=X([]);const Ee=b(""),ce=b(!1),pe=b(!1),me=b(!1),ge=b(""),Ft=b([]),$t=b([]),ne=X({}),N=b([]),Ue=b([]),Te=b(!1);let ot=null;const Vt=b("");let $=b("");const ye=x(()=>ul);b(!1);const Le=X([]),Z=b({routepath:C.query.routepath,business_unit:C.query.business_unit,formId:C.query.id}),Be=b(""),ke=b(!1),at=x({get(){return m.value.form_name||C.query.form_name||""},set(s){m.value.form_name=s}}),m=b({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${ye.value.value||Z.value.business_unit||C.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:"",is_linked:0,is_linked_form:"",is_predefined_doctype:C.query.id?1:0});he(()=>C.query.form_name,s=>{s&&(m.value.form_name=s,m.value.form_short_name=s)},{immediate:!0});const At=x(()=>m.value);b(""),b(!1),he(ye,s=>{s&&s.value&&(m.value.business_unit=s.value)},{immediate:!0});function qt(s){if($==null||$==="new")return!1;const e=se(s).roles;if(s===0)return e.length===0;const l=se(s-1).roles;return l.length>0&&l[0]!==null&&l[0]!==""&&e.length===0}he(()=>m.value.form_name,s=>{m.value.form_name=s.trim()}),he(()=>m.value.form_short_name,s=>{m.value.form_short_name=s.trim()}),he(()=>m.value.series,s=>{m.value.series=s.trim()});const Me=b(null),nt=(s,e,l,o,u,a)=>{Me.value={blockIndex:e,sectionIndex:l,rowIndex:o,columnIndex:u,fieldIndex:a}},fe=(s,e,l,o,u,a)=>{if(!Me.value)return;const{blockIndex:d,sectionIndex:c,rowIndex:_,columnIndex:r,fieldIndex:p}=Me.value,y=f[d].sections[c].rows[_].columns[r].fields,J=f[e].sections[l].rows[o].columns[u].fields;if(d===e&&c===l&&_===o&&r===u&&p===a)return;const h=y.splice(p,1)[0];y===J&&p<a&&a--,J.splice(a,0,h),Me.value=null},Oe=b(""),Et=s=>{const e=[["module","in",["User Forms"]],["istable","=",1]];s!=null&&s.trim()&&e.push(["name","like",`%${s}%`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"10"};return R.get(z.resource+I.doctypesList,{params:l}).then(o=>o.data||[]).catch(o=>(console.error("Error fetching doctype list:",o),[]))},Je=b(null),Ye=s=>et(this,null,function*(){if(s.tableName){const e=s.tableName.trim(),l=yield Et(e);Je.value=l.find(o=>o.name.toLowerCase()===e.toLowerCase()),Je.value&&(Oe.value="Table already exists")}else Oe.value="";s.label&&(s.fieldname=Zt(s.label))});function Ut(){const s=m.value.is_linked_form;if(!s){Ue.value=[];return}clearTimeout(ot),ot=setTimeout(()=>{const e=[["business_unit","like",`%${ye.value.value}%`],["name","like",`%${s}%`]],l={fields:JSON.stringify(["name"]),limit_page_length:10,limit_start:0,filters:JSON.stringify(e),order_by:"`tabEzy Form Definitions`.`enable` DESC, `tabEzy Form Definitions`.`creation` DESC"};R.get(`${z.resource}${I.EzyFormDefinitions}`,{params:l}).then(o=>{Ue.value=o.data||[]}).catch(o=>{console.error("Error fetching form definitions:",o)})},300)}function Tt(s){m.value.is_linked_form=s,Te.value=!1}function Lt(){setTimeout(()=>{Te.value=!1},200)}X({query:"",key:""});function ue(s,e,l,o,u){return`${s}-${e}-${l}-${o}-${u}`}X({});const Ce=X({}),We=X({});function Bt(s){We[s]=!0}function Mt(s,e,l,o,u,a){const d=ue(e,l,o,u,a),c=[["istable","=",0]];s!=null&&s.trim()&&c.push(["name","like",`%${s}%`]);const _={fields:JSON.stringify(["name"]),filters:JSON.stringify(c),limit_page_length:"10"};R.get(z.resource+I.doctypesList,{params:_}).then(r=>{Ce[d]=r.data||[]}).catch(r=>{console.error("Error fetching doctype list:",r),Ce[d]=[]})}function Ot(s,e,l,o,u,a){f[s].sections[e].rows[l].columns[o].fields[u].options=a;const d=ue(s,e,l,o,u);Ce[d]=[],We[d]=!1}const Rt=x(()=>f!=null&&f.length?U.value===1?[0]:Array.from({length:U.value},(s,e)=>e).filter(s=>s<U.value):[]),zt=x(()=>G.value.filter(s=>s.toLowerCase().includes(Ee.value.toLowerCase())).sort((s,e)=>{const l=te.value.includes(s),o=te.value.includes(e);return l===o?0:l?-1:1})),de=b(null),ve=b(null),Nt=(s,e,l,o,u)=>{de.value={blockIndex:s,sectionIndex:e,rowIndex:l,columnIndex:o,fieldIndex:u}},jt=()=>{de.value=null},Pt=(s,e,l,o,u)=>de.value&&de.value.blockIndex===s&&de.value.sectionIndex===e&&de.value.rowIndex===l&&de.value.columnIndex===o&&de.value.fieldIndex===u,Ht=(s,e,l,o)=>{ve.value={blockIndex:s,sectionIndex:e,rowIndex:l,columnIndex:o}},Jt=()=>{ve.value=null},Yt=(s,e,l,o)=>ve.value&&ve.value.blockIndex===s&&ve.value.sectionIndex===e&&ve.value.rowIndex===l&&ve.value.columnIndex===o,it=b([{form_json:""}]);ll(()=>{qs(),$.value=C.params.paramid||"new",$.value!=null&&$.value!=null&&$.value!="new"&&(mt(),Qe());let s=localStorage.getItem("Bu");if(m.value.business_unit=s,C.query.preId==="PreDefine"){const e=localStorage.getItem("form_json");if(e){it.value[0].form_json=e;const l=it.value[0],o=JSON.parse(l.form_json),u=wt(o.fields);N.value=o.child_table_fields,u.forEach(a=>{f.push(a)})}}});const Wt=b([]);function Zt(s){return s.toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]/g,"")}const Kt=(s,e)=>{const l=f[s].sections[e];l.childTables||(l.childTables=[]);const o=l.childTables.length;l.childTables.push({label:"",fieldname:"",fieldtype:"Table",idx:o,reqd:!1,as_a_block:"",description:"false",columns:[ie({label:"",fieldname:"",fieldtype:"",idx:0,description:"",reqd:!1},Le.fieldtype==="Select"&&Le.options?{options:Le.options?`
${Le.options}`:`
`}:{})],newTable:!0})},Gt=(s,e,l)=>{const o=f[s].sections[e].childTables[l];o.columns||(o.columns=[]),o.columns.push(ie({label:"",fieldname:"",fieldtype:"",idx:o.columns.length,description:"",reqd:!1},o.columns.fieldtype==="Select"&&o.columns.options?{options:o.columns.options?`
${o.columns.options}`:`
`}:{}))},Qt=(s,e,l)=>{f[s].sections[e].childTables.splice(l,1)},Xt=(s,e,l,o)=>{f[s].sections[e].childTables[l].columns.splice(o,1)},xt=(s,e,l)=>{var d;const o=f[s].sections[e].childTables[l],u={tableName:!1,columns:[]};let a=!1;return(d=o.tableName)!=null&&d.trim()||(u.tableName="Table name is required.",a=!0),o.columns.forEach((c,_)=>{var p,y;const r={};(p=c.label)!=null&&p.trim()||(r.label="Field Label is required",a=!0),(y=c.fieldtype)!=null&&y.trim()||(r.fieldtype="Please select field type",a=!0),u.columns[_]=r}),ne[`${s}-${e}-${l}`]=u,a},It=(s,e,l)=>{var u,a;const o=(a=(u=f[s])==null?void 0:u.sections)==null?void 0:a[e];o&&!Array.isArray(o[l])&&(o[l]=[])},rt=s=>s?s.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""):"",es=(s,e,l)=>{if(xt(s,e,l)){W.error("Please fix validation errors before creating the table",{transition:"zoom"});return}if(Je.value){W.error("Table already exists",{transition:"zoom"});return}const u=f[s].sections[e].childTables[l],a=f[s].sections[e];u.newTable=!1;const d={form_short_name:rt(u.tableName),fields:u.columns,idx:u.idx,as_a_block:u.as_a_block===1?"true":"false"};R.post(z.childtable,d).then(c=>{var _,r,p;if(c){It(s,e,"afterCreated"),a.afterCreated[l]=u,f[s].sections[e].childTables[l]=[],W.success("Table created successfully!",{autoClose:500,transition:"zoom"});const y=(p=(r=(_=c.message)==null?void 0:_[0])==null?void 0:r[0])==null?void 0:p.child_doc;f[s].sections[e].childTables[l]=y}}).catch(c=>{console.error("Error creating table:",c)})},ts=(s,e,l,o)=>{const a=f[s].sections[e].afterCreated.find(c=>c.tableName===l);if(!a)return;a.columns.splice(o,1),a.columns.forEach((c,_)=>{c.idx=_+1});const d=M.value[l];d&&(M.value[l]=d.filter(c=>c!==o).map(c=>c>o?c-1:c))},ss=(s,e,l)=>{const u=f[s].sections[e].afterCreated.find(d=>d.tableName===l);if(!u)return;const a=u.columns.length;u.columns.push({fieldname:"",fieldtype:"",idx:a+1,label:"",value:"",isNew:!0,description:""})},ut=b([]),ls=(s,e,l)=>{const u=f[s].sections[e].afterCreated.find(a=>a.tableName===l);if(u){if(T[l]){M.value[l]=[];let a=!0;if(u.columns.forEach((_,r)=>{(!_.label||!_.fieldtype)&&(M.value[l].push(r),a=!1)}),!a)return;const d=u.columns.map((y,p)=>{var J=y,{isNew:_}=J,r=Ie(J,["isNew"]);return Ve(ie({},r),{idx:p+1})}),c={form_short_name:rt(l),fields:d,as_a_block:u.description};R.post(z.childtable,c).then(_=>{ut.value=_.data,W.success("Fields updated successfully!",{autoClose:500})}).catch(_=>{console.error("❌ Saving fields failed:",_)})}T[l]=!T[l]}},T=X({}),os=s=>{N.value[s]||(N.value[s]=[]);const e=N.value[s].length+1;N.value[s].push({fieldname:"",fieldtype:"",idx:e,label:"",value:"",isNew:!0,description:"",options:N.value[s].options?`
${N.value[s].options}`:""})},as=(s,e)=>{N.value[s]&&N.value[s].splice(e,1)},_e=b(null),M=b({}),dt=b(null),ns=s=>{_e.value=s},is=()=>{_e.value=null},rs=s=>{s.preventDefault()},us=(s,e)=>{const l=s.target.closest("tr");if(!l)return;const o=Array.from(l.parentNode.children).indexOf(l);if(o!==_e.value){const u=e[_e.value];e.splice(_e.value,1),e.splice(o,0,u),_e.value=o}},ds=(s,e)=>{if(T[s]){M.value[s]=[];let l=!0;if(N.value[s].forEach((a,d)=>{(!a.label||!a.fieldtype)&&(M.value[s].push(d),l=!1)}),!l)return;let o=N.value[s].map((_,c)=>{var r=_,{isNew:a}=r,d=Ie(r,["isNew"]);return Ve(ie({},d),{idx:c})});const u={form_short_name:s,fields:o,as_a_block:e};R.post(z.childtable,u).then(a=>{W.success("Fields updated successfully!",{autoClose:500},{transition:"zoom"}),ut.value=a.data}).catch(a=>{console.error("❌ Saving fields failed:",a)})}T[s]=!T[s],dt.value=T[s]?s:null};he(N,s=>{Object.keys(s).forEach(e=>{s[e].forEach((l,o)=>{var u;l.label&&l.fieldtype&&(M.value[e]=(u=M.value[e])==null?void 0:u.filter(a=>a!==o))})})},{deep:!0});const cs=b([{id:1,label:"About Form",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Fields & Workflow",stepno:"Step 2",icon:"bi bi-question-circle"},{id:3,label:"Print Format",stepno:"Step 3",icon:"ri-checkbox-circle-line"}]),Ze=[{label:"Text",type:"Data"},{label:"Select",type:"Select"},{label:"Attach",type:"Attach"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Number",type:"Int"},{label:"TextArea",type:"Text"}],ps=[{label:"Text",type:"Data"},{label:"Time",type:"Time"},{label:"Text Area",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Data"},{label:"Check",type:"Check"},{label:"Number",type:"Int"},{label:"Select",type:"Select"},{label:"Multi Select",type:"Small Text"},{label:"Link",type:"Link"}],ms=x(()=>[be,...ae.value]),fs=x(()=>{const s=m.value.accessible_departments;return s.includes(be)?"All Selected":s.length>1?`${s[0]}.. +${s.length-1} more selected`:s.join(", ")}),vs=s=>s===be?m.value.accessible_departments.length===ae.value.length:m.value.accessible_departments.includes(s),_s=(s,e)=>{s===be?e.target.checked?m.value.accessible_departments=[...ae.value]:m.value.accessible_departments=[]:(e.target.checked?m.value.accessible_departments.push(s):m.value.accessible_departments=m.value.accessible_departments.filter(l=>l!==s),m.value.accessible_departments.length===ae.value.length?m.value.accessible_departments=[...ae.value]:m.value.accessible_departments=m.value.accessible_departments.filter(l=>l!==be))},hs=s=>{s===be&&(m.value.accessible_departments=[...ae.value])},bs=s=>{s===be&&(m.value.accessible_departments=[])},Ke=x({get(){return G.value.length>0&&G.value.every(s=>te.value.includes(s))},set(s){s?te.value=[...G.value]:te.value=[]}});function gs(){!Ke.value&&te.value.length}function ys(){const s=f[U.value];if(!s||!s.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:U.value==0?"requestor":"approver",roles:te.value,fields:s.sections.flatMap(lt),idx:U.value};U.value!==0&&(e.view_only_reportee=ce.value===!0?1:0,e.on_rejection=ge.value?ge.value:0,e.all_approvals_required=pe.value===!0?1:0,e.requester_as_a_approver=me.value===!0?1:0);const l=H.findIndex(o=>o.idx===e.idx);l!==-1?H[l]=e:H.push(e),Ds()}function se(s){return H.find(e=>e.idx===s)||{roles:[]}}function ks(s){const e=se(s),l=e.roles||[];te.value=[...l],ce.value=e.view_only_reportee===1,ge.value=e.on_rejection,pe.value=e.all_approvals_required===1,me.value=e.requester_as_a_approver===1}const Ge=s=>{Ee.value="",ce.value=!1,pe.value=!1,me.value=!1,ge.value="",m.value.accessible_departments.length&&Cs(m.value.accessible_departments),U.value=s,ks(s)},ws=b([]);function Cs(s){Array.isArray(s)&&s.length>0,R.get(z.resource+I.WFRoleMatrix+`/${m.value.business_unit}`).then(e=>{e.data&&(ws.value=e.data.users,G.value=[...new Set(e.data.users.map(l=>l.role_name))])}).catch(e=>{console.error("Error fetching designations data:",e)})}function Ds(){R.post(z.add_roles_WF,{workflow_setup:H,doctype:m.value.form_short_name,business_unit:m.value.business_unit}).then(s=>{console.log(s),U.value==0?W.success("Requestor Added",{autoClose:1e3,transition:"zoom"}):W.success(`Approver-${U.value} Added`,{autoClose:1e3,transition:"zoom"})})}function Ss(){S.push({path:Z.value.routepath||localStorage.getItem("routepath")}),localStorage.removeItem("form_json")}function Fs(){m.value.form_name="",m.value.form_short_name="",m.value.owner_of_the_form="",m.value.business_unit="",m.value.form_category="",m.value.accessible_departments=[]}const $s=s=>{if(ze.value){W.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}s<D.value?pt():s>D.value&&ct()},ct=()=>{if(ze.value){W.error("Please check all required fields before proceeding.",{autoClose:2e3,transition:"zoom"});return}D.value<3&&(D.value+=1,D.value===3&&(Ne.value=f))},pt=()=>{D.value>1&&(D.value-=1)},Vs=b([]);function mt(){R.get(z.resource+I.EzyFormDefinitions+`/${$.value}`).then(s=>{var l;let e=s==null?void 0:s.data;if(e){S.push({query:{id:e.name}}),e.accessible_departments&&(e.accessible_departments=e.accessible_departments.split(",")),m.value=Ve(ie(ie({},m.value),e),{owner_of_the_form:e.owner_of_the_form||m.value.owner_of_the_form||""});const o=JSON.parse((l=s.data)==null?void 0:l.form_json);Ft.value=o.workflow,Vt.value=o.fields.filter(a=>a.fieldtype==="Table"),Vs.value=o.fields.filter(a=>a.fieldtype==="Table"),ke.value=s.data.is_landscape;let u=wt(JSON.parse(e==null?void 0:e.form_json).fields);N.value=JSON.parse(s.data.form_json).child_table_fields,Wt.value=[],$t.value=[],u.forEach((a,d)=>{f.push(a)}),JSON.parse(e==null?void 0:e.form_json).workflow.forEach((a,d)=>{H.push(a)})}}).catch(s=>{console.error("Error fetching  data:",s)})}function As(){const s={};Be.value&&(s.print_format=Be.value),ke.value!==void 0&&ke.value!==null&&(s.is_landscape=ke.value),R.put(z.resource+I.EzyFormDefinitions+`/${C.query.id}`,s).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),W.success("Print Format Added Successfully",{autoClose:1e3,transition:"zoom"})}).catch(e=>{console.error("Error fetching  data:",e)})}function qs(){const s={fields:JSON.stringify(["*"]),limit_page_length:"none"};R.get(z.resource+I.departments,{params:s}).then(e=>{var l;(l=e==null?void 0:e.data)!=null&&l.length&&(qe.value=e.data.map(o=>o.name),ae.value=e.data.map(o=>o.name))}).catch(e=>{console.error("Error fetching department data:",e)})}he(()=>m.value.owner_of_the_form,s=>{s&&Qe(s)});function Qe(s){s&&typeof s=="string"&&s.trim()!==""&&Es(s)}function Es(s){R.get(z.resource+I.departments+`/${s}`).then(e=>{var l;(l=e==null?void 0:e.data)!=null&&l.ezy_departments_items&&(we.value=e.data.ezy_departments_items.map(o=>o.category))}).catch(e=>{console.error("Error fetching categories data:",e)})}function ft(s){let e=cl(f);const l=Ve(ie({},m.value),{fields:e,doctype:I.EzyFormDefinitions,workflow_setup:H,form_status:s==="save"?"Created":"Draft"});l.accessible_departments=l.accessible_departments.toString(),console.log(l,"---data obj"),R.post(z.savedata,l).then(o=>{if(o&&o.message&&o.message.message){let u=localStorage.getItem("preName");if(u){let a={installed:"Yes"};R.put(`${z.resource}${I.preDefinedForm}/${u}`,a).then(d=>{console.log(d),localStorage.removeItem("preName")}).catch(d=>{console.error("Error fetching ezyForms data:",d)})}S.push({params:{paramid:o.message.message},query:{id:o.message.message}}),$.value=o.message.message,$&&$!=="new"&&(f.splice(0,f.length),mt()),H.length<f.length?W.info("Add Workflow",{autoClose:2e3,transition:"zoom"}):vt.value===!0&&W.success("Form Created Successfully!",{autoClose:2e3,transition:"zoom",onClose:()=>{let a=localStorage.getItem("routepath");s==="save"?S.push({path:a}):s==="Draft"&&S.push({path:a})}})}else console.error("Invalid response structure:",o)}).catch(o=>{console.error("Error saving form data:",o)})}const Re=b(""),Us=()=>{var l,o;const s=f.length,e={label:s===0?"requestor":`approver-${s}`,parent:`${(l=ye.value)==null?void 0:l.value}-${(o=m.value)==null?void 0:o.form_short_name}`,sections:[{label:"",parent:`${ye.value.value}-${m.value.form_short_name}`,childTables:[],afterCreated:{},rows:s===0?[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]}]}]}]};f.push(e),dl(()=>{Re.value&&Re.value.scrollTo({top:Re.value.scrollHeight,behavior:"smooth"})})},vt=b(!1),Ts=s=>{let e=f[s];e.parent&&P.push(e),H.length>s&&H[s].roles&&[...H[s].roles],f.splice(s,1),H.length>s&&H.splice(s,1)},Ls=(s,e)=>{const l={label:"",parent:`${ye.value.value}-${m.value.form_short_name}`,rows:[{label:`row_0_${e}_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]};f[s].sections.splice(e+1,0,l)},Bs=(s,e)=>{let l=f[s].sections[e];l.parent&&P.push(l),f[s].sections.splice(e,1)},Ms=(s,e,l)=>{f[s].sections[e].rows[l].columns.push({label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]})},Os=(s,e,l,o)=>{const a=f[s].sections[e].rows[l].columns,d=a[o];d.parent&&P.push(d),a.length===1?f[s].sections[e].rows.splice(l,1):a.splice(o,1)},Rs=(s,e,l,o)=>{f[s].sections[e].rows[l].columns[o].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},zs=(s,e,l,o,u)=>{let a=f[s].sections[e].rows[l].columns[o].fields[u];a.parent&&P.push(a),f[s].sections[e].rows[l].columns[o].fields.splice(u,1)},Ns=(s,e,l,o,u)=>{const a=f[s].sections[e].rows[l].columns[o].fields[u],d=ie({},a);d.name=`${a.name} Name the field`,f[s].sections[e].rows[l].columns[o].fields.splice(u+1,0,d)},js=(s,e,l,o,u)=>{const a=St(f);f.splice(0,f.length,...a);let d=f[s].sections[e].rows[l].columns[o].fields[u].fieldtype;(d!=="Select"||d!=="radio"||d!=="multiselect")&&(f[s].sections[e].rows[l].columns[o].fields[u].options="")},Ps=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus"].map(s=>s.toLowerCase().trim()),Hs=["Approver","Approved on","Approved By"].map(s=>s.toLowerCase().trim());function Js(s){return Ps.includes(s==null?void 0:s.trim().toLowerCase())}function Ys(s){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(s)||s.includes('"')||s.includes("'")}function Ws(s){return s.flatMap(e=>{var l;return[(l=e.label)==null?void 0:l.trim().toLowerCase(),...e.sections.flatMap(o=>{var u;return[(u=o.label)==null?void 0:u.trim().toLowerCase(),...o.rows.flatMap(a=>a.columns.flatMap(d=>{var c;return[(c=d.label)==null?void 0:c.trim().toLowerCase(),...d.fields.map(_=>{var r;return(r=_.label)==null?void 0:r.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!Hs.includes(e))}function Xe(s,e,l,o,u){const d=Ws(f).filter((r,p,y)=>y.indexOf(r)!==p),c=St(f);f.splice(0,f.length,...c);function _(r,p){Js(r)?p.errorMsg="Entered label is restricted":Ys(r)?p.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:p.errorMsg=d.includes(r.trim().toLowerCase())?"Duplicate Label Name":""}u!==void 0&&_(f[s].sections[e].rows[l].columns[o].fields[u].label,f[s].sections[e].rows[l].columns[o].fields[u]),u===void 0&&o!==void 0&&_(f[s].sections[e].rows[l].columns[o].label,f[s].sections[e].rows[l].columns[o]),o===void 0&&u===void 0&&_(f[s].sections[e].label,f[s].sections[e])}const xe=x(()=>{function s(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(s):Object.values(e).some(s)}return s(f)}),ze=x(()=>re.value.length>0||Q.value.length>0||!m.value.form_category||!m.value.owner_of_the_form||m.value.accessible_departments.length===0),Zs=x(()=>f.some(s=>s.sections.some(e=>e.rows.some(l=>l.columns.some(o=>o.fields.some(u=>u.label&&u.fieldtype))))));function _t(s,e){let l=s.target.value.trim();if(!l){e==="form_name"?re.value="Input cannot be empty or only spaces":e==="form_short_name"&&(Q.value="Input cannot be empty or only spaces");return}if(/^\d/.test(l)){e==="form_short_name"&&(Q.value="First character must be a letter");return}else Q.value="";if(e==="form_short_name"&&/[^a-zA-Z ]/.test(l)){Q.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(l)){e==="form_name"?re.value="Special characters are not allowed":e==="form_short_name"&&(Q.value="Special characters are not allowed");return}else e==="form_name"?re.value="":e==="form_short_name"&&(Q.value="");const o=[[e,"=",`${l}`],["business_unit","like",`%${m.value.business_unit}%`]],u={fields:JSON.stringify(["form_name","form_short_name"]),filters:JSON.stringify(o)};R.get(`${z.resource}${I.EzyFormDefinitions}`,{params:u}).then(a=>{He.value=a.data,e==="form_name"?re.value=l&&He.value.some(d=>d.form_name&&d.form_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(Q.value=l&&He.value.some(d=>d.form_short_name&&d.form_short_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(a=>{console.error("Error fetching ezyForms data:",a),e==="form_name"?re.value="":e==="form_short_name"&&(Q.value="")})}const Ks=s=>s===0?"1st row":s===1?"2nd row":s===2?"3rd row":`${s+1}th row`,Ne=b([]),Gs=()=>{f.length&&(Ne.value=f,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function Qs(){R.post(z.delete_form_items,{deleted_fields:P.flatMap(lt),doctype:$}).then(s=>{var e;(e=s==null?void 0:s.message)!=null&&e.success&&ft()})}function ht(s){return et(this,null,function*(){if(xe.value){W.error("Please fix the errors before proceeding.");return}vt.value=!0;let e=P.flatMap(lt);$!=null&&$!=null&&$!="new"&&e.length?Qs():ft(s)})}return(s,e)=>(n(),i("div",null,[t("div",ml,[t("div",fl,[t("div",vl,[t("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=l=>Ss())},e[33]||(e[33]=[t("button",{class:"btn font-13 ms-3"},[t("i",{class:"bi bi-arrow-left"}),t("span",{class:"ms-2"},"Back")],-1)])),t("div",null,[D.value===2&&F(f).length&&!s.$route.query.id?(n(),i("button",{key:0,disabled:xe.value||ze.value,style:ol({cursor:xe.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=l=>ht("Draft"))},e[34]||(e[34]=[t("i",{class:"bi bi-bookmark-check-fill"},null,-1),j(" Save As Draft ")]),12,_l)):v("",!0)])]),t("div",hl,[t("div",bl,[t("div",gl,[t("div",yl,[t("ul",kl,[(n(!0),i(q,null,E(cs.value,l=>(n(),i("li",{key:l.id,class:B({active:D.value===l.id,completed:D.value>l.id})},[t("div",{class:B(["d-flex gap-3 align-items-center",{"not-allowed":ze.value&&D.value+1===l.id}]),onClick:o=>$s(l.id)},[D.value>l.id?(n(),i("i",Cl)):(n(),i("i",{key:1,class:B(l.icon)},null,2)),t("div",Dl,[t("span",Sl,g(l.stepno),1),e[35]||(e[35]=t("br",null,null,-1)),t("span",Fl,g(l.label),1)])],10,wl)],2))),128))])])]),t("div",$l,[t("div",Vl,[t("div",Al,[D.value===1?(n(),i("div",ql,[t("div",El,[t("div",Ul,[e[36]||(e[36]=t("div",null,null,-1)),e[37]||(e[37]=t("h1",{class:"font-14 fw-bold m-0"},"About Form",-1)),t("div",null,[s.$route.query.id?v("",!0):(n(),i("button",{key:0,class:"btn btn-light font-12 mx-2",type:"button",onClick:Fs},"Clear Form")),D.value<3?(n(),al(Ct,{key:1,class:"btn btn-dark bg-dark text-white fw-bold font-13",name:"Next",onClick:ct})):v("",!0)])])]),t("div",Tl,[t("div",Ll,[e[47]||(e[47]=t("div",{class:"col-4"},null,-1)),t("div",Bl,[t("div",Ml,[t("div",Ol,[t("div",Rl,[F(C).query.preId?(n(),i("span",zl,e[38]||(e[38]=[j("Predefined"),t("i",{class:"bi bi-check2-circle"},null,-1)]))):v("",!0),le(tt,{disabled:Z.value.formId&&Z.value.formId.length>0,labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Untitled Form",onChange:e[2]||(e[2]=l=>_t(l,"form_name")),modelValue:at.value,"onUpdate:modelValue":e[3]||(e[3]=l=>at.value=l)},null,8,["disabled","modelValue"]),re.value?(n(),i("span",Nl,g(re.value),1)):v("",!0)])]),t("div",jl,[t("div",Pl,[le(tt,{disabled:Z.value.formId&&Z.value.formId.length>0,labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Untitled Form",onChange:e[4]||(e[4]=l=>_t(l,"form_short_name")),modelValue:m.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value.form_short_name=l)},null,8,["disabled","modelValue"]),Q.value?(n(),i("span",Hl,g(Q.value),1)):v("",!0)]),t("div",null,[le(tt,{disabled:Z.value.formId&&Z.value.formId.length>0,labeltext:"Form Naming series",class:"formHeight mt-2",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Naming series",modelValue:m.value.series,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value.series=l)},null,8,["disabled","modelValue"]),e[39]||(e[39]=nl('<small class="text-muted" style="font-size:12px;" data-v-70f777de> Note : Enter <code data-v-70f777de>YY-YY</code>, <code data-v-70f777de>YYYY</code>, or <code data-v-70f777de>ABC</code>. The system will default to the format <code data-v-70f777de> 24-25-0001</code>, <code data-v-70f777de> 2025-0001</code>, or <code data-v-70f777de> ABC-0001</code> respectively. </small>',1))])]),t("div",Jl,[t("div",Yl,[t("label",Wl,[e[40]||(e[40]=j("Owner Of The Form ")),m.value.owner_of_the_form?v("",!0):(n(),i("span",Zl,"*"))]),le(F(Pe),{disabled:Z.value.formId&&Z.value.formId.length>0,options:qe.value,onChange:Qe,modelValue:m.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=l=>m.value.owner_of_the_form=l),placeholder:"Select Department",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["disabled","options","modelValue"])])]),t("div",Kl,[t("div",Gl,[t("label",Ql,[e[41]||(e[41]=j("Form Cateogry ")),m.value.form_category?v("",!0):(n(),i("span",Xl,"*"))]),le(F(Pe),{disabled:Z.value.formId&&Z.value.formId.length>0,options:we.value,modelValue:m.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=l=>m.value.form_category=l),placeholder:"Select Cateogry",multiple:!1,searchable:!0,class:"font-11 multiselect"},null,8,["disabled","options","modelValue"])])]),t("div",xl,[t("label",Il,[t("label",eo,[e[42]||(e[42]=j("Accessible to department ")),m.value.accessible_departments.length?v("",!0):(n(),i("span",to,"*"))])]),le(F(Pe),{modelValue:m.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=l=>m.value.accessible_departments=l),options:ms.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Department",class:"font-11",onSelect:hs,onRemove:bs},{option:Dt(({option:l})=>[t("div",so,[t("input",{type:"checkbox",checked:vs(l),class:"custom-checkbox",onChange:o=>_s(l,o),onClick:e[9]||(e[9]=oe(()=>{},["stop"]))},null,40,lo),t("span",null,g(l),1)])]),selection:Dt(({values:l,isOpen:o})=>[l.length?w((n(),i("span",{key:0,class:"multiselect__single font-10"},g(fs.value),513)),[[st,!o]]):v("",!0)]),_:1},8,["modelValue","options"])]),t("div",oo,[t("div",ao,[e[43]||(e[43]=t("label",{for:""},[j("Has Workflow "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),le(F(Pe),{options:["Yes","No"],modelValue:m.value.has_workflow,"onUpdate:modelValue":e[11]||(e[11]=l=>m.value.has_workflow=l),placeholder:"Select",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["modelValue"])])]),t("div",no,[F(C).query.preId?(n(),i("div",io,[w(t("input",{class:"form-check-input linketoCheck p-1",disabled:m.value.is_predefined_doctype==1,type:"checkbox",id:"is_linked","onUpdate:modelValue":e[12]||(e[12]=l=>m.value.is_linked=l),"true-value":1,"false-value":0},null,8,ro),[[ee,m.value.is_linked]]),e[44]||(e[44]=t("label",{class:"form-check-label font-12 mx-2 mb-0 ps-1",for:"is_linked"}," Link ",-1))])):v("",!0),e[46]||(e[46]=t("div",null,null,-1)),m.value.is_linked?(n(),i("div",uo,[e[45]||(e[45]=t("label",{for:"standardFormInput"},"Form",-1)),w(t("input",{type:"text",class:"form-control standardFormInput",id:"standardFormInput",disabled:m.value.is_predefined_doctype==1,"onUpdate:modelValue":e[13]||(e[13]=l=>m.value.is_linked_form=l),placeholder:"Type to search Form Name...",onInput:Ut,onFocus:e[14]||(e[14]=l=>Te.value=!0),onBlur:Lt},null,40,co),[[L,m.value.is_linked_form]]),Te.value&&Ue.value.length?(n(),i("ul",po,[(n(!0),i(q,null,E(Ue.value,(l,o)=>(n(),i("li",{class:"list-group-item formlistitem",key:o,onMousedown:oe(u=>Tt(l.name),["prevent"])},g(l.name),41,mo))),128))])):v("",!0)])):v("",!0)])])]),e[48]||(e[48]=t("div",{class:"col-4"},null,-1))])])])):v("",!0),D.value===2?(n(),i("div",fo,[t("div",vo,[t("div",_o,[t("h1",{onClick:e[15]||(e[15]=l=>pt()),class:"font-11 m-0"},e[49]||(e[49]=[t("i",{class:"bi bi-chevron-left"},null,-1),t("span",{class:"ms-2"},"Back To About Form",-1)])),t("div",ho,[t("div",null,[Zs.value?(n(),i("button",{key:0,class:"btn btn-light previewBtn d-flex align-items-center font-13",type:"button",onClick:Gs},e[50]||(e[50]=[t("i",{class:"bi bi-eye me-1 ms-1 mb-0"},null,-1),j("Preview ")]))):v("",!0)]),F(f).length?(n(),i("button",{key:0,class:"btn btn-dark font-10 Withborder border",type:"button",onClick:e[16]||(e[16]=l=>ht("save"))},g(F($)!=="new"?"Update Form":"Create Form"),1)):v("",!0)])]),le(il,{blockArr:Ne.value,formDescriptions:At.value,childHeaders:N.value},null,8,["blockArr","formDescriptions","childHeaders"]),t("div",{class:"main-block",ref_key:"mainBlockRef",ref:Re},[(n(!0),i(q,null,E(F(f),(l,o)=>(n(),i("div",{class:"block-level",key:o},[t("div",bo,[t("div",go,[t("div",null,[t("h6",yo,g(o===0?"Requestor Block":`Approver
                                  Block ${o}
                                  `),1)]),t("div",ko,[F($)&&F(H).length?(n(),i("div",wo,[se(o)?(n(),i("label",Co,[t("span",Do,g(se(o).roles.length>0?o===0?"Requestor: ":"Approver: ":""),1),t("span",So,g(se(o).roles.slice(0,2).join(", ")),1),se(o).roles.length>2?(n(),i("span",{key:0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:u=>Ge(o),class:"more-count"}," +"+g(se(o).roles.length-2)+" more ",9,Fo)):v("",!0)])):v("",!0)])):v("",!0),qt(o)&&F($)!=null&&F($)!=null&&F($)!="new"&&se(o).roles.length===0?(n(),i("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:u=>Ge(o)},e[51]||(e[51]=[t("img",{src:pl,alt:"Add",class:"me-1"},null,-1),j(" Add designations ")]),8,$o)):v("",!0),F($)!=null&&F($)!=null&&F($)!="new"&&se(o).roles.length>0?(n(),i("button",{key:2,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:u=>Ge(o)},e[52]||(e[52]=[t("i",{class:"bi bi-pencil font-14"},null,-1)]),8,Vo)):v("",!0),t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:u=>Ts(o)},e[53]||(e[53]=[t("i",{class:"bi bi-trash me-1"},null,-1),j(" Delete Block ")]),8,Ao)])])]),t("div",qo,[(n(!0),i(q,null,E(l.sections,(u,a)=>(n(),i("div",{key:"section-"+a,class:"dynamicSection mt-0 section"},[t("section",Eo,[t("div",Uo,[w(t("input",{"onUpdate:modelValue":d=>u.label=d,type:"text",class:B(["border-less-input","font-14",{"italic-style":!u.label},{"fw-medium":u.label}]),onChange:d=>Xe(o,a),placeholder:"Untitled section"},null,42,To),[[L,u.label]]),u.errorMsg?(n(),i("small",Lo,g(u.errorMsg),1)):v("",!0)]),t("div",Bo,[t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:d=>Bs(o,a)},e[54]||(e[54]=[t("i",{class:"bi bi-trash me-1"},null,-1),j(" Delete Section ")]),8,Mo)])]),t("div",Oo,[(n(!0),i(q,null,E(u.rows,(d,c)=>(n(),i("section",{class:"row dynamicRow row-container",key:"row-"+c},[t("div",Ro,[t("label",zo,g(Ks(c)),1),t("div",null,[d.columns.length<3?(n(),i("button",{key:0,class:"btn btn-light bg-transparent border-0 font-12",onClick:_=>Ms(o,a,c)},e[55]||(e[55]=[t("i",{class:"bi bi-plus font-14"},null,-1),j(" Add Column ")]),8,No)):v("",!0)])]),t("div",jo,[t("div",Po,[(n(!0),i(q,null,E(d.columns,(_,r)=>(n(),i("div",{key:"column-"+r,onMouseenter:p=>Ht(o,a,c,r),onMouseleave:Jt,class:"col p-0 dynamicColumn position-relative column-container"},[t("div",Jo,[t("div",Yo,[w(t("input",{"onUpdate:modelValue":p=>_.label=p,type:"text",class:B(["border-less-input","ps-1","font-14","inputHeight",{"italic-style":!_.label},{"fw-medium":_.label}]),onChange:p=>Xe(o,a,c,r),placeholder:"Column Name"},null,42,Wo),[[L,_.label]]),_.errorMsg?(n(),i("small",Zo,g(_.errorMsg),1)):v("",!0)]),w(t("div",Ko,[t("button",{class:"btn btn-light bg-transparent me-1 btn-sm",onClick:p=>Os(o,a,c,r)},e[56]||(e[56]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Go)],512),[[st,Yt(o,a,c,r)]])]),_.fields.length===0?(n(),i("div",{key:0,class:"empty-drop-zone",onDragover:e[17]||(e[17]=oe(()=>{},["prevent"])),onDrop:p=>fe(p,o,a,c,r,s.fieldIndex)},null,40,Qo)):v("",!0),(n(!0),i(q,null,E(_.fields,(p,y)=>{var J;return n(),i("div",{key:"field-"+y,onMouseenter:h=>Nt(o,a,c,r,y),onMouseleave:jt,class:"dynamicField m-1 draggable-item",draggable:"true",onDragstart:h=>nt(h,o,a,c,r,y),onDragover:e[21]||(e[21]=oe(()=>{},["prevent"])),onDrop:h=>fe(h,o,a,c,r,y)},[t("div",{class:"drop-zone",onDragover:e[18]||(e[18]=oe(()=>{},["prevent"])),onDrop:h=>fe(h,o,a,c,r,y)},null,40,xo),p.fieldtype!=="Table"?(n(),i("div",{key:0,class:"px-1 dynamic_fied field-border",draggable:"true",onDragstart:h=>nt(h,o,a,c,r,y),onDragover:e[19]||(e[19]=oe(()=>{},["prevent"])),onDrop:h=>fe(h,o,a,c,r,y)},[t("div",ea,[t("div",ta,[w(t("input",{"onUpdate:modelValue":h=>p.label=h,placeholder:"Name the field",class:B(["border-less-input","font-14","p-0","inputHeight",{"italic-style":!p.label},{"fw-medium":p.label}]),onChange:h=>Xe(o,a,c,r,y)},null,42,sa),[[L,p.label]]),p.errorMsg?(n(),i("small",la,g(p.errorMsg),1)):v("",!0)]),w(t("div",oa,[t("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:h=>Ns(o,a,c,r,y)},e[57]||(e[57]=[t("i",{class:"ri-file-copy-line font-13 copyIcon"},null,-1)]),8,aa),t("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:h=>zs(o,a,c,r,y)},e[58]||(e[58]=[t("i",{class:"bi bi-x-lg font-13"},null,-1)]),8,na)],512),[[st,Pt(o,a,c,r,y)]])]),w(t("select",{"onUpdate:modelValue":h=>p.fieldtype=h,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:h=>js(o,a,c,r,y)},[e[59]||(e[59]=t("option",{value:""},"Select Type",-1)),(n(),i(q,null,E(ps,h=>t("option",{key:h,value:h.type},g(h.label),9,ra)),64))],40,ia),[[Ae,p.fieldtype]]),["Select","Table MultiSelect","Small Text"].includes(p.fieldtype)?(n(),i("div",ua,[e[60]||(e[60]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":h=>p.options=h,class:"form-control shadow-none mb-1 font-12"},null,8,da),[[L,p.options]]),!p.options||p.options.trim()===""?(n(),i("small",ca," Options are required for this field type. ")):v("",!0)])):v("",!0),p.fieldtype==="Link"?(n(),i("div",pa,[t("label",{class:"font-11 fw-light",for:"link-search-"+ue(o,a,c,r,y)}," Search Doctype: ",8,ma),w(t("input",{id:"link-search-"+ue(o,a,c,r,y),type:"text","onUpdate:modelValue":h=>F(f)[o].sections[a].rows[c].columns[r].fields[y].options=h,onInput:h=>Mt(F(f)[o].sections[a].rows[c].columns[r].fields[y].options,o,a,c,r,y),onFocus:h=>Bt(ue(o,a,c,r,y)),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,40,fa),[[L,F(f)[o].sections[a].rows[c].columns[r].fields[y].options]]),(J=Ce[ue(o,a,c,r,y)])!=null&&J.length&&We[ue(o,a,c,r,y)]?(n(),i("ul",va,[(n(!0),i(q,null,E(Ce[ue(o,a,c,r,y)],(h,k)=>(n(),i("li",{key:k,onClick:V=>Ot(o,a,c,r,y,h.name),class:"list-group-item list-group-item-action"},g(h.name),9,_a))),128))])):v("",!0)])):v("",!0),t("div",ha,[t("div",ba,[t("div",ga,[w(t("input",{class:"font-12","onUpdate:modelValue":h=>p.reqd=h,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,ya),[[ee,p.reqd]])]),e[61]||(e[61]=t("div",null,[t("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Mandatory")],-1))]),t("div",null,[t("button",{class:"btn btn-sm font-12",onClick:h=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,ka)])]),p.showDescription?w((n(),i("textarea",{key:2,"onUpdate:modelValue":h=>p.description=h,class:"form-control font-12 mt-2",placeholder:"Enter field description"},null,8,wa)),[[L,p.description]]):v("",!0),p.error?(n(),i("small",Ca,g(p.error),1)):v("",!0)],40,Io)):v("",!0),t("div",{class:"drop-zone",onDragover:e[20]||(e[20]=oe(()=>{},["prevent"])),onDrop:h=>fe(h,o,a,c,r,y)},null,40,Da),t("div",Sa,[t("div",null,[t("div",null,[t("div",Fa,[p.fieldtype==="Table"?(n(),i("div",$a,[(n(!0),i(q,null,E(N.value,(h,k)=>(n(),i("div",{key:k,class:"childTable"},[k===p.fieldname||k===p.options?(n(),i("h5",Va,g(k.replace(/_/g," ")),1)):v("",!0),T[k]&&k===dt.value?(n(),i("div",Aa,[t("div",qa,[w(t("input",{class:"font-12","onUpdate:modelValue":V=>p.description=V,"true-value":"true","false-value":"fasle",placeholder:"Field Name",type:"checkbox"},null,8,Ea),[[ee,p.description]])]),e[62]||(e[62]=t("div",null,[t("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])):v("",!0),k===p.options||k===p.fieldname?(n(),i("table",Ua,[e[66]||(e[66]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Label"),t("th",null,"Field Type")])],-1)),t("tbody",{onDragover:oe(rs,["prevent"]),onDrop:V=>us(V,h)},[(n(!0),i(q,null,E(h,(V,K)=>{var De,Se,Fe,$e;return n(),i("tr",{key:K,draggable:T[k],onDragstart:O=>ns(K),onDragend:is,class:B({dragging:_e.value===K})},[t("td",null,g(K+1),1),T[k]?(n(),i("td",Ba,[w(t("input",{"onUpdate:modelValue":O=>V.label=O,placeholder:"Field Label",class:B(["form-control",{"border-1 border-danger":(De=M.value[k])==null?void 0:De.includes(K)}])},null,10,Ma),[[L,V.label]]),(Se=M.value[k])!=null&&Se.includes(K)?(n(),i("span",Oa,"Label required**")):v("",!0)])):(n(),i("td",Ra,g(V.label),1)),T[k]?(n(),i("td",za,[t("div",Na,[w(t("select",{"onUpdate:modelValue":O=>V.fieldtype=O,class:B(["form-select form-select-sm",{"border-1 border-danger":(Fe=M.value[k])==null?void 0:Fe.includes(K)}])},[e[63]||(e[63]=t("option",{value:""},"Select Type",-1)),(n(),i(q,null,E(Ze,O=>t("option",{key:O.type,value:O.type},g(O.label),9,Pa)),64))],10,ja),[[Ae,V.fieldtype]]),t("div",Ha,[t("div",Ja,[t("div",Ya,[w(t("input",{class:"font-12 form-control-sm","onUpdate:modelValue":O=>V.description=O,placeholder:"description",type:"text"},null,8,Wa),[[L,V.description]])])]),t("button",{class:"btn btn-light btn-sm",onClick:O=>as(k,K)},e[64]||(e[64]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Za)])]),["Select"].includes(V.fieldtype)?(n(),i("div",Ka,[e[65]||(e[65]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":O=>V.options=O,class:"form-control shadow-none mb-1 font-12"},null,8,Ga),[[L,V.options]]),!V.options||V.options.trim()===""?(n(),i("small",Qa," Options are required for this field type. ")):v("",!0)])):v("",!0),($e=M.value[k])!=null&&$e.includes(K)?(n(),i("span",Xa,"Type required**")):v("",!0)])):(n(),i("td",xa,g(V.fieldtype),1))],42,La)}),128))],40,Ta)])):v("",!0),p.fieldtype==="Table"&&(p.label===k||p.fieldname===k)?(n(),i("div",Ia,[t("button",{class:"btn btn-light btn-sm mx-2",onClick:V=>ds(k,p.description)},g(T[k]?"Save":"Edit"),9,en),T[k]?(n(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:V=>os(k)}," Add More Field ",8,tn)):v("",!0)])):v("",!0)]))),128))])):v("",!0)])])])])],40,Xo)}),128)),t("div",{class:"drop-zone-bottom",onDragover:e[22]||(e[22]=oe(()=>{},["prevent"])),onDrop:p=>fe(p,o,a,c,r,_.fields.length),style:{"background-color":"#f0f0f0",border:"1px dashed #ccc",margin:"4px"}},null,40,sn),t("div",{class:"drop-zone",onDragover:e[23]||(e[23]=oe(()=>{},["prevent"])),onDrop:p=>fe(p,o,a,c,r,s.fields.length),style:{height:"10px","background-color":"transparent"}},null,40,ln),t("div",on,[t("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:p=>Rs(o,a,c,r)},e[67]||(e[67]=[t("i",{class:"bi bi-plus fs-5"},null,-1),t("span",null,"Add Field",-1)]),8,an)])],40,Ho))),128))])])]))),128)),t("div",null,[(n(!0),i(q,null,E(u.afterCreated,(d,c)=>(n(),i("div",{key:c,class:"childTable dynamicColumn m-0 p-2"},[t("h5",nn,g(d.tableName),1),T[d.tableName]?(n(),i("div",rn,[t("div",un,[w(t("input",{class:"font-12","onUpdate:modelValue":_=>d.description=_,"true-value":"true","false-value":"fasle",placeholder:"Field Name",type:"checkbox"},null,8,dn),[[ee,d.description]])]),e[68]||(e[68]=t("div",null,[t("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])):v("",!0),t("table",cn,[e[72]||(e[72]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Label"),t("th",null,"Field Type")])],-1)),t("tbody",null,[(n(!0),i(q,null,E(d.columns,(_,r)=>{var p,y,J,h;return n(),i("tr",{key:r},[t("td",null,g(r+1),1),T[d.tableName]?(n(),i("td",pn,[w(t("input",{"onUpdate:modelValue":k=>_.label=k,placeholder:"Field Label",class:B(["form-control",{"border-1 border-danger":(p=M.value[d.tableName])==null?void 0:p.includes(r)}]),onBlur:k=>Ye(_)},null,42,mn),[[L,_.label]]),(y=M.value[c])!=null&&y.includes(r)?(n(),i("span",fn,"Label required**")):v("",!0)])):(n(),i("td",vn,g(_.label),1)),T[d.tableName]?(n(),i("td",_n,[t("div",hn,[w(t("select",{"onUpdate:modelValue":k=>_.fieldtype=k,class:B(["form-select form-select-sm",{"border-1 border-danger":(J=M.value[d.tableName])==null?void 0:J.includes(r)}])},[e[69]||(e[69]=t("option",{value:""},"Select Type",-1)),(n(),i(q,null,E(Ze,k=>t("option",{key:k.type,value:k.type},g(k.label),9,gn)),64))],10,bn),[[Ae,_.fieldtype]]),t("button",{class:"btn btn-light btn-sm",onClick:k=>ts(o,a,d.tableName,r)},e[70]||(e[70]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,yn)]),["Select"].includes(_.fieldtype)?(n(),i("div",kn,[e[71]||(e[71]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":k=>_.options=k,class:"form-control shadow-none mb-1 font-12"},null,8,wn),[[L,_.options]]),!_.options||_.options.trim()===""?(n(),i("small",Cn," Options are required for this field type. ")):v("",!0)])):v("",!0),(h=M.value[d.tableName])!=null&&h.includes(r)?(n(),i("span",Dn,"Type required**")):v("",!0)])):(n(),i("td",Sn,g(_.fieldtype),1))])}),128))])]),t("div",Fn,[t("button",{class:"btn btn-light btn-sm mx-2",onClick:_=>ls(o,a,d.tableName)},g(T[d.tableName]?"Save":"Edit"),9,$n),T[d.tableName]?(n(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:_=>ss(o,a,d.tableName)}," Add More Field ",8,Vn)):v("",!0)])]))),128))])]),t("div",null,[t("div",null,[t("button",{class:"btn btn-light addRow mb-3 mt-4",onClick:d=>Kt(o,a)}," Add New Table ",8,An),(n(!0),i(q,null,E(u.childTables,(d,c)=>{var _;return n(),i("div",{key:`table-${o}-${a}-${c}`,class:"child-table"},[d.newTable?(n(),i("div",qn,[t("div",En,[t("div",null,[t("span",{class:B(d.tableName?"d-none":"text-danger")},"*",2),w(t("input",{"onUpdate:modelValue":r=>d.tableName=r,placeholder:"Table Name",onBlur:r=>Ye(d),class:B(["border-less-input font-14 p-0 inputHeight",{"italic-style":!d.tableName,"fw-medium":d.tableName}])},null,42,Un),[[L,d.tableName]]),(_=ne[`${o}-${a}-${c}`])!=null&&_.tableName?(n(),i("div",Tn,g(ne[`${o}-${a}-${c}`].tableName),1)):v("",!0),Oe.value?(n(),i("div",Ln,g(Oe.value),1)):v("",!0),t("div",Bn,[t("div",Mn,[w(t("input",{class:"font-12","onUpdate:modelValue":r=>d.as_a_block=r,"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,On),[[ee,d.as_a_block]])]),e[73]||(e[73]=t("div",null,[t("label",{for:"mandatory",class:"font-12 m-0 fw-light"},"Show as Blocks")],-1))])]),t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:r=>Qt(o,a,c)},e[74]||(e[74]=[t("i",{class:"bi bi-trash"},null,-1),j(" Remove Table ")]),8,Rn)]),(n(!0),i(q,null,E(d.columns,(r,p)=>{var y,J,h,k,V,K,De,Se,Fe,$e,O,bt;return n(),i("div",{key:p,class:"dynamicField"},[t("div",zn,[t("div",Nn,[t("div",null,[t("span",{class:B(r.label?"d-none":"text-danger")},"*",2),w(t("input",{"onUpdate:modelValue":Y=>r.label=Y,placeholder:"Name the field",onBlur:Y=>Ye(r),class:B(["border-less-input font-14 p-0 inputHeight",{"italic-style":!r.label,"fw-medium":r.label,"is-invalid":(h=(J=(y=ne[`${o}-${a}-${c}`])==null?void 0:y.columns)==null?void 0:J[p])==null?void 0:h.label}])},null,42,jn),[[L,r.label]]),(K=(V=(k=ne[`${o}-${a}-${c}`])==null?void 0:k.columns)==null?void 0:V[p])!=null&&K.label?(n(),i("div",Pn,g(ne[`${o}-${a}-${c}`].columns[p].label),1)):v("",!0)]),t("div",Hn,[t("div",Jn,[r.showDescription?w((n(),i("input",{key:0,"onUpdate:modelValue":Y=>r.description=Y,class:"form-control font-12",placeholder:"Enter field description"},null,8,Yn)),[[L,r.description]]):v("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:Y=>r.showDescription=!r.showDescription},g(r.showDescription?"Hide Description":r.description?"Edit Description":"Add Description"),9,Wn)]),t("button",{class:"btn btn-sm trash-btn py-0",onClick:Y=>Xt(o,a,c,p)},e[75]||(e[75]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Zn)])]),w(t("select",{"onUpdate:modelValue":Y=>r.fieldtype=Y,class:B(["form-select font-13 mb-1",{"is-invalid":(Fe=(Se=(De=ne[`${o}-${a}-${c}`])==null?void 0:De.columns)==null?void 0:Se[p])==null?void 0:Fe.fieldtype}])},[e[76]||(e[76]=t("option",{value:""},"Select Type",-1)),(n(),i(q,null,E(Ze,Y=>t("option",{key:Y.type,value:Y.type},g(Y.label),9,Gn)),64))],10,Kn),[[Ae,r.fieldtype]]),["Select"].includes(r.fieldtype)?(n(),i("div",Qn,[e[77]||(e[77]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),w(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":Y=>r.options=Y,class:"form-control shadow-none mb-1 font-12"},null,8,Xn),[[L,r.options]]),!r.options||r.options.trim()===""?(n(),i("small",xn," Options are required for this field type. ")):v("",!0)])):v("",!0),(bt=(O=($e=ne[`${o}-${a}-${c}`])==null?void 0:$e.columns)==null?void 0:O[p])!=null&&bt.fieldtype?(n(),i("div",In,g(ne[`${o}-${a}-${c}`].columns[p].fieldtype),1)):v("",!0)])])}),128)),t("button",{class:"btn btn-light btn-sm addField mx-1",onClick:r=>Gt(o,a,c)},e[78]||(e[78]=[t("i",{class:"bi bi-plus"},null,-1),j(" Add Field ")]),8,ei),t("button",{class:"btn btn-dark btn-sm font-12 mx-1",onClick:r=>es(o,a,c)}," Create Table ",8,ti),e[79]||(e[79]=t("hr",null,null,-1))])):v("",!0)])}),128))])]),t("div",si,[t("button",{class:"btn btn-light border font-12",onClick:d=>Ls(o,a)},e[80]||(e[80]=[t("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),j(" Add Section ")]),8,li)])]))),128)),o===0?(n(),i("div",oi)):v("",!0)])]))),128)),t("div",{class:B(["d-flex justify-content-center align-items-center add-block-btn-div py-4  ",{"background-color-white":F(f).length}])},[t("button",{class:"btn btn-light border d-flex align-items-center font-12",onClick:Us},[e[81]||(e[81]=t("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1)),j(" "+g(F(f).length===0?"Add Requestor Block":"Add Approval Block"),1)])],2)],512)])])):v("",!0),D.value===3?(n(),i("div",ai,[e[82]||(e[82]=t("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[t("div",null,[t("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),t("div")],-1)),le(rl,{blockArr:Ne.value},null,8,["blockArr"])])):v("",!0)])])])])])])]),t("div",ni,[t("div",ii,[t("div",ri,[e[85]||(e[85]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",ui,[w(t("input",{"onUpdate:modelValue":e[24]||(e[24]=l=>Be.value=l),multiple:!1,placeholder:F(C).query.id,class:"font-11 form-control",searchable:!0},null,8,di),[[L,Be.value]]),t("div",ci,[t("div",pi,[w(t("input",{class:"font-12","onUpdate:modelValue":e[25]||(e[25]=l=>ke.value=l),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[ee,ke.value]])]),e[83]||(e[83]=t("div",null,[t("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),t("div",{class:"modal-footer"},[e[84]||(e[84]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:As},"Add Print Format")])])])]),t("div",mi,[t("div",fi,[t("span",vi,g(U.value==0?"Add designation for Requestor":`Approval Settings For
          Level-${U.value}`),1),e[86]||(e[86]=t("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),t("div",_i,[t("div",hi,[t("div",bi,[U.value!==0?(n(),i("div",gi,[t("div",null,[t("div",yi,[t("span",ki,"Approver Level "+g(U.value),1)])]),e[88]||(e[88]=t("div",null,[t("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),t("div",wi,[w(t("select",{"onUpdate:modelValue":e[26]||(e[26]=l=>ge.value=l),class:"form-select font-12 mt-1 me-2"},[e[87]||(e[87]=t("option",{disabled:"",value:""},"Select Lower Level",-1)),(n(!0),i(q,null,E(Rt.value,l=>(n(),i("option",{key:l,value:l},g(l===0?"Requester":"Approver Level "+l),9,Ci))),128))],512),[[Ae,ge.value,void 0,{number:!0}]])])])):v("",!0),U.value!==0?(n(),i("div",Di,[t("div",Si,[U.value!==0?(n(),i("div",Fi,[t("div",null,[w(t("input",{type:"checkbox",id:"ViewOnlyReportee","onUpdate:modelValue":e[27]||(e[27]=l=>ce.value=l),disabled:me.value||pe.value,class:"me-2 mt-0 form-check-input designationCheckBox"},null,8,$i),[[ee,ce.value]]),e[89]||(e[89]=t("label",{for:"ViewOnlyReportee",class:"SelectallDesignation text-nowrap fw-bold mt-1 form-check-label"},"View Only Reportee",-1))])])):v("",!0),U.value!==0?(n(),i("div",Vi,[t("div",null,[w(t("input",{type:"checkbox",id:"all_approvals_required","onUpdate:modelValue":e[28]||(e[28]=l=>pe.value=l),disabled:ce.value||me.value,class:"me-2 mt-0 form-check-input designationCheckBox"},null,8,Ai),[[ee,pe.value]]),e[90]||(e[90]=t("label",{for:"all_approvals_required",class:"SelectallDesignation text-nowrap fw-bold mt-1 form-check-label"},"All Approvers Required",-1))])])):v("",!0)]),U.value!==0?(n(),i("div",qi,[t("div",null,[w(t("input",{type:"checkbox",id:"requester_as_a_approver","onUpdate:modelValue":e[29]||(e[29]=l=>me.value=l),disabled:ce.value||pe.value,class:"me-2 mt-0 form-check-input designationCheckBox"},null,8,Ei),[[ee,me.value]]),e[91]||(e[91]=t("label",{for:"requester_as_a_approver",class:"SelectallDesignation text-nowrap fw-bold mt-1 form-check-label"},"Requested Only",-1))])])):v("",!0)])):v("",!0)])]),t("div",Ui,[w(t("input",{"onUpdate:modelValue":e[30]||(e[30]=l=>Ee.value=l),class:"SearchDesignation rounded-2 form-control shadow-none my-1",type:"text",placeholder:"Search Designation"},null,512),[[L,Ee.value]]),G.value.length?(n(),i("div",Ti,[t("div",null,[w(t("input",{type:"checkbox",id:"selectAll","onUpdate:modelValue":e[31]||(e[31]=l=>Ke.value=l),class:"me-2 mt-0 designationCheckBox form-check-input"},null,512),[[ee,Ke.value]]),e[92]||(e[92]=t("label",{for:"selectAll",class:"SelectallDesignation fw-bold mx-2 form-check-label"},"Select all",-1))])])):v("",!0),G.value.length?(n(),i("ul",Li,[(n(!0),i(q,null,E(zt.value,(l,o)=>(n(),i("li",{key:o,class:"designationList form-check"},[w(t("input",{type:"checkbox",id:`SelectedDisignation_${o}`,"onUpdate:modelValue":e[32]||(e[32]=u=>te.value=u),value:l,class:"designationCheckBox form-check-input mt-0",onChange:gs},null,40,Bi),[[ee,te.value]]),t("label",{for:`SelectedDisignation_${o}`,class:"ps-2"},g(l),9,Mi)]))),128))])):(n(),i("div",Oi,e[93]||(e[93]=[t("div",{class:"d-flex justify-content-center"},[t("span",null,"No Designations Found")],-1)])))])]),t("div",Ri,[t("div",zi,[le(Ct,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:ys,name:" Add Designations"})])])])]))}},Hi=el(Ni,[["__scopeId","data-v-70f777de"]]);export{Hi as default};
