import{_ as w,x as F,E as C,r as i,u as x,M as S,w as A,o as T,c as B,d as u,t as I,b as g,G as M,P as U,y as N,z as O}from"./index-3RJITvDl.js";const V={class:"d-flex justify-content-between align-items-center py-2"},E={class:"m-0 font-11 pt-1"},G={class:"mt-2"},j={__name:"MyTeam",setup(z){const y=F(()=>C.value),c=i({business_unit:""}),p=x(),d=S(),t=i({limitPageLength:20,limit_start:0,filters:[]}),l=i(0),s=i([]),v=i(null),r=i([]),n=i([]),_=i([{th:"Request ID",td_key:"name"},{th:"Form Name",td_key:"doctype_name"},{th:"Requester Name",td_key:"requester_name"},{th:"Requested on",td_key:"requested_on"},{th:"Requester Department",td_key:"department_name"},{th:"Last Action On",td_key:"modified"},{th:"Approval Status",td_key:"status"},{th:"Pending With",td_key:"assigned_to_users"},{th:"Linked ID",td_key:"linked_form_id"}]),f=i({name:{type:"input"},status:{type:"select",options:["Request Raised","In Progress","Completed","Request Cancelled"]},department_name:{type:"input"},doctype_name:{type:"input"},requested_on:{type:"date"},requester_name:{type:"input"}}),h=i([{name:"View Request",icon:"fa-solid fa-eye"},{name:"PDF Format",icon:"bi bi-filetype-pdf"}]);function k(e,a){a.name==="View Request"?console.log(e,"rowData"):a.name}function P(e,a,o){o==="view"&&d.push({name:"ApproveRequest",query:{routepath:p.path,name:e.name,doctype_name:e.doctype_name,type:"myteam",readOnly:"true"}}),o==="td_key"&&e.linked_form_id&&d.push({name:"ApproveRequest",query:{routepath:p.path,name:e.linked_form_id,business_unit:e.property,type:"linkedForm",readOnly:"true"}})}function q(){JSON.parse(localStorage.getItem("employeeData"));const e={property_field:c.value.business_unit};N.get(O.GetEmployeeForms,{params:e}).then(a=>{r.value=a.message||[],n.value=[...r.value],l.value=n.value.length,t.value.limit_start=0,s.value=n.value.slice(0,t.value.limitPageLength)}).catch(a=>{console.error(a)})}function R(e=n.value){const a=e.slice(t.value.limit_start,t.value.limit_start+t.value.limitPageLength);s.value=a,l.value=e.length}function b(e){clearTimeout(v.value),v.value=setTimeout(()=>{n.value=r.value.filter(a=>_.value.every(o=>{const m=o.td_key;return e[m]?String(a[m]||"").toLowerCase().includes(String(e[m]).toLowerCase()):!0})),l.value=n.value.length,t.value.limitPageLength=20,t.value.limit_start=0,s.value=n.value.slice(0,t.value.limitPageLength)},500)}function L(e){t.value.limitPageLength=e,t.value.limit_start=0,R()}function D(){t.value.limit_start+=t.value.limitPageLength;const e=n.value.slice(t.value.limit_start,t.value.limit_start+t.value.limitPageLength);s.value=[...s.value,...e]}return A(y,e=>{c.value.business_unit=e,e.length&&q()},{immediate:!0}),(e,a)=>(T(),B("div",null,[u("div",V,[u("div",null,[a[0]||(a[0]=u("h1",{class:"m-0 font-13"},"My Team Requests ",-1)),u("p",E,I(l.value)+" request",1)])]),u("div",G,[g(M,{tHeaders:_.value,tData:s.value,isAging:"true",isAction:"true",viewType:"viewPdf",isCheckbox:"true",actions:h.value,onActionClicked:k,isFiltersoption:"true","field-mapping":f.value,onCellClick:P,onUpdateFilters:b},null,8,["tHeaders","tData","actions","field-mapping"]),g(U,{currentRecords:s.value.length,totalRecords:l.value,"items-per-page":t.value.limitPageLength,onUpdateValue:L,onLimitStart:D},null,8,["currentRecords","totalRecords","items-per-page"])])]))}},J=w(j,[["__scopeId","data-v-b3fcc86a"]]);export{J as default};
