var yt=Object.defineProperty,ht=Object.defineProperties;var kt=Object.getOwnPropertyDescriptors;var cl=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var pl=(B,f,w)=>f in B?yt(B,f,{enumerable:!0,configurable:!0,writable:!0,value:w}):B[f]=w,ye=(B,f)=>{for(var w in f||(f={}))wt.call(f,w)&&pl(B,w,f[w]);if(cl)for(var w of cl(f))xt.call(f,w)&&pl(B,w,f[w]);return B},Ve=(B,f)=>ht(B,kt(f));var Re=(B,f,w)=>new Promise((x,re)=>{var J=T=>{try{u(w.next(T))}catch(X){re(X)}},ke=T=>{try{u(w.throw(T))}catch(X){re(X)}},u=T=>T.done?x(T.value):Promise.resolve(T.value).then(J,ke);u((w=w.apply(B,f)).next())});import{_ as St,u as Ct,M as Ft,r,e as I,x as $,E as Dt,w as ee,f as qt,a6 as ml,K as Z,y as M,z as E,U as le,o as i,c as n,d as l,t as m,L as S,l as p,a7 as At,m as d,F as U,h as P,n as oe,b as q,O as he,R as ae,Q as fl,X as pe,i as g,v as Lt,N as Q,j as K,k as Ye,a8 as vl,B as Vt,a9 as bl,Z as Rt,aa as $t,S as Mt,H as ie,ab as Je,a2 as gl,ac as Et,D as _l,ad as Bt}from"./index-C5QI0lcP.js";const Nt={class:""},Ot={class:""},It={class:"d-flex justify-content-between align-items-center CancelNdSave"},Tt={class:"d-flex align-items-center"},Ut={key:0,class:"font-16"},Pt=["disabled"],zt={class:"form-container p-0 container-fluid mt-3"},Wt={class:"row g-4"},Ht={class:"col-lg-2 col-md-3 col-sm-12"},Yt={class:"steps-sticky-div"},Jt={class:"steps d-sm-inline-flex d-md-block m-0 p-0"},jt=["onClick"],Gt={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},Zt={class:"step-text"},Qt={class:"font-11"},Kt={class:"font-14"},Xt={class:"col-lg-10 col-md-9 col-sm-12 formbackground-color"},es={class:"px-2"},ls={class:"form-content stepsDiv"},ts={key:0},ss={class:""},os={class:"stepperbackground ps-3 pe-3 py-2 m-0 d-flex justify-content-between align-items-center"},as={class:"d-flex gap-2 align-items-center"},is=["disabled"],ns={class:"container-fluid aboutFields p-0"},rs={class:"row"},ds={class:"col-12"},us={class:"p-4"},cs={class:"card border-0 shadow-sm mb-4"},ps={class:"card-body p-4"},ms={class:"row g-4"},fs={class:"col-md-6"},vs={class:"position-relative"},bs={key:0,class:"badge bg-success position-absolute",style:{top:"-8px",right:"10px","z-index":"10"}},gs={key:1,class:"text-danger font-12 ms-1"},_s={class:"col-md-6"},ys={key:0,class:"text-danger font-12 ms-1"},hs={class:"col-md-6"},ks={class:"card border-0 shadow-sm mb-4"},ws={class:"card-body p-4"},xs={class:"row g-4"},Ss={class:"col-md-6"},Cs={class:"form-label font-13 fw-medium"},Fs={key:0,class:"text-danger"},Ds={class:"col-md-6"},qs={class:"form-label font-13 fw-medium"},As={key:0,class:"text-danger"},Ls={class:"col-md-12"},Vs={class:"form-label font-13 fw-medium"},Rs={key:0,class:"text-danger"},$s={class:"custom-option"},Ms=["checked","onChange"],Es={class:"card border-0 shadow-sm mb-4"},Bs={class:"card-body p-4"},Ns={class:"row g-4"},Os={class:"col-md-6"},Is={class:"text-muted font-11 ms-1"},Ts={key:0,class:"text-success"},Us={key:1},Ps={class:"col-md-6"},zs={key:0,class:"col-md-6"},Ws={key:0,class:"card border-0 shadow-sm mb-4"},Hs={class:"card-body p-4"},Ys={class:"row g-4"},Js={class:"col-md-6"},js={class:"col-md-6"},Gs={key:1,class:"card border-0 shadow-sm mb-4"},Zs={class:"card-body p-4"},Qs={class:"row g-4"},Ks={class:"col-md-12"},Xs={class:"form-check"},eo=["disabled"],lo={key:0,class:"col-md-12"},to={class:"position-relative"},so=["disabled"],oo={key:0,class:"list-group position-absolute w-100 z-3",style:{"max-height":"200px","overflow-y":"auto"}},ao=["onMousedown"],io={key:1,class:"frappe-form-builder"},no={class:"frappe-nav-bar"},ro={class:"nav-left"},uo={class:"nav-center"},co={class:"btn-group btn-group-sm",role:"group"},po=["onClick"],mo=["onClick"],fo={class:"nav-right"},vo={class:"frappe-builder-container"},bo={class:"frappe-field-library"},go={class:"field-library-body"},_o={class:"category-title"},yo=["onClick","onDragstart"],ho={class:"field-item-info"},ko={class:"field-item-label"},wo={class:"field-item-desc"},xo={class:"frappe-form-canvas"},So={class:"canvas-header"},Co={class:"mb-0 font-13"},Fo={class:"field-count"},Do={class:"fields-list"},qo=["onClick","onDragstart","onDrop"],Ao={class:"field-header"},Lo={class:"field-label"},Vo={key:0,class:"field-required"},Ro={class:"field-actions"},$o=["onClick"],Mo=["onClick"],Eo={class:"field-type-badge"},Bo={key:0,class:"field-meta"},No={class:"text-muted"},Oo={key:0,class:"empty-state"},Io={class:"frappe-properties-panel"},To={key:0,class:"properties-content"},Uo={class:"properties-header"},Po={class:"property-group"},zo={class:"property-field"},Wo={class:"property-field"},Ho=["value"],Yo={class:"property-field"},Jo={key:0,class:"property-group"},jo={class:"property-field"},Go={key:1,class:"property-group"},Zo={class:"property-field"},Qo={class:"property-group"},Ko={class:"property-checkbox"},Xo=["id"],ea=["for"],la={class:"property-checkbox"},ta=["id"],sa=["for"],oa={class:"property-checkbox"},aa=["id"],ia=["for"],na={class:"property-group"},ra={class:"property-field"},da={class:"property-group"},ua={class:"property-field"},ca={key:1,class:"no-field-selected"},pa={key:2},ma={class:"stepperbackground d-flex align-items-center justify-content-between p-3"},fa={class:"container-fluid mt-4 p-4"},va={class:"card mb-4"},ba={class:"card-body"},ga={class:"row g-3"},_a={class:"col-md-6"},ya={class:"btn-group w-100",role:"group"},ha={key:0,class:"col-md-6"},ka={key:0,class:"card mb-4"},wa={class:"card-body"},xa={key:0,class:"table-responsive"},Sa={class:"table table-bordered"},Ca=["onUpdate:modelValue"],Fa={class:"form-check form-switch"},Da=["onUpdate:modelValue"],qa={class:"form-check-label font-12"},Aa=["onClick"],La=["onClick"],Va={key:1,class:"card mb-4"},Ra={class:"card-body"},$a={class:"alert alert-success"},Ma={class:"table-responsive"},Ea={class:"table table-bordered"},Ba={key:0,class:"badge bg-success"},Na={key:1,class:"badge bg-secondary"},Oa={class:"text-muted"},Ia={key:2,class:"card mb-4"},Ta={class:"card-body"},Ua={class:"alert alert-success"},Pa={class:"table-responsive"},za={class:"table table-bordered table-hover"},Wa={class:"badge bg-dark"},Ha={key:0,class:"badge bg-danger"},Ya={key:1,class:"badge bg-secondary"},Ja={key:0,class:"badge bg-info"},ja={key:1,class:"badge bg-warning text-dark"},Ga={key:2,class:"badge bg-success"},Za={key:3,class:"badge bg-secondary"},Qa={class:"text-muted"},Ka={key:3},Xa={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},ei={class:"modal-dialog modal-dialog-centered"},li={class:"modal-content"},ti={class:"modal-body"},si=["placeholder"],oi={class:"d-flex align-items-center gap-2"},ai={class:"d-flex align-items-center py-2"},ii={class:"modal fade",id:"formViewModal",tabindex:"-1","aria-labelledby":"formViewModalLabel","aria-hidden":"true"},ni={class:"modal-dialog modal-xl modal-dialog-scrollable"},ri={class:"modal-content"},di={class:"modal-body"},ui={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},ci={class:"offcanvas-header add_designationHeader"},pi={id:"offcanvasRightLabel",class:"font-14 fw-bold"},mi={class:"offcanvas-body add_desig_offCanvas_body p-0"},fi={class:""},vi={key:0,class:"p-3 approval-border-bottom"},bi={class:"px-3 listofdesignations"},gi={class:"my-1 d-flex justify-content-between"},_i={class:"font-12 fw-bold"},yi={class:"italic-style text-secondary font-12"},hi={key:0,ref:"resizableDiv",class:"my-1 disgnationlist_div"},ki={class:"d-flex align-items-center justify-content-between gap-1"},wi={class:"form-check ps-1 d-flex align-items-center m-0"},xi=["checked"],Si={for:"selectAll",class:"form-check-label SelectallDesignation mt-2 fw-bold"},Ci={key:0,class:"form-check d-flex align-items-center m-0"},Fi={key:1},Di={key:1,class:"p-3"},qi=["value"],Ai={key:2},Li={class:""},Vi={class:"px-4 py-1 mt-2 d-flex align-items-center user-select-none"},Ri={key:0,class:"px-4 py-1 mt-2 d-flex align-items-center user-select-none"},$i={class:"offcanvas-footer"},Mi={class:"text-end p-3"},ne="Select All",Ei={__name:"FormStepper",setup(B){const f=Ct(),w=Ft(),x=r(1),re=r([]);r([]);const J=r([]),ke=r([]);I([]);let u=I([]),T=I([]);const X=r([]),D=r([]),$e=r([]),z=r(""),A=r(""),C=r("");let F=I([]);const we=r("");r(!1),r(!1),r(!1);const xe=r(""),Me=r(""),Ee=r(""),yl=r([]),hl=r([]);I({});const je=r([]),Be=r(!1),Se=r([]),Ce=r(!1);let Ge=null;const kl=r("");let V=r("");const wl=r(null);r(null),r(null),r(0);const N=r(0),xl=r(!0),h=r(null),Fe=r(null),Ze=r(!1),Qe=r(!1),Ke=r(!1);r(!1);const me=r([]),j=r(null),G=r("new"),De=r([]),de=r([]);r([]);const te=r([]),fe=$(()=>Dt);r(!1),I([]);const L=r({routepath:f.query.routepath,business_unit:f.query.business_unit,formId:f.query.id}),qe=r(""),ue=r(!1),ve=r(!1),Xe=[{label:"Public",value:1},{label:"Private",value:0}],Ne=$({get(){return Xe.find(s=>s.value===a.value.as_web_view)},set(s){a.value.as_web_view=s?s.value:null}}),el=$({get(){return a.value.form_name||f.query.form_name||""},set(s){a.value.form_name=s}}),a=r({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${fe.value.value||L.value.business_unit||f.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:"",is_linked:0,is_linked_form:"",is_predefined_doctype:f.query.id?1:0,as_web_view:0,mail_id:""});ee(()=>f.query.form_name,s=>{s&&(a.value.form_name=s,a.value.form_short_name=s)},{immediate:!0});const Sl=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus","idx","doctype","company_field","business_unit"].map(s=>s.toLowerCase().trim()),Cl=["Approver","Approved on","Approved By"].map(s=>s.toLowerCase().trim());$(()=>a.value),r(""),r(!1),ee(fe,s=>{s&&s.value&&(a.value.business_unit=s.value)},{immediate:!0}),ee(()=>a.value.form_name,s=>{a.value.form_name=s.trim()}),ee(()=>a.value.form_short_name,s=>{a.value.form_short_name=s.trim()}),ee(()=>a.value.series,s=>{a.value.series=s.trim()}),ee(()=>G.value,s=>{s==="existing"&&(u.splice(0,u.length),te.value=[],F.length=0)}),r(null),r(""),r(null);function Fl(){const s=a.value.is_linked_form;if(!s){Se.value=[];return}clearTimeout(Ge),Ge=setTimeout(()=>{const e=[["business_unit","=",`${fe.value.value}`],["name","like",`%${s}%`]],t={fields:JSON.stringify(["name"]),limit_page_length:10,limit_start:0,filters:JSON.stringify(e),doctype:Z.EzyFormDefinitions,order_by:"`tabEzy Form Definitions`.`enable` DESC, `tabEzy Form Definitions`.`creation` DESC"};M.get(`${E.GetDoctypeData}`,{params:t}).then(o=>{Se.value=o.message.data||[]}).catch(o=>{console.error("Error fetching form definitions:",o)})},300)}function Dl(s){a.value.is_linked_form=s,Ce.value=!1}function ql(){setTimeout(()=>{Ce.value=!1},200)}I({query:"",key:""}),I({}),I({}),I({});const Al=$(()=>u!=null&&u.length?C.value===1?[0]:Array.from({length:C.value},(s,e)=>e).filter(s=>s<C.value):[]);r(null),r(null);const ll=r([{form_json:""}]),se=r("");qt(()=>{ol(),se.value=f.query.Clone,V.value=f.query.id||"new",se.value==="1"&&(a.value.series=""),V.value!=null&&V.value!=null&&V.value!="new"&&sl(),sessionStorage.getItem("allow_approver_to_edit_form")=="1"?Be.value=!0:Be.value=!1;let s=localStorage.getItem("Bu");if(a.value.business_unit=s,f.query.preId==="PreDefine"){const e=localStorage.getItem("form_json");if(e){ll.value[0].form_json=e;const t=ll.value[0],o=JSON.parse(t.form_json),c=ml(o.fields);je.value=o.child_table_fields,c.forEach(b=>{u.push(b)})}}}),r(null),I({}),r(null);const Ll=r([]);r([]),I({});const Vl=r([{id:1,label:"Form Info",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Form Fields",stepno:"Step 2",icon:"bi bi-grid-3x3-gap"},{id:3,label:"Workflow Setup",stepno:"Step 3",icon:"bi bi-diagram-3"},{id:4,label:"Print Format",stepno:"Step 4",icon:"ri-checkbox-circle-line"}]),Ae=[{label:"Data",type:"Data",icon:"bi-input-cursor-text",category:"Basic",description:"Single line text input"},{label:"Small Text",type:"Small Text",icon:"bi-textarea-t",category:"Basic",description:"Multi-line text, comma-separated values"},{label:"Text Editor",type:"Text",icon:"bi-file-earmark-richtext",category:"Basic",description:"Rich text editor"},{label:"Code",type:"Code",icon:"bi-code-slash",category:"Basic",description:"Code editor with syntax highlighting"},{label:"Int",type:"Int",icon:"bi-123",category:"Number",description:"Integer number"},{label:"Float",type:"Float",icon:"bi-hash",category:"Number",description:"Decimal number"},{label:"Currency",type:"Currency",icon:"bi-currency-dollar",category:"Number",description:"Money amount with currency"},{label:"Percent",type:"Percent",icon:"bi-percent",category:"Number",description:"Percentage value"},{label:"Check",type:"Check",icon:"bi-check-square",category:"Selection",description:"Checkbox (Yes/No)"},{label:"Select",type:"Select",icon:"bi-menu-button-wide",category:"Selection",description:"Dropdown selection"},{label:"Table MultiSelect",type:"Table MultiSelect",icon:"bi-ui-checks-grid",category:"Selection",description:"Select multiple items"},{label:"Link",type:"Link",icon:"bi-link-45deg",category:"Selection",description:"Link to another DocType"},{label:"Dynamic Link",type:"Dynamic Link",icon:"bi-diagram-3",category:"Selection",description:"Dynamic link based on another field"},{label:"Rating",type:"Rating",icon:"bi-star",category:"Selection",description:"Star rating field"},{label:"Date",type:"Date",icon:"bi-calendar",category:"DateTime",description:"Date picker"},{label:"Datetime",type:"Datetime",icon:"bi-calendar-event",category:"DateTime",description:"Date and time picker"},{label:"Time",type:"Time",icon:"bi-clock",category:"DateTime",description:"Time picker"},{label:"Duration",type:"Duration",icon:"bi-hourglass-split",category:"DateTime",description:"Time duration (HH:MM:SS)"},{label:"Attach",type:"Attach",icon:"bi-paperclip",category:"Media",description:"File attachment"},{label:"Attach Image",type:"Attach Image",icon:"bi-image",category:"Media",description:"Image upload with preview"},{label:"Image",type:"Image",icon:"bi-file-image",category:"Media",description:"Display image from URL"},{label:"Signature",type:"Signature",icon:"bi-pen",category:"Media",description:"Digital signature pad"},{label:"Password",type:"Password",icon:"bi-key",category:"Special",description:"Masked password input"},{label:"Color",type:"Color",icon:"bi-palette",category:"Special",description:"Color picker"},{label:"Barcode",type:"Barcode",icon:"bi-upc-scan",category:"Special",description:"Barcode/QR code display"},{label:"Geolocation",type:"Geolocation",icon:"bi-geo-alt",category:"Special",description:"Map location picker"},{label:"HTML",type:"HTML",icon:"bi-filetype-html",category:"Special",description:"Custom HTML content"},{label:"JSON",type:"JSON",icon:"bi-braces",category:"Special",description:"JSON data editor"},{label:"Read Only",type:"Read Only",icon:"bi-eye",category:"Special",description:"Display-only text"},{label:"Table",type:"Table",icon:"bi-table",category:"Table",description:"Child table with rows"},{label:"Column Break",type:"Column Break",icon:"bi-layout-three-columns",category:"Layout",description:"Start new column"},{label:"Section Break",type:"Section Break",icon:"bi-layout-sidebar",category:"Layout",description:"Start new section"},{label:"Heading",type:"Heading",icon:"bi-type-h1",category:"Layout",description:"Section heading text"},{label:"Button",type:"Button",icon:"bi-square",category:"Layout",description:"Custom action button"}],Rl=$(()=>[...new Set(Ae.map(e=>e.category))]),$l=s=>Ae.filter(e=>e.category===s),Ml=s=>{const e=Ae.find(t=>t.type===s);return(e==null?void 0:e.icon)||"bi-file-text"},Oe=()=>u.value[N.value]?u.value[N.value].fields||[]:[],tl=()=>Oe().length,_=()=>h.value===null?{}:Oe()[h.value]||{},El=s=>{h.value=s},W=()=>{if(h.value!==null){const s=u.value[N.value];s&&s.fields&&(s.fields=[...s.fields])}},Bl=()=>{const s=_();["Select","Small Text","Table MultiSelect","Link"].includes(s.fieldtype)||(s.options=""),W()},Nl=s=>{const e=u.value[N.value];if(!e)return;e.fields||(e.fields=[]);const t={label:s.label,fieldtype:s.type,fieldname:Ol(s.label),reqd:0,read_only:0,hidden:0,options:"",description:"",default:"",idx:e.fields.length+1};e.fields.push(t),h.value=e.fields.length-1},Ol=s=>s.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""),Il=s=>{const e=u.value[N.value];if(!e||!e.fields)return;const t=e.fields[s],o=Ve(ye({},t),{label:`${t.label} (Copy)`,fieldname:`${t.fieldname}_copy_${Date.now()}`,idx:e.fields.length+1});e.fields.push(o),h.value=e.fields.length-1,ie("Field duplicated successfully")},Tl=s=>{const e=u.value[N.value];!e||!e.fields||(h.value===s?h.value=null:h.value!==null&&h.value>s&&h.value--,e.fields.splice(s,1),e.fields.forEach((t,o)=>{t.idx=o+1}),ie("Field deleted successfully"))},Ul=s=>{wl.value=s},Pl=s=>{Fe.value=s},zl=s=>{if(Fe.value===null)return;const e=u.value[N.value];if(!e||!e.fields)return;const t=Fe.value,o=[...e.fields],[c]=o.splice(t,1);o.splice(s,0,c),o.forEach((b,v)=>{b.idx=v+1}),e.fields=o,h.value===t&&(h.value=s),Fe.value=null},Wl=$(()=>[ne,...J.value]),Hl=$(()=>{const s=a.value.accessible_departments;return s.includes(ne)?"All Selected":s.length>1?`${s[0]}.. +${s.length-1} more selected`:s.join(", ")}),Yl=s=>s===ne?a.value.accessible_departments.length===J.value.length:a.value.accessible_departments.includes(s),Jl=(s,e)=>{s===ne?e.target.checked?a.value.accessible_departments=[...J.value]:a.value.accessible_departments=[]:(e.target.checked?a.value.accessible_departments.push(s):a.value.accessible_departments=a.value.accessible_departments.filter(t=>t!==s),a.value.accessible_departments.length===J.value.length?a.value.accessible_departments=[...J.value]:a.value.accessible_departments=a.value.accessible_departments.filter(t=>t!==ne))},jl=s=>{s===ne&&(a.value.accessible_departments=[...J.value])},Gl=s=>{s===ne&&(a.value.accessible_departments=[])},Ie=r(!1),be=$(()=>{var e;let s=[...X.value];if(ve.value&&(s=s.filter(t=>t.is_hod===1)),(e=we.value)!=null&&e.trim()){const t=we.value.toLowerCase();s=s.filter(o=>o.role.toLowerCase().includes(t))}return s.sort((t,o)=>t.role.localeCompare(o.role)),s.sort((t,o)=>{const c=D.value.includes(t.role),b=D.value.includes(o.role);return c===b?0:c?1:-1}),s.map(t=>t.role)}),Zl=$(()=>{const s=be.value;return s.length>0&&s.every(e=>D.value.includes(e))});ee([D,be],()=>{const s=be.value;Ie.value=s.length>0&&s.every(e=>D.value.includes(e))},{immediate:!0,deep:!0});function Ql(s){const e=s.target.checked,t=X.value.filter(o=>{var c;return!(ve.value&&o.is_hod!==1||(c=we.value)!=null&&c.trim()&&!o.role.toLowerCase().includes(we.value.toLowerCase()))}).map(o=>o.role);e?D.value=Array.from(new Set([...D.value,...t])):D.value=D.value.filter(o=>!t.includes(o)),Ie.value=e}function Kl(){D.value=[],Ie.value=!1,ve.value=!1}const ge=r("");function Xl(){const s=u[C.value];if(!s||!s.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:C.value==0?"requestor":"approver",roles:D.value,approval_required:Me.value,approver_can_edit:Ee.value,fields:s.sections.flatMap(Je),idx:C.value};C.value!==0&&(e.view_only_reportee=ge.value==="ViewOnlyReportee"?1:0,e.all_approvals_required=ge.value==="all_approvals_required"?1:0,e.requester_as_a_approver=ge.value==="requester_as_a_approver"?1:0,e.on_rejection=xe.value?xe.value:0);const t=F.findIndex(o=>o.idx===e.idx);t!==-1?F[t]=e:F.push(e),et()}function et(){M.post(E.add_roles_WF,{workflow_setup:F,doctype:a.value.form_short_name,business_unit:a.value.business_unit}).then(s=>{console.log(s),C.value==0?ie("Requestor Added"):ie(`Approver-${C.value} Added`)})}function lt(){w.push({path:L.value.routepath||localStorage.getItem("routepath")}),localStorage.removeItem("form_json")}function tt(){a.value.form_name="",a.value.form_short_name="",a.value.owner_of_the_form="",a.value.form_category="",a.value.accessible_departments=[],a.value.series="",a.value.has_workflow="",a.value.is_linked=0,a.value.is_linked_form="",a.value.mail_id="",a.value.public_form_response="",z.value="",A.value="",re.value=[],j.value=null}const st=s=>{if(_e.value){le("Please check all required fields before proceeding.");return}s<x.value?Ue():s>x.value&&Te()},Te=()=>{if(_e.value){le("Please check all required fields before proceeding.");return}x.value<4&&(x.value+=1,x.value===4&&(Le.value=u))},Ue=()=>{x.value>1&&(x.value-=1)},ot=r([]);function sl(){Ke.value=!0;const s={fields:JSON.stringify(["*"]),limit_page_length:"none",doctype:Z.EzyFormDefinitions,doc_id:V.value};M.get(E.GetDoctypeData,{params:s}).then(e=>{var o;let t=e==null?void 0:e.message.data;if(t){t.accessible_departments&&typeof t.accessible_departments=="string"?t.accessible_departments=t.accessible_departments.split(",").filter(v=>v.trim()!==""):t.accessible_departments=[],a.value=Ve(ye(ye({},a.value),t),{owner_of_the_form:t.owner_of_the_form||a.value.owner_of_the_form||""}),a.value.owner_of_the_form&&Pe(a.value.owner_of_the_form);const c=JSON.parse((o=e.message.data)==null?void 0:o.form_json);yl.value=c.workflow,kl.value=c.fields.filter(v=>v.fieldtype==="Table"),ot.value=c.fields.filter(v=>v.fieldtype==="Table"),ue.value=e.message.data.is_landscape;let b=ml(JSON.parse(t==null?void 0:t.form_json).fields);je.value=JSON.parse(e.message.data.form_json).child_table_fields,Ll.value=[],hl.value=[],b.forEach((v,O)=>{u.push(v)}),JSON.parse(t==null?void 0:t.form_json).workflow.forEach((v,O)=>{F.push(v)})}}).catch(e=>{console.error("Error fetching data:",e),le("Failed to load form data. Please try again.")}).finally(()=>{Ke.value=!1})}function at(){const s={};qe.value&&(s.print_format=qe.value),ue.value!==void 0&&ue.value!==null&&(s.is_landscape=ue.value),M.put(E.resource+Z.EzyFormDefinitions+`/${f.query.id}`,s).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),ie("Print Format Added Successfully")}).catch(e=>{console.error("Error fetching  data:",e)})}function ol(){const s={fields:JSON.stringify(["name","department_name"]),limit_page_length:"none",business_unit:`${L.value.business_unit||f.query.business_unit}`,doctype:Z.departments};Ze.value=!0,M.get(E.GetDoctypeData,{params:s}).then(e=>{var t;(t=e==null?void 0:e.message.data)!=null&&t.length&&(ke.value=e.message.data.map(o=>o.name),J.value=e.message.data.map(o=>o.name))}).catch(e=>{console.error("Error fetching department data:",e),le("Failed to load departments. Please refresh the page.")}).finally(()=>{Ze.value=!1})}r(""),ee(()=>a.value.owner_of_the_form,s=>{s&&Pe(s)});function Pe(s){s&&typeof s=="string"&&s.trim()!==""&&it(s)}function it(s){Qe.value=!0;const e={fields:JSON.stringify(["ezy_departments_items"]),doctype:Z.departments,doc_id:s};M.get(E.GetDoctypeData,{params:e}).then(t=>{var o;(o=t==null?void 0:t.message.data)!=null&&o.ezy_departments_items&&(re.value=t.message.data.ezy_departments_items.map(c=>c.category))}).catch(t=>{console.error("Error fetching categories data:",t),le("Failed to load form categories. Please try again.")}).finally(()=>{Qe.value=!1})}function ze(s){let e=Bt(u);const t=Ve(ye({},a.value),{fields:e,doctype:Z.EzyFormDefinitions,workflow_setup:F,form_status:s==="save"?"Created":"Draft"});t.accessible_departments=t.accessible_departments.toString(),M.post(E.savedata,t).then(o=>{if(o&&o.message&&o.message.message){let c=localStorage.getItem("preName");if(c){let b={installed:"Yes"};M.put(`${E.resource}${Z.preDefinedForm}/${c}`,b).then(v=>{localStorage.removeItem("preName")}).catch(v=>{console.error("Error fetching ezyForms data:",v)})}if(w.push({params:{paramid:o.message.message},query:{id:o.message.message}}),V.value=o.message.message,V&&V!=="new"&&(u.splice(0,u.length),sl()),F.length<u.length)_l("Add Workflow");else if(il.value===!0){ie("Form Created Successfully!",{autoClose:2e3,transition:"zoom"});let b=localStorage.getItem("routepath");s==="save"?w.push({path:b}):s==="Draft"&&w.push({path:b})}}else console.error("Invalid response structure:",o)}).catch(o=>{console.error("Error saving form data:",o)})}const We=r(""),al=()=>{var t,o;const s=u.length,e={label:s===0?"requestor":`approver-${s}`,parent:`${(t=fe.value)==null?void 0:t.value}-${(o=a.value)==null?void 0:o.form_short_name}`,sections:[{label:"",parent:`${fe.value.value}-${a.value.form_short_name}`,childTables:[],afterCreated:{},rows:s===0?[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]}]}]}]};u.push(e),gl(()=>{We.value&&We.value.scrollTo({top:We.value.scrollHeight,behavior:"smooth"})})},il=r(!1),nt=s=>{let e=u[s];e.parent&&T.push(e);let t=[];F.length>s&&F[s].roles&&(t=[...F[s].roles]),u.splice(s,1),F.length>s&&F.splice(s,1),u.forEach((o,c)=>{o.sections.forEach((b,v)=>{b.rows.forEach((O,R)=>{O.columns.forEach((y,k)=>{pt(c,v,R,k)})})})}),t.length&&rt(t,s)};function rt(s,e){const t={role:s,level:e,document_type:a.value.form_name,short_name:a.value.form_short_name,property:a.value.business_unit};M.post(E.deleteAssigneRoles,t).then(o=>{o&&ze()})}function dt(s){return Sl.includes(s==null?void 0:s.trim().toLowerCase())}function ut(s){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(s)||s.includes('"')||s.includes("'")}function ct(s){return s.flatMap(e=>{var t;return[(t=e.label)==null?void 0:t.trim().toLowerCase(),...e.sections.flatMap(o=>{var c;return[(c=o.label)==null?void 0:c.trim().toLowerCase(),...o.rows.flatMap(b=>b.columns.flatMap(v=>{var O;return[(O=v.label)==null?void 0:O.trim().toLowerCase(),...v.fields.map(R=>{var y;return(y=R.label)==null?void 0:y.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!Cl.includes(e))}function pt(s,e,t,o,c){const v=ct(u).filter((y,k,H)=>H.indexOf(y)!==k),O=Et(u);u.splice(0,u.length,...O);function R(y,k){if(!y){k.errorMsg="";return}dt(y)?k.errorMsg="Entered label is restricted":ut(y)?k.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:y.length>64?k.errorMsg="Label should not exceed 64 characters":k.errorMsg=v.includes(y.trim().toLowerCase())?"Duplicate Label Name":""}o!==void 0&&R(u[s].sections[e].rows[t].columns[o].label,u[s].sections[e].rows[t].columns[o]),o===void 0&&c===void 0&&R(u[s].sections[e].label,u[s].sections[e]),u.forEach(y=>{y.sections.forEach(k=>{R(k.label,k),k.rows.forEach(H=>{H.columns.forEach(ce=>{R(ce.label,ce),ce.fields.forEach(Y=>{R(Y.label,Y)})})})})})}const He=$(()=>{function s(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(s):Object.values(e).some(s)}return s(u)}),_e=$(()=>z.value.length>0||A.value.length>0||!a.value.form_category||!a.value.owner_of_the_form||a.value.accessible_departments.length===0),mt=$(()=>u.some(s=>s.sections.some(e=>e.rows.some(t=>t.columns.some(o=>o.fields.some(c=>c.label&&c.fieldtype))))));function nl(s,e){let t=s.target.value.trim();if(!t){e==="form_name"?z.value="Input cannot be empty or only spaces":e==="form_short_name"&&(A.value="Input cannot be empty or only spaces");return}if(t.length>63){e==="form_name"?z.value="Name cannot exceed 63 characters":e==="form_short_name"&&(A.value="Short name cannot exceed 63 characters");return}if(/^\d/.test(t)){e==="form_short_name"&&(A.value="First character must be a letter");return}else A.value="";if(e==="form_short_name"&&t.length<2){A.value="Short name must have at least 2 letters";return}if(e==="form_short_name"&&/[^a-zA-Z ]/.test(t)){A.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(t)){e==="form_name"?z.value="Special characters are not allowed":e==="form_short_name"&&(A.value="Special characters are not allowed");return}else e==="form_name"?z.value="":e==="form_short_name"&&(A.value="");const o=[[e,"=",`${t}`],["business_unit","=",`${a.value.business_unit}`]],c={fields:JSON.stringify(["form_name","form_short_name"]),filters:JSON.stringify(o),doctype:Z.EzyFormDefinitions};M.get(`${E.GetDoctypeData}`,{params:c}).then(b=>{$e.value=b.message.data,e==="form_name"?z.value=t&&$e.value.some(v=>v.form_name&&v.form_name.replace(/\s+/g,"").toLowerCase()===t.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(A.value=t&&$e.value.some(v=>v.form_short_name&&v.form_short_name.replace(/\s+/g,"").toLowerCase()===t.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(b=>{console.error("Error fetching ezyForms data:",b),e==="form_name"?z.value="":e==="form_short_name"&&(A.value="")})}const Le=r([]),ft=()=>{u.length&&(Le.value=u,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function vt(){M.post(E.delete_form_items,{deleted_fields:T.flatMap(Je),doctype:V}).then(s=>{var e;(e=s==null?void 0:s.message)!=null&&e.success&&ze()})}function rl(s){return Re(this,null,function*(){if(He.value){le("Please fix the errors before proceeding.");return}il.value=!0;let e=T.flatMap(Je);V!=null&&V!=null&&V!="new"&&e.length?vt():ze(s)})}const bt=()=>{De.value.push({role:"",autoApproval:!1,permissions:{}})},gt=s=>{De.value.splice(s,1)},_t=s=>{_l("Permission configuration modal will be implemented here")},dl=()=>Re(this,null,function*(){var s;if(!(me.value.length>0))try{const e={doctype:"WF Roadmap",fields:JSON.stringify(["name","roadmap_title","document_type","workflow_levels","property","cluster_name"]),filters:JSON.stringify([])},t=yield M.get(E.GetDoctypeData,{params:e});(s=t==null?void 0:t.message)!=null&&s.data&&(me.value=t.message.data.map(o=>({roadmap_title:o.name,display_name:`${o.roadmap_title} (${o.document_type})`,document_type:o.document_type,workflow_levels:o.workflow_levels,property:o.property,cluster_name:o.cluster_name})),console.log("Fetched WF Road Maps:",me.value))}catch(e){console.error("Error fetching WF Road Maps:",e),le("Failed to fetch workflow road maps")}}),ul=s=>Re(this,null,function*(){var e;try{console.log("Selected WF Road Map:",s);const t=yield M.get(`${E.resource}${Z.wfRoadmap}/${s.roadmap_title}`),o=((e=t==null?void 0:t.data)==null?void 0:e.data)||(t==null?void 0:t.data)||{};console.log("WF Road Map Data:",o);const c=(o.wf_requestors&&o.wf_requestors.length>0,1),b={};o.wf_level_setup&&o.wf_level_setup.length>0&&o.wf_level_setup.forEach(y=>{b[y.level]||(b[y.level]=[]),b[y.level].push(y)});const v=Object.keys(b).length,O=c+v;for(console.log(`Required blocks: ${O} (1 requestor + ${v} approver levels)`),F=[],de.value=[],te.value=[];u.length>O;)u.pop();for(;u.length<O;)al();console.log(`Block adjustment complete: ${u.length} blocks`);let R=0;o.wf_requestors&&o.wf_requestors.length>0?(de.value=o.wf_requestors,console.log(`Loaded ${o.wf_requestors.length} requestor role(s)`),o.wf_requestors.forEach(y=>{F.push({type:"requestor",roles:[y.requestor],auto_approval:y.auto_approval||0,columns_allowed:y.columns_allowed||"",fields:[],idx:0})})):console.warn("No Requestors found in roadmap, creating default requestor setup"),R=1,o.wf_level_setup&&o.wf_level_setup.length>0?(te.value=o.wf_level_setup.sort((k,H)=>k.level-H.level),console.log(`Loaded ${o.wf_level_setup.length} approver level(s)`),Object.keys(b).sort((k,H)=>parseInt(k)-parseInt(H)).forEach(k=>{const H=b[k],ce=R;console.log(`Level ${k} → Block Index ${ce}, Roles: ${H.length}`),H.forEach(Y=>{F.push({type:"approver",level:parseInt(k),roles:[Y.role],approval_required:Y.mandatory?1:0,approver_can_edit:0,view_only_reportee:Y.view_only_reportee||0,all_approvals_required:Y.all_approvals_required||0,requester_as_a_approver:Y.requester_as_a_approver||0,on_rejection:Y.on_rejection||0,columns_allowed:Y.columns_allowed||"",fields:[],idx:ce})}),R++})):console.warn("No approver levels found in roadmap"),console.log("Final blockArr length:",u.length),console.log("Final workflowSetup:",F),ie(`Workflow configured! ${de.value.length} requestor role(s), ${te.value.length} approver level(s) across ${u.length} blocks.`),gl(()=>{N.value=0})}catch(t){console.error("Error in handleWFRoadMapSelect:",t),le("Failed to load workflow. Please try again.")}});return(s,e)=>(i(),n("div",null,[l("div",Nt,[l("div",Ot,[l("div",It,[l("div",Tt,[l("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=t=>lt())},e[46]||(e[46]=[l("button",{class:"btn font-13 ms-3"},[l("i",{class:"bi bi-arrow-left"}),l("span",{class:"ms-2"},"Back")],-1)])),s.$route.query.id||s.$route.query.preId?(i(),n("span",Ut,"("+m(L.value.formId||S(f).query.form_name)+")",1)):p("",!0)]),l("div",null,[x.value===2&&S(u).length&&!s.$route.query.id?(i(),n("button",{key:0,disabled:He.value||_e.value,style:At({cursor:He.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=t=>rl("Draft"))},e[47]||(e[47]=[l("i",{class:"bi bi-bookmark-check-fill"},null,-1),d(" Save As Draft ")]),12,Pt)):p("",!0)])]),l("div",zt,[l("div",Wt,[l("div",Ht,[l("div",Yt,[l("ul",Jt,[(i(!0),n(U,null,P(Vl.value,t=>(i(),n("li",{key:t.id,class:oe({active:x.value===t.id,completed:x.value>t.id})},[l("div",{class:oe(["d-flex gap-3 align-items-center",{"not-allowed":_e.value&&x.value+1===t.id}]),onClick:o=>st(t.id)},[x.value>t.id?(i(),n("i",Gt)):(i(),n("i",{key:1,class:oe(t.icon)},null,2)),l("div",Zt,[l("span",Qt,m(t.stepno),1),e[48]||(e[48]=l("br",null,null,-1)),l("span",Kt,m(t.label),1)])],10,jt)],2))),128))])])]),l("div",Xt,[l("div",es,[l("div",ls,[x.value===1?(i(),n("div",ts,[l("div",ss,[l("div",os,[e[51]||(e[51]=l("div",null,[l("h1",{class:"font-16 fw-bold m-0"},"Form Information"),l("p",{class:"font-12 text-muted m-0"},"Configure basic form settings and permissions")],-1)),l("div",as,[!s.$route.query.id&&!s.$route.query.preId?(i(),n("button",{key:0,class:"btn btn-outline-secondary font-13",type:"button",onClick:tt},e[49]||(e[49]=[l("i",{class:"bi bi-x-circle me-1"},null,-1),d("Clear Form ")]))):p("",!0),x.value<5?(i(),n("button",{key:1,class:"btn btn-dark font-13 px-4",disabled:_e.value,onClick:Te},e[50]||(e[50]=[d(" Next "),l("i",{class:"bi bi-arrow-right ms-1"},null,-1)]),8,is)):p("",!0)])])]),l("div",ns,[l("div",rs,[l("div",ds,[l("div",us,[l("div",cs,[e[56]||(e[56]=l("div",{class:"card-header bg-light border-bottom"},[l("h6",{class:"m-0 fw-bold font-14"},[l("i",{class:"bi bi-file-earmark-text me-2"}),d("Form Details")])],-1)),l("div",ps,[l("div",ms,[l("div",fs,[l("div",vs,[S(f).query.preId?(i(),n("span",bs,e[52]||(e[52]=[l("i",{class:"bi bi-check2-circle me-1"},null,-1),d("Predefined ")]))):p("",!0),q(he,{disabled:(L.value.formId&&L.value.formId.length>0||S(f).query.form_name)&&se.value!=="1",labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Enter form name (e.g., Leave Request)",onChange:e[2]||(e[2]=t=>nl(t,"form_name")),modelValue:el.value,"onUpdate:modelValue":e[3]||(e[3]=t=>el.value=t)},null,8,["disabled","modelValue"]),z.value?(i(),n("span",gs,[e[53]||(e[53]=l("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),d(m(z.value),1)])):p("",!0)])]),l("div",_s,[q(he,{disabled:(L.value.formId&&L.value.formId.length>0||S(f).query.form_name)&&se.value!=="1",labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Enter short code (e.g., LR, PR)",onChange:e[4]||(e[4]=t=>nl(t,"form_short_name")),modelValue:a.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.form_short_name=t)},null,8,["disabled","modelValue"]),A.value?(i(),n("span",ys,[e[54]||(e[54]=l("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),d(m(A.value),1)])):p("",!0)]),l("div",hs,[q(he,{disabled:L.value.formId&&L.value.formId.length>0&&se.value!=="1",labeltext:"Form Naming Series",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"e.g., YY-YY, YYYY, or ABC",modelValue:a.value.series,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.series=t)},null,8,["disabled","modelValue"]),e[55]||(e[55]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d(" Format examples: "),l("code",null,"YY-YY"),d(" → 24-25-0001, "),l("code",null,"YYYY"),d(" → 2025-0001, "),l("code",null,"ABC"),d(" → ABC-0001 ")],-1))])])])]),l("div",ks,[e[63]||(e[63]=l("div",{class:"card-header bg-light border-bottom"},[l("h6",{class:"m-0 fw-bold font-14"},[l("i",{class:"bi bi-building me-2"}),d("Department & Permissions")])],-1)),l("div",ws,[l("div",xs,[l("div",Ss,[l("label",Cs,[e[57]||(e[57]=d(" Owner Department ")),a.value.owner_of_the_form?p("",!0):(i(),n("span",Fs,"*"))]),q(S(ae),{disabled:L.value.formId&&L.value.formId.length>0&&se.value!=="1",onOpen:ol,options:ke.value,onChange:Pe,modelValue:a.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.owner_of_the_form=t),placeholder:"Select owning department",multiple:!1,class:"font-12 multiselect",searchable:!0,openDirection:"bottom"},null,8,["disabled","options","modelValue"]),e[58]||(e[58]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d("Department that owns and manages this form ")],-1))]),l("div",Ds,[l("label",qs,[e[59]||(e[59]=d(" Form Category ")),a.value.form_category?p("",!0):(i(),n("span",As,"*"))]),q(S(ae),{disabled:L.value.formId&&L.value.formId.length>0&&se.value!=="1",options:re.value,modelValue:a.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.form_category=t),placeholder:"Select a category",multiple:!1,searchable:!0,class:"font-12 multiselect"},null,8,["disabled","options","modelValue"]),e[60]||(e[60]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d("Categorize this form for better organization ")],-1))]),l("div",Ls,[l("label",Vs,[e[61]||(e[61]=d(" Accessible to Departments ")),a.value.accessible_departments.length?p("",!0):(i(),n("span",Rs,"*"))]),q(S(ae),{modelValue:a.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.accessible_departments=t),options:Wl.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select departments that can access this form",class:"font-12",onSelect:jl,onRemove:Gl,openDirection:"bottom"},{option:fl(({option:t})=>[l("div",$s,[l("input",{type:"checkbox",checked:Yl(t),class:"custom-checkbox",onChange:o=>Jl(t,o),onClick:e[9]||(e[9]=pe(()=>{},["stop"]))},null,40,Ms),l("span",null,m(t),1)])]),selection:fl(({values:t,isOpen:o})=>[t.length?g((i(),n("span",{key:0,class:"multiselect__single font-11"},m(Hl.value),513)),[[Lt,!o]]):p("",!0)]),_:1},8,["modelValue","options"]),e[62]||(e[62]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d("Users from these departments can raise requests using this form ")],-1))])])])]),l("div",Es,[e[70]||(e[70]=l("div",{class:"card-header bg-light border-bottom"},[l("h6",{class:"m-0 fw-bold font-14"},[l("i",{class:"bi bi-gear me-2"}),d("Form Settings")])],-1)),l("div",Bs,[l("div",Ns,[l("div",Os,[e[65]||(e[65]=l("label",{class:"form-label font-13 fw-medium"},"Form Type",-1)),q(S(ae),{options:Xe,modelValue:Ne.value,"onUpdate:modelValue":e[11]||(e[11]=t=>Ne.value=t),placeholder:"Select form visibility",multiple:!1,searchable:!0,label:"label","track-by":"value",reduce:t=>t.value,class:"font-12 multiselect",openDirection:"bottom"},null,8,["modelValue","reduce"]),l("small",Is,[e[64]||(e[64]=l("i",{class:"bi bi-info-circle me-1"},null,-1)),Ne.value===1?(i(),n("span",Ts,"Public forms are accessible via QR code without login")):(i(),n("span",Us,"Private forms require authentication to access"))])]),l("div",Ps,[e[66]||(e[66]=l("label",{class:"form-label font-13 fw-medium"},[d(" Enable Workflow "),l("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),q(S(ae),{options:["Yes","No"],modelValue:a.value.has_workflow,"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.has_workflow=t),placeholder:"Enable approval workflow?",multiple:!1,class:"font-12 multiselect",searchable:!0},null,8,["modelValue"]),e[67]||(e[67]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d("Enable if this form requires multi-level approvals ")],-1))]),a.value.has_workflow==="Yes"?(i(),n("div",zs,[e[68]||(e[68]=l("label",{class:"form-label font-13 fw-medium"},[d(" Use Existing Workflow "),l("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),q(S(ae),{onOpen:dl,options:me.value,modelValue:j.value,"onUpdate:modelValue":e[13]||(e[13]=t=>j.value=t),placeholder:"Select a workflow roadmap",multiple:!1,class:"font-12 multiselect",searchable:!0,label:"display_name","track-by":"roadmap_title",onSelect:ul,openDirection:"bottom"},null,8,["options","modelValue"]),e[69]||(e[69]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d(" Auto-populates requestor and approver configurations from existing workflow ")],-1))])):p("",!0)])])]),a.value.as_web_view===1?(i(),n("div",Ws,[e[75]||(e[75]=l("div",{class:"card-header bg-light border-bottom"},[l("h6",{class:"m-0 fw-bold font-14"},[l("i",{class:"bi bi-qr-code me-2"}),d("Public Form Settings")])],-1)),l("div",Hs,[l("div",Ys,[l("div",Js,[e[71]||(e[71]=l("label",{class:"form-label font-13 fw-medium"},[d(" Submit Response Message "),l("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),q(he,{class:"formHeight",type:"text",tag:"input",name:"Value",id:"formSubmitResponse",placeholder:"e.g., Thank you! Your request has been submitted.",modelValue:a.value.public_form_response,"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.public_form_response=t)},null,8,["modelValue"]),e[72]||(e[72]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d("Message shown to users after successful form submission ")],-1))]),l("div",js,[e[73]||(e[73]=l("label",{class:"form-label font-13 fw-medium"},[d(" Notification Email(s) "),l("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),q(he,{class:"formHeight",type:"text",tag:"input",name:"Value",id:"formSubmitEmail",placeholder:"email1@example.com, email2@example.com",modelValue:a.value.mail_id,"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.mail_id=t)},null,8,["modelValue"]),e[74]||(e[74]=l("small",{class:"text-muted font-11 ms-1"},[l("i",{class:"bi bi-info-circle me-1"}),d("Email addresses to notify on form submission (comma-separated) ")],-1))])])])])):p("",!0),S(f).query.preId?(i(),n("div",Gs,[e[79]||(e[79]=l("div",{class:"card-header bg-light border-bottom"},[l("h6",{class:"m-0 fw-bold font-14"},[l("i",{class:"bi bi-link-45deg me-2"}),d("Advanced Options")])],-1)),l("div",Zs,[l("div",Qs,[l("div",Ks,[l("div",Xs,[g(l("input",{class:"form-check-input",disabled:a.value.is_predefined_doctype==1,type:"checkbox",id:"is_linked","onUpdate:modelValue":e[16]||(e[16]=t=>a.value.is_linked=t),"true-value":1,"false-value":0},null,8,eo),[[Q,a.value.is_linked]]),e[76]||(e[76]=l("label",{class:"form-check-label font-13",for:"is_linked"}," Link this form to another form ",-1))]),e[77]||(e[77]=l("small",{class:"text-muted font-11 ms-4"},[l("i",{class:"bi bi-info-circle me-1"}),d("Create a relationship between this form and an existing form ")],-1))]),a.value.is_linked?(i(),n("div",lo,[e[78]||(e[78]=l("label",{class:"form-label font-13 fw-medium"},"Linked Form",-1)),l("div",to,[g(l("input",{type:"text",class:"form-control font-13",id:"standardFormInput",disabled:a.value.is_predefined_doctype==1,"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.is_linked_form=t),placeholder:"Type to search and select a form...",onInput:Fl,onFocus:e[18]||(e[18]=t=>Ce.value=!0),onBlur:ql},null,40,so),[[K,a.value.is_linked_form]]),Ce.value&&Se.value.length?(i(),n("ul",oo,[(i(!0),n(U,null,P(Se.value,(t,o)=>(i(),n("li",{class:"list-group-item list-group-item-action font-12",key:o,onMousedown:pe(c=>Dl(t.name),["prevent"]),style:{cursor:"pointer"}},m(t.name),41,ao))),128))])):p("",!0)])])):p("",!0)])])])):p("",!0)])])])])])):p("",!0),x.value===2?(i(),n("div",io,[l("div",no,[l("div",ro,[l("button",{onClick:e[19]||(e[19]=t=>Ue()),class:"btn btn-sm btn-link text-dark"},e[80]||(e[80]=[l("i",{class:"bi bi-chevron-left me-1"},null,-1),d("Back ")]))]),l("div",uo,[l("div",co,[(i(!0),n(U,null,P(S(u),(t,o)=>(i(),n("button",{key:o,type:"button",class:oe(["btn",N.value===o?"btn-primary":"btn-outline-secondary"]),onClick:c=>N.value=o},[d(m(o===0?"Requestor":`Approver ${o}`)+" ",1),S(u).length>1?(i(),n("i",{key:0,class:"bi bi-x ms-2",onClick:pe(c=>nt(o),["stop"])},null,8,mo)):p("",!0)],10,po))),128))])]),l("div",fo,[l("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:al},e[81]||(e[81]=[l("i",{class:"bi bi-plus-lg me-1"},null,-1),d("Add Block ")])),mt.value?(i(),n("button",{key:0,class:"btn btn-sm btn-outline-secondary me-2",onClick:ft},e[82]||(e[82]=[l("i",{class:"bi bi-eye me-1"},null,-1),d("Preview ")]))):p("",!0),S(u).length?(i(),n("button",{key:1,class:"btn btn-sm btn-primary",onClick:e[20]||(e[20]=t=>rl("save"))},[e[83]||(e[83]=l("i",{class:"bi bi-save me-1"},null,-1)),d(m(S(V)!=="new"?"Update":"Save"),1)])):p("",!0)])]),l("div",vo,[l("aside",bo,[e[84]||(e[84]=l("div",{class:"field-library-header"},[l("h6",{class:"mb-0 font-13 fw-bold"},"Add Field")],-1)),l("div",go,[(i(!0),n(U,null,P(Rl.value,t=>(i(),n("div",{key:t,class:"field-category"},[l("div",_o,m(t),1),(i(!0),n(U,null,P($l(t),o=>(i(),n("div",{key:o.type,class:"field-item",onClick:c=>Nl(o),draggable:"true",onDragstart:c=>Ul(o)},[l("i",{class:oe(o.icon||"bi-file-text")},null,2),l("div",ho,[l("div",ko,m(o.label),1),l("div",wo,m(o.description),1)])],40,yo))),128))]))),128))])]),l("div",xo,[l("div",So,[l("h6",Co,m(N.value===0?"Requestor Fields":`Approver ${N.value} Fields`),1),l("span",Fo,m(tl())+" fields",1)]),l("div",Do,[(i(!0),n(U,null,P(Oe(),(t,o)=>(i(),n("div",{key:"field-"+o,class:oe(["form-field-item",{selected:h.value===o}]),onClick:c=>El(o),draggable:"true",onDragstart:c=>Pl(o),onDragover:e[21]||(e[21]=pe(()=>{},["prevent"])),onDrop:c=>zl(o)},[l("div",Ao,[l("div",Lo,[d(m(t.label||"Unnamed Field")+" ",1),t.reqd?(i(),n("span",Vo,"*")):p("",!0)]),l("div",Ro,[l("button",{class:"btn btn-sm btn-link p-0 text-secondary",onClick:pe(c=>Il(o),["stop"]),title:"Duplicate"},e[85]||(e[85]=[l("i",{class:"bi bi-files"},null,-1)]),8,$o),l("button",{class:"btn btn-sm btn-link p-0 text-danger",onClick:pe(c=>Tl(o),["stop"]),title:"Delete"},e[86]||(e[86]=[l("i",{class:"bi bi-trash"},null,-1)]),8,Mo)])]),l("div",Eo,[l("i",{class:oe(Ml(t.fieldtype))},null,2),d(" "+m(t.fieldtype||"Data"),1)]),t.options&&["Select","Link"].includes(t.fieldtype)?(i(),n("div",Bo,[l("small",No,m(t.options),1)])):p("",!0)],42,qo))),128)),l("div",{class:"add-field-btn",onClick:e[22]||(e[22]=t=>xl.value=!0)},e[87]||(e[87]=[l("i",{class:"bi bi-plus-circle me-2"},null,-1),d(" Add Field ")])),tl()===0?(i(),n("div",Oo,e[88]||(e[88]=[l("i",{class:"bi bi-inbox"},null,-1),l("p",null,"No fields yet",-1),l("small",null,'Click "Add Field" or drag a field type from the left',-1)]))):p("",!0)])]),l("aside",Io,[h.value!==null?(i(),n("div",To,[l("div",Uo,[e[90]||(e[90]=l("div",{class:"properties-title"},[l("i",{class:"bi bi-sliders me-2"}),d(" Field Properties ")],-1)),l("button",{class:"btn btn-sm btn-link p-0 text-secondary",onClick:e[23]||(e[23]=t=>h.value=null)},e[89]||(e[89]=[l("i",{class:"bi bi-x-lg"},null,-1)]))]),l("div",Po,[e[96]||(e[96]=l("div",{class:"property-group-title"},"Basic",-1)),l("div",zo,[e[91]||(e[91]=l("label",{class:"property-label"},"Label",-1)),g(l("input",{type:"text",class:"property-input","onUpdate:modelValue":e[24]||(e[24]=t=>_().label=t),placeholder:"Field Label",onInput:W},null,544),[[K,_().label]])]),l("div",Wo,[e[93]||(e[93]=l("label",{class:"property-label"},"Field Type",-1)),g(l("select",{class:"property-input","onUpdate:modelValue":e[25]||(e[25]=t=>_().fieldtype=t),onChange:Bl},[e[92]||(e[92]=l("option",{value:""},"Select Type",-1)),(i(),n(U,null,P(Ae,t=>l("option",{key:t.type,value:t.type},m(t.label),9,Ho)),64))],544),[[Ye,_().fieldtype]])]),l("div",Yo,[e[94]||(e[94]=l("label",{class:"property-label"},"Field Name",-1)),g(l("input",{type:"text",class:"property-input","onUpdate:modelValue":e[26]||(e[26]=t=>_().fieldname=t),placeholder:"field_name",onInput:W},null,544),[[K,_().fieldname]]),e[95]||(e[95]=l("small",{class:"property-help-text"},"Internal field name (lowercase, underscores)",-1))])]),["Select","Small Text","Table MultiSelect"].includes(_().fieldtype)?(i(),n("div",Jo,[e[98]||(e[98]=l("div",{class:"property-group-title"},"Options",-1)),l("div",jo,[e[97]||(e[97]=l("label",{class:"property-label"},"Options (one per line)",-1)),g(l("textarea",{class:"property-input",rows:"4","onUpdate:modelValue":e[27]||(e[27]=t=>_().options=t),placeholder:`Option 1
Option 2
Option 3`,onInput:W},null,544),[[K,_().options]])])])):p("",!0),_().fieldtype==="Link"?(i(),n("div",Go,[e[100]||(e[100]=l("div",{class:"property-group-title"},"Link Settings",-1)),l("div",Zo,[e[99]||(e[99]=l("label",{class:"property-label"},"Link To (DocType)",-1)),g(l("input",{type:"text",class:"property-input","onUpdate:modelValue":e[28]||(e[28]=t=>_().options=t),placeholder:"Enter DocType name",onInput:W},null,544),[[K,_().options]])])])):p("",!0),l("div",Qo,[e[101]||(e[101]=l("div",{class:"property-group-title"},"Validation",-1)),l("div",Ko,[g(l("input",{type:"checkbox",id:"mandatory-"+h.value,"onUpdate:modelValue":e[29]||(e[29]=t=>_().reqd=t),"true-value":1,"false-value":0,onChange:W},null,40,Xo),[[Q,_().reqd]]),l("label",{for:"mandatory-"+h.value},"Mandatory",8,ea)]),l("div",la,[g(l("input",{type:"checkbox",id:"readonly-"+h.value,"onUpdate:modelValue":e[30]||(e[30]=t=>_().read_only=t),"true-value":1,"false-value":0,onChange:W},null,40,ta),[[Q,_().read_only]]),l("label",{for:"readonly-"+h.value},"Read Only",8,sa)]),l("div",oa,[g(l("input",{type:"checkbox",id:"hidden-"+h.value,"onUpdate:modelValue":e[31]||(e[31]=t=>_().hidden=t),"true-value":1,"false-value":0,onChange:W},null,40,aa),[[Q,_().hidden]]),l("label",{for:"hidden-"+h.value},"Hidden",8,ia)])]),l("div",na,[e[103]||(e[103]=l("div",{class:"property-group-title"},"Help",-1)),l("div",ra,[e[102]||(e[102]=l("label",{class:"property-label"},"Description",-1)),g(l("textarea",{class:"property-input",rows:"3","onUpdate:modelValue":e[32]||(e[32]=t=>_().description=t),placeholder:"Help text for this field",onInput:W},null,544),[[K,_().description]])])]),l("div",da,[l("div",ua,[e[104]||(e[104]=l("label",{class:"property-label"},"Default Value",-1)),g(l("input",{type:"text",class:"property-input","onUpdate:modelValue":e[33]||(e[33]=t=>_().default=t),placeholder:"Default value",onInput:W},null,544),[[K,_().default]])])])])):(i(),n("div",ca,e[105]||(e[105]=[l("i",{class:"bi bi-hand-index"},null,-1),l("p",null,"Select a field",-1),l("small",null,"Click on a field to edit its properties",-1)])))])])])):p("",!0),x.value===3?(i(),n("div",pa,[l("div",ma,[l("button",{onClick:e[34]||(e[34]=t=>Ue()),class:"btn btn-sm btn-light"},e[106]||(e[106]=[l("i",{class:"bi bi-chevron-left"},null,-1),d(" Back ")])),e[108]||(e[108]=l("h1",{class:"font-14 fw-bold m-0"},"Workflow Setup",-1)),l("button",{class:"btn btn-sm btn-dark",onClick:Te},e[107]||(e[107]=[d(" Next "),l("i",{class:"bi bi-chevron-right"},null,-1)]))]),l("div",fa,[l("div",va,[e[114]||(e[114]=l("div",{class:"card-header bg-light"},[l("h6",{class:"mb-0 fw-bold"},[l("i",{class:"bi bi-diagram-3 me-2"}),d("Workflow Configuration")])],-1)),l("div",ba,[l("div",ga,[l("div",_a,[e[111]||(e[111]=l("label",{class:"form-label fw-bold"},"Workflow Type",-1)),l("div",ya,[g(l("input",{type:"radio",class:"btn-check",name:"workflowType",id:"existingWorkflow",value:"existing","onUpdate:modelValue":e[35]||(e[35]=t=>G.value=t)},null,512),[[vl,G.value]]),e[109]||(e[109]=l("label",{class:"btn btn-outline-primary",for:"existingWorkflow"},[l("i",{class:"bi bi-folder me-1"}),d("Use Existing ")],-1)),g(l("input",{type:"radio",class:"btn-check",name:"workflowType",id:"newWorkflow",value:"new","onUpdate:modelValue":e[36]||(e[36]=t=>G.value=t),checked:""},null,512),[[vl,G.value]]),e[110]||(e[110]=l("label",{class:"btn btn-outline-primary",for:"newWorkflow"},[l("i",{class:"bi bi-plus-circle me-1"}),d("Create New ")],-1))])]),G.value==="existing"?(i(),n("div",ha,[e[112]||(e[112]=l("label",{class:"form-label fw-bold"},"Select Workflow",-1)),q(S(ae),{onOpen:dl,options:me.value,modelValue:j.value,"onUpdate:modelValue":e[37]||(e[37]=t=>j.value=t),placeholder:"Select WF Road Map",multiple:!1,class:"font-11 multiselect",searchable:!0,label:"display_name","track-by":"roadmap_title",onSelect:ul,openDirection:"bottom"},null,8,["options","modelValue"]),e[113]||(e[113]=l("small",{class:"text-muted font-12 mt-1 d-block"},[l("i",{class:"bi bi-info-circle me-1"}),d("Auto-populates requestors and approvers ")],-1))])):p("",!0)])])]),G.value==="new"?(i(),n("div",ka,[e[120]||(e[120]=l("div",{class:"card-header bg-light"},[l("h6",{class:"mb-0 fw-bold"},[l("i",{class:"bi bi-person-plus me-2"}),d("Requestor Configuration")])],-1)),l("div",wa,[e[119]||(e[119]=l("p",{class:"text-muted font-12 mb-3"},[l("i",{class:"bi bi-info-circle me-1"}),d(" Define who can submit requests for this form based on WF Requestors ")],-1)),l("button",{class:"btn btn-primary btn-sm mb-3",onClick:bt},e[115]||(e[115]=[l("i",{class:"bi bi-plus-lg me-1"},null,-1),d("Add Requestor Role ")])),De.value.length>0?(i(),n("div",xa,[l("table",Sa,[e[118]||(e[118]=l("thead",{class:"table-light"},[l("tr",null,[l("th",{width:"40%"},"Role"),l("th",{width:"30%"},"Auto Approval"),l("th",{width:"20%"},"Permissions"),l("th",{width:"10%"},"Action")])],-1)),l("tbody",null,[(i(!0),n(U,null,P(De.value,(t,o)=>(i(),n("tr",{key:o},[l("td",null,[g(l("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":c=>t.role=c,placeholder:"Enter role name"},null,8,Ca),[[K,t.role]])]),l("td",null,[l("div",Fa,[g(l("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":c=>t.autoApproval=c},null,8,Da),[[Q,t.autoApproval]]),l("label",qa,m(t.autoApproval?"Yes":"No"),1)])]),l("td",null,[l("button",{class:"btn btn-sm btn-outline-secondary",onClick:c=>_t()},e[116]||(e[116]=[l("i",{class:"bi bi-gear"},null,-1),d(" Configure ")]),8,Aa)]),l("td",null,[l("button",{class:"btn btn-sm btn-danger",onClick:c=>gt(o)},e[117]||(e[117]=[l("i",{class:"bi bi-trash"},null,-1)]),8,La)])]))),128))])])])):p("",!0)])])):p("",!0),G.value==="existing"&&j.value&&de.value.length>0?(i(),n("div",Va,[e[126]||(e[126]=l("div",{class:"card-header bg-success text-white"},[l("h6",{class:"mb-0 fw-bold"},[l("i",{class:"bi bi-check-circle me-2"}),d("Loaded Requestors")])],-1)),l("div",Ra,[l("div",$a,[e[121]||(e[121]=l("i",{class:"bi bi-check-circle me-1"},null,-1)),l("strong",null,m(de.value.length),1),e[122]||(e[122]=d(" requestor role(s) loaded from ")),l("strong",null,m(j.value.display_name),1)]),l("div",Ma,[l("table",Ea,[e[124]||(e[124]=l("thead",{class:"table-light"},[l("tr",null,[l("th",null,"Role"),l("th",null,"Auto Approval"),l("th",null,"Columns Allowed")])],-1)),l("tbody",null,[(i(!0),n(U,null,P(de.value,(t,o)=>(i(),n("tr",{key:o},[l("td",null,[l("strong",null,m(t.requestor),1)]),l("td",null,[t.auto_approval?(i(),n("span",Ba,e[123]||(e[123]=[l("i",{class:"bi bi-check-circle me-1"},null,-1),d("Yes ")]))):(i(),n("span",Na,"No"))]),l("td",null,[l("small",Oa,m(t.columns_allowed||"All fields"),1)])]))),128))])])]),e[125]||(e[125]=l("div",{class:"alert alert-info mt-3"},[l("i",{class:"bi bi-info-circle me-1"}),d(" Go to "),l("strong",null,"Step 2"),d(" and click "),l("strong",null,'"Add Requestors"'),d(" to select specific designations for these roles ")],-1))])])):p("",!0),G.value==="existing"&&j.value&&te.value.length>0?(i(),n("div",Ia,[e[135]||(e[135]=l("div",{class:"card-header bg-primary text-white"},[l("h6",{class:"mb-0 fw-bold"},[l("i",{class:"bi bi-diagram-3 me-2"}),d("Loaded Approval Workflow")])],-1)),l("div",Ta,[l("div",Ua,[e[127]||(e[127]=l("i",{class:"bi bi-check-circle me-1"},null,-1)),l("strong",null,m(te.value.length),1),e[128]||(e[128]=d(" approval level(s) loaded from ")),l("strong",null,m(j.value.display_name),1)]),l("div",Pa,[l("table",za,[e[133]||(e[133]=l("thead",{class:"table-light"},[l("tr",null,[l("th",{width:"10%"},"Level"),l("th",{width:"25%"},"Role"),l("th",{width:"15%"},"Mandatory"),l("th",{width:"20%"},"Approval Type"),l("th",{width:"30%"},"Columns Allowed")])],-1)),l("tbody",null,[(i(!0),n(U,null,P(te.value,(t,o)=>(i(),n("tr",{key:o},[l("td",null,[l("span",Wa,"Level "+m(t.level),1)]),l("td",null,[l("strong",null,m(t.role),1)]),l("td",null,[t.mandatory?(i(),n("span",Ha,e[129]||(e[129]=[l("i",{class:"bi bi-exclamation-circle me-1"},null,-1),d("Required ")]))):(i(),n("span",Ya,"Optional"))]),l("td",null,[t.view_only_reportee?(i(),n("span",Ja,e[130]||(e[130]=[l("i",{class:"bi bi-person me-1"},null,-1),d("Reporting Manager ")]))):t.all_approvals_required?(i(),n("span",ja,e[131]||(e[131]=[l("i",{class:"bi bi-people me-1"},null,-1),d("All Users ")]))):t.requester_as_a_approver?(i(),n("span",Ga,e[132]||(e[132]=[l("i",{class:"bi bi-person-check me-1"},null,-1),d("Requestor ")]))):(i(),n("span",Za," Any One "))]),l("td",null,[l("small",Qa,m(t.columns_allowed||"All fields"),1)])]))),128))])])]),e[134]||(e[134]=l("div",{class:"alert alert-info mt-3"},[l("i",{class:"bi bi-info-circle me-1"}),d(" Go to "),l("strong",null,"Step 2"),d(" and click "),l("strong",null,'"Add Approvers"'),d(" for each level to select specific designations ")],-1))])])):p("",!0),e[136]||(e[136]=Vt('<div class="card mt-4" data-v-0f07b945><div class="card-header bg-light" data-v-0f07b945><h6 class="mb-0 fw-bold" data-v-0f07b945><i class="bi bi-shield-check me-2" data-v-0f07b945></i>System Generated Fields</h6></div><div class="card-body" data-v-0f07b945><div class="alert alert-secondary mb-3" data-v-0f07b945><i class="bi bi-info-circle me-2" data-v-0f07b945></i> These fields are automatically included for all requestors. </div><div class="row g-3" data-v-0f07b945><div class="col-md-6" data-v-0f07b945><div class="field-preview-card" data-v-0f07b945><label class="form-label fw-bold" data-v-0f07b945>Requestor Name</label><input type="text" class="form-control" value="Auto-populated from user profile" disabled data-v-0f07b945></div></div><div class="col-md-6" data-v-0f07b945><div class="field-preview-card" data-v-0f07b945><label class="form-label fw-bold" data-v-0f07b945>Requestor Email</label><input type="email" class="form-control" value="Auto-populated from user profile" disabled data-v-0f07b945></div></div><div class="col-md-6" data-v-0f07b945><div class="field-preview-card" data-v-0f07b945><label class="form-label fw-bold" data-v-0f07b945>Request Date</label><input type="text" class="form-control" value="Auto-populated on submission" disabled data-v-0f07b945></div></div><div class="col-md-6" data-v-0f07b945><div class="field-preview-card" data-v-0f07b945><label class="form-label fw-bold" data-v-0f07b945>Department</label><input type="text" class="form-control" value="Auto-populated from user profile" disabled data-v-0f07b945></div></div></div></div></div>',1))])])):p("",!0),x.value===4?(i(),n("div",Ka,[e[137]||(e[137]=l("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[l("div",null,[l("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),l("div")],-1)),q(bl,{blockArr:Le.value},null,8,["blockArr"])])):p("",!0)])])])])])])]),l("div",Xa,[l("div",ei,[l("div",li,[e[141]||(e[141]=l("div",{class:"modal-header"},[l("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),l("div",ti,[e[139]||(e[139]=l("label",{for:""},"Form Name",-1)),g(l("input",{"onUpdate:modelValue":e[38]||(e[38]=t=>qe.value=t),multiple:!1,placeholder:S(f).query.id,class:"font-11 form-control",id:"Form_name_print",searchable:!0},null,8,si),[[K,qe.value]]),l("div",oi,[l("div",ai,[g(l("input",{class:"font-12","onUpdate:modelValue":e[39]||(e[39]=t=>ue.value=t),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[Q,ue.value]])]),e[138]||(e[138]=l("div",null,[l("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),l("div",{class:"modal-footer"},[e[140]||(e[140]=l("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),l("button",{type:"button",class:"btn btn-dark",onClick:at},"Add Print Format")])])])]),l("div",ii,[l("div",ni,[l("div",ri,[e[142]||(e[142]=l("div",{class:"modal-header"},[l("h5",{class:"modal-title",id:"formViewModalLabel"},"Form Preview"),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),l("div",di,[q(bl,{blockArr:Le.value},null,8,["blockArr"])]),e[143]||(e[143]=l("div",{class:"modal-footer"},[l("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),l("div",ui,[l("div",ci,[l("span",pi,m(C.value==0?"Add Requestors":`Approval Settings - Level ${C.value}`),1),e[144]||(e[144]=l("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),l("div",mi,[l("div",fi,[C.value!==0?(i(),n("div",vi,[e[146]||(e[146]=l("label",{class:"fw-bold font-12 mb-2"},"Approver Type",-1)),g(l("select",{"onUpdate:modelValue":e[40]||(e[40]=t=>ge.value=t),class:"form-select shadow-none font-12"},e[145]||(e[145]=[l("option",{value:""},"Any one of the selected approvers",-1),l("option",{value:"ViewOnlyReportee"},"Reporting Manager only",-1),l("option",{value:"all_approvals_required"},"All of the selected approvers",-1),l("option",{value:"requester_as_a_approver"},"Approval by Requestor",-1)]),512),[[Ye,ge.value]])])):p("",!0),l("div",bi,[l("div",gi,[l("span",_i," Select "+m(C.value===0?"Requestors":"Approvers"),1),l("span",yi,m(D.value.length)+" Selected ",1)]),X.value.length?(i(),n("div",hi,[l("div",ki,[l("div",wi,[l("input",{type:"checkbox",id:"selectAll",checked:Zl.value,onChange:Ql,class:"form-check-input me-2 designationCheckBox"},null,40,xi),l("label",Si," Select all designation ("+m(be.value.length)+") ",1)]),C.value!==0?(i(),n("div",Ci,[g(l("input",{type:"checkbox",id:"showHods","onUpdate:modelValue":e[41]||(e[41]=t=>ve.value=t),class:"form-check-input me-2 designationCheckBox"},null,512),[[Q,ve.value]]),e[147]||(e[147]=l("label",{for:"showHods",class:"form-check-label mt-2 fw-bold"}," Show HODs Only ",-1))])):p("",!0),l("div",null,[D.value.length?(i(),n("button",{key:0,type:"button",class:"btn btn-sm font-12 text-danger",onClick:Kl},e[148]||(e[148]=[l("i",{class:"bi bi-x"},null,-1),d(" Clear all ")]))):p("",!0)])]),X.value.length?(i(),Rt(S($t),{key:0,multiple:!0,modelValue:D.value,"onUpdate:modelValue":e[42]||(e[42]=t=>D.value=t),options:be.value,"close-on-select":!1,"clear-search-on-select":!0,placeholder:"Search & Select Designations"},null,8,["modelValue","options"])):p("",!0)],512)):(i(),n("div",Fi,e[149]||(e[149]=[l("div",{class:"d-flex justify-content-center"},[l("span",null,"No Designations Found")],-1)])))]),C.value!==0?(i(),n("div",Di,[e[150]||(e[150]=l("div",null,[l("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),g(l("select",{"onUpdate:modelValue":e[43]||(e[43]=t=>xe.value=t),class:"form-select shadow-none font-12 mt-1 me-2"},[(i(!0),n(U,null,P(Al.value,t=>(i(),n("option",{key:t,value:t},m(t===0?"Requestor":"Approver Level "+t),9,qi))),128))],512),[[Ye,xe.value,void 0,{number:!0}]])])):p("",!0),C.value!==0?(i(),n("div",Ai,[l("div",Li,[l("div",Vi,[g(l("input",{"onUpdate:modelValue":e[44]||(e[44]=t=>Me.value=t),type:"checkbox","true-value":1,"false-value":0,id:"Approver",class:"me-2 m-0 form-check-input designationCheckBox"},null,512),[[Q,Me.value]]),e[151]||(e[151]=l("label",{for:"Approver",class:"m-0"},"Approval Mandatory",-1))]),Be.value===!0?(i(),n("div",Ri,[g(l("input",{"onUpdate:modelValue":e[45]||(e[45]=t=>Ee.value=t),type:"checkbox","true-value":1,"false-value":0,id:"approver_can_edit",class:"me-2 m-0 form-check-input designationCheckBox"},null,512),[[Q,Ee.value]]),e[152]||(e[152]=l("label",{for:"approver_can_edit",class:"m-0"}," Allow this approver to edit the form ",-1))])):p("",!0)])])):p("",!0)]),l("div",$i,[l("div",Mi,[q(Mt,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:Xl,name:C.value===0?"Add Requestor":"Add Approvers"},null,8,["name"])])])])])]))}},Oi=St(Ei,[["__scopeId","data-v-0f07b945"]]);export{Oi as default};
