import{_ as F,r as h,e as M,E as B,i as U,f as l,g as i,h as c,w as T,o as p,c as S,d as o,C as N,D as P,t as y,K as R,m as s}from"./index-DxID15hf.js";const L={class:"p-1 mt-3"},z={class:"table"},J={class:"form-check form-switch"},O=["checked","onClick"],W={class:"form-check-label mt-1"},q={class:"modal fade",id:"EnableDisable",tabindex:"-1","aria-labelledby":"EnableDisableLabel","aria-hidden":"true"},K={class:"modal-dialog modal-dialog-centered"},Y={class:"modal-content"},j={class:"modal-body"},G={__name:"AuthenticationPage",setup(H){const n=h([{title:"Two Factor Authentication",checked:!1},{title:"Send Form as an Attachment Via an E-Mail ",checked:!1},{title:"Welcome E-Mail Configuration",checked:!1},{title:"Enable Sign Up in Login Page",checked:!1},{title:"Send Daily E-mail reminders",checked:!1},{title:"Take Acknowledgement and Signiture while Login",checked:!1}]),b=h(!1),_=h(null),f=h(!1),r=h(""),w=h(!1),k=h(""),$=M(()=>B.value);U(()=>{A()});const C=t=>{_.value=t,f.value=n.value[t].checked,w.value=f.value;const e=f.value===!1?1:0;t===0?r.value=e?"Are you sure you want to enable Two Factor Authentication?":"Are you sure you want to disable Two Factor Authentication?":t===1?r.value=e?"Are you sure you want to enable Send Form As an Attachment Through E-Mail?":"Are you sure you want to disable Send Form As an Attachment Through E-Mail?":t===2?r.value=e?"Are you sure you want to enable E-Mail Configuration?":"Are you sure you want to disable E-Mail Configuration?":t===3?r.value=e?"Are you sure you want to enable Sign up?":"Are you sure you want to disable Sign up?":t===4?r.value=e?"Are you sure you want to enable daily email reminders?":"Are you sure you want to disable daily email reminders?":t===5&&(r.value=e?"Are you sure you want to enable Acknowledgement and Signiture while Login?":"Are you sure you want to disable Acknowledgement and Signiture while Login?"),new bootstrap.Modal(document.getElementById("EnableDisable")).show()},E=()=>{n.value[_.value].checked=w.value},D=()=>{const t=_.value,e=f.value===!1?1:0,a=e?1:0,d=e?0:1;n.value[t].checked=!e;const u=t===0?"System Settings":localStorage.getItem("Bu")||"";t===0?l.put(`${i.resource}${c.SystemSettings}/${encodeURIComponent(u)}`,{enable_two_factor_auth:a}).then(()=>{s.success(`Two Factor Authentication ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),v()}).catch(()=>{s.error("Failed to update Two Factor Authentication!")}):t===1?l.put(`${i.resource}${c.wfSettingEzyForms}/${encodeURIComponent(u)}`,{send_form_as_a_attach_through_mail:a}).then(()=>{s.success(`Send Form As an Attachment Through Mail ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),g()}).catch(()=>{s.error("Failed to update Send Form As an Attachment Through Mail!")}):t===2?b.value===!0?l.put(`${i.resource}${c.wfSettingEzyForms}/${encodeURIComponent(u)}`,{welcome_mail_to_employee:a}).then(()=>{s.success(`Welcome Mail Configuration ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),g()}).catch(()=>{s.error("Failed to update Welcome Mail Configuration!")}):(s.info("Please Configure Default Mail First!"),n.value[t].checked=!1):t===3?l.put(`${i.resource}${c.websiteSettings}/${encodeURIComponent("Website Settings")}`,{disable_signup:d}).then(()=>{s.success(`Sign up ${d===1?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),A()}).catch(()=>{s.error("Failed to update Sign up!")}):t===4?l.put(`${i.resource}${c.wfSettingEzyForms}/${encodeURIComponent(u)}`,{send_daily_alerts:a}).then(()=>{s.success(`daily email reminders ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),g()}).catch(()=>{s.error("Failed to update E-Mail Send Daily reminders")}):t===5&&l.put(`${i.resource}${c.wfSettingEzyForms}/${encodeURIComponent(u)}`,{is_acknowledge:a}).then(()=>{s.success(`acknowledgement and Signiture ${a===0?"Disabled":"Enabled"} Successfully!`,{autoClose:700}),bootstrap.Modal.getInstance(document.getElementById("EnableDisable")).hide(),g()}).catch(()=>{s.error("Failed to update acknowledgement")})};function g(){const t={fields:JSON.stringify(["*"]),filters:JSON.stringify([["name","=",k.value]])};l.get(`${i.resource}${c.wfSettingEzyForms}`,{params:t}).then(e=>{if(e.data.length>0){const a=e.data[0].send_form_as_a_attach_through_mail;n.value[1].checked=a==1;const d=e.data[0].welcome_mail_to_employee;n.value[2].checked=d==1;const u=e.data[0].send_daily_alerts;n.value[4].checked=u==1;const m=e.data[0].is_acknowledge;n.value[5].checked=m==1}}).catch(e=>{console.error("Error fetching business unit settings:",e)})}const v=()=>{const t="System Settings",e={fields:JSON.stringify(["*"])};l.get(`${i.resource}${c.SystemSettings}/${encodeURIComponent(t)}`,{params:e}).then(a=>{a.data&&(n.value[0].checked=a.data.enable_two_factor_auth==1)}).catch(a=>{console.error("Error fetching system settings:",a)})},A=()=>{const t="Website Settings",e={fields:JSON.stringify(["*"])};l.get(`${i.resource}${c.websiteSettings}/${encodeURIComponent(t)}`,{params:e}).then(a=>{a.data&&(n.value[3].checked=a.data.disable_signup==0)}).catch(a=>{console.error("Error fetching system settings:",a)})},I=()=>{const t={fields:JSON.stringify(["default_outgoing","enable_outgoing"]),filters:JSON.stringify([["default_outgoing","=",1],["enable_outgoing","=",1]])};l.get(`${i.resource}${c.Email_Account}`,{params:t}).then(e=>{if(e.data&&e.data.length>0){const a=e.data[0];a.default_outgoing===1&&a.enable_outgoing===1?b.value=!0:b.value=!1}else b.value=!1}).catch(e=>{console.error("Error fetching system settings:",e)})};return T($,t=>{t&&t.length&&(k.value=t,g(),I(),v())},{immediate:!0}),(t,e)=>(p(),S("div",L,[e[2]||(e[2]=o("h1",{class:"m-0 font-13 mb-3"},"Settings",-1)),o("table",z,[e[0]||(e[0]=o("thead",null,[o("tr",null,[o("th",null,"S.No"),o("th",null,"Title"),o("th",null,"Actions")])],-1)),o("tbody",null,[(p(!0),S(N,null,P(n.value,(a,d)=>(p(),S("tr",{key:d},[o("td",null,y(d+1),1),o("td",null,y(a.title),1),o("td",null,[o("div",J,[o("input",{class:"form-check-input shadow-none",type:"checkbox",role:"switch",checked:a.checked,onClick:R(u=>C(d),["prevent"])},null,8,O),o("label",W,y(a.checked?"Enabled":"Disabled"),1)])])]))),128))])]),o("div",q,[o("div",K,[o("div",Y,[o("div",{class:"modal-header"},[e[1]||(e[1]=o("h5",{class:"modal-title",id:"EnableDisableLabel"},"Confirm Action",-1)),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:E})]),o("div",j,y(r.value),1),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:E},"Close"),o("button",{type:"button",class:"btn btn-dark",onClick:D},"Yes, Proceed")])])])])]))}},V=F(G,[["__scopeId","data-v-81f092e6"]]);export{V as default};
