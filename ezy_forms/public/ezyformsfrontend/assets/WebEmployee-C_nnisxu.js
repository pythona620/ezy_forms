var Et=Object.defineProperty,kt=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable;var Ue=(C,p,y)=>p in C?Et(C,p,{enumerable:!0,configurable:!0,writable:!0,value:y}):C[p]=y,ae=(C,p)=>{for(var y in p||(p={}))wt.call(p,y)&&Ue(C,y,p[y]);if(Me)for(var y of Me(p))Ct.call(p,y)&&Ue(C,y,p[y]);return C},oe=(C,p)=>kt(C,xt(p));var ge=(C,p,y)=>new Promise((A,$)=>{var se=L=>{try{Q(y.next(L))}catch(T){$(T)}},R=L=>{try{Q(y.throw(L))}catch(T){$(T)}},Q=L=>L.done?A(L.value):Promise.resolve(L.value).then(se,R);Q((y=y.apply(C,p)).next())});import{_ as St,e as X,d as i,w as W,o as r,c as d,b as t,i as c,a as f,F as O,t as v,q as m,s as j,v as I,p as Y,x as Z,z as re,A as de,B as ue,C as G,D as ye,G as Dt,P as It,T as Nt,y as Vt,h as Lt,E as Pt,k as b,l as _,n as k,j as h,H as K}from"./index-BHd6CXej.js";const Mt={class:"d-flex justify-content-between align-items-center mt-2 py-2"},Ut={class:"modal fade",id:"createDepartments","data-bs-backdrop":"static",tabindex:"-1","data-bs-keyboard":"false","aria-labelledby":"createDepartmentsLabel","aria-hidden":"true"},At={class:"modal-dialog modal-lg"},$t={class:"modal-content"},Rt={class:"modal-body"},Tt={class:"container-fluid"},zt={class:"row"},Bt={class:"col"},Ot={class:"mb-3"},Ft={key:0,class:"text-danger font-11 ps-1"},Xt={class:"mb-3"},jt={key:0,class:"text-danger font-11 ps-1"},Jt={class:"col"},qt={class:"position-relative mb-3"},Ht={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},Wt=["onClick"],Yt={class:"modal-dialog"},Zt={class:"modal-content"},Gt={class:"modal-header"},Kt={class:"modal-body"},Qt={class:"modal-footer"},el={class:"mb-3 font-11"},tl={key:0,style:{"max-width":"100px","max-height":"100px"},class:"d-flex justify-center position-relative mt-2"},ll=["src"],al={class:"modal-footer"},ol={key:0,class:"font-16 me-1"},sl={key:1},nl={key:2,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},il={key:0,class:"mt-2"},rl={key:1},dl={class:"bulkemployee"},ul={class:"insideBulkEmp"},ml={class:"d-flex justify-content-center align-content-center mb-5 gap-2"},pl={key:0,class:"loader"},cl={class:"table-container"},fl={key:0,class:"d-flex justify-content-end align-content-center p-2"},vl={key:1,class:"warning-box"},gl={key:2,class:"styled-table"},yl={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},bl={class:"modal-dialog modal-lg"},_l={class:"modal-content"},hl={class:"modal-body"},El={class:"container-fluid"},kl={class:"row"},xl={class:"col"},wl={class:"mb-3"},Cl={class:"input-container"},Sl={key:0,class:"text-danger font-11 ps-1"},Dl={class:"mb-3"},Il={class:"input-container"},Nl={key:0,class:"text-danger font-11 ps-1"},Vl={class:"ms-1"},Ll={class:"col"},Pl={class:"position-relative mb-3"},Ml={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},Ul=["onClick"],Al={class:"modal-dialog"},$l={class:"modal-content"},Rl={class:"modal-header"},Tl={class:"modal-body"},zl={class:"modal-footer"},Bl={class:"mb-3"},Ol=["value"],Fl={class:"mb-3 font-11"},Xl={key:0,class:"d-flex justify-center position-relative mt-2"},jl=["src"],Jl={class:"modal-footer"},ql={class:"modal fade",id:"DeleteEmployeeModal",tabindex:"-1","aria-hidden":"true"},Hl={class:"modal-dialog modal-dialog-centered"},Wl={class:"modal-content"},Yl={class:"modal-body"},Zl={class:"modal-footer"},Gl={__name:"WebEmployee",setup(C){const p=X(()=>Pt.value),y=i(!0),A=i([]),$=i(""),se=i(0),R=i([]),Q=i([]),L=i([]),T=i([]),N=i(""),be=i(null),J=i(!1),o=i({emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",company_field:"",signature:""});W(()=>o.reporting_to,a=>{if(a){const e=U.find(l=>l.emp_mail_id===a);e?o.reporting_designation=e.designation||"":o.reporting_designation=""}else o.reporting_designation=""});const S=i(null),me=i(""),g=i(""),D=i(!1),P=i([]),w=i([]),_e=i([{th:"Emp ID",td_key:"emp_code"},{th:"Emp Name",td_key:"emp_name"},{th:"Designation",td_key:"designation"},{th:"Department",td_key:"department"},{th:"Signature",td_key:"signature"},{th:"Reports Designation",td_key:"reporting_designation"},{th:"Creation Date",td_key:"creation"},{th:"last Login",td_key:"last_login"},{th:"last Login IP",td_key:"last_ip"},{th:"Emp Status",td_key:"enable"}]);function Ae(a){return a?a.split(".")[0]:""}const ne=i(null),pe=i(0),ce=i(!1),fe=i(""),$e=()=>{ne.value.click()},Re=a=>{const e=a.target.files[0];e&&(Be(e),ne.value&&(ne.value.value=""))},Te=()=>Math.floor(Math.random()*1e6),ze=()=>ge(this,null,function*(){const a=[["company_field","like",`%${$.value}%`],["is_web_form","=","1"]],e={fields:JSON.stringify(["*"]),limit_start:0,limit_page_length:"none",filters:JSON.stringify(a)};try{const l=yield b.get(_.resource+k.EzyEmployeeList,{params:e});if(l.data){const s=l.data;if(s.length){bootstrap.Modal.getInstance(document.getElementById("ExportEmployeeModal")).hide(),h.success("Successfully Completed");const u=XLSX.utils.json_to_sheet(s),x=XLSX.utils.book_new();XLSX.utils.book_append_sheet(x,u,"Employees"),XLSX.writeFile(x,"EmployeeDetails.xlsx")}else h.error("No Employee Details")}}catch(l){console.error("Error exporting employee data:",l)}}),Be=a=>{let l=`${Te()}-@${a.name}`;const s=new FormData;s.append("file",a,l),s.append("is_private","0"),s.append("folder","Home"),ce.value=!0,pe.value=0,b.post(_.uploadfile,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{pe.value=Math.round(n.loaded/n.total*100)}}).then(n=>{n.message&&n.message.file_url?(fe.value=n.message.file_url,n.message.file_url&&fe.value&&Oe()):h.error("File upload failed: file_url not found in response.")}).catch(n=>{console.error("Upload error:",n),h.error("File upload failed. Please try again.")}).finally(()=>{setTimeout(()=>{ce.value=!1,pe.value=0},2e3)})},Oe=()=>{const a={file:fe.value,doctype:k.EzyEmployeeList};b.post(_.uploadbulkEmployeefile,a).then(e=>{var l;if(!(e!=null&&e.data)){h.error("Import response not found.");return}if(w.value=e.data,e.data.success===!1){let s=e._error_message||e.data.message||"Import failed.";if(s=s.replace(/\s*\(.*?\)\s*/g,"").trim(),h.error(s),e.data._server_messages)try{const n=JSON.parse(e.data._server_messages);Array.isArray(n)&&n.forEach(u=>{let B=JSON.parse(u).message||"Permission error.";B=B.replace(/\s*\(.*?\)\s*/g,"").trim(),h.error(B)})}catch(n){console.error("Error parsing _server_messages:",n)}return}(l=w.value.template_warnings)!=null&&l.length&&w.value.template_warnings.forEach(s=>{h.warning(`Warning: ${s}`)}),w.value.records&&(w.value.records=w.value.records.map(s=>oe(ae({},s),{message:s.message}))),w.value.template_status==="success"?h.success("Bulk data imported successfully!"):w.value.template_status==="failed"?h.error(`Import Failed: ${w.value.message}`):w.value.status==="Partial Success"&&h.warning("Partial Success: Some records failed.")}).catch(e=>{console.error("Upload error:",e),h.error("Upload failed. Please try again.")})},ie=X(()=>{var e;return(((e=w.value)==null?void 0:e.records)||[]).map((l,s)=>{let n="N/A",u="N/A";try{if(l.status.toLowerCase()==="success")n=he(l.message),u="Successfully imported";else if(l.status.toLowerCase()==="failed"){const x=JSON.parse(l.message);if(Array.isArray(x)&&x.length>0){u=x[0].title||"Unknown Issue";const B=Fe(x);B?(n=B,u="Invalid Email Address"):n=he(x)}}}catch(x){u="Parsing Error"}return{sNo:s+1,email:n,status:l.status,displayMessage:u}})}),he=a=>{var e,l,s;return typeof a=="string"&&(a=a.toLowerCase(),a.includes("successfully imported "))?a.split("successfully imported ")[1]||"N/A":Array.isArray(a)&&((s=(l=(e=a[0])==null?void 0:e.message)==null?void 0:l.match(/<strong>(.*?)<\/strong>/))==null?void 0:s[1])||"N/A"},Fe=a=>{if(Array.isArray(a)){for(const e of a)if(e.message.includes("is not a valid Email Address"))return e.message.split(" is not a valid Email Address")[0]}return null},Ee=X(()=>{var a;return((a=w.value)==null?void 0:a.template_warnings)||[]}),Xe=()=>{const a=window.XLSX;if(!a){console.error("XLSX library is not loaded.");return}const e=a.utils.json_to_sheet(ie.value),l=a.utils.book_new();a.utils.book_append_sheet(l,e,"Records");const s=a.write(l,{bookType:"xlsx",type:"array"}),n=new Blob([s],{type:"application/octet-stream"}),u=document.createElement("a");u.href=URL.createObjectURL(n),u.download="Records.xlsx",document.body.appendChild(u),u.click(),document.body.removeChild(u)},je=()=>ge(this,null,function*(){const a=p.value,l=yield(yield fetch("/assets/ezy_forms/ezyformsfrontend/Employee_import.xlsx")).arrayBuffer(),s=XLSX.read(l,{type:"array"}),n=s.SheetNames[0],u=s.Sheets[n];u.A2={t:"s",v:a};const x=XLSX.utils.decode_range(u["!ref"]);x.e.r<1&&(x.e.r=1),u["!ref"]=XLSX.utils.encode_range(x);const B=XLSX.write(s,{bookType:"xlsx",type:"array"}),ht=new Blob([B],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),le=document.createElement("a");le.href=URL.createObjectURL(ht),le.setAttribute("download","Employee_import.xlsx"),document.body.appendChild(le),le.click(),document.body.removeChild(le)}),M=i(""),ke=()=>{var l;const a=(l=H.value||o.value.emp_mail_id)==null?void 0:l.trim().toLowerCase();/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)?U.value.some(n=>{var u;return((u=n.emp_mail_id)==null?void 0:u.toLowerCase())===a})?M.value="Email already exists":M.value="":M.value="Invalid email address"};function Je(){y.value=!0}const z=i(!0),q=i(""),qe=X(()=>z.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),xe=a=>(a=a.replace(/\D/g,""),a.startsWith("91")&&a.length===12?a="+"+a:a.length===10&&(a="+91"+a),a);W(()=>o.value.emp_phone,a=>{a.startsWith("+91")||(o.value.emp_phone=xe(a)),z.value||(q.value=o.value.emp_phone)},{immediate:!0});const we=()=>{let a=o.value.emp_phone||"";if(a=xe(a),/^\+91\d{10}$/.test(a))N.value="";else{N.value="Phone number must start with +91 and have 10 digits.";return}q.value=a,o.value.emp_phone=z.value?"+91 ******"+a.slice(-4):a},He=()=>{q.value&&(z.value&&!window.confirm("Are you sure you want to see the phone number?")||(z.value=!z.value,o.value.emp_phone=z.value?"+91 ******"+q.value.slice(-4):q.value))},We=()=>{let a=q.value.replace("+91","");/^\d{10}$/.test(a)?N.value="":N.value="Phone number must be 10 digits."},F=i(!0),H=i(""),Ye=X(()=>F.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),Ce=()=>{if(!F.value||!o.value.emp_mail_id.includes("@"))return;H.value=o.value.emp_mail_id;const[a,e]=H.value.split("@");a.length>3&&(o.value.emp_mail_id=a.slice(0,3)+"***@"+e)},Ze=()=>{H.value&&(F.value&&!window.confirm("Are you sure you want to see the email address?")||(F.value=!F.value,o.value.emp_mail_id=F.value?Ge(H.value):H.value))},Ge=a=>{const[e,l]=a.split("@");return e.length>3?e.slice(0,3)+"***@"+l:a},Ke=a=>{let e=a.target.value;e=e.replace(/[^0-9+]/g,""),e.startsWith("+91")||(e="+91"+e.replace(/^91/,"")),e.length>13&&(e=e.slice(0,13)),o.value.emp_phone=e},Qe=()=>{if(o.value.emp_phone){const a=o.value.emp_phone.replace("+91",""),e=/^\d{10}$/;N.value=e.test(a)?"":"Invalid phone number."}},E=i({limitPageLength:20,limit_start:0}),ee=i("");W(D,a=>{a&&(ee.value=g.value)});const Se=()=>{const a=g.value.toLowerCase().trim();P.value=R.value.filter(e=>e.toLowerCase().includes(a))},De=a=>{o.value.designation=a,g.value=a,P.value=[]},Ie=X(()=>{const a=g.value.trim();return a&&!R.value.includes(a)&&a.length>1}),Ne=()=>{const a=g.value.trim();a&&b.post(_.resource+k.roles,{role_name:a}).then(e=>{var l;(l=e.data)!=null&&l.role_name&&b.post(_.resource+k.designations,{role:e.data.role_name}).then(s=>{var n;(n=s.data)!=null&&n.role&&(R.value.push(s.data.role),o.value.designation=s.data.role,g.value=s.data.role,P.value=[],D.value=!1)})}).catch(e=>{console.error("Error creating role:",e)})},Ve=()=>{o.value.signature=null;const a=document.getElementById("signatureInput");a&&(a.value="")};W(()=>o.value.reporting_to,a=>{if(a){const e=A.value.find(l=>l.emp_mail_id===a);e&&(o.value.reporting_designation=e.designation)}},{immediate:!0});const et=i([{name:"Edit Employee",icon:"fa-solid fa-eye"},{name:"Delete Employee",icon:"fas fa-trash-alt"}]),tt=X(()=>[o.value.emp_code,o.value.emp_name,o.value.emp_mail_id,o.value.department,o.value.designation].every(a=>a&&a.toString().trim()!=="")),ve=i([]);function lt(a,e){ve.value=a,(e==null?void 0:e.name)==="Edit Employee"&&(a?(N.value="",M.value="",o.value=oe(ae({},a),{department:""}),g.value=a.designation||"",pt(()=>{const s=T.value.find(n=>n.name===a.department);o.value.department=s||""}),yt(),gt(),z.value=!0,F.value=!0,we(),Ce(),new bootstrap.Modal(document.getElementById("exampleModal"),{}).show()):(console.warn("No form fields provided."),formCreation(a))),e.name==="Delete Employee"&&new bootstrap.Modal(document.getElementById("DeleteEmployeeModal"),{}).show()}function at(){var e;const a={empl_mail_id:(e=ve.value)==null?void 0:e.emp_mail_id};b.post(_.deleteEmployee,a).then(l=>{l&&(h.success(l.message),V(),bootstrap.Modal.getInstance(document.getElementById("DeleteEmployeeModal")).hide())}).catch(l=>{var s;console.error("Delete error:",((s=l==null?void 0:l.response)==null?void 0:s.data)||l.message)})}function ot(a){st(a.name)}function st(a){const e=[["company_field","like",`%${$.value}%`],["enable","=","1"],["department","like",`%${a}%`],["is_hod","=",1]],l={fields:JSON.stringify(["*"]),filters:JSON.stringify(e),limit_page_length:"none",order_by:"`tabEzy Employee`.`enable` DESC,`tabEzy Employee`.`creation` DESC"};b.get(_.resource+k.EzyEmployeeList,{params:l}).then(s=>{o.value.reporting_to=s.data[0].name,o.reporting_designation=s.data[0].designation}).catch(s=>{o.value.reporting_to="",o.reporting_designation="",console.error("Error fetching department data:",s)})}function nt(a){S.value=a;const e=a.enable==="1"||a.enable===1;me.value=e?"Disable":"Enable",document.getElementById("empActionText").innerText=me.value,document.getElementById("empRowName").innerText=a.emp_name,new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show()}function it(){const a=S.value.enable==="1"||S.value.enable===1;S.value.enable=a?0:1,S.value.is_web_form=0,b.put(`${_.resource}${k.EzyEmployeeList}/${S.value.name}`,S.value).then(()=>{const e={enabled:S.value.enable};return b.put(`${_.resource}${k.users}/${S.value.name}`,e)}).then(()=>{h.success(`Employee ${me.value}d successfully`),bootstrap.Modal.getInstance(document.getElementById("EmployeeToggleModal")).hide(),S.value.enable===1?rt():V()}).catch(e=>{console.error("Toggle employee error:",e)})}function rt(){const a={emp_mail:S.value.emp_mail_id};b.post(_.unablUpdateEmail,a).then(e=>{e&&V()}).catch(e=>{console.error("Upload error:",e)})}const dt=i({emp_code:{type:"input"},emp_name:{type:"input"},designation:{type:"input"},department:{type:"input"},reporting_designation:{type:"input"}});function te(){o.value={emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",signature:null,company_field:p.value};const a=document.getElementById("signatureInput");a&&(a.value="")}function Le(a){const e=a.target.files[0];e&&mt(e,"signature")}const ut=i([]),mt=(a,e)=>{let l=`${a.name}`;const s=new FormData;s.append("file",a,l),s.append("is_private","0"),s.append("folder","Home"),b.post(_.uploadfile,s).then(n=>{n.message&&n.message.file_url?(o.value.signature=n.message.file_url,S.value[e]=n.message.file_url,ut.value.push(e)):console.error("file_url not found in the response.")}).catch(n=>{console.error("Upload error:",n)})};function pt(a){const e={fields:JSON.stringify(["*"]),limit_page_length:"None",limit_start:E.value.limit_start};b.get(_.resource+k.departments,{params:e}).then(l=>{l.data&&(T.value=l.data,a&&a())}).catch(l=>{console.error("Error fetching department data:",l)})}const ct=a=>{E.value.limitPageLength=a,E.value.limit_start=0,V()},ft=([a,e])=>{E.value.limitPageLength=a,E.value.limit_start=e,V()},Pe=i(null);function vt(a){clearTimeout(Pe.value),Pe.value=setTimeout(()=>{E.value.filters=[],_e.value.forEach(e=>{const l=e.td_key;a[l]&&E.value.filters.push([l,"like",`%${a[l]}%`])}),E.value.filters.length?(E.value.limit_start=0,V(E.value.filters)):V()},500)}function V(a){const e=[["company_field","like",`%${$.value}%`],["is_web_form","=","1"],["enable","=","0"]];a&&e.push(...a);const l={fields:JSON.stringify(["*"]),filters:JSON.stringify(e),limit_page_length:E.value.limitPageLength,limit_start:E.value.limit_start,order_by:"`tabEzy Employee`.`enable` DESC,`tabEzy Employee`.`modified` DESC"},s={fields:JSON.stringify(["count(name) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(e)};b.get(`${_.resource}${k.EzyEmployeeList}`,{params:s}).then(n=>{se.value=n.data[0].total_count}).catch(n=>{console.error("Error fetching ezyForms data:",n)}),b.get(_.resource+k.EzyEmployeeList,{params:l}).then(n=>{if(n.data){const u=n.data;E.value.limit_start===0?A.value=u:A.value=A.value.concat(u)}}).catch(n=>{console.error("Error fetching department data:",n)})}const U=i([]);function gt(){const a={fields:JSON.stringify(["*"]),limit_page_length:"None",filters:JSON.stringify([["company_field","like",`%${$.value}%`]]),order_by:"`tabEzy Employee`.`creation` desc"};b.get(_.resource+k.EzyEmployeeList,{params:a}).then(e=>{if(e.data){const l=e.data;E.value.limit_start===0?(U.value=l,Q.value=[...new Set(e.data.map(s=>s.reporting_to))],L.value=[...new Set(e.data.map(s=>s.reporting_designation))],o.value.company_field=p.value):U.value=U.value.concat(l)}}).catch(e=>{console.error("Error fetching department data:",e)})}W(()=>o.value.reporting_to,a=>{const e=U.value.find(l=>l.emp_mail_id===a);o.value.reporting_designation=e==null?void 0:e.designation},{immediate:!0});function yt(){const a=[],e={fields:JSON.stringify(["*"]),filters:JSON.stringify(a),limit_page_length:"None",limit_start:E.value.limit_start,order_by:"`tabWF Roles`.`creation` desc"};b.get(_.resource+k.designations,{params:e}).then(l=>{l.data&&(R.value=[...new Set(l.data.map(s=>s.role))])}).catch(l=>{console.error("Error fetching designations data:",l)})}W(p,a=>{a&&a.length&&(o.value.company_field=a,$.value=a,V())},{immediate:!0});function bt(){var e;if(!tt.value){h.error("Please fill all required fields",{autoClose:1e3,transition:"zoom"});return}if(M.value){h.error("Employee Email Id already exists",{autoClose:1e3,transition:"zoom"});return}o.value.company_field=p.value;const a=oe(ae({},o.value),{department:((e=o.value.department)==null?void 0:e.name)||"",doctype:k.EzyEmployeeList});J.value=!0,b.post(_.resource+k.EzyEmployeeList,a).then(l=>{if(l.data){h.success("Employee Created",{autoClose:500,transition:"zoom"}),bootstrap.Modal.getInstance(document.getElementById("createDepartments")).hide(),te();const n=document.getElementById("signatureInput");n&&(n.value=""),V(),J.value=!1}}).catch(l=>{console.error("Error creating employee:",l)}).finally(()=>{J.value=!1})}function _t(){var e;if(!o.value.designation&&g.value&&(o.value.designation=g.value),o.value.reporting_to){const l=U.value.find(s=>s.emp_mail_id===o.value.reporting_to);l&&(o.value.reporting_designation=l.designation)}else o.value.reporting_designation="";const a=oe(ae({},o.value),{department:((e=o.value.department)==null?void 0:e.name)||""});b.put(`${_.resource}${k.EzyEmployeeList}/${o.value.name}`,a).then(l=>{l.data&&(h.success("Changes Saved",{autoClose:500,transition:"zoom"}),V())}).catch(l=>{console.error("Error saving employee:",l)})}return(a,e)=>(r(),d("div",null,[t("div",null,[t("div",Mt,[e[41]||(e[41]=t("div",null,[t("h1",{class:"m-0 font-13"}," Employee Approvals ")],-1)),e[42]||(e[42]=t("div",{class:"d-flex align-items-center gap-2"},[t("button",{type:"button",class:"btn export-btn CreateDepartments font-12","data-bs-toggle":"modal","data-bs-target":"#ExportEmployeeModal"}," Export Employees ")],-1)),t("div",Ut,[t("div",At,[t("div",$t,[t("div",{class:"modal-header"},[e[26]||(e[26]=t("h5",{class:"modal-title",id:"createDepartmentsLabel"}," Employee Creation ",-1)),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:te,"aria-label":"Close"})]),t("div",Rt,[t("div",Tt,[t("div",zt,[t("div",Bt,[e[29]||(e[29]=t("label",{class:"font-13 ps-1",for:"emp_name"},[c("Emp Name"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(O,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter Emp Name",modelValue:o.value.emp_name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.emp_name=l)},null,8,["modelValue"]),e[30]||(e[30]=t("label",{class:"font-13 ps-1",for:"emp_code"},[c("Emp ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(O,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter Emp ID",modelValue:o.value.emp_code,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.emp_code=l)},null,8,["modelValue"]),t("div",Ot,[e[27]||(e[27]=t("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),f(O,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"13",onInput:Ke,onChange:Qe,placeholder:"Enter Phone Number",modelValue:o.value.emp_phone,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.emp_phone=l)},null,8,["modelValue"]),N.value?(r(),d("p",Ft,v(N.value),1)):m("",!0)]),t("div",Xt,[e[28]||(e[28]=t("label",{class:"font-13 ps-1",for:"emp_mail_id"},[c("Emp Mail ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(O,{class:"mb-1",tag:"input",type:"email",name:"emp_mail_id",onChange:ke,required:!0,id:"emp_mail_id",placeholder:"Enter Email",modelValue:o.value.emp_mail_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.emp_mail_id=l)},null,8,["modelValue"]),M.value?(r(),d("p",jt,v(M.value),1)):m("",!0)]),e[31]||(e[31]=t("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[c("Departments"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(Y(Z),{modelValue:o.value.department,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.department=l),options:T.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:j(({values:l,isOpen:s})=>[l.length?I((r(),d("span",{key:0,class:"multiselect__single font-10"},v(l.map(n=>n.department_name).join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"])]),t("div",Jt,[t("div",qt,[e[36]||(e[36]=t("label",{class:"font-13 ps-1",for:"Designation"},[c(" Designation"),t("span",{class:"text-danger ps-1"},"*")],-1)),I(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=l=>g.value=l),onInput:Se,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[re,g.value]]),g.value&&(P.value.length||Ie.value)?(r(),d("ul",Ht,[(r(!0),d(de,null,ue(P.value,(l,s)=>(r(),d("li",{key:s,class:"list-group-item list-group-item-action font-12",onClick:n=>De(l),style:{cursor:"pointer"}},v(l),9,Wt))),128)),g.value&&P.value.length===0?(r(),d("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[6]||(e[6]=l=>D.value=!0)},[e[32]||(e[32]=c(' ➕ Create role "')),t("strong",null,v(g.value),1),e[33]||(e[33]=c('" '))])):m("",!0)])):m("",!0),D.value?(r(),d("div",{key:1,class:G(["modal fade",{show:D.value}]),style:{display:"block"}},[t("div",Yt,[t("div",Zt,[t("div",Gt,[e[34]||(e[34]=t("h5",{class:"modal-title"},"Create New Role",-1)),t("button",{type:"button",class:"btn-close",onClick:e[7]||(e[7]=l=>D.value=!1)})]),t("div",Kt,[e[35]||(e[35]=t("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),I(t("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[8]||(e[8]=l=>ee.value=l),placeholder:"Enter role name"},null,512),[[re,ee.value]])]),t("div",Qt,[t("button",{class:"btn btn-secondary",onClick:e[9]||(e[9]=l=>D.value=!1)},"Cancel"),t("button",{class:"btn btn-dark",onClick:Ne},"Save Role")])])])],2)):m("",!0)]),e[38]||(e[38]=t("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),f(Y(Z),{modelValue:o.value.reporting_to,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.reporting_to=l),options:U.value.map(l=>l.emp_mail_id),multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:j(({values:l,isOpen:s})=>[l.length?I((r(),d("span",{key:0,class:"multiselect__single font-10"},v(l.join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"]),e[39]||(e[39]=t("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),f(Y(Z),{modelValue:o.value.reporting_designation,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.reporting_designation=l),options:R.value,"allow-empty":!0,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!o.value.reporting_to},{selection:j(({values:l,isOpen:s})=>[l.length?I((r(),d("span",{key:0,class:"multiselect__single font-10"},v(l.join(", "))+" selected ",513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options","disabled"]),t("div",el,[e[37]||(e[37]=t("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),t("input",{type:"file",ref_key:"signatureInputRef",ref:be,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Le,"aria-describedby":"fileHelpId"},null,544),o.value.signature?(r(),d("div",tl,[t("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:Ve}),t("img",{src:o.value.signature,style:{"max-width":"100px","max-height":"100px"},alt:"Signature",class:"img-fluid signature-img border-1"},null,8,ll)])):m("",!0)])])])])]),t("div",al,[f(ye,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:te,"data-bs-dismiss":"modal"}),t("button",{type:"button",class:"applyfilter btn btn-dark text-nowrap font-10 d-flex justify-content-center align-items-center",onClick:bt},[J.value?m("",!0):(r(),d("span",ol,e[40]||(e[40]=[t("i",{class:"bi bi-check2"},null,-1)]))),J.value?m("",!0):(r(),d("span",sl,"Create Employee")),J.value?(r(),d("span",nl)):m("",!0)])])])])])]),y.value?(r(),d("div",il,[f(Dt,{tHeaders:_e.value,tData:A.value,isAction:"true",actions:et.value,enableDisable:"true",onActionClicked:lt,onToggleClick:nt,actionType:"dropdown",isCheckbox:"true",isFiltersoption:"true","field-mapping":dt.value,onUpdateFilters:vt},null,8,["tHeaders","tData","actions","field-mapping"]),f(It,{currentRecords:A.value.length,totalRecords:se.value,onUpdateValue:ct,onLimitStart:ft},null,8,["currentRecords","totalRecords"])])):(r(),d("div",rl,[t("div",dl,[t("div",{class:"d-flex justify-content-between align-content-center"},[t("button",{type:"button",class:"font-12 btn btn-light",onClick:Je},e[43]||(e[43]=[t("i",{class:"bi bi-chevron-left"},null,-1),c(" Back to Employee List ")]))]),t("div",ul,[t("div",ml,[t("div",{class:G(w.value.length?"":"mb-5 mt-5")},[t("button",{type:"button",class:"font-12 my-1 btn btn-light",onClick:je},e[44]||(e[44]=[t("i",{class:"bi bi-download"},null,-1),c(" Use template ")])),t("input",{type:"file",ref_key:"fileInput",ref:ne,onChange:Re,hidden:""},null,544),t("button",{type:"button",class:"font-12 my-1 btn btn-dark",onClick:$e},e[45]||(e[45]=[t("i",{class:"bi bi-upload"},null,-1),c(" Upload Data ")]))],2)]),f(Nt,{name:"fade"},{default:j(()=>[ce.value?(r(),d("div",pl)):m("",!0)]),_:1}),t("div",null,[t("div",cl,[ie.value.length>0?(r(),d("div",fl,[t("button",{type:"button",class:"btn btn-light font-12",onClick:Xe},e[46]||(e[46]=[t("i",{class:"bi bi-download mx-2"},null,-1),c("Download Excel")]))])):m("",!0),Ee.value.length?(r(),d("div",vl,[e[47]||(e[47]=t("h3",{class:"font-13"},"Template Warnings:",-1)),t("ul",null,[(r(!0),d(de,null,ue(Ee.value,(l,s)=>(r(),d("li",{key:s},v(l),1))),128))])])):m("",!0),ie.value.length>0?(r(),d("table",gl,[e[48]||(e[48]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Email"),t("th",null,"Status"),t("th",null,"Message")])],-1)),t("tbody",null,[(r(!0),d(de,null,ue(ie.value,(l,s)=>(r(),d("tr",{key:s},[t("td",null,v(s+1),1),t("td",null,v(l.email),1),t("td",{class:G(l.status==="success"?"status-success":"status-failed")},v(l.status),3),t("td",null,v(l.displayMessage),1)]))),128))])])):m("",!0)])])])])]))]),t("div",yl,[t("div",bl,[t("div",_l,[t("div",{class:"modal-header"},[e[49]||(e[49]=t("h5",{class:"modal-title",id:"viewEmployeeLabel"},"Employee Data",-1)),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:te,"aria-label":"Close"})]),t("div",hl,[t("div",El,[t("div",kl,[t("div",xl,[e[53]||(e[53]=t("label",{class:"font-13 ps-1",for:"emp_name"},[c("Emp Name"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(O,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter department code",modelValue:o.value.emp_name,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.emp_name=l)},null,8,["modelValue"]),e[54]||(e[54]=t("label",{class:"font-13 ps-1",for:"emp_code"},[c("Emp ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(O,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter department code",modelValue:o.value.emp_code,"onUpdate:modelValue":e[13]||(e[13]=l=>o.value.emp_code=l)},null,8,["modelValue"]),t("div",wl,[e[50]||(e[50]=t("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),t("div",Cl,[f(O,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"10",class:"w-100",readonly:!0,placeholder:"Enter Phone Number",modelValue:o.value.emp_phone,"onUpdate:modelValue":e[14]||(e[14]=l=>o.value.emp_phone=l),onInput:we,onChange:We},null,8,["modelValue"]),t("i",{class:G([qe.value,"eye-icon"]),onClick:He},null,2)]),N.value?(r(),d("p",Sl,v(N.value),1)):m("",!0)]),t("div",Dl,[e[51]||(e[51]=t("label",{class:"font-13 ps-1",for:"emp_mail_id"},[c("Emp Mail ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),t("div",Il,[f(O,{class:"mb-1 w-100",tag:"input",type:"email",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter Email",modelValue:o.value.emp_mail_id,"onUpdate:modelValue":e[15]||(e[15]=l=>o.value.emp_mail_id=l),onInput:Ce,onChange:ke,required:!0},null,8,["modelValue"]),t("i",{class:G([Ye.value,"eye-icon"]),onClick:Ze},null,2)]),M.value?(r(),d("p",Nl,v(M.value),1)):m("",!0)]),e[55]||(e[55]=t("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[c("Departments"),t("span",{class:"text-danger ps-1"},"*")],-1)),f(Y(Z),{modelValue:o.value.department,"onUpdate:modelValue":[e[16]||(e[16]=l=>o.value.department=l),ot],options:T.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:j(({values:l,isOpen:s})=>[l.length?I((r(),d("span",{key:0,class:"multiselect__single font-10"},v(l.map(n=>n.department_name).join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"]),t("div",Vl,[I(t("input",{type:"checkbox",id:"isHOD","true-value":"1","false-value":"0","onUpdate:modelValue":e[17]||(e[17]=l=>o.value.is_hod=l),class:"form-check-input mt-1 input-border"},null,512),[[Vt,o.value.is_hod]]),e[52]||(e[52]=t("label",{class:"font-13 ms-2",for:"isHOD"},"Is HOD",-1))])]),t("div",Ll,[t("div",Pl,[e[60]||(e[60]=t("label",{class:"font-13 ps-1",for:"Designation"},[c(" Designation"),t("span",{class:"text-danger ps-1"},"*")],-1)),I(t("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=l=>g.value=l),onInput:Se,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[re,g.value]]),g.value&&(P.value.length||Ie.value)?(r(),d("ul",Ml,[(r(!0),d(de,null,ue(P.value,(l,s)=>(r(),d("li",{key:s,class:"list-group-item list-group-item-action font-12",onClick:n=>De(l),style:{cursor:"pointer"}},v(l),9,Ul))),128)),g.value&&P.value.length===0?(r(),d("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[19]||(e[19]=l=>D.value=!0)},[e[56]||(e[56]=c(' ➕ Create role "')),t("strong",null,v(g.value),1),e[57]||(e[57]=c('" '))])):m("",!0)])):m("",!0),D.value?(r(),d("div",{key:1,class:G(["modal fade",{show:D.value}]),style:{display:"block"}},[t("div",Al,[t("div",$l,[t("div",Rl,[e[58]||(e[58]=t("h5",{class:"modal-title"},"Create New Role",-1)),t("button",{type:"button",class:"btn-close",onClick:e[20]||(e[20]=l=>D.value=!1)})]),t("div",Tl,[e[59]||(e[59]=t("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),I(t("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[21]||(e[21]=l=>ee.value=l),placeholder:"Enter role name"},null,512),[[re,ee.value]])]),t("div",zl,[t("button",{class:"btn btn-secondary",onClick:e[22]||(e[22]=l=>D.value=!1)},"Cancel"),t("button",{class:"btn btn-dark",onClick:Ne},"Save Role")])])])],2)):m("",!0)]),e[64]||(e[64]=t("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),f(Y(Z),{modelValue:o.value.reporting_to,"onUpdate:modelValue":e[23]||(e[23]=l=>o.value.reporting_to=l),options:U.value.map(l=>l.emp_mail_id),multiple:!1,"close-on-select":!0,"allow-empty":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:j(({values:l,isOpen:s})=>[l.length?I((r(),d("span",{key:0,class:"multiselect__single font-10"},v(l.join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"]),e[65]||(e[65]=t("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),f(Y(Z),{modelValue:o.value.reporting_designation,"onUpdate:modelValue":e[24]||(e[24]=l=>o.value.reporting_designation=l),options:R.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!o.value.reporting_to},{selection:j(({values:l,isOpen:s})=>[l.length?I((r(),d("span",{key:0,class:"multiselect__single font-10"},v(l.join(", "))+" selected ",513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options","disabled"]),t("div",Bl,[e[61]||(e[61]=t("label",{class:"font-13 ps-1",for:"reporting_to"},"Acknowledge On",-1)),e[62]||(e[62]=t("br",null,null,-1)),t("input",{class:"mb-3 date-time",tag:"input",type:"datetime-local",name:"acknowledge_on",id:"acknowledge_on",placeholder:"Enter department code",value:Ae(o.value.acknowledge_on),readonly:""},null,8,Ol)]),t("div",Fl,[e[63]||(e[63]=t("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),t("input",{type:"file",ref_key:"signatureInputRef",ref:be,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Le,"aria-describedby":"fileHelpId"},null,544),o.value.signature?(r(),d("div",Xl,[t("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:Ve}),t("img",{src:o.value.signature,alt:"Signature",class:"img-fluid signature-img"},null,8,jl)])):m("",!0)])])])])]),t("div",Jl,[f(ye,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:te,"data-bs-dismiss":"modal"}),f(ye,{type:"button",class:"btn btn-dark font-11",name:"Save Employee","data-bs-dismiss":"modal",onClick:_t})])])])]),t("div",{class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content"},[e[67]||(e[67]=Lt('<div class="modal-header" data-v-b726dc50><h5 class="modal-title" data-v-b726dc50>Confirm Employee Status</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-b726dc50></button></div><div class="modal-body" data-v-b726dc50> Are you sure you want to <span id="empActionText" data-v-b726dc50></span> &quot;<span id="empRowName" data-v-b726dc50></span>&quot;? </div>',2)),t("div",{class:"modal-footer"},[e[66]||(e[66]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:it},"Yes, Proceed")])])])]),t("div",{class:"modal fade",id:"ExportEmployeeModal",tabindex:"-1","aria-hidden":"true"},[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content"},[e[69]||(e[69]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Export Employee"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[70]||(e[70]=t("div",{class:"modal-body"}," Are you sure you want to export the employee details? ",-1)),t("div",{class:"modal-footer"},[e[68]||(e[68]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:ze},"Yes, Proceed")])])])]),t("div",ql,[t("div",Hl,[t("div",Wl,[e[74]||(e[74]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Delete Employee"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Yl,[e[71]||(e[71]=c(" Are you sure you want to delete ")),t("span",null,'"'+v(ve.value.emp_name)+'"',1),e[72]||(e[72]=c("? "))]),t("div",Zl,[e[73]||(e[73]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:e[25]||(e[25]=l=>at())},"Yes, Proceed")])])])])]))}},ea=St(Gl,[["__scopeId","data-v-b726dc50"]]);export{ea as default};
