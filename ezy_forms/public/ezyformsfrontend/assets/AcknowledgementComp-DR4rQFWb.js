import{_ as q,r as n,e as G,E as H,w,I as Q,f as u,g,h as p,o as _,c as C,d as t,b as f,G as Y,P as K,F as W,q as X,l as h,t as D,m as M}from"./index-DxID15hf.js";import{Q as Z}from"./vue-quill.snow-CWmYDCJk.js";const ee={class:"mt-2"},te={class:"modal fade",id:"AcknowledgementModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"AcknowledgementLabel","aria-hidden":"true"},ae={class:"modal-dialog modal-lg modal-dialog-centered"},ne={class:"modal-content"},le={class:"modal-body"},oe={class:"modal-footer"},se={class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},de={class:"modal-dialog modal-dialog-centered"},ie={class:"modal-content"},re={class:"modal-body"},me={class:"fw-bold"},ce={class:"fw-semibold"},ue={__name:"AcknowledgementComp",setup(ge){const A=n(0),S=n([]),c=n([]);n({ezy_departments_items:[]});const T=n([]),i=n(""),r=n(""),v=n(!1);function U(){v.value=!0,i.value="",r.value=""}function $(){const a={acknowledgement:r.value,naming_series:i.value};u.post(g.resource+p.acknowledgement,a).then(e=>{e.data&&(bootstrap.Modal.getInstance(document.getElementById("AcknowledgementModal")).hide(),v.value=!1,d())})}function B(){const a={acknowledgement:r.value,naming_series:i.value};u.put(`${g.resource}${p.acknowledgement}/${E.value.name}`,a).then(e=>{e.data&&(M.success("acknowledgement Updated successfully",{autoClose:700}),d(),bootstrap.Modal.getInstance(document.getElementById("AcknowledgementModal")).hide())}).catch(e=>{console.error("Error updating toggle:",e)})}const E=n("");function x(){i.value="",r.value="",v.value=!1}function F(a){i.value=a.naming_series||"",r.value=a.acknowledgement||"",E.value=a,new bootstrap.Modal(document.getElementById("AcknowledgementModal")).show()}const m=n({}),y=n("");function I(a){m.value=a;const e=a.enable===0;y.value=e?"Enable":"Disable",new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show()}function V(){const a=m.value.enable==="1"||m.value.enable===1;m.value.enable=a?0:1,u.put(`${g.resource}${p.acknowledgement}/${m.value.name}`,m.value).then(e=>{e.data&&(M.success(`acknowledgement ${y.value}d successfully`,{autoClose:700}),d())}).catch(e=>{console.error("Error updating toggle:",e)})}const O=G(()=>H.value),o=n({limitPageLength:20,limit_start:0,filters:[]}),b=n({department_code:"",department_name:""}),N=n([{th:"Name",td_key:"name"},{th:"Status",td_key:"activate"}]),R=n({full_name:{type:"input"},subject:{type:"input"},status:{type:"select",options:["Success","Failed"]}}),k=n({department_code:"",department_name:"",business_unit:"",ezy_departments_items:[]});w(()=>k.value.department_code,a=>{const e=a.trim().toLowerCase();S.value.filter(l=>l!==null).map(l=>l.trim().toLowerCase()).includes(e)?b.value.department_code="Department code already exists.":b.value.department_code=""}),w(()=>k.value.department_name,a=>{const e=a.trim().toLowerCase();T.value.filter(l=>l!==null).map(l=>l.trim().toLowerCase()).includes(e)?b.value.department_name="Department name already exists.":b.value.department_name=""}),Q({applieddepartment_name:!1,applieddepartment_code:!1,department_name:"",department_code:""}),w(O,a=>{k.value.business_unit=a,a.length&&d()},{immediate:!0});const L=n(null);function j(a){clearTimeout(L.value),L.value=setTimeout(()=>{o.value.filters=[],N.value.forEach(e=>{const s=e.td_key;a[s]&&o.value.filters.push([s,"like",`%${a[s]}%`])}),o.value.filters.length?d(o.value.filters):d()},500)}const z=a=>{o.value.limitPageLength=a,o.value.limit_start=0,d()},J=([a,e])=>{o.value.limitPageLength=a,o.value.limit_start=e,d()};function d(a){a&&o.value.filters.push(...a);const e={fields:JSON.stringify(["*"]),filters:JSON.stringify(o.value.filters),limit_page_length:o.value.limitPageLength,limit_start:o.value.limit_start,order_by:"`tabAcknowledgement`.`creation` desc"},s={fields:JSON.stringify(["count(name) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(o.value.filters)};u.get(`${g.resource}${p.acknowledgement}`,{params:s}).then(l=>{A.value=l.data[0].total_count}).catch(l=>{console.error("Error fetching ezyForms data:",l)}),u.get(g.resource+p.acknowledgement,{params:e}).then(l=>{if(l.data){const P=l.data;o.value.limit_start===0?c.value=P:c.value=c.value.concat(P)}}).catch(l=>{console.error("Error fetching department data:",l)})}return(a,e)=>(_(),C("div",null,[t("div",{class:"d-flex justify-content-between align-items-center py-2"},[e[2]||(e[2]=t("div",null,[t("h1",{class:"mt-3 font-13"}," Acknowledgement ")],-1)),t("div",{class:"d-flex gap-2 align-items-center"},[t("div",{class:"d-flex align-items-center"},[t("button",{type:"button",class:"btn btn-dark CreateDepartments","data-bs-toggle":"modal","data-bs-target":"#AcknowledgementModal",onClick:U}," Create Acknowledgement ")])])]),t("div",ee,[f(Y,{tHeaders:N.value,tData:c.value,enableDisable:"true",isAction:"true",viewType:"viewPdf",isFiltersoption:"true",onCellClick:F,"field-mapping":R.value,onUpdateFilters:j,onToggleClick:I},null,8,["tHeaders","tData","field-mapping"]),f(K,{currentRecords:c.value.length,totalRecords:A.value,onUpdateValue:z,onLimitStart:J},null,8,["currentRecords","totalRecords"])]),t("div",te,[t("div",ae,[t("div",ne,[t("div",{class:"modal-header"},[e[3]||(e[3]=t("h5",{class:"modal-title",id:"AcknowledgementLabel"},"Acknowledgement",-1)),t("button",{onClick:x,type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",le,[e[4]||(e[4]=t("label",{for:"password",class:"font-13"},"Acknowledgement Name",-1)),e[5]||(e[5]=t("br",null,null,-1)),f(W,{tag:"input",type:"text",name:"acknowledgementName",id:"acknowledgementName",placeholder:"Enter Name",class:"mb-4",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s)},null,8,["modelValue"]),e[6]||(e[6]=t("label",{for:"password",class:"font-13"},"Acknowledgement",-1)),e[7]||(e[7]=t("br",null,null,-1)),f(X(Z),{content:r.value,"onUpdate:content":e[1]||(e[1]=s=>r.value=s),contentType:"html",theme:"snow",style:{height:"300px"}},null,8,["content"])]),t("div",oe,[t("button",{onClick:x,type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Close "),v.value?(_(),C("button",{key:0,type:"button",class:"btn btn-dark",onClick:$}," Submit ")):(_(),C("button",{key:1,type:"button",class:"btn btn-dark",onClick:B}," Update "))])])])]),t("div",se,[t("div",de,[t("div",ie,[e[12]||(e[12]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Confirm Acknowledgement Status"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",re,[e[8]||(e[8]=h(" Are you sure you want to ")),t("span",me,D(y.value),1),e[9]||(e[9]=h(' "')),t("span",ce,D(m.value.name),1),e[10]||(e[10]=h('"? '))]),t("div",{class:"modal-footer"},[e[11]||(e[11]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal",onClick:V},"Yes, Proceed")])])])])]))}},be=q(ue,[["__scopeId","data-v-3f5904da"]]);export{be as default};
