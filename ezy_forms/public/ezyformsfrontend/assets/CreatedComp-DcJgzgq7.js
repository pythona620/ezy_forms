var W=Object.defineProperty;var E=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var B=(b,l,n)=>l in b?W(b,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):b[l]=n,M=(b,l)=>{for(var n in l||(l={}))X.call(l,n)&&B(b,n,l[n]);if(E)for(var n of E(l))Y.call(l,n)&&B(b,n,l[n]);return b};import{p as Z,d as r,f as L,e as U,q as D,w as ee,C as te,o as d,c as m,b as o,t as g,g as u,h as c,a as _,_ as oe,P as se,F as w,E as ae,j as le,l as F,m as x,n as P}from"./index-B-ZWE6ER.js";import{B as ne}from"./ButtonComp-Ciox4MwK.js";import{F as ie}from"./FormPreview-BWxa4xB1.js";const re={class:"d-flex justify-content-between align-items-center formsticky py-2"},de={class:"m-0 font-11 pt-1"},me={class:"d-flex gap-2 align-items-center"},ce={class:"me-2"},fe={key:0,class:"process-date font-12 m-0"},pe={key:1,class:"process-date font-12 m-0"},ue={key:2,class:"process-date font-12 m-0"},_e={key:3,class:"process-date font-12 m-0"},be={key:4,class:"process-date font-12 m-0"},ve={type:"button",class:"filterbtn d-flex align-items-center position-relative","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},ge={key:0,class:"badge badge-light colorappiled"},ye={class:"d-flex align-items-center"},he={class:"mt-2"},ke={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},we={class:"modal-dialog modal-xl"},Fe={class:"modal-content"},xe={class:"modal-body"},Ce={class:"row"},Se={class:"col-4"},Ve={class:"col-4"},Pe={class:"col-4"},$e={class:"col-4"},Re={class:"col-4"},Oe={class:"modal fade",id:"pdfView",tabindex:"-1","aria-labelledby":"pdfViewLabel","aria-hidden":"true"},qe={class:"modal-dialog modal-xl"},Ne={class:"modal-content"},Ae={class:"modal-header py-2 d-block bg-dark text-white"},Ee={class:"d-flex justify-content-between align-items-center"},Be={class:""},Me={class:"modal-body"},Le=["innerHTML"],Ue={__name:"CreatedComp",setup(b){const l=r(0),n=r(""),v=r({}),y=r([]),j=L(()=>ae.value);U([]),D(()=>{});const I=r({Name:{type:"input"}}),S=r(null),z=r([{name:"View form",icon:"fa-solid fa-eye"},{name:"Edit Form",icon:"fa-solid fa-edit"},{name:"PDF Format",icon:"bi bi-filetype-pdf"},{name:"Activate this form",icon:"fa-solid fa-check-circle"},{name:"In-active this form",icon:"fa-solid fa-ban"},{name:"Edit accessibility to dept.",icon:"fa-solid fa-users"}]);function T(s,e){if(e.name==="View form")s!=null&&s.form_json?(v.value=M({},s),console.log(v.value,"lllllllllll"),S.value=le(JSON.parse(s==null?void 0:s.form_json).fields),console.log(S.value,"ooooo"),new bootstrap.Modal(document.getElementById("formViewModal"),{}).show()):(console.warn("There are no form fields"),C(s));else if(e.name==="Edit Form")C(s);else if(e.name==="PDF Format"){v.value=s,console.log(s.form_short_name,"form_short_name");const a={form_short_name:s.form_short_name};F.post(x.preview_dynamic_form,a).then(i=>{console.log(i,"form pdf responce"),n.value=i.message}).catch(i=>{console.error("Error fetching data:",i)}),new bootstrap.Modal(document.getElementById("pdfView"),{}).show()}else e.name==="Edit accessibility to dept."?C(s):e.name==="In-active this form"?$(s,"0"):e.name==="Activate this form"&&$(s,"1")}function J(){console.log(v.value,"selectedForm");const s={form_short_name:v.value.form_short_name,name:v.value.name};F.post(x.download_pdf_form,s).then(e=>{console.log(e,"download pdf")}).catch(e=>{console.error("Error fetching data:",e)})}function $(s,e){if(s){const a=s.name,f={active:e};F.put(`${x.resource}${P.EzyFormDefinitions}/${a}`,f).then(i=>{console.log(`Form status updated to ${e==="1"?"Active":"Inactive"}`,i),k()}).catch(i=>{console.error("Error updating form status:",i)})}}const t=U({appliedform_name:!1,appliedform_category:!1,appliedaccessible_departments:!1,appliedStatus:!1,appledowner_of_the_form:!1,form_name:"",form_category:"",accessible_departments:"",active:"",owner_of_the_form:""}),R=L(()=>[{value:t.form_category,applied:t.appliedform_category},{value:t.form_name,applied:t.appliedform_name},{value:t.active,applied:t.appliedStatus},{value:t.accessible_departments,applied:t.appliedaccessible_departments},{value:t.owner_of_the_form,applied:t.appledowner_of_the_form}].filter(s=>s.applied&&s.value).length);function h(s){s==="form_name"?(t.form_name="",t.appliedform_name=!1):s==="form_category"?(t.form_category="",t.appliedform_category=!1):s==="accessible_departments"?(t.accessible_departments="",t.appliedaccessible_departments=!1):s==="active"?(t.active="",t.appliedStatus=!1):s==="owner_of_the_form"&&(t.owner_of_the_form="",t.appledowner_of_the_form=!1),O()}function O(){t.appliedform_name=!!t.form_name,t.appliedform_category=!!t.form_category,t.appliedaccessible_departments=!!t.accessible_departments,t.appliedStatus=!!t.active,t.appledowner_of_the_form=!!t.owner_of_the_form,k()}const p=r({limit_start:0,limitPageLength:100,form_name:"",form_short_name:"",accessible_departments:"[]",business_unit:"",form_category:"",owner_of_the_form:"",search:""});ee(j,s=>{p.value.business_unit=s,s.length&&(console.log(s,"new value of business unit"),y.value=[],k())},{immediate:!0});const H=r([{th:"Name",td_key:"name"},{th:"Form name",td_key:"form_name"},{th:"Form category",td_key:"form_category"},{th:"Owner of form",td_key:"owner_of_the_form"},{th:"Accessible departments",td_key:"accessible_departments"},{th:"Status",td_key:"active"}]),q=te();function C(s=null){s==null?q.push({name:"FormStepper"}):q.push({name:"FormStepper",params:{paramid:s.name}})}const G=s=>{p.value.limitPageLength=s,p.value.limit_start=0,k()},K=([s,e])=>{p.value.limitPageLength=s,p.value.limit_start=e,k()};function Q(){t.value={Requested_id:"",Requested_dept:"",Owner_OF_Form:"",Form_Category:"",Form_Name:"",Requested_Period:"",Approval_status:"",RequestedId:""}}const N=r([]);r([]);const A=r([]);function k(){const s=[["business_unit","like",`%${p.value.business_unit}%`]];t.form_name&&s.push(["form_name","like",`%${t.form_name}%`]),t.form_category&&s.push(["form_category","like",`${t.form_category}`]),t.accessible_departments&&s.push(["accessible_departments","like",`${t.accessible_departments}`]),t.active&&s.push(["active","like",`${t.active}`]),t.owner_of_the_form&&s.push(["owner_of_the_form","like",t.owner_of_the_form]);const e={fields:JSON.stringify(["*"]),filters:JSON.stringify(s),limit_page_length:p.value.limitPageLength,limit_start:p.value.limit_start,order_by:"`tabEzy Form Definitions`.`creation` desc"},a={fields:JSON.stringify(["count( `tabEzy Form Definitions`.`name`) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(s)};F.get(`${x.resource}${P.EzyFormDefinitions}`,{params:a}).then(f=>{l.value=f.data[0].total_count}).catch(f=>{console.error("Error fetching ezyForms data:",f)}),F.get(`${x.resource}${P.EzyFormDefinitions}`,{params:e}).then(f=>{const i=f.data;p.value.limit_start===0?(y.value=i,N.value=[...new Set(i.map(V=>V.form_category))],A.value=[...new Set(i.map(V=>V.owner_of_the_form))]):y.value=y.value.concat(i)}).catch(f=>{console.error("Error fetching ezyForms data:",f)})}return(s,e)=>(d(),m("div",null,[o("div",re,[o("div",null,[e[12]||(e[12]=o("h1",{class:"m-0 font-13"},"Forms Master",-1)),o("p",de,g(l.value)+" forms available",1)]),o("div",me,[o("div",null,[o("div",ce,[t.form_name&&t.appliedform_name?(d(),m("span",fe,[u(g(t.form_name)+" ",1),t.form_name?(d(),m("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[0]||(e[0]=a=>h("form_name"))},e[13]||(e[13]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):c("",!0)])):c("",!0),t.form_category&&t.appliedform_category?(d(),m("span",pe,[u(g(t.form_category)+" ",1),t.form_category?(d(),m("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[1]||(e[1]=a=>h("form_category"))},e[14]||(e[14]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):c("",!0)])):c("",!0),t.accessible_departments&&t.appliedaccessible_departments?(d(),m("span",ue,[u(g(t.accessible_departments)+" ",1),t.accessible_departments?(d(),m("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[2]||(e[2]=a=>h("accessible_departments"))},e[15]||(e[15]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):c("",!0)])):c("",!0),t.active&&t.appliedStatus?(d(),m("span",_e,[u(g(t.active)+" ",1),t.active?(d(),m("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[3]||(e[3]=a=>h("active"))},e[16]||(e[16]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):c("",!0)])):c("",!0),t.owner_of_the_form&&t.appledowner_of_the_form?(d(),m("span",be,[u(g(t.owner_of_the_form)+" ",1),t.owner_of_the_form?(d(),m("span",{key:0,class:"badge badge-icon rounded-3 text-white",onClick:e[4]||(e[4]=a=>h("owner_of_the_form"))},e[17]||(e[17]=[o("i",{class:"ri-close-line close-icon text-dark rounded-3"},null,-1)]))):c("",!0)])):c("",!0)])]),o("div",null,[o("button",ve,[e[18]||(e[18]=o("span",null,[o("i",{class:"ri-filter-2-line"})],-1)),R.value!==0?(d(),m("span",ge," ( "+g(R.value)+") ",1)):c("",!0)])]),o("div",ye,[_(ne,{class:"buttoncomp",onClick:e[5]||(e[5]=a=>C()),name:"Create form"})])])]),o("div",he,[_(oe,{tHeaders:H.value,tData:y.value,isAction:"true",actionType:"dropdown",onActionClicked:T,"field-mapping":I.value,actions:z.value,isCheckbox:"true"},null,8,["tHeaders","tData","field-mapping","actions"]),_(se,{currentRecords:y.value.length,totalRecords:l.value,onUpdateValue:G,onLimitStart:K},null,8,["currentRecords","totalRecords"])]),o("div",ke,[o("div",we,[o("div",Fe,[o("div",xe,[o("div",Ce,[o("div",Se,[e[19]||(e[19]=o("label",{class:"font-13 ps-1",for:"Requested"},"Form Name:",-1)),_(w,{class:"mb-3",tag:"input",type:"search",name:"Requested",id:"Requested",placeholder:"Search",modelValue:t.form_name,"onUpdate:modelValue":e[6]||(e[6]=a=>t.form_name=a)},null,8,["modelValue"])]),o("div",Ve,[e[20]||(e[20]=o("label",{class:"font-13 ps-1",for:"dept"},"Form Category:",-1)),_(w,{tag:"select",placeholder:"Form Category",class:"mb-3",name:"dept",modelValue:t.form_category,"onUpdate:modelValue":e[7]||(e[7]=a=>t.form_category=a),id:"dept",Required:!1,options:N.value},null,8,["modelValue","options"])]),o("div",Pe,[e[21]||(e[21]=o("label",{class:"font-13 ps-1",for:"dept"},"Accessible departments:",-1)),_(w,{class:"",tag:"input",type:"search",name:"Requested",id:"Requested",placeholder:"Search",modelValue:t.accessible_departments,"onUpdate:modelValue":e[8]||(e[8]=a=>t.accessible_departments=a)},null,8,["modelValue"]),e[22]||(e[22]=o("span",{class:"m-0 font-10 ps-2"},"Note:Please seperate departments with commas",-1))]),o("div",$e,[e[23]||(e[23]=o("label",{class:"font-13 ps-1",for:"dept"},"Status:",-1)),_(w,{tag:"select",placeholder:"Status",class:"mb-3",name:"dept",modelValue:t.active,"onUpdate:modelValue":e[9]||(e[9]=a=>t.active=a),id:"dept",Required:!1,options:["Active","Draft"]},null,8,["modelValue"])]),o("div",Re,[e[24]||(e[24]=o("label",{class:"font-13 ps-1",for:"dept"},"Owner OF Form:",-1)),_(w,{tag:"select",placeholder:"Owner Of The Form",class:"mb-3",name:"dept",modelValue:t.owner_of_the_form,"onUpdate:modelValue":e[10]||(e[10]=a=>t.owner_of_the_form=a),id:"dept",Required:!1,options:A.value},null,8,["modelValue","options"])])])]),o("div",{class:"modal-footer"},[o("button",{type:"button",class:"cancelfilter border-0 text-nowrap font-10",onClick:Q,"data-bs-dismiss":"modal"},e[25]||(e[25]=[o("span",{class:"font-14 me-1"},"x",-1),u("Cancel Filter")])),o("button",{type:"button",class:"applyfilter text-nowrap border-0 btn btn-dark text-white font-10 d-flex justify-content-center align-items-center","data-bs-dismiss":"modal",onClick:O},e[26]||(e[26]=[o("span",{class:"font-16 me-1"},[o("i",{class:"bi bi-check2"})],-1),u(" Apply Filter")]))])])])]),o("div",Oe,[o("div",qe,[o("div",Ne,[o("div",Ae,[o("div",Ee,[e[29]||(e[29]=o("div",null,[o("h5",{class:"m-0 text-white font-13",id:"exampleModalLabel"}," PDF format ")],-1)),o("div",Be,[o("button",{button:"button",class:"btn btn-dark text-white font-13",onClick:J},e[27]||(e[27]=[u("Download Pdf"),o("span",{class:"ms-2"},[o("i",{class:"bi bi-download"})],-1)])),o("button",{type:"button",class:"btn btn-dark text-white font-13",onClick:e[11]||(e[11]=(...a)=>s.closemodal&&s.closemodal(...a)),"data-bs-dismiss":"modal"},e[28]||(e[28]=[u("Close "),o("i",{class:"bi bi-x"},null,-1)]))])])]),o("div",Me,[o("div",{innerHTML:n.value},null,8,Le)]),e[30]||(e[30]=o("div",{class:"modal-footer"},null,-1))])])]),_(ie,{blockArr:S.value,formDescriptions:v.value},null,8,["blockArr","formDescriptions"])]))}},Je=Z(Ue,[["__scopeId","data-v-00804cec"]]);export{Je as default};
