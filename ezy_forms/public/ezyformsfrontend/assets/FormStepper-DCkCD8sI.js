var jl=Object.defineProperty,Wl=Object.defineProperties;var Hl=Object.getOwnPropertyDescriptors;var _t=Object.getOwnPropertySymbols;var ts=Object.prototype.hasOwnProperty,ss=Object.prototype.propertyIsEnumerable;var es=(N,S,T)=>S in N?jl(N,S,{enumerable:!0,configurable:!0,writable:!0,value:T}):N[S]=T,I=(N,S)=>{for(var T in S||(S={}))ts.call(S,T)&&es(N,T,S[T]);if(_t)for(var T of _t(S))ss.call(S,T)&&es(N,T,S[T]);return N},Fe=(N,S)=>Wl(N,Hl(S));var qt=(N,S)=>{var T={};for(var A in N)ts.call(N,A)&&S.indexOf(A)<0&&(T[A]=N[A]);if(N!=null&&_t)for(var A of _t(N))S.indexOf(A)<0&&ss.call(N,A)&&(T[A]=N[A]);return T};var Me=(N,S,T)=>new Promise((A,Z)=>{var q=H=>{try{f(T.next(H))}catch(re){Z(re)}},we=H=>{try{f(T.throw(H))}catch(re){Z(re)}},f=H=>H.done?A(H.value):Promise.resolve(H.value).then(q,we);f((T=T.apply(N,S)).next())});import{_ as Tt,r as h,x as de,o as n,c as i,d as t,i as F,j as B,F as R,h as M,t as g,f as cs,m as $,Z as Et,Q as Ut,n as P,k as Ne,N as ye,l as b,L as E,a6 as Jl,U as oe,H as ue,u as Gl,M as Yl,e as pe,E as Zl,w as De,a7 as ls,K as me,y as G,z as Y,a8 as Kl,S as os,b as se,O as lt,B as as,R as Oe,X as fe,v as bt,a9 as ns,aa as is,ab as Ql,ac as Vt,a2 as rs,ad as ds,D as us,ae as Xl}from"./index-BC-2e37w.js";const xl="/assets/ezy_forms/ezyformsfrontend/assets/oui_app-users-roles-C_V_SNI2.svg",Il={class:"simple-field-library"},eo={class:"field-search"},to={class:"field-types-grid"},so=["onDragstart","onClick"],lo={__name:"SimpleFieldLibrary",props:{fields:{type:Array,required:!0}},emits:["field-add","field-dragstart","field-dragend"],setup(N,{emit:S}){const T=N,A=S,Z=h(""),q=h(!1),we=de(()=>{if(!Z.value)return T.fields;const O=Z.value.toLowerCase();return T.fields.filter(ae=>ae.label.toLowerCase().includes(O))}),f=(O,ae)=>{q.value=!0,O.dataTransfer.effectAllowed="copy",O.dataTransfer.setData("text/plain",ae.type),A("field-dragstart",ae.type)},H=()=>{q.value=!1,A("field-dragend")},re=O=>{A("field-add",O.type)};return(O,ae)=>(n(),i("div",Il,[t("div",eo,[ae[1]||(ae[1]=t("i",{class:"bi bi-search"},null,-1)),F(t("input",{"onUpdate:modelValue":ae[0]||(ae[0]=K=>Z.value=K),type:"text",placeholder:"Search fields",class:"search-input"},null,512),[[B,Z.value]])]),t("div",to,[(n(!0),i(R,null,M(we.value,K=>(n(),i("button",{key:K.type,class:"field-type-btn",draggable:!0,onDragstart:Q=>f(Q,K),onDragend:H,onClick:Q=>re(K)},g(K.label),41,so))),128))])]))}},oo=Tt(lo,[["__scopeId","data-v-cb64d6f9"]]),ao={class:"frappe-form-builder"},no={class:"builder-toolbar-simple"},io=["disabled"],ro=["disabled"],uo={class:"fields-container-simple"},co=["onMouseenter"],po={class:"field-content"},mo={class:"field-editor-inline"},fo=["onUpdate:modelValue","onInput"],vo={class:"row g-2"},_o={class:"col-md-4"},bo=["onUpdate:modelValue","onChange"],ho=["value"],go={class:"col-md-4"},yo=["onUpdate:modelValue"],wo={class:"col-md-4"},ko={class:"d-flex gap-2 flex-wrap"},$o={class:"form-check form-check-inline"},Co=["onUpdate:modelValue","id"],Fo=["for"],Do={class:"form-check form-check-inline"},So=["onUpdate:modelValue","id"],Ao=["for"],qo={key:0,class:"mt-2"},Vo=["onUpdate:modelValue","placeholder"],Eo=["onUpdate:modelValue","placeholder"],Uo=["onUpdate:modelValue"],To={class:"field-actions"},Lo=["onClick"],Ro=["onClick"],Mo={key:1,class:"empty-state-simple"},Oo={__name:"FrappeFormBuilder",props:{formName:{type:String,default:""},existingFields:{type:Array,default:()=>[]},currentBlockIndex:{type:Number,default:0}},emits:["save","update","addFields"],setup(N,{expose:S,emit:T}){const A=N,Z=T,q=h([]),we=h([{label:"Text",type:"Data"},{label:"Time",type:"Time"},{label:"Text Area",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Data"},{label:"Check",type:"Check"},{label:"Number",type:"Int"},{label:"Select",type:"Select"},{label:"Multi Select",type:"Small Text"},{label:"Link",type:"Link"}]),f=h(!1);h(!1);const H=h(null);cs(()=>Me(this,null,function*(){A.existingFields&&A.existingFields.length>0&&(q.value=A.existingFields.map((V,v)=>Fe(I({},V),{idx:v+1})))}));const re=V=>({idx:V,fieldname:`field_${V}`,fieldtype:"Data",label:"",description:"",options:"",reqd:0,read_only:0,hidden:0,default:"",depends_on:"",mandatory_depends_on:"",read_only_depends_on:"",permlevel:0,in_list_view:0,in_standard_filter:0,in_global_search:0,bold:0,allow_bulk_edit:0,allow_in_quick_entry:0,allow_on_submit:0,ignore_user_permissions:0,ignore_xss_filter:0,translatable:0,unique:0,fetch_from:"",fetch_if_empty:0,columns:0,length:0,precision:"",non_negative:0,report_hide:0,collapsible:0,collapsible_depends_on:"",print_hide:0,print_hide_if_no_value:0,sort_options:0,remember_last_selected_value:0,is_virtual:0,search_index:0,documentation_url:""}),O=()=>{const V=q.value.length+1,v=re(V);q.value.push(v),Z("update",ce())},ae=V=>{const v=I({},q.value[V]),D=q.value.length+1;v.idx=D,v.fieldname=`${v.fieldname}_copy`,v.label=`${v.label} (Copy)`,q.value.push(v),Z("update",ce())},K=V=>{const v=q.value[V].label||"this field";confirm(`Delete "${v}"?`)&&(q.value.splice(V,1),q.value.forEach((D,ne)=>{D.idx=ne+1}),Z("update",ce()))},Q=()=>{confirm("Clear all fields?")&&(q.value=[],Z("update",[]))},W=V=>{const v=q.value[V];v.label&&((!v.fieldname||v.fieldname.startsWith("field_"))&&(v.fieldname=v.label.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"")),Z("update",ce()))},j=V=>{const v=q.value[V];be(v.fieldtype)||(v.options=""),Z("update",ce())},be=V=>["Select","Link","Table","Table MultiSelect","Small Text"].includes(V),he=V=>V==="Select"||V==="Small Text"?`Option 1
Option 2
Option 3`:V==="Link"?"DocType Name (e.g., Customer)":V==="Table"?"Child DocType Name":"Enter options",ze=V=>/^[a-z_][a-z0-9_]*$/.test(V),ce=()=>q.value.map((V,v)=>{const D=I({},V);return D.idx=v+1,D}),ot=()=>{for(const v of q.value){if(!v.label||!v.fieldname||!v.fieldtype){oe("All fields must have a label, fieldname, and type");return}if(!ze(v.fieldname)){oe(`Invalid fieldname: ${v.fieldname}`);return}if(be(v.fieldtype)&&(!v.options||!v.options.trim())){oe(`Options required for ${v.fieldtype} field: ${v.label}`);return}}const V=ce();Z("addFields",V),ue(`${V.length} field(s) added to form!`),q.value=[]};return S({formFields:q,addFieldsToCurrentBlock:ot,addNewField:O,getFields:()=>ce()}),(V,v)=>(n(),i("div",ao,[t("div",no,[t("button",{onClick:O,class:"btn btn-primary btn-sm"},v[4]||(v[4]=[t("i",{class:"bi bi-plus-circle"},null,-1),$(" Add Field ")])),t("button",{onClick:ot,class:"btn btn-success btn-sm",disabled:q.value.length===0},[v[5]||(v[5]=t("i",{class:"bi bi-check-circle"},null,-1)),$(" Add to Form ("+g(q.value.length)+") ",1)],8,io),t("button",{onClick:Q,class:"btn btn-outline-secondary btn-sm",disabled:q.value.length===0},v[6]||(v[6]=[t("i",{class:"bi bi-trash"},null,-1),$(" Clear All ")]),8,ro)]),t("div",uo,[q.value.length>0?(n(),Et(E(Jl),{key:0,modelValue:q.value,"onUpdate:modelValue":v[1]||(v[1]=D=>q.value=D),"item-key":D=>D.idx,handle:".drag-handle",onStart:v[2]||(v[2]=D=>f.value=!0),onEnd:v[3]||(v[3]=D=>f.value=!1),animation:200,"ghost-class":"ghost-field"},{item:Ut(({element:D,index:ne})=>[t("div",{class:P(["field-item-simple",{dragging:f.value}]),onMouseenter:U=>H.value=ne,onMouseleave:v[0]||(v[0]=U=>H.value=null)},[t("div",po,[v[10]||(v[10]=t("div",{class:"drag-handle"},[t("i",{class:"bi bi-grip-vertical"})],-1)),t("div",mo,[F(t("input",{"onUpdate:modelValue":U=>D.label=U,placeholder:"Field Label",class:"form-control form-control-sm mb-1",onInput:U=>W(ne)},null,40,fo),[[B,D.label]]),t("div",vo,[t("div",_o,[F(t("select",{"onUpdate:modelValue":U=>D.fieldtype=U,class:"form-select form-select-sm",onChange:U=>j(ne)},[v[7]||(v[7]=t("option",{value:""},"Select Type",-1)),(n(!0),i(R,null,M(we.value,U=>(n(),i("option",{key:U.type,value:U.type},g(U.label),9,ho))),128))],40,bo),[[Ne,D.fieldtype]])]),t("div",go,[F(t("input",{"onUpdate:modelValue":U=>D.fieldname=U,type:"text",class:"form-control form-control-sm",placeholder:"fieldname"},null,8,yo),[[B,D.fieldname]])]),t("div",wo,[t("div",ko,[t("div",$o,[F(t("input",{"onUpdate:modelValue":U=>D.reqd=U,type:"checkbox",class:"form-check-input",id:`reqd-${ne}`,"true-value":1,"false-value":0},null,8,Co),[[ye,D.reqd]]),t("label",{class:"form-check-label small",for:`reqd-${ne}`},"Required",8,Fo)]),t("div",Do,[F(t("input",{"onUpdate:modelValue":U=>D.unique=U,type:"checkbox",class:"form-check-input",id:`unique-${ne}`,"true-value":1,"false-value":0},null,8,So),[[ye,D.unique]]),t("label",{class:"form-check-label small",for:`unique-${ne}`},"Unique",8,Ao)])])])]),be(D.fieldtype)?(n(),i("div",qo,[D.fieldtype==="Select"||D.fieldtype==="Small Text"?F((n(),i("textarea",{key:0,"onUpdate:modelValue":U=>D.options=U,class:"form-control form-control-sm",rows:"2",placeholder:he(D.fieldtype)},null,8,Vo)),[[B,D.options]]):F((n(),i("input",{key:1,"onUpdate:modelValue":U=>D.options=U,type:"text",class:"form-control form-control-sm",placeholder:he(D.fieldtype)},null,8,Eo)),[[B,D.options]])])):b("",!0),F(t("input",{"onUpdate:modelValue":U=>D.description=U,type:"text",class:"form-control form-control-sm mt-1",placeholder:"Description (optional)"},null,8,Uo),[[B,D.description]])]),t("div",To,[t("button",{class:"btn btn-sm btn-link text-primary p-0",onClick:U=>ae(ne),title:"Duplicate"},v[8]||(v[8]=[t("i",{class:"bi bi-files"},null,-1)]),8,Lo),t("button",{class:"btn btn-sm btn-link text-danger p-0",onClick:U=>K(ne),title:"Delete"},v[9]||(v[9]=[t("i",{class:"bi bi-trash"},null,-1)]),8,Ro)])])],42,co)]),_:1},8,["modelValue","item-key"])):b("",!0),q.value.length===0?(n(),i("div",Mo,v[11]||(v[11]=[t("i",{class:"bi bi-inbox"},null,-1),t("p",null,'No fields yet. Click "Add Field" to start.',-1)]))):b("",!0)])]))}},Bo=Tt(Oo,[["__scopeId","data-v-259d8634"]]),No={class:""},zo={class:""},Po={class:"d-flex justify-content-between align-items-center CancelNdSave"},jo={class:"d-flex align-items-center"},Wo={key:0,class:"font-16"},Ho=["disabled"],Jo={class:"form-container p-0 container-fluid mt-3"},Go={class:"row g-4"},Yo={class:"col-lg-2 col-md-3 col-sm-12"},Zo={class:"steps-sticky-div"},Ko={class:"steps d-sm-inline-flex d-md-block m-0 p-0"},Qo=["onClick"],Xo={key:0,class:"ri-checkbox-circle-fill completedStepIcon"},xo={class:"step-text"},Io={class:"font-11"},ea={class:"font-14"},ta={class:"col-lg-10 col-md-9 col-sm-12 formbackground-color"},sa={class:"px-2"},la={class:"form-content stepsDiv"},oa={key:0},aa={class:""},na={class:"stepperbackground ps-2 pe-2 m-0 d-flex justify-content-between align-items-center"},ia={class:"container-fluid aboutFields p-0"},ra={class:"row"},da={class:"col-sm-12 col-md-12 mt-lg-3 p-lg-4"},ua={class:"container-fluid"},ca={class:"row g-3"},pa={class:"col-md-6"},ma={class:"position-relative"},fa={key:0,class:"font-12 position-absolute PredefinedLabel"},va={key:1,class:"text-danger ErrorMsg ms-2"},_a={class:"col-md-6"},ba={key:0,class:"text-danger ErrorMsg ms-2"},ha={class:"col-md-6"},ga={class:"col-md-6"},ya={key:0,class:"text-danger"},wa={class:"col-md-6"},ka={key:0,class:"text-danger"},$a={class:"col-md-6"},Ca={key:0,class:"text-danger"},Fa={class:"custom-option"},Da=["checked","onChange"],Sa={class:"col-md-6"},Aa={class:"col-md-6"},qa={key:0,class:"col-md-6"},Va={key:1,class:"col-md-6"},Ea={key:2,class:"col-md-6"},Ua={key:3,class:"col-md-6"},Ta={class:"form-check d-flex align-items-center p-0 pe-3"},La=["disabled"],Ra={key:4,class:"col-md-6"},Ma=["disabled"],Oa={key:0,class:"list-group position-absolute w-100 z-3 formslist"},Ba=["onMousedown"],Na={key:1,class:"zoho-form-builder"},za={class:"zoho-toolbar"},Pa={class:"toolbar-left"},ja={class:"zoho-tabs"},Wa=["onClick"],Ha=["onClick"],Ja={class:"toolbar-right"},Ga={class:"zoho-builder-container"},Ya={key:0,class:"advanced-builder-wrapper"},Za={class:"d-flex align-items-center justify-content-between w-100"},Ka={class:"mb-0 font-14 fw-bold"},Qa={class:"btn btn-sm btn-link p-0 text-dark"},Xa={key:0,class:"library-content"},xa={class:"zoho-form-canvas"},Ia={class:"requestandAppHeader"},en={class:"d-flex justify-content-between align-items-center"},tn={class:""},sn={class:"ps-2 mb-0 fw-bolder font-14 blockTitle"},ln={class:"text-center ms-2 mt-1"},on={key:0,class:"font-12 d-flex align-items-center"},an={class:"font-12 approver_type_div"},nn={class:"font-12 fw-bold"},rn={class:"font-12 text-danger ms-1"},dn={class:"d-flex align-items-center"},un={key:0,class:"role-container"},cn={key:0,class:"role-text d-flex align-items-center"},pn={class:"role-label fw-bold"},mn={class:"role-names text-primary"},fn=["onClick"],vn=["onClick"],_n=["onClick"],bn=["onClick"],hn={class:"pt-0 section_block"},gn={class:"d-flex justify-content-between align-items-center"},yn={class:"d-flex flex-column"},wn=["onUpdate:modelValue","onChange","onInput"],kn={key:0,class:"text-danger ps-3 font-10"},$n={class:"d-flex align-items-center"},Cn=["onClick"],Fn={class:"container-fluid"},Dn={class:"d-flex justify-content-between align-items-center"},Sn={class:"rownames m-0"},An=["onClick"],qn={class:"col"},Vn={class:"row"},En=["onMouseenter"],Un={class:"column_name d-flex align-items-center justify-content-between"},Tn={class:"d-flex flex-column ps-2"},Ln=["onUpdate:modelValue","onChange","onInput"],Rn={key:0,class:"text-danger ps-2 font-10"},Mn={class:"position-absolute top-0 end-0"},On=["onClick"],Bn=["onDrop"],Nn=["onMouseenter","onDragstart","onDrop"],zn=["onDrop"],Pn=["onDragstart","onDrop"],jn={class:"d-flex justify-content-between"},Wn={class:"flex-column d-flex"},Hn=["onUpdate:modelValue","onChange","onInput"],Jn={key:0,class:"text-danger font-10"},Gn={class:"FieldcopyRemove"},Yn=["onClick"],Zn=["onClick"],Kn=["onUpdate:modelValue","onChange"],Qn=["value"],Xn={key:0},xn=["onUpdate:modelValue"],In={key:0,class:"text-danger font-10"},ei={key:1},ti=["for"],si=["id","onUpdate:modelValue","onInput","onFocus"],li={key:0,class:"list-group mt-1",style:{"max-height":"200px","overflow-y":"auto"}},oi=["onClick"],ai={class:"d-flex align-items-center justify-content-between"},ni={class:"d-flex align-items-center gap-2"},ii={class:"d-flex align-items-center"},ri=["onUpdate:modelValue","id"],di=["for"],ui=["onClick"],ci=["onUpdate:modelValue"],pi={key:3,class:"text-danger font-10"},mi=["onDrop"],fi={class:"childtableShow"},vi={class:"mt-2"},_i={key:0,class:"childTableContainer"},bi={key:0,class:"font-13"},hi={key:1,class:"d-flex align-items-center gap-2"},gi={class:"d-flex align-items-center"},yi=["onUpdate:modelValue"],wi=["onClick"],ki={key:2,class:"table table-bordered rounded-table"},$i=["onDrop"],Ci=["draggable","onDragstart"],Fi={key:0},Di=["onUpdate:modelValue","onInput"],Si={key:0,class:"text-danger font-11"},Ai={key:1},qi={key:2},Vi={class:"d-flex gap-1"},Ei=["onUpdate:modelValue","onChange"],Ui=["value"],Ti={class:"d-flex"},Li={class:"d-flex align-items-center gap-2"},Ri={class:"d-flex align-items-center"},Mi=["onUpdate:modelValue"],Oi=["onClick"],Bi={key:0},Ni=["onUpdate:modelValue","onInput"],zi={key:0,class:"text-danger font-10"},Pi={key:1,class:"font-11 text-danger"},ji={key:3},Wi={key:3,class:"mb-2 mt-3"},Hi=["onClick"],Ji=["onClick"],Gi=["onDrop"],Yi=["onDrop"],Zi={class:"d-flex justify-content-center align-items-center my-2"},Ki=["onClick"],Qi={class:"font-13"},Xi={key:0,class:"d-flex align-items-center gap-2"},xi={class:"d-flex align-items-center"},Ii=["onUpdate:modelValue"],er=["onClick"],tr={class:"table table-bordered rounded-table"},sr={key:0},lr=["onUpdate:modelValue","onBlur"],or={key:0,class:"text-danger font-11 mt-1"},ar={key:1},nr={key:2},ir={class:"d-flex gap-1 align-items-center"},rr=["onUpdate:modelValue","onChange"],dr=["value"],ur=["onClick"],cr={key:0,class:"mt-1"},pr=["onUpdate:modelValue","onInput"],mr={key:1,class:"text-danger font-11 mt-1"},fr={key:3},vr={class:"mb-2"},_r=["onClick"],br=["onClick"],hr=["onClick"],gr={key:0},yr={class:"d-flex justify-content-between align-items-center mt-1 mb-2"},wr=["onUpdate:modelValue","onBlur"],kr={key:0,class:"text-danger font-12"},$r={key:1,class:"text-danger font-12"},Cr={class:"d-flex align-items-center gap-2"},Fr={class:"d-flex align-items-center"},Dr=["onUpdate:modelValue"],Sr=["onClick"],Ar=["onClick"],qr={class:"px-1 field-border"},Vr={class:"d-flex justify-content-between"},Er=["onUpdate:modelValue","onBlur"],Ur={key:0,class:"text-danger font-12"},Tr={class:"d-flex align-items-center"},Lr={class:"d-flex my-1"},Rr=["onUpdate:modelValue"],Mr=["onClick"],Or=["onClick"],Br=["onUpdate:modelValue"],Nr=["value"],zr={key:0},Pr=["onUpdate:modelValue"],jr={key:0,class:"text-danger font-10"},Wr={key:1,class:"text-danger font-12"},Hr=["onClick"],Jr=["onClick"],Gr={class:"d-flex justify-content-center align-items-center py-2 add-section-btn"},Yr=["onClick"],Zr={key:0,class:"m-2"},Kr={key:0,class:"zoho-properties-panel"},Qr={class:"properties-header"},Xr={key:2},xr={class:"stepperbackground d-flex align-items-center justify-content-between p-3"},Ir={class:"container-fluid mt-4 p-4"},ed={class:"card mb-4"},td={class:"card-body"},sd={class:"row g-3"},ld={class:"col-md-6"},od={class:"btn-group w-100",role:"group"},ad={key:0,class:"col-md-6"},nd={key:0,class:"card mb-4"},id={class:"card-body"},rd={key:0,class:"table-responsive"},dd={class:"table table-bordered"},ud=["onUpdate:modelValue"],cd={class:"form-check form-switch"},pd=["onUpdate:modelValue"],md={class:"form-check-label font-12"},fd=["onClick"],vd=["onClick"],_d={key:1,class:"card mb-4"},bd={class:"card-body"},hd={class:"alert alert-success"},gd={class:"table-responsive"},yd={class:"table table-bordered"},wd={key:0,class:"badge bg-success"},kd={key:1,class:"badge bg-secondary"},$d={class:"text-muted"},Cd={key:2,class:"card mb-4"},Fd={class:"card-body"},Dd={class:"alert alert-success"},Sd={class:"table-responsive"},Ad={class:"table table-bordered table-hover"},qd={class:"badge bg-dark"},Vd={key:0,class:"badge bg-danger"},Ed={key:1,class:"badge bg-secondary"},Ud={key:0,class:"badge bg-info"},Td={key:1,class:"badge bg-warning text-dark"},Ld={key:2,class:"badge bg-success"},Rd={key:3,class:"badge bg-secondary"},Md={class:"text-muted"},Od={key:3},Bd={class:"modal fade",id:"customFormatModal",tabindex:"-1","aria-labelledby":"customFormatModalLabel","aria-hidden":"true"},Nd={class:"modal-dialog modal-dialog-centered"},zd={class:"modal-content"},Pd={class:"modal-body"},jd=["placeholder"],Wd={class:"d-flex align-items-center gap-2"},Hd={class:"d-flex align-items-center py-2"},Jd={class:"modal fade",id:"formViewModal",tabindex:"-1","aria-labelledby":"formViewModalLabel","aria-hidden":"true"},Gd={class:"modal-dialog modal-xl modal-dialog-scrollable"},Yd={class:"modal-content"},Zd={class:"modal-body"},Kd={class:"offcanvas addOffCanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},Qd={class:"offcanvas-header add_designationHeader"},Xd={id:"offcanvasRightLabel",class:"font-14 fw-bold"},xd={class:"offcanvas-body add_desig_offCanvas_body p-0"},Id={class:""},eu={key:0,class:"p-3 approval-border-bottom"},tu={class:"px-3 listofdesignations"},su={class:"my-1 d-flex justify-content-between"},lu={class:"font-12 fw-bold"},ou={class:"italic-style text-secondary font-12"},au={key:0,ref:"resizableDiv",class:"my-1 disgnationlist_div"},nu={class:"d-flex align-items-center justify-content-between gap-1"},iu={class:"form-check ps-1 d-flex align-items-center m-0"},ru=["checked"],du={for:"selectAll",class:"form-check-label SelectallDesignation mt-2 fw-bold"},uu={key:0,class:"form-check d-flex align-items-center m-0"},cu={key:1},pu={key:1,class:"p-3"},mu=["value"],fu={key:2},vu={class:""},_u={class:"px-4 py-1 mt-2 d-flex align-items-center user-select-none"},bu={key:0,class:"px-4 py-1 mt-2 d-flex align-items-center user-select-none"},hu={class:"offcanvas-footer"},gu={class:"text-end p-3"},Be="Select All",yu={__name:"FormStepper",setup(N){const S=Gl(),T=Yl(),A=h(1),Z=h([]);h([]);const q=h([]),we=h([]);pe([]);let f=pe([]),H=pe([]);const re=h([]),O=h([]),ae=h([]),K=h(""),Q=h(""),W=h("");let j=pe([]);const be=h("");h(!1),h(!1),h(!1);const he=h(""),ze=h(""),ce=h(""),ot=h([]),V=h([]),v=pe({}),D=h([]),ne=h(!1),U=h([]),at=h(!1);let Lt=null;const ps=h("");let z=h("");const Se=h(null),Rt=h(null),ms=h(null),Ae=h(0),qe=h(!1),Pe=h(!0),Ge=h([]),ke=h(null),ge=h("new"),nt=h([]),je=h([]);h([]);const Ve=h([]),Ee=de(()=>Zl);h(!1);const it=pe([]),ie=h({routepath:S.query.routepath,business_unit:S.query.business_unit,formId:S.query.id}),rt=h(""),We=h(!1),He=h(!1),Mt=[{label:"Public",value:1},{label:"Private",value:0}],Ot=de({get(){return Mt.find(s=>s.value===_.value.as_web_view)},set(s){_.value.as_web_view=s?s.value:null}}),ht=de({get(){return _.value.form_name||S.query.form_name||""},set(s){_.value.form_name=s}}),_=h({form_name:"",form_short_name:"",accessible_departments:[],business_unit:`${Ee.value.value||ie.value.business_unit||S.query.business_unit}`,form_category:"",owner_of_the_form:"",series:"",has_workflow:"",workflow_check:"",is_linked:0,is_linked_form:"",is_predefined_doctype:S.query.id?1:0,as_web_view:0,mail_id:""});De(()=>S.query.form_name,s=>{s&&(_.value.form_name=s,_.value.form_short_name=s)},{immediate:!0});const dt=["name","parent","creation","owner","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus","idx","doctype","company_field","business_unit"].map(s=>s.toLowerCase().trim()),Bt=["Approver","Approved on","Approved By"].map(s=>s.toLowerCase().trim());function fs(s){return s.toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]/g,"")}de(()=>_.value),h(""),h(!1),De(Ee,s=>{s&&s.value&&(_.value.business_unit=s.value)},{immediate:!0});function vs(s){if(z==null||z==="new")return!1;const e=J(s).roles;if(s===0)return e.length===0;const l=J(s-1).roles;return l.length>0&&l[0]!==null&&l[0]!==""&&e.length===0}De(()=>_.value.form_name,s=>{_.value.form_name=s.trim()}),De(()=>_.value.form_short_name,s=>{_.value.form_short_name=s.trim()}),De(()=>_.value.series,s=>{_.value.series=s.trim()}),De(()=>ge.value,s=>{s==="existing"&&(f.splice(0,f.length),Ve.value=[],j.length=0)});const Ye=h(null),Nt=(s,e,l,o,a,r)=>{Ye.value={blockIndex:e,sectionIndex:l,rowIndex:o,columnIndex:a,fieldIndex:r}},Ue=(s,e,l,o,a,r)=>{if(s.preventDefault(),s.stopPropagation(),console.log("Field dropped at index:",{targetBlock:e,targetSection:l,targetRow:o,targetColumn:a,insertIndex:r,draggedField:Ye.value,draggedFieldType:Se.value}),Se.value){console.log("Dropping from field library:",Se.value);const k=It(Se.value);if(!k){console.error("Failed to create field from type:",Se.value);return}const C=f[e];if(!C){oe("Target block not found");return}C.sections||(C.sections=[]),C.sections[l]||(C.sections[l]={label:"",rows:[]}),C.sections[l].rows||(C.sections[l].rows=[]),C.sections[l].rows[o]||(C.sections[l].rows[o]={label:"",columns:[]}),C.sections[l].rows[o].columns||(C.sections[l].rows[o].columns=[]),C.sections[l].rows[o].columns[a]||(C.sections[l].rows[o].columns[a]={label:"",fields:[]}),C.sections[l].rows[o].columns[a].fields.splice(r,0,k),console.log("Field added successfully:",k),ue(`${k.label} field added`),Se.value=null;return}if(!Ye.value){console.log("No dragged field found");return}const{blockIndex:u,sectionIndex:c,rowIndex:m,columnIndex:d,fieldIndex:p}=Ye.value,w=f[u].sections[c].rows[m].columns[d].fields,L=f[e].sections[l].rows[o].columns[a].fields;if(u===e&&c===l&&m===o&&d===a&&p===r)return;const y=w.splice(p,1)[0];w===L&&p<r&&r--,L.splice(r,0,y),Ye.value=null},Je=h(""),_s=s=>Me(this,null,function*(){const e=[["module","in",["User Forms"]],["istable","=",1]];s!=null&&s.trim()&&e.push(["name","=",`${s}`]);const l={fields:JSON.stringify(["name"]),filters:JSON.stringify(e),limit_page_length:"None",doctype:me.doctypesList};try{return(yield G.get(Y.GetDoctypeData,{params:l})).message.data||[]}catch(o){return console.error("Error fetching doctype list:",o),[]}}),ut=h(null),zt=s=>Me(this,null,function*(){if(Je.value="",ut.value=null,s.tableName){let e=s.tableName.trim();if(e.length>64){Je.value="Table name cannot exceed 64 characters";return}if(!/^[a-zA-Z]+( [a-zA-Z]+)*$/.test(e)){Je.value="Table name can only contain letters and spaces (no leading/trailing spaces or special characters)";return}const o=yield _s(e);ut.value=o.find(a=>a.name.toLowerCase()===e.toLowerCase()),ut.value&&(Je.value="Table already exists"),s.tableName=e}s.label&&(s.fieldname=fs(s.label))});function bs(){const s=_.value.is_linked_form;if(!s){U.value=[];return}clearTimeout(Lt),Lt=setTimeout(()=>{const e=[["business_unit","=",`${Ee.value.value}`],["name","like",`%${s}%`]],l={fields:JSON.stringify(["name"]),limit_page_length:10,limit_start:0,filters:JSON.stringify(e),doctype:me.EzyFormDefinitions,order_by:"`tabEzy Form Definitions`.`enable` DESC, `tabEzy Form Definitions`.`creation` DESC"};G.get(`${Y.GetDoctypeData}`,{params:l}).then(o=>{U.value=o.message.data||[]}).catch(o=>{console.error("Error fetching form definitions:",o)})},300)}function hs(s){_.value.is_linked_form=s,at.value=!1}function gs(){setTimeout(()=>{at.value=!1},200)}pe({query:"",key:""});function $e(s,e,l,o,a){return`${s}-${e}-${l}-${o}-${a}`}pe({});const Ze=pe({}),gt=pe({});function ys(s){gt[s]=!0}function ws(s,e,l,o,a,r){const u=$e(e,l,o,a,r),c=[["istable","=",0]];s!=null&&s.trim()&&c.push(["name","like",`%${s}%`]);const m={fields:JSON.stringify(["name"]),filters:JSON.stringify(c),limit_page_length:"none",doctype:me.doctypesList};G.get(Y.GetDoctypeData,{params:m}).then(d=>{Ze[u]=d.message.data||[]}).catch(d=>{console.error("Error fetching doctype list:",d),Ze[u]=[]})}function ks(s,e,l,o,a,r){f[s].sections[e].rows[l].columns[o].fields[a].options=r;const u=$e(s,e,l,o,a);Ze[u]=[],gt[u]=!1}const $s=de(()=>f!=null&&f.length?W.value===1?[0]:Array.from({length:W.value},(s,e)=>e).filter(s=>s<W.value):[]),Ce=h(null),Te=h(null),Cs=(s,e,l,o,a)=>{Ce.value={blockIndex:s,sectionIndex:e,rowIndex:l,columnIndex:o,fieldIndex:a}},Fs=()=>{Ce.value=null},Ds=(s,e,l,o,a)=>Ce.value&&Ce.value.blockIndex===s&&Ce.value.sectionIndex===e&&Ce.value.rowIndex===l&&Ce.value.columnIndex===o&&Ce.value.fieldIndex===a,Ss=(s,e,l,o)=>{Te.value={blockIndex:s,sectionIndex:e,rowIndex:l,columnIndex:o}},As=()=>{Te.value=null},qs=(s,e,l,o)=>Te.value&&Te.value.blockIndex===s&&Te.value.sectionIndex===e&&Te.value.rowIndex===l&&Te.value.columnIndex===o,Pt=h([{form_json:""}]),Le=h("");cs(()=>{Jt(),Le.value=S.query.Clone,z.value=S.query.id||"new",Le.value==="1"&&(_.value.series=""),z.value!=null&&z.value!=null&&z.value!="new"&&(Ht(),Dt()),sessionStorage.getItem("allow_approver_to_edit_form")=="1"?ne.value=!0:ne.value=!1;let s=localStorage.getItem("Bu");if(_.value.business_unit=s,S.query.preId==="PreDefine"){const e=localStorage.getItem("form_json");if(e){Pt.value[0].form_json=e;const l=Pt.value[0],o=JSON.parse(l.form_json),a=ls(o.fields);D.value=o.child_table_fields,a.forEach(r=>{f.push(r)})}}});const Re=h(null),ee=pe({}),jt=h(null),Vs=s=>{Re.value=s},Es=()=>{Re.value=null},Us=s=>{s.preventDefault()},Ts=(s,e)=>{const l=s.target.closest("tr");if(!l)return;const o=Array.from(l.parentNode.children).indexOf(l);if(o!==Re.value){const a=e[Re.value];e.splice(Re.value,1),e.splice(o,0,a),Re.value=o}},Ls=h([]),yt=s=>{if(["Select","Table MultiSelect","Check","Small Text"].includes(s.fieldtype)&&s.options){const e=s.options.split(`
`).map(a=>a.trim()).filter(a=>a),l=[],o=new Set;return e.forEach(a=>{const r=a.toLowerCase();o.has(r)||(o.add(r),l.push(a))}),`
`+l.join(`
`)}else if(["Link","Table"].includes(s.fieldtype)&&s.options)return s.options.trim();return s.options},Rs=(s,e)=>{const l=f[s].sections[e];l.childTables||(l.childTables=[]);const o=l.childTables.length;l.childTables.push({label:"",fieldname:"",fieldtype:"Table",idx:o,reqd:!1,as_a_block:"",description:"false",columns:[I({label:"",fieldname:"",fieldtype:"",idx:0,description:"",reqd:!1},it.fieldtype==="Select"&&it.options?{options:it.options?`
${it.options}`:`
`}:{})],newTable:!0})},Ms=(s,e,l)=>{const o=f[s].sections[e].childTables[l];o.columns||(o.columns=[]),o.columns.push(I({label:"",fieldname:"",fieldtype:"",idx:o.columns.length,description:"",reqd:!1},o.columns.fieldtype==="Select"&&o.columns.options?{options:o.columns.options?`
${o.columns.options}`:`
`}:{}))},Os=(s,e,l)=>{f[s].sections[e].childTables.splice(l,1)},Bs=(s,e,l,o)=>{f[s].sections[e].childTables[l].columns.splice(o,1)};function Ns(s,e,l,o,a,r){var d;const u=`${e}-${l}-${o}`;v[u]||(v[u]={columns:[]});const c={},m=((d=s.label)==null?void 0:d.trim())||"";if(!m)c.label="Field Label is required";else{const p=m.toLowerCase();if(dt.includes(p)&&!Bt.includes(p))c.label=`"${m}" is a restricted field label`;else if(m.length>64)c.label="Field Label cannot exceed 64 characters";else if(!/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(m))c.label="Field Label can only contain letters, numbers, and single spaces between words";else{const w=r.map((L,y)=>{var k;return{label:(k=L.label)==null?void 0:k.trim().toLowerCase(),index:y}}).filter(L=>L.label===p);if(w.length>1){const L=w[0].index;a!==L&&(c.label=`"${m}" is already used in this table`)}}}v[u].columns[a]=c}function ct(s,e,l){var r;v[e]||(v[e]={});const o=[],a=((r=s.label)==null?void 0:r.trim())||"";a||o.push("Label is required"),a.length>64&&o.push("Label cannot exceed 64 characters"),a&&!/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(a)&&o.push("No special characters allowed"),a&&dt.includes(a.toLowerCase().trim())&&o.push("This label is restricted"),a&&D.value[e].map(m=>{var d;return(d=m.label)==null?void 0:d.trim().toLowerCase()}).filter(Boolean).filter(m=>m===a.toLowerCase()).length>1&&o.push("Duplicate label is not allowed"),s.fieldtype||o.push("Field type is required"),s.fieldtype==="Select"&&(!s.options||s.options.trim()==="")&&o.push("Options are required"),v[e][l]=o}const zs=(s,e,l)=>{var u;const o=f[s].sections[e].childTables[l],a={tableName:!1,columns:[]};let r=!1;return(u=o.tableName)!=null&&u.trim()||(a.tableName="Table name is required.",r=!0),o.columns.forEach((c,m)=>{var p,w;const d={};(p=c.label)!=null&&p.trim()||(d.label="Field Label is required",r=!0),(w=c.fieldtype)!=null&&w.trim()||(d.fieldtype="Please select field type",r=!0),a.columns[m]=d}),v[`${s}-${e}-${l}`]=a,r},Ps=(s,e,l)=>{var a,r;const o=(r=(a=f[s])==null?void 0:a.sections)==null?void 0:r[e];o&&!Array.isArray(o[l])&&(o[l]=[])},js=s=>s?s.trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,""):"",Ws=(s,e,l)=>{if(zs(s,e,l)){oe("Please fix validation errors before creating the table",{transition:"zoom"});return}if(ut.value){oe("Table already exists",{transition:"zoom"});return}const a=f[s].sections[e].childTables[l],r=f[s].sections[e];a.columns=a.columns.map((c,m)=>Fe(I({},c),{idx:m,options:yt(c)})),a.newTable=!1;const u={form_short_name:a.tableName,fields:a.columns,idx:a.idx,as_a_block:a.as_a_block?a.as_a_block:"false"};G.post(Y.childtable,u).then(c=>{var m,d,p;if(c){Ps(s,e,"afterCreated"),r.afterCreated[l]=I({},a),ue("Table created successfully!");const w=(p=(d=(m=c.message)==null?void 0:m[0])==null?void 0:d[0])==null?void 0:p.child_doc;w&&(f[s].sections[e].childTables[l]=Fe(I(I({},f[s].sections[e].childTables[l]),w),{newTable:!1}))}}).catch(c=>{console.error("Error creating table:",c)})},Ke=(s,e,l,o=[])=>{var u;ee[e]||(ee[e]=[]),ee[e]=ee[e].filter(c=>c!==l),v[e]||(v[e]=[]),v[e][l]=[];const a=[],r=((u=s.label)==null?void 0:u.trim())||"";if(r?dt.includes(r.toLowerCase())?a.push("This label is restricted"):r.length>64?a.push("Label cannot exceed 64 characters"):/^[A-Za-z0-9]+(?: [A-Za-z0-9]+)*$/.test(r)||a.push("Only letters, numbers, and single spaces allowed"):a.push("Label is required"),o.length){const c=r.toLowerCase(),m=o.map((d,p)=>{var w;return{label:(w=d.label)==null?void 0:w.trim().toLowerCase(),idx:p}}).filter(d=>d.label===c);if(m.length>1){const d=m[0].idx;l!==d?(a.push("Duplicate label not allowed"),s._duplicate=!0):s._duplicate=!1}else s._duplicate=!1}return s.fieldtype||a.push("Field type is required"),s.fieldtype==="Select"&&(!s.options||!s.options.trim())&&a.push("Options are required"),v[e][l]=a,a.length>0&&ee[e].push(l),a.length===0},Hs=(s,e,l)=>{const a=f[s].sections[e].afterCreated.find(c=>c.tableName===l);if(!a)return;const r=a.columns.length,u={fieldname:"",fieldtype:"",idx:r+1,label:"",value:"",isNew:!0,description:""};a.columns.push(u),Ke(u,l,r,a.columns)},Wt=h([]),Js=(s,e,l,o)=>{const r=f[s].sections[e].afterCreated.find(c=>c.tableName===l);if(!r)return;r.columns.splice(o,1),r.columns.forEach((c,m)=>{c.idx=m+1});const u=ee.value[l];u&&(ee.value[l]=u.filter(c=>c!==o).map(c=>c>o?c-1:c))},Gs=(s,e,l)=>{const a=f[s].sections[e].afterCreated.find(r=>r.tableName===l);if(a){if(X[l]){ee[l]=[];let r=!0;if(a.columns.forEach((m,d)=>{Ke(m,l,d,a.columns)||(r=!1)}),!r){oe("Please fix the errors in the highlighted fields before saving!");return}const u=a.columns.map((w,p)=>{var L=w,{isNew:m}=L,d=qt(L,["isNew"]);return Fe(I({},d),{idx:p+1,options:yt(d)})}),c={form_short_name:js(l),fields:u,as_a_block:a.description};G.post(Y.childtable,c).then(m=>{Wt.value=m.data,ue("Fields updated successfully!")}).catch(m=>{console.error("❌ Saving fields failed:",m)})}X[l]=!X[l]}},X=pe({}),Ys=s=>{D.value[s]||(D.value[s]=[]);const e=D.value[s].length+1;D.value[s].push({fieldname:"",fieldtype:"",idx:e,label:"",value:"",isNew:!0,description:"",options:D.value[s].options?`
${D.value[s].options}`:""})},Zs=(s,e)=>{D.value[s]&&D.value[s].splice(e,1)},Ks=(s,e)=>{if(!s)return;ee.value||(ee.value={}),ee.value[s]||(ee.value[s]=[]);const l=D.value[s];if(l){if(X[s]){ee.value[s]=[];let o=!0;if(l.forEach((u,c)=>{var d;ct(u,s,c);const m=(d=v[s])==null?void 0:d[c];m&&m.length>0&&(ee.value[s].push(c),o=!1),u.label&&(u.label=u.label.trim())}),!o){oe("Please fix the errors before saving");return}const a=l.map((d,m)=>{var p=d,{isNew:u}=p,c=qt(p,["isNew"]);return Fe(I({},c),{idx:m+1,options:yt(c)})}),r={form_short_name:s,fields:a,as_a_block:e};G.post(Y.childtable,r).then(u=>{Wt.value=u.data,ue("Fields updated successfully!")}).catch(u=>{console.error("❌ Saving fields failed:",u)})}X[s]=!X[s],jt.value=X[s]?s:null}},Qs=h([{id:1,label:"Form Info",stepno:"Step 1",icon:"bi bi-info-circle"},{id:2,label:"Form Fields",stepno:"Step 2",icon:"bi bi-grid-3x3-gap"},{id:3,label:"Workflow Setup",stepno:"Step 3",icon:"bi bi-diagram-3"},{id:4,label:"Print Format",stepno:"Step 4",icon:"ri-checkbox-circle-line"}]),wt=[{label:"Text",type:"Data"},{label:"Select",type:"Select"},{label:"Attach",type:"Attach"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Number",type:"Int"},{label:"TextArea",type:"Text"}],pt=[{label:"Text",type:"Data"},{label:"Time",type:"Time"},{label:"Text Area",type:"Text"},{label:"Date",type:"Date"},{label:"Datetime",type:"Datetime"},{label:"Attach",type:"Attach"},{label:"Phone",type:"Data"},{label:"Check",type:"Check"},{label:"Number",type:"Int"},{label:"Select",type:"Select"},{label:"Multi Select",type:"Small Text"},{label:"Link",type:"Link"}],Xs=de(()=>[Be,...q.value]),xs=de(()=>{const s=_.value.accessible_departments;return s.includes(Be)?"All Selected":s.length>1?`${s[0]}.. +${s.length-1} more selected`:s.join(", ")}),Is=s=>s===Be?_.value.accessible_departments.length===q.value.length:_.value.accessible_departments.includes(s),el=(s,e)=>{s===Be?e.target.checked?_.value.accessible_departments=[...q.value]:_.value.accessible_departments=[]:(e.target.checked?_.value.accessible_departments.push(s):_.value.accessible_departments=_.value.accessible_departments.filter(l=>l!==s),_.value.accessible_departments.length===q.value.length?_.value.accessible_departments=[...q.value]:_.value.accessible_departments=_.value.accessible_departments.filter(l=>l!==Be))},tl=s=>{s===Be&&(_.value.accessible_departments=[...q.value])},sl=s=>{s===Be&&(_.value.accessible_departments=[])},kt=h(!1),Qe=de(()=>{var e;let s=[...re.value];if(He.value&&(s=s.filter(l=>l.is_hod===1)),(e=be.value)!=null&&e.trim()){const l=be.value.toLowerCase();s=s.filter(o=>o.role.toLowerCase().includes(l))}return s.sort((l,o)=>l.role.localeCompare(o.role)),s.sort((l,o)=>{const a=O.value.includes(l.role),r=O.value.includes(o.role);return a===r?0:a?1:-1}),s.map(l=>l.role)}),ll=de(()=>{const s=Qe.value;return s.length>0&&s.every(e=>O.value.includes(e))});De([O,Qe],()=>{const s=Qe.value;kt.value=s.length>0&&s.every(e=>O.value.includes(e))},{immediate:!0,deep:!0});function ol(s){const e=s.target.checked,l=re.value.filter(o=>{var a;return!(He.value&&o.is_hod!==1||(a=be.value)!=null&&a.trim()&&!o.role.toLowerCase().includes(be.value.toLowerCase()))}).map(o=>o.role);e?O.value=Array.from(new Set([...O.value,...l])):O.value=O.value.filter(o=>!l.includes(o)),kt.value=e}function al(){O.value=[],kt.value=!1,He.value=!1}const ve=h("");function nl(){const s=f[W.value];if(!s||!s.sections){console.error("Error: Invalid block or sections not found.");return}let e={type:W.value==0?"requestor":"approver",roles:O.value,approval_required:ze.value,approver_can_edit:ce.value,fields:s.sections.flatMap(Vt),idx:W.value};W.value!==0&&(e.view_only_reportee=ve.value==="ViewOnlyReportee"?1:0,e.all_approvals_required=ve.value==="all_approvals_required"?1:0,e.requester_as_a_approver=ve.value==="requester_as_a_approver"?1:0,e.on_rejection=he.value?he.value:0);const l=j.findIndex(o=>o.idx===e.idx);l!==-1?j[l]=e:j.push(e),dl()}function J(s){const e=j.filter(a=>a.idx===s);if(e.length===0)return{roles:[]};if(e.length===1)return e[0];const l=I({},e[0]),o=[];return e.forEach(a=>{a.roles&&Array.isArray(a.roles)&&o.push(...a.roles)}),l.roles=o,console.log(`getWorkflowSetup(${s}): Found ${e.length} entries, merged roles:`,o),l}function il(s){const e=J(s),l=e.roles||[];O.value=[...l],he.value=e.on_rejection,ze.value=e.approval_required,ce.value=e.approver_can_edit,e.view_only_reportee===1?ve.value="ViewOnlyReportee":e.all_approvals_required===1?ve.value="all_approvals_required":e.requester_as_a_approver===1?ve.value="requester_as_a_approver":ve.value=""}const $t=s=>{He.value=!1,be.value="",ve.value="",he.value="",_.value.accessible_departments.length&&rl(s,_.value.accessible_departments),W.value=s,il(s)};function rl(s,e){let l={index:s,departments:e,property:_.value.business_unit};G.post(Y.addDesignationroles,l).then(o=>{o.message&&(re.value=o.message)}).catch(o=>{console.error("Error fetching designations data:",o)})}function dl(){G.post(Y.add_roles_WF,{workflow_setup:j,doctype:_.value.form_short_name,business_unit:_.value.business_unit}).then(s=>{console.log(s),W.value==0?ue("Requestor Added"):ue(`Approver-${W.value} Added`)})}function ul(){T.push({path:ie.value.routepath||localStorage.getItem("routepath")}),localStorage.removeItem("form_json")}function cl(){_.value.form_name="",_.value.form_short_name="",_.value.owner_of_the_form="",_.value.business_unit="",_.value.form_category="",_.value.accessible_departments=[]}const pl=s=>{if(ft.value){oe("Please check all required fields before proceeding.");return}s<A.value?Ft():s>A.value&&Ct()},Ct=()=>{if(ft.value){oe("Please check all required fields before proceeding.");return}A.value<4&&(A.value+=1,A.value===4&&(vt.value=f))},Ft=()=>{A.value>1&&(A.value-=1)},ml=h([]);function Ht(){const s={fields:JSON.stringify(["*"]),limit_page_length:"none",doctype:me.EzyFormDefinitions,doc_id:z.value};G.get(Y.GetDoctypeData,{params:s}).then(e=>{var o;let l=e==null?void 0:e.message.data;if(l){l.accessible_departments&&(l.accessible_departments=l.accessible_departments.split(",")),_.value=Fe(I(I({},_.value),l),{owner_of_the_form:l.owner_of_the_form||_.value.owner_of_the_form||""});const a=JSON.parse((o=e.message.data)==null?void 0:o.form_json);ot.value=a.workflow,ps.value=a.fields.filter(u=>u.fieldtype==="Table"),ml.value=a.fields.filter(u=>u.fieldtype==="Table"),We.value=e.message.data.is_landscape;let r=ls(JSON.parse(l==null?void 0:l.form_json).fields);D.value=JSON.parse(e.message.data.form_json).child_table_fields,Ls.value=[],V.value=[],r.forEach((u,c)=>{f.push(u)}),JSON.parse(l==null?void 0:l.form_json).workflow.forEach((u,c)=>{j.push(u)})}}).catch(e=>{console.error("Error fetching  data:",e)})}function fl(){const s={};rt.value&&(s.print_format=rt.value),We.value!==void 0&&We.value!==null&&(s.is_landscape=We.value),G.put(Y.resource+me.EzyFormDefinitions+`/${S.query.id}`,s).then(e=>{console.log(e),bootstrap.Modal.getInstance(document.getElementById("customFormatModal")).hide(),ue("Print Format Added Successfully")}).catch(e=>{console.error("Error fetching  data:",e)})}function Jt(){const s={fields:JSON.stringify(["name","department_name"]),limit_page_length:"none",business_unit:`${ie.value.business_unit||S.query.business_unit}`,doctype:me.departments};G.get(Y.GetDoctypeData,{params:s}).then(e=>{var l;(l=e==null?void 0:e.message.data)!=null&&l.length&&(we.value=e.message.data.map(o=>o.name),q.value=e.message.data.map(o=>o.name))}).catch(e=>{console.error("Error fetching department data:",e)})}h(""),De(()=>_.value.owner_of_the_form,s=>{s&&Dt(s)});function Dt(s){s&&typeof s=="string"&&s.trim()!==""&&vl(s)}function vl(s){const e={fields:JSON.stringify(["ezy_departments_items"]),doctype:me.departments,doc_id:s};G.get(Y.GetDoctypeData,{params:e}).then(l=>{var o;(o=l==null?void 0:l.message.data)!=null&&o.ezy_departments_items&&(Z.value=l.message.data.ezy_departments_items.map(a=>a.category))}).catch(l=>{console.error("Error fetching categories data:",l)})}function St(s){let e=Xl(f);const l=Fe(I({},_.value),{fields:e,doctype:me.EzyFormDefinitions,workflow_setup:j,form_status:s==="save"?"Created":"Draft"});l.accessible_departments=l.accessible_departments.toString(),G.post(Y.savedata,l).then(o=>{if(o&&o.message&&o.message.message){let a=localStorage.getItem("preName");if(a){let r={installed:"Yes"};G.put(`${Y.resource}${me.preDefinedForm}/${a}`,r).then(u=>{localStorage.removeItem("preName")}).catch(u=>{console.error("Error fetching ezyForms data:",u)})}if(T.push({params:{paramid:o.message.message},query:{id:o.message.message}}),z.value=o.message.message,z&&z!=="new"&&(f.splice(0,f.length),Ht()),j.length<f.length)us("Add Workflow");else if(Yt.value===!0){ue("Form Created Successfully!",{autoClose:2e3,transition:"zoom"});let r=localStorage.getItem("routepath");s==="save"?T.push({path:r}):s==="Draft"&&T.push({path:r})}}else console.error("Invalid response structure:",o)}).catch(o=>{console.error("Error saving form data:",o)})}const mt=h(""),Gt=()=>{var l,o;const s=f.length,e={label:s===0?"requestor":`approver-${s}`,parent:`${(l=Ee.value)==null?void 0:l.value}-${(o=_.value)==null?void 0:o.form_short_name}`,sections:[{label:"",parent:`${Ee.value.value}-${_.value.form_short_name}`,childTables:[],afterCreated:{},rows:s===0?[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Requested By",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Requested On",fieldtype:"Datetime",options:"",reqd:!1}]}]},{label:`row_0_1_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1,description:""}]}]}]:[{label:`row_0_0_${s}`,columns:[{label:"",fields:[{label:"Approver",fieldtype:"Data",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved On",fieldtype:"Datetime",options:"",reqd:!1}]},{label:"",fields:[{label:"Approved By",fieldtype:"Attach",options:"",reqd:!1}]}]}]}]};f.push(e),rs(()=>{mt.value&&mt.value.scrollTo({top:mt.value.scrollHeight,behavior:"smooth"})})},Yt=h(!1),Zt=s=>{let e=f[s];e.parent&&H.push(e);let l=[];j.length>s&&j[s].roles&&(l=[...j[s].roles]),f.splice(s,1),j.length>s&&j.splice(s,1),f.forEach((o,a)=>{o.sections.forEach((r,u)=>{r.rows.forEach((c,m)=>{c.columns.forEach((d,p)=>{_e(a,u,m,p)})})})}),l.length&&_l(l,s)};function _l(s,e){const l={role:s,level:e,document_type:_.value.form_name,short_name:_.value.form_short_name,property:_.value.business_unit};G.post(Y.deleteAssigneRoles,l).then(o=>{o&&St()})}const bl=(s,e)=>{const l={label:"",parent:`${Ee.value.value}-${_.value.form_short_name}`,rows:[{label:`row_0_${e}_${s}`,columns:[{label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]}]}]};f[s].sections.splice(e+1,0,l)},hl=(s,e)=>{let l=f[s].sections[e];l.parent&&H.push(l),f[s].sections.splice(e,1),f[s].sections.forEach((o,a)=>{o.rows.forEach((r,u)=>{r.columns.forEach((c,m)=>{_e(s,a,u,m)})})})},gl=(s,e,l)=>{f[s].sections[e].rows[l].columns.push({label:"",fields:[{label:"",fieldtype:"",options:"",reqd:!1}]})},yl=(s,e,l,o)=>{const r=f[s].sections[e].rows[l].columns,u=r[o];u.parent&&H.push(u),r.length===1?f[s].sections[e].rows.splice(l,1):r.splice(o,1),f[s].sections.forEach((c,m)=>{c.rows.forEach((d,p)=>{d.columns.forEach((w,L)=>{_e(s,m,p,L)})})})},wl=(s,e,l,o)=>{f[s].sections[e].rows[l].columns[o].fields.push({label:"",fieldtype:"",options:"",reqd:!1})},kl=(s,e,l,o,a)=>{let r=f[s].sections[e].rows[l].columns[o].fields[a];r.parent&&H.push(r),f[s].sections[e].rows[l].columns[o].fields.splice(a,1)},$l=(s,e,l,o,a)=>{const r=f[s].sections[e].rows[l].columns[o].fields[a],u=I({},r);u.name=`${r.name} Name the field`,f[s].sections[e].rows[l].columns[o].fields.splice(a+1,0,u)},Cl=(s,e,l,o,a)=>{const r=ds(f);f.splice(0,f.length,...r);let u=f[s].sections[e].rows[l].columns[o].fields[a].fieldtype;(u!=="Select"||u!=="radio"||u!=="multiselect")&&(f[s].sections[e].rows[l].columns[o].fields[a].options="")};function Fl(s){return dt.includes(s==null?void 0:s.trim().toLowerCase())}function Dl(s){return/[^a-zA-Z0-9 _\/!@#$%^&*()?.:;|/\\[\]{}]/.test(s)||s.includes('"')||s.includes("'")}function Sl(s){return s.flatMap(e=>{var l;return[(l=e.label)==null?void 0:l.trim().toLowerCase(),...e.sections.flatMap(o=>{var a;return[(a=o.label)==null?void 0:a.trim().toLowerCase(),...o.rows.flatMap(r=>r.columns.flatMap(u=>{var c;return[(c=u.label)==null?void 0:c.trim().toLowerCase(),...u.fields.map(m=>{var d;return(d=m.label)==null?void 0:d.trim().toLowerCase()})]}))]})]}).filter(e=>e!==""&&!Bt.includes(e))}function _e(s,e,l,o,a){const u=Sl(f).filter((d,p,w)=>w.indexOf(d)!==p),c=ds(f);f.splice(0,f.length,...c);function m(d,p){if(!d){p.errorMsg="";return}Fl(d)?p.errorMsg="Entered label is restricted":Dl(d)?p.errorMsg=`Label should not contain special characters, double quotes (") or single quotes (')`:d.length>64?p.errorMsg="Label should not exceed 64 characters":p.errorMsg=u.includes(d.trim().toLowerCase())?"Duplicate Label Name":""}a!==void 0&&m(f[s].sections[e].rows[l].columns[o].fields[a].label,f[s].sections[e].rows[l].columns[o].fields[a]),a===void 0&&o!==void 0&&m(f[s].sections[e].rows[l].columns[o].label,f[s].sections[e].rows[l].columns[o]),o===void 0&&a===void 0&&m(f[s].sections[e].label,f[s].sections[e]),f.forEach(d=>{d.sections.forEach(p=>{m(p.label,p),p.rows.forEach(w=>{w.columns.forEach(L=>{m(L.label,L),L.fields.forEach(y=>{m(y.label,y)})})})})})}const At=de(()=>{function s(e){return!e||typeof e!="object"?!1:"fieldtype"in e&&e.fieldtype===""||"error"in e&&e.error||"errorMsg"in e&&e.errorMsg||["Select","Table MultiSelect"].includes(e.fieldtype)&&(!e.options||e.options.trim()==="")?!0:Array.isArray(e)?e.some(s):Object.values(e).some(s)}return s(f)}),ft=de(()=>K.value.length>0||Q.value.length>0||!_.value.form_category||!_.value.owner_of_the_form||_.value.accessible_departments.length===0),Al=de(()=>f.some(s=>s.sections.some(e=>e.rows.some(l=>l.columns.some(o=>o.fields.some(a=>a.label&&a.fieldtype))))));function Kt(s,e){let l=s.target.value.trim();if(!l){e==="form_name"?K.value="Input cannot be empty or only spaces":e==="form_short_name"&&(Q.value="Input cannot be empty or only spaces");return}if(l.length>63){e==="form_name"?K.value="Name cannot exceed 63 characters":e==="form_short_name"&&(Q.value="Short name cannot exceed 63 characters");return}if(/^\d/.test(l)){e==="form_short_name"&&(Q.value="First character must be a letter");return}else Q.value="";if(e==="form_short_name"&&l.length<2){Q.value="Short name must have at least 2 letters";return}if(e==="form_short_name"&&/[^a-zA-Z ]/.test(l)){Q.value="Only alphabets and spaces are allowed";return}if(/[^a-zA-Z0-9& ]/.test(l)){e==="form_name"?K.value="Special characters are not allowed":e==="form_short_name"&&(Q.value="Special characters are not allowed");return}else e==="form_name"?K.value="":e==="form_short_name"&&(Q.value="");const o=[[e,"=",`${l}`],["business_unit","=",`${_.value.business_unit}`]],a={fields:JSON.stringify(["form_name","form_short_name"]),filters:JSON.stringify(o),doctype:me.EzyFormDefinitions};G.get(`${Y.GetDoctypeData}`,{params:a}).then(r=>{ae.value=r.message.data,e==="form_name"?K.value=l&&ae.value.some(u=>u.form_name&&u.form_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Name already exists":"":e==="form_short_name"&&(Q.value=l&&ae.value.some(u=>u.form_short_name&&u.form_short_name.replace(/\s+/g,"").toLowerCase()===l.replace(/\s+/g,"").toLowerCase())?"Short name already exists":"")}).catch(r=>{console.error("Error fetching ezyForms data:",r),e==="form_name"?K.value="":e==="form_short_name"&&(Q.value="")})}const ql=s=>s===0?"1st row":s===1?"2nd row":s===2?"3rd row":`${s+1}th row`,vt=h([]),Vl=()=>{f.length&&(vt.value=f,new bootstrap.Modal(document.getElementById("formViewModal")).show())};function El(){G.post(Y.delete_form_items,{deleted_fields:H.flatMap(Vt),doctype:z}).then(s=>{var e;(e=s==null?void 0:s.message)!=null&&e.success&&St()})}function Qt(s){return Me(this,null,function*(){if(At.value){oe("Please fix the errors before proceeding.");return}Yt.value=!0;let e=H.flatMap(Vt);z!=null&&z!=null&&z!="new"&&e.length?El():St(s)})}const Ul=()=>{nt.value.push({role:"",autoApproval:!1,permissions:{}})},Tl=s=>{nt.value.splice(s,1)},Ll=s=>{us("Permission configuration modal will be implemented here")},Xt=()=>Me(this,null,function*(){var s;if(!(Ge.value.length>0))try{const e={doctype:"WF Roadmap",fields:JSON.stringify(["name","roadmap_title","document_type","workflow_levels","property","cluster_name"]),filters:JSON.stringify([])},l=yield G.get(Y.GetDoctypeData,{params:e});(s=l==null?void 0:l.message)!=null&&s.data&&(Ge.value=l.message.data.map(o=>({roadmap_title:o.name,display_name:`${o.roadmap_title} (${o.document_type})`,document_type:o.document_type,workflow_levels:o.workflow_levels,property:o.property,cluster_name:o.cluster_name})),console.log("Fetched WF Road Maps:",Ge.value))}catch(e){console.error("Error fetching WF Road Maps:",e),oe("Failed to fetch workflow road maps")}}),xt=s=>Me(this,null,function*(){var e;try{console.log("Selected WF Road Map:",s);const l=yield G.get(`${Y.resource}${me.wfRoadmap}/${s.roadmap_title}`),o=((e=l==null?void 0:l.data)==null?void 0:e.data)||(l==null?void 0:l.data)||{};console.log("WF Road Map Data:",o);const a=(o.wf_requestors&&o.wf_requestors.length>0,1),r={};o.wf_level_setup&&o.wf_level_setup.length>0&&o.wf_level_setup.forEach(d=>{r[d.level]||(r[d.level]=[]),r[d.level].push(d)});const u=Object.keys(r).length,c=a+u;for(console.log(`Required blocks: ${c} (1 requestor + ${u} approver levels)`),j=[],je.value=[],Ve.value=[];f.length>c;)f.pop();for(;f.length<c;)Gt();console.log(`Block adjustment complete: ${f.length} blocks`);let m=0;o.wf_requestors&&o.wf_requestors.length>0?(je.value=o.wf_requestors,console.log(`Loaded ${o.wf_requestors.length} requestor role(s)`),o.wf_requestors.forEach(d=>{j.push({type:"requestor",roles:[d.requestor],auto_approval:d.auto_approval||0,columns_allowed:d.columns_allowed||"",fields:[],idx:0})})):console.warn("No Requestors found in roadmap, creating default requestor setup"),m=1,o.wf_level_setup&&o.wf_level_setup.length>0?(Ve.value=o.wf_level_setup.sort((p,w)=>p.level-w.level),console.log(`Loaded ${o.wf_level_setup.length} approver level(s)`),Object.keys(r).sort((p,w)=>parseInt(p)-parseInt(w)).forEach(p=>{const w=r[p],L=m;console.log(`Level ${p} → Block Index ${L}, Roles: ${w.length}`),w.forEach(y=>{j.push({type:"approver",level:parseInt(p),roles:[y.role],approval_required:y.mandatory?1:0,approver_can_edit:0,view_only_reportee:y.view_only_reportee||0,all_approvals_required:y.all_approvals_required||0,requester_as_a_approver:y.requester_as_a_approver||0,on_rejection:y.on_rejection||0,columns_allowed:y.columns_allowed||"",fields:[],idx:L})}),m++})):console.warn("No approver levels found in roadmap"),console.log("Final blockArr length:",f.length),console.log("Final workflowSetup:",j),ue(`Workflow configured! ${je.value.length} requestor role(s), ${Ve.value.length} approver level(s) across ${f.length} blocks.`),rs(()=>{Ae.value=0})}catch(l){console.error("Error in handleWFRoadMapSelect:",l),oe("Failed to load workflow. Please try again.")}}),Rl=s=>{console.log("Field added from library:",s);const e=Ae.value,l=f[e];if(!l){oe("Please create a block first before adding fields");return}const o=It(s);if(!o)return;l.sections||(l.sections=[]),l.sections.length===0&&l.sections.push({label:"",rows:[[{label:"",fields:[]}]]});const u=l.sections[0].rows[0][0];u.fields||(u.fields=[]),u.fields.push(o),console.log("Field added successfully:",o),ue(`${o.label} field added successfully`)},Ml=s=>{console.log("Drag started:",s),Se.value=s},Ol=()=>{console.log("Drag ended")},Bl=s=>{console.log("Advanced builder fields saved:",s),ue(`${s.length} field(s) saved successfully!`)},Nl=s=>{console.log("Advanced builder fields updated:",s)},zl=s=>{var u,c;const e=Ae.value,l=f[e];if(!l){oe("Please create a block first");return}(!l.sections||l.sections.length===0)&&(l.sections=[{label:"",parent:`${(u=Ee.value)==null?void 0:u.value}-${(c=_.value)==null?void 0:c.form_short_name}`,rows:[]}]);const o=l.sections[0];(!o.rows||o.rows.length===0)&&(o.rows=[{label:`row_0_0_${e}`,columns:[]}]);const a=o.rows[0];(!a.columns||a.columns.length===0)&&(a.columns=[{label:"",fields:[]}]);const r=a.columns[0];r.fields||(r.fields=[]),s.forEach(m=>{const d=I({label:m.label,fieldname:m.fieldname,fieldtype:m.fieldtype,options:m.options||"",reqd:m.reqd||0,unique:m.unique||0,description:m.description||"",default:m.default||"",read_only:m.read_only||0,hidden:m.hidden||0,depends_on:m.depends_on||"",mandatory_depends_on:m.mandatory_depends_on||"",read_only_depends_on:m.read_only_depends_on||""},m);r.fields.push(d)}),ue(`Added ${s.length} field(s) to ${e===0?"Requestor":`Approver ${e}`} Block`),qe.value=!1},It=s=>{console.log("Creating field from Frappe type:",s);const e=pt.find(r=>r.type===s);if(!e)return console.error("Field type not found:",s),console.error("Available types:",pt.map(r=>r.type)),oe(`Field type "${s}" not found. Please try again.`),null;const l=Date.now(),o=Math.random().toString(36).substring(2,6),a=`field_${l}_${o}`;return{id:`field_${l}_${o}`,fieldname:a,label:e.label,fieldtype:e.type,options:"",reqd:0,read_only:0,hidden:0,description:"",default:"",placeholder:""}};return(s,e)=>(n(),i("div",null,[t("div",No,[t("div",zo,[t("div",Po,[t("div",jo,[t("div",{class:"ps-1 my-2 d-flex align-items-center",onClick:e[0]||(e[0]=l=>ul())},e[43]||(e[43]=[t("button",{class:"btn font-13 ms-3"},[t("i",{class:"bi bi-arrow-left"}),t("span",{class:"ms-2"},"Back")],-1)])),s.$route.query.id||s.$route.query.preId?(n(),i("span",Wo,"("+g(ie.value.formId||E(S).query.form_name)+")",1)):b("",!0)]),t("div",null,[A.value===2&&E(f).length&&!s.$route.query.id?(n(),i("button",{key:0,disabled:At.value||ft.value,style:Kl({cursor:At.value?"not-allowed":"pointer"}),type:"butoon",class:"btn font-13 btn-light",onClick:e[1]||(e[1]=l=>Qt("Draft"))},e[44]||(e[44]=[t("i",{class:"bi bi-bookmark-check-fill"},null,-1),$(" Save As Draft ")]),12,Ho)):b("",!0)])]),t("div",Jo,[t("div",Go,[t("div",Yo,[t("div",Zo,[t("ul",Ko,[(n(!0),i(R,null,M(Qs.value,l=>(n(),i("li",{key:l.id,class:P({active:A.value===l.id,completed:A.value>l.id})},[t("div",{class:P(["d-flex gap-3 align-items-center",{"not-allowed":ft.value&&A.value+1===l.id}]),onClick:o=>pl(l.id)},[A.value>l.id?(n(),i("i",Xo)):(n(),i("i",{key:1,class:P(l.icon)},null,2)),t("div",xo,[t("span",Io,g(l.stepno),1),e[45]||(e[45]=t("br",null,null,-1)),t("span",ea,g(l.label),1)])],10,Qo)],2))),128))])])]),t("div",ta,[t("div",sa,[t("div",la,[A.value===1?(n(),i("div",oa,[t("div",aa,[t("div",na,[e[46]||(e[46]=t("div",null,null,-1)),e[47]||(e[47]=t("h1",{class:"font-14 fw-bold m-0"},"Form Info",-1)),t("div",null,[!s.$route.query.id&&!s.$route.query.preId?(n(),i("button",{key:0,class:"btn btn-light font-12 mx-2",type:"button",onClick:cl},"Clear Form")):b("",!0),A.value<5?(n(),Et(os,{key:1,class:"btn btn-dark bg-dark text-white fw-bold font-13",name:"Next",onClick:Ct})):b("",!0)])])]),t("div",ia,[t("div",ra,[e[63]||(e[63]=t("div",{class:"col-sm-none col-md-4"},null,-1)),t("div",da,[t("div",ua,[t("div",ca,[t("div",pa,[t("div",ma,[E(S).query.preId?(n(),i("span",fa,e[48]||(e[48]=[$("Predefined "),t("i",{class:"bi bi-check2-circle"},null,-1)]))):b("",!0),se(lt,{disabled:(ie.value.formId&&ie.value.formId.length>0||E(S).query.form_name)&&Le.value!=="1",labeltext:"Form Name",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formName",validationStar:"true",placeholder:"Untitled Form",onChange:e[2]||(e[2]=l=>Kt(l,"form_name")),modelValue:ht.value,"onUpdate:modelValue":e[3]||(e[3]=l=>ht.value=l)},null,8,["disabled","modelValue"]),K.value?(n(),i("span",va,g(K.value),1)):b("",!0)])]),t("div",_a,[se(lt,{disabled:(ie.value.formId&&ie.value.formId.length>0||E(S).query.form_name)&&Le.value!=="1",labeltext:"Form Short Code",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formShortCode",validationStar:"true",placeholder:"Untitled Form",onChange:e[4]||(e[4]=l=>Kt(l,"form_short_name")),modelValue:_.value.form_short_name,"onUpdate:modelValue":e[5]||(e[5]=l=>_.value.form_short_name=l)},null,8,["disabled","modelValue"]),Q.value?(n(),i("span",ba,g(Q.value),1)):b("",!0)]),t("div",ha,[se(lt,{disabled:ie.value.formId&&ie.value.formId.length>0&&Le.value!=="1",labeltext:"Form Naming series",class:"formHeight",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Naming series",modelValue:_.value.series,"onUpdate:modelValue":e[6]||(e[6]=l=>_.value.series=l)},null,8,["disabled","modelValue"]),e[49]||(e[49]=as('<small class="text-muted" style="font-size:12px;" data-v-c8c2427d> Note : Enter <code data-v-c8c2427d>YY-YY</code>, <code data-v-c8c2427d>YYYY</code>, or <code data-v-c8c2427d>ABC</code>. The system will default to the format <code data-v-c8c2427d> 24-25-0001</code>, <code data-v-c8c2427d> 2025-0001</code>, or <code data-v-c8c2427d> ABC-0001</code> respectively. </small>',1))]),t("div",ga,[t("label",null,[e[50]||(e[50]=$("Owner Of The Form ")),_.value.owner_of_the_form?b("",!0):(n(),i("span",ya,"*"))]),se(E(Oe),{disabled:ie.value.formId&&ie.value.formId.length>0&&Le.value!=="1",onOpen:Jt,options:we.value,onChange:Dt,modelValue:_.value.owner_of_the_form,"onUpdate:modelValue":e[7]||(e[7]=l=>_.value.owner_of_the_form=l),placeholder:"Select Department",multiple:!1,class:"font-11 multiselect",searchable:!0,openDirection:"bottom"},null,8,["disabled","options","modelValue"])]),t("div",wa,[t("label",null,[e[51]||(e[51]=$("Form Category ")),_.value.form_category?b("",!0):(n(),i("span",ka,"*"))]),se(E(Oe),{disabled:ie.value.formId&&ie.value.formId.length>0&&Le.value!=="1",options:Z.value,modelValue:_.value.form_category,"onUpdate:modelValue":e[8]||(e[8]=l=>_.value.form_category=l),placeholder:"Select Category",multiple:!1,searchable:!0,class:"font-11 multiselect"},null,8,["disabled","options","modelValue"])]),t("div",$a,[t("label",null,[e[52]||(e[52]=$("Accessible to Department ")),_.value.accessible_departments.length?b("",!0):(n(),i("span",Ca,"*"))]),se(E(Oe),{modelValue:_.value.accessible_departments,"onUpdate:modelValue":e[10]||(e[10]=l=>_.value.accessible_departments=l),options:Xs.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Department",class:"font-11",onSelect:tl,onRemove:sl,openDirection:"bottom"},{option:Ut(({option:l})=>[t("div",Fa,[t("input",{type:"checkbox",checked:Is(l),class:"custom-checkbox",onChange:o=>el(l,o),onClick:e[9]||(e[9]=fe(()=>{},["stop"]))},null,40,Da),t("span",null,g(l),1)])]),selection:Ut(({values:l,isOpen:o})=>[l.length?F((n(),i("span",{key:0,class:"multiselect__single font-10"},g(xs.value),513)),[[bt,!o]]):b("",!0)]),_:1},8,["modelValue","options"])]),t("div",Sa,[e[53]||(e[53]=t("label",null,"Form Type",-1)),se(E(Oe),{options:Mt,modelValue:Ot.value,"onUpdate:modelValue":e[11]||(e[11]=l=>Ot.value=l),placeholder:"Select Form Type",multiple:!1,searchable:!0,label:"label","track-by":"value",reduce:l=>l.value,class:"font-11 multiselect",openDirection:"top"},null,8,["modelValue","reduce"]),e[54]||(e[54]=t("small",{class:"text-muted font-12 ms-2"},"Note: Public form is accessible by anyone through QR code.",-1))]),t("div",Aa,[e[55]||(e[55]=t("label",null,[$("Has Workflow "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),se(E(Oe),{options:["Yes","No"],modelValue:_.value.has_workflow,"onUpdate:modelValue":e[12]||(e[12]=l=>_.value.has_workflow=l),placeholder:"Select",multiple:!1,class:"font-11 multiselect",searchable:!0},null,8,["modelValue"])]),_.value.has_workflow==="Yes"?(n(),i("div",qa,[e[56]||(e[56]=t("label",null,[$("Use Existing Workflow "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),se(E(Oe),{onOpen:Xt,options:Ge.value,modelValue:ke.value,"onUpdate:modelValue":e[13]||(e[13]=l=>ke.value=l),placeholder:"Select WF Road Map",multiple:!1,class:"font-11 multiselect",searchable:!0,label:"display_name","track-by":"roadmap_title",onSelect:xt,openDirection:"bottom"},null,8,["options","modelValue"]),e[57]||(e[57]=t("small",{class:"text-muted font-12 ms-2"},[t("i",{class:"bi bi-info-circle me-1"}),$(" Select to auto-populate requestor and approver configurations ")],-1))])):b("",!0),_.value.as_web_view===1?(n(),i("div",Va,[e[58]||(e[58]=t("label",null,[$("Form Submit Response "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),se(lt,{class:"formHeight mt-2",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Submit Response",modelValue:_.value.public_form_response,"onUpdate:modelValue":e[14]||(e[14]=l=>_.value.public_form_response=l)},null,8,["modelValue"])])):b("",!0),_.value.as_web_view===1?(n(),i("div",Ea,[e[59]||(e[59]=t("label",null,[$("Submit Notification Email "),t("span",{class:"fw-normal font-11 text-secondary"},"(optional)")],-1)),se(lt,{class:"formHeight mt-2",type:"text",tag:"input",name:"Value",id:"formNameSeries",placeholder:"Form Submit mail",modelValue:_.value.mail_id,"onUpdate:modelValue":e[15]||(e[15]=l=>_.value.mail_id=l)},null,8,["modelValue"]),e[60]||(e[60]=t("small",{class:"text-muted font-12 ms-2"},"Note : If multiple Emails, separate with commas (,).",-1))])):b("",!0),E(S).query.preId?(n(),i("div",Ua,[t("div",Ta,[F(t("input",{class:"form-check-input linketoCheck p-1",disabled:_.value.is_predefined_doctype==1,type:"checkbox",id:"is_linked","onUpdate:modelValue":e[16]||(e[16]=l=>_.value.is_linked=l),"true-value":1,"false-value":0},null,8,La),[[ye,_.value.is_linked]]),e[61]||(e[61]=t("label",{class:"form-check-label font-12 mx-2 mb-0 ps-1",for:"is_linked"}," Link ",-1))])])):b("",!0),_.value.is_linked?(n(),i("div",Ra,[e[62]||(e[62]=t("label",{for:"standardFormInput"},"Form",-1)),F(t("input",{type:"text",class:"form-control standardFormInput",id:"standardFormInput",disabled:_.value.is_predefined_doctype==1,"onUpdate:modelValue":e[17]||(e[17]=l=>_.value.is_linked_form=l),placeholder:"Type to search Form Name...",onInput:bs,onFocus:e[18]||(e[18]=l=>at.value=!0),onBlur:gs},null,40,Ma),[[B,_.value.is_linked_form]]),at.value&&U.value.length?(n(),i("ul",Oa,[(n(!0),i(R,null,M(U.value,(l,o)=>(n(),i("li",{class:"list-group-item formlistitem",key:o,onMousedown:fe(a=>hs(l.name),["prevent"])},g(l.name),41,Ba))),128))])):b("",!0)])):b("",!0)])])]),e[64]||(e[64]=t("div",{class:"col-sm-none col-md-4"},null,-1))])])])):b("",!0),A.value===2?(n(),i("div",Na,[t("div",za,[t("div",Pa,[t("button",{onClick:e[19]||(e[19]=l=>Ft()),class:"btn btn-sm btn-light"},e[65]||(e[65]=[t("i",{class:"bi bi-chevron-left"},null,-1),$(" Back ")]))]),t("div",ja,[(n(!0),i(R,null,M(E(f),(l,o)=>(n(),i("button",{key:o,class:P(["zoho-tab",{active:Ae.value===o}]),onClick:a=>Ae.value=o},[e[66]||(e[66]=t("i",{class:"bi bi-file-earmark-text me-1"},null,-1)),$(" "+g(o===0?"Requestor Block":`Approver Block ${o}`)+" ",1),E(f).length>1?(n(),i("i",{key:0,class:"bi bi-x-lg ms-2",onClick:fe(a=>Zt(o),["stop"])},null,8,Ha)):b("",!0)],10,Wa))),128))]),t("div",Ja,[t("button",{class:P(["btn btn-sm me-2",qe.value?"btn-dark":"btn-outline-dark"]),onClick:e[20]||(e[20]=l=>qe.value=!qe.value),title:"Toggle Advanced Field Builder"},[t("i",{class:P(qe.value?"bi bi-tools":"bi bi-grid-3x3-gap")},null,2),$(" "+g(qe.value?"Advanced":"Simple"),1)],2),t("button",{class:"btn btn-sm btn-primary me-2",onClick:Gt},e[67]||(e[67]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),$("Add Block ")])),Al.value?(n(),i("button",{key:0,class:"btn btn-sm btn-light me-2",onClick:Vl},e[68]||(e[68]=[t("i",{class:"bi bi-eye me-1"},null,-1),$("Preview ")]))):b("",!0),E(f).length?(n(),i("button",{key:1,class:"btn btn-sm btn-dark",onClick:e[21]||(e[21]=l=>Qt("save"))},g(E(z)!=="new"?"Update Form":"Create Form"),1)):b("",!0)])]),t("div",Ga,[qe.value?(n(),i("div",Ya,[e[69]||(e[69]=t("div",{class:"alert alert-info mb-3"},[t("i",{class:"bi bi-info-circle me-2"}),t("strong",null,"Advanced Mode:"),$(" Use this mode to access all Frappe field types and advanced field properties. Fields created here will be added to the current block. ")],-1)),se(Bo,{ref_key:"frappeBuilderRef",ref:ms,formName:ht.value,currentBlockIndex:Ae.value,onSave:Bl,onUpdate:Nl,onAddFields:zl},null,8,["formName","currentBlockIndex"])])):(n(),i(R,{key:1},[t("aside",{class:P(["zoho-field-library",{collapsed:!Pe.value}])},[t("div",{class:"library-header",onClick:e[22]||(e[22]=l=>Pe.value=!Pe.value)},[t("div",Za,[t("h6",Ka,[e[70]||(e[70]=t("i",{class:"bi bi-grid-3x3-gap me-2"},null,-1)),$(" "+g(Pe.value?"Field Types":"Fields"),1)]),t("button",Qa,[t("i",{class:P(Pe.value?"bi bi-chevron-left":"bi bi-chevron-right")},null,2)])])]),Pe.value?(n(),i("div",Xa,[se(oo,{fields:pt,onFieldAdd:Rl,onFieldDragstart:Ml,onFieldDragend:Ol})])):b("",!0)],2),t("div",xa,[t("div",{class:"canvas-inner",ref_key:"mainBlockRef",ref:mt},[(n(!0),i(R,null,M(E(f),(l,o)=>F((n(),i("div",{class:"block-level",key:o},[t("div",Ia,[t("div",en,[t("div",tn,[t("h6",sn,g(o===0?"Requestor Block":`Approver
                                  Block ${o}
                                  `),1),t("div",ln,[o!==0&&J(o).view_only_reportee||J(o).all_approvals_required||J(o).requester_as_a_approver?(n(),i("div",on,[t("span",an,g(J(o).view_only_reportee===1?"Reporting Manager only":"")+" "+g(J(o).all_approvals_required===1?"All of the selected approvers":"")+" "+g(J(o).requester_as_a_approver===1?"Approval by Requestor":""),1),t("span",null,[e[71]||(e[71]=t("span",{class:"ms-1"}," on rejection escalating to ",-1)),t("span",nn,g(J(o).on_rejection?`Level ${J(o).on_rejection}`:"Requestor"),1)]),t("span",rn,g(J(o).all_approvals_required===1?"":"(Skipping multi approval)"),1)])):b("",!0)])]),t("div",dn,[E(z)&&E(j).length?(n(),i("div",un,[J(o)?(n(),i("label",cn,[t("span",pn,g(J(o).roles.length>0?o===0?"Requestor Roles: ":"Approver Roles: ":""),1),t("span",mn,g(J(o).roles.slice(0,2).join(", ")),1),J(o).roles.length>2?(n(),i("span",{key:0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:a=>$t(o),class:"more-count badge bg-primary ms-2",style:{cursor:"pointer"}}," +"+g(J(o).roles.length-2)+" more ",9,fn)):b("",!0)])):b("",!0)])):b("",!0),vs(o)&&E(z)!=null&&E(z)!=null&&E(z)!="new"&&J(o).roles.length===0?(n(),i("button",{key:1,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:a=>$t(o)},[e[72]||(e[72]=t("img",{src:xl,alt:"Add",class:"me-1"},null,-1)),$(" "+g(o===0?"Add Requestors":"Add Approvers"),1)],8,vn)):b("",!0),E(z)!=null&&E(z)!=null&&E(z)!="new"&&J(o).roles.length>0?(n(),i("button",{key:2,class:"btn btn-light designationBtn d-flex align-items-center",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:a=>$t(o)},e[73]||(e[73]=[t("i",{class:"bi bi-pencil font-14"},null,-1)]),8,_n)):b("",!0),t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteBlock",onClick:a=>Zt(o)},e[74]||(e[74]=[t("i",{class:"bi bi-trash me-1"},null,-1),$(" Delete Block ")]),8,bn)])])]),t("div",hn,[(n(!0),i(R,null,M(l.sections,(a,r)=>(n(),i("div",{key:"section-"+r,class:"dynamicSection mt-0 section"},[t("section",gn,[t("div",yn,[F(t("input",{"onUpdate:modelValue":u=>a.label=u,type:"text",class:P(["border-less-input","font-14",{"italic-style":!a.label},{"fw-medium":a.label}]),onChange:u=>_e(o,r),onInput:u=>_e(o,r),placeholder:"Untitled section"},null,42,wn),[[B,a.label]]),a.errorMsg?(n(),i("small",kn,g(a.errorMsg),1)):b("",!0)]),t("div",$n,[t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:u=>hl(o,r)},e[75]||(e[75]=[t("i",{class:"bi bi-trash me-1"},null,-1),$(" Delete Section ")]),8,Cn)])]),t("div",Fn,[(n(!0),i(R,null,M(a.rows,(u,c)=>(n(),i("section",{class:"row dynamicRow row-container",key:"row-"+c},[t("div",Dn,[t("label",Sn,g(ql(c)),1),t("div",null,[u.columns.length<3?(n(),i("button",{key:0,class:"btn btn-light bg-transparent border-0 p-1 font-12",onClick:m=>gl(o,r,c)},e[76]||(e[76]=[t("i",{class:"bi bi-plus font-14"},null,-1),$(" Add Column ")]),8,An)):b("",!0)])]),t("div",qn,[t("div",Vn,[(n(!0),i(R,null,M(u.columns,(m,d)=>(n(),i("div",{key:"column-"+d,onMouseenter:p=>Ss(o,r,c,d),onMouseleave:As,class:"col p-0 dynamicColumn position-relative column-container"},[t("div",Un,[t("div",Tn,[F(t("input",{"onUpdate:modelValue":p=>m.label=p,type:"text",class:P(["border-less-input","ps-1","font-14","inputHeight",{"italic-style":!m.label},{"fw-medium":m.label}]),onChange:p=>_e(o,r,c,d),onInput:p=>_e(o,r,c,d),placeholder:"Column Name"},null,42,Ln),[[B,m.label]]),m.errorMsg?(n(),i("small",Rn,g(m.errorMsg),1)):b("",!0)]),F(t("div",Mn,[t("button",{class:"btn btn-light bg-transparent me-1 btn-sm",onClick:p=>yl(o,r,c,d)},e[77]||(e[77]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,On)],512),[[bt,qs(o,r,c,d)]])]),m.fields.length===0?(n(),i("div",{key:0,class:"empty-drop-zone",onDragover:e[23]||(e[23]=fe(()=>{},["prevent"])),onDrop:p=>Ue(p,o,r,c,d,s.fieldIndex)},null,40,Bn)):b("",!0),(n(!0),i(R,null,M(m.fields,(p,w)=>{var L;return n(),i("div",{key:"field-"+w,onMouseenter:y=>Cs(o,r,c,d,w),onMouseleave:Fs,class:"dynamicField m-1 draggable-item",draggable:"true",onDragstart:y=>Nt(y,o,r,c,d,w),onDragover:e[27]||(e[27]=fe(()=>{},["prevent"])),onDrop:y=>Ue(y,o,r,c,d,w)},[t("div",{class:"drop-zone",onDragover:e[24]||(e[24]=fe(()=>{},["prevent"])),onDrop:y=>Ue(y,o,r,c,d,w)},null,40,zn),p.fieldtype!=="Table"?(n(),i("div",{key:0,class:"px-1 dynamic_fied field-border",draggable:"true",onDragstart:y=>Nt(y,o,r,c,d,w),onDragover:e[25]||(e[25]=fe(()=>{},["prevent"])),onDrop:y=>Ue(y,o,r,c,d,w)},[t("div",jn,[t("div",Wn,[F(t("input",{"onUpdate:modelValue":y=>p.label=y,placeholder:"Name the field",class:P(["border-less-input","font-14","p-0","inputHeight",{"italic-style":!p.label},{"fw-medium":p.label}]),onChange:y=>_e(o,r,c,d,w),onInput:y=>_e(o,r,c,d,w)},null,42,Hn),[[B,p.label]]),p.errorMsg?(n(),i("small",Jn,g(p.errorMsg),1)):b("",!0)]),F(t("div",Gn,[t("button",{class:"btn btn-light btn-sm bg-transparent py-0",onClick:y=>$l(o,r,c,d,w)},e[78]||(e[78]=[t("i",{class:"ri-file-copy-line font-13 copyIcon"},null,-1)]),8,Yn),t("button",{class:"btn btn-light btn-sm bg-transparent trash-btn py-0",onClick:y=>{kl(o,r,c,d,w),_e(o,r,c,d)}},e[79]||(e[79]=[t("i",{class:"bi bi-x-lg font-13"},null,-1)]),8,Zn)],512),[[bt,Ds(o,r,c,d,w)]])]),F(t("select",{"onUpdate:modelValue":y=>p.fieldtype=y,class:"form-select mb-2 mt-1 font-13 searchSelect",onChange:y=>Cl(o,r,c,d,w)},[e[80]||(e[80]=t("option",{value:""},"Select Type",-1)),(n(),i(R,null,M(pt,y=>t("option",{key:y,value:y.type},g(y.label),9,Qn)),64))],40,Kn),[[Ne,p.fieldtype]]),["Select","Table MultiSelect","Small Text"].includes(p.fieldtype)?(n(),i("div",Xn,[e[81]||(e[81]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),F(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":y=>p.options=y,class:"form-control shadow-none mb-1 font-12"},null,8,xn),[[B,p.options]]),!p.options||p.options.trim()===""?(n(),i("small",In," Options are required for this field type. ")):b("",!0)])):b("",!0),p.fieldtype==="Link"?(n(),i("div",ei,[t("label",{class:"font-11 fw-light",for:"link-search-"+$e(o,r,c,d,w)}," Search Doctype: ",8,ti),F(t("input",{id:"link-search-"+$e(o,r,c,d,w),type:"text","onUpdate:modelValue":y=>E(f)[o].sections[r].rows[c].columns[d].fields[w].options=y,onInput:y=>ws(E(f)[o].sections[r].rows[c].columns[d].fields[w].options,o,r,c,d,w),onFocus:y=>ys($e(o,r,c,d,w)),class:"form-control font-12 mb-1",placeholder:"Type to search..."},null,40,si),[[B,E(f)[o].sections[r].rows[c].columns[d].fields[w].options]]),(L=Ze[$e(o,r,c,d,w)])!=null&&L.length&&gt[$e(o,r,c,d,w)]?(n(),i("ul",li,[(n(!0),i(R,null,M(Ze[$e(o,r,c,d,w)],(y,k)=>(n(),i("li",{key:k,onClick:C=>ks(o,r,c,d,w,y.name),class:"list-group-item list-group-item-action"},g(y.name),9,oi))),128))])):b("",!0)])):b("",!0),t("div",ai,[t("div",ni,[t("div",ii,[F(t("input",{class:"font-12","onUpdate:modelValue":y=>p.reqd=y,"true-value":1,id:"mandatory-"+o+"-"+r+"-"+c+"-"+d+"-"+w,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,8,ri),[[ye,p.reqd]])]),t("div",null,[t("label",{class:"font-12 m-0 fw-light",for:"mandatory-"+o+"-"+r+"-"+c+"-"+d+"-"+w},"Mandatory",8,di)])]),t("div",null,[t("button",{class:"btn btn-sm font-12",onClick:y=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,ui)])]),p.showDescription?F((n(),i("textarea",{key:2,"onUpdate:modelValue":y=>p.description=y,class:"form-control font-12 mt-2",placeholder:"Enter field description"},null,8,ci)),[[B,p.description]]):b("",!0),p.error?(n(),i("small",pi,g(p.error),1)):b("",!0)],40,Pn)):b("",!0),t("div",{class:"drop-zone",onDragover:e[26]||(e[26]=fe(()=>{},["prevent"])),onDrop:y=>Ue(y,o,r,c,d,w)},null,40,mi),t("div",fi,[t("div",null,[t("div",null,[t("div",vi,[p.fieldtype==="Table"?(n(),i("div",_i,[(n(!0),i(R,null,M(D.value,(y,k)=>(n(),i("div",{key:k,class:"childTable"},[k===p.fieldname||k===p.options?(n(),i("h5",bi,g(k.replace(/_/g," ")),1)):b("",!0),X[k]&&k===jt.value?(n(),i("div",hi,[t("div",gi,[p.showDescription?F((n(),i("input",{key:0,"onUpdate:modelValue":C=>p.description=C,class:"form-control font-12",placeholder:"Enter field description"},null,8,yi)),[[B,p.description]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:C=>p.showDescription=!p.showDescription},g(p.showDescription?"Hide Description":p.description?"Edit Description":"Add Description"),9,wi)])])):b("",!0),k===p.options||k===p.fieldname?(n(),i("table",ki,[e[85]||(e[85]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Label"),t("th",null,"Field Type")])],-1)),t("tbody",{onDragover:fe(Us,["prevent"]),onDrop:C=>Ts(C,y)},[(n(!0),i(R,null,M(y,(C,te)=>{var Xe,xe,Ie,et,tt,st,le;return n(),i("tr",{key:te,draggable:X[k],onDragstart:x=>Vs(te),onDragend:Es,class:P({dragging:Re.value===te})},[t("td",null,g(te+1),1),X[k]?(n(),i("td",Fi,[F(t("input",{"onUpdate:modelValue":x=>C.label=x,onInput:x=>ct(C,k,te),placeholder:"Field Label",class:P(["form-control",{"border-1 border-danger":(xe=(Xe=v[k])==null?void 0:Xe[te])==null?void 0:xe.length}])},null,42,Di),[[B,C.label]]),(et=(Ie=v[k])==null?void 0:Ie[te])!=null&&et.length?(n(),i("div",Si,[(n(!0),i(R,null,M(v[k][te],(x,Pl)=>(n(),i("div",{key:Pl},g(x),1))),128))])):b("",!0)])):(n(),i("td",Ai,g(C.label),1)),X[k]?(n(),i("td",qi,[t("div",Vi,[F(t("select",{"onUpdate:modelValue":x=>C.fieldtype=x,onChange:x=>ct(C,k,te),class:P(["form-select form-select-sm",{"border-1 border-danger":(st=(tt=v[k])==null?void 0:tt[te])==null?void 0:st.length}])},[e[82]||(e[82]=t("option",{value:""},"Select Type",-1)),(n(),i(R,null,M(wt,x=>t("option",{key:x.type,value:x.type},g(x.label),9,Ui)),64))],42,Ei),[[Ne,C.fieldtype]]),t("div",Ti,[t("div",Li,[t("div",Ri,[F(t("input",{class:"font-12 form-control-sm","onUpdate:modelValue":x=>C.description=x,placeholder:"description",type:"text"},null,8,Mi),[[B,C.description]])])]),t("button",{class:"btn btn-light btn-sm",onClick:x=>Zs(k,te)},e[83]||(e[83]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Oi)])]),["Select"].includes(C.fieldtype)?(n(),i("div",Bi,[e[84]||(e[84]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),F(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":x=>C.options=x,onInput:x=>ct(C,k,te),class:"form-control shadow-none mb-1 font-12"},null,40,Ni),[[B,C.options]]),!C.options||C.options.trim()===""?(n(),i("small",zi," Options are required for this field type. ")):b("",!0)])):b("",!0),(le=ee[k])!=null&&le.includes(te)?(n(),i("span",Pi,"Type required**")):b("",!0)])):(n(),i("td",ji,g(C.fieldtype),1))],42,Ci)}),128))],40,$i)])):b("",!0),p.fieldtype==="Table"&&(p.label===k||p.fieldname===k)?(n(),i("div",Wi,[t("button",{class:"btn btn-light btn-sm mx-2",onClick:C=>Ks(k,p.description)},g(X[k]?"Save":"Edit"),9,Hi),X[k]?(n(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:C=>Ys(k)}," Add More Field ",8,Ji)):b("",!0)])):b("",!0)]))),128))])):b("",!0)])])])])],40,Nn)}),128)),t("div",{class:"drop-zone-bottom",onDragover:e[28]||(e[28]=fe(()=>{},["prevent"])),onDrop:p=>Ue(p,o,r,c,d,m.fields.length),style:{"background-color":"#f0f0f0",border:"1px dashed #ccc",margin:"4px"}},null,40,Gi),t("div",{class:"drop-zone",onDragover:e[29]||(e[29]=fe(()=>{},["prevent"])),onDrop:p=>Ue(p,o,r,c,d,s.fields.length),style:{height:"10px","background-color":"transparent"}},null,40,Yi),t("div",Zi,[t("button",{class:"btn btn-light btn-sm d-flex align-items-center addField m-2",onClick:p=>wl(o,r,c,d)},e[86]||(e[86]=[t("i",{class:"bi bi-plus fs-5"},null,-1),t("span",null,"Add Field",-1)]),8,Ki)])],40,En))),128))])])]))),128)),t("div",null,[(n(!0),i(R,null,M(a.afterCreated,(u,c)=>(n(),i("div",{key:c,class:"childTable dynamicColumn m-0 p-2"},[t("h5",Qi,g(u.tableName),1),X[u.tableName]?(n(),i("div",Xi,[t("div",xi,[u.showDescription?F((n(),i("input",{key:0,"onUpdate:modelValue":m=>u.description=m,class:"form-control font-12",placeholder:"Enter field description"},null,8,Ii)),[[B,u.description]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:m=>u.showDescription=!u.showDescription},g(u.showDescription?"Hide Description":u.description?"Edit Description":"Add Description"),9,er)])])):b("",!0),t("table",tr,[e[92]||(e[92]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Label"),t("th",null,"Field Type")])],-1)),t("tbody",null,[(n(!0),i(R,null,M(u.columns,(m,d)=>{var p,w,L,y;return n(),i("tr",{key:d},[t("td",null,g(d+1),1),X[u.tableName]?(n(),i("td",sr,[F(t("input",{"onUpdate:modelValue":k=>m.label=k,placeholder:"Field Label",class:P(["form-control",{"border-1 border-danger":(p=ee[u.tableName])==null?void 0:p.includes(d)}]),onBlur:k=>{var C;m.label=(C=m.label)==null?void 0:C.trim(),Ke(m,u.tableName,d,u.columns)}},null,42,lr),[[B,m.label]]),(w=v[u.tableName])!=null&&w[d]?(n(),i("div",or,[(n(!0),i(R,null,M(v[u.tableName][d],(k,C)=>(n(),i("span",{key:C},[$(g(k)+" ",1),e[87]||(e[87]=t("br",null,null,-1))]))),128))])):b("",!0)])):(n(),i("td",ar,g(m.label),1)),X[u.tableName]?(n(),i("td",nr,[t("div",ir,[F(t("select",{"onUpdate:modelValue":k=>m.fieldtype=k,class:P(["form-select form-select-sm",{"border-1 border-danger":(L=ee[u.tableName])==null?void 0:L.includes(d)}]),onChange:k=>Ke(m,u.tableName,d,u.columns)},[e[88]||(e[88]=t("option",{value:""},"Select Type",-1)),(n(),i(R,null,M(wt,k=>t("option",{key:k.type,value:k.type},g(k.label),9,dr)),64))],42,rr),[[Ne,m.fieldtype]]),t("button",{class:"btn btn-light btn-sm",onClick:k=>Js(o,r,u.tableName,d)},e[89]||(e[89]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,ur)]),m.fieldtype==="Select"?(n(),i("div",cr,[e[90]||(e[90]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),F(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":k=>m.options=k,class:"form-control shadow-none mb-1 font-12",onInput:k=>Ke(m,u.tableName,d,u.columns)},null,40,pr),[[B,m.options]])])):b("",!0),(y=v[u.tableName])!=null&&y[d]?(n(),i("div",mr,[(n(!0),i(R,null,M(v[u.tableName][d],(k,C)=>(n(),i("span",{key:C},[$(g(k),1),e[91]||(e[91]=t("br",null,null,-1))]))),128))])):b("",!0)])):(n(),i("td",fr,g(m.fieldtype),1))])}),128))])]),t("div",vr,[t("button",{class:"btn btn-light btn-sm mx-2",onClick:m=>Gs(o,r,u.tableName)},g(X[u.tableName]?"Save":"Edit"),9,_r),X[u.tableName]?(n(),i("button",{key:0,class:"btn btn-light btn-sm",onClick:m=>Hs(o,r,u.tableName)}," Add More Field ",8,br)):b("",!0)])]))),128))])]),t("div",null,[t("div",null,[o==0?(n(),i("button",{key:0,class:"btn btn-light addRow mb-3 mt-4",onClick:u=>Rs(o,r)}," Add New Table ",8,hr)):b("",!0),(n(!0),i(R,null,M(a.childTables,(u,c)=>{var m;return n(),i("div",{key:`table-${o}-${r}-${c}`,class:"child-table"},[u.newTable?(n(),i("div",gr,[t("div",yr,[t("div",null,[t("span",{class:P(u.tableName?"d-none":"text-danger")},"*",2),F(t("input",{"onUpdate:modelValue":d=>u.tableName=d,placeholder:"Table Name",onBlur:d=>zt(u),class:P(["border-less-input font-14 p-0 inputHeight",{"italic-style":!u.tableName,"fw-medium":u.tableName}])},null,42,wr),[[B,u.tableName]]),(m=v[`${o}-${r}-${c}`])!=null&&m.tableName?(n(),i("div",kr,g(v[`${o}-${r}-${c}`].tableName),1)):b("",!0),Je.value?(n(),i("div",$r,g(Je.value),1)):b("",!0),t("div",Cr,[t("div",Fr,[u.showDescription?F((n(),i("input",{key:0,"onUpdate:modelValue":d=>u.as_a_block=d,class:"form-control font-12",placeholder:"Enter field description"},null,8,Dr)),[[B,u.as_a_block]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:d=>u.showDescription=!u.showDescription},g(u.showDescription?"Hide Description":u.description?"Edit Description":"Add Description"),9,Sr)])])]),t("button",{class:"btn btn-light bg-transparent border-0 font-13 deleteSection",onClick:d=>Os(o,r,c)},e[93]||(e[93]=[t("i",{class:"bi bi-trash"},null,-1),$(" Remove Table ")]),8,Ar)]),(n(!0),i(R,null,M(u.columns,(d,p)=>{var w,L,y,k,C,te,Xe,xe,Ie,et,tt,st;return n(),i("div",{key:p,class:"dynamicField"},[t("div",qr,[t("div",Vr,[t("div",null,[t("span",{class:P(d.label?"d-none":"text-danger")},"*",2),F(t("input",{"onUpdate:modelValue":le=>d.label=le,placeholder:"Name the field",onBlur:()=>{zt(d),Ns(d,o,r,c,p,u.columns)},class:P(["border-less-input font-14 p-0 inputHeight",{"italic-style":!d.label,"fw-medium":d.label,"is-invalid":(y=(L=(w=v[`${o}-${r}-${c}`])==null?void 0:w.columns)==null?void 0:L[p])==null?void 0:y.label}])},null,42,Er),[[B,d.label]]),(te=(C=(k=v[`${o}-${r}-${c}`])==null?void 0:k.columns)==null?void 0:C[p])!=null&&te.label?(n(),i("div",Ur,g(v[`${o}-${r}-${c}`].columns[p].label),1)):b("",!0)]),t("div",Tr,[t("div",Lr,[d.showDescription?F((n(),i("input",{key:0,"onUpdate:modelValue":le=>d.description=le,class:"form-control font-12",placeholder:"Enter field description"},null,8,Rr)),[[B,d.description]]):b("",!0),t("button",{class:"btn btn-sm text-nowrap font-12",onClick:le=>d.showDescription=!d.showDescription},g(d.showDescription?"Hide Description":d.description?"Edit Description":"Add Description"),9,Mr)]),t("button",{class:"btn btn-sm trash-btn py-0",onClick:le=>Bs(o,r,c,p)},e[94]||(e[94]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,Or)])]),F(t("select",{"onUpdate:modelValue":le=>d.fieldtype=le,class:P(["form-select font-13 mb-1",{"is-invalid":(Ie=(xe=(Xe=v[`${o}-${r}-${c}`])==null?void 0:Xe.columns)==null?void 0:xe[p])==null?void 0:Ie.fieldtype}])},[e[95]||(e[95]=t("option",{value:""},"Select Type",-1)),(n(),i(R,null,M(wt,le=>t("option",{key:le.type,value:le.type},g(le.label),9,Nr)),64))],10,Br),[[Ne,d.fieldtype]]),["Select"].includes(d.fieldtype)?(n(),i("div",zr,[e[96]||(e[96]=t("label",{class:"font-12 fw-light",for:"options"},"Enter Options:",-1)),F(t("textarea",{id:"options",placeholder:"Enter your Options","onUpdate:modelValue":le=>d.options=le,class:"form-control shadow-none mb-1 font-12"},null,8,Pr),[[B,d.options]]),!d.options||d.options.trim()===""?(n(),i("small",jr," Options are required for this field type. ")):b("",!0)])):b("",!0),(st=(tt=(et=v[`${o}-${r}-${c}`])==null?void 0:et.columns)==null?void 0:tt[p])!=null&&st.fieldtype?(n(),i("div",Wr,g(v[`${o}-${r}-${c}`].columns[p].fieldtype),1)):b("",!0)])])}),128)),t("button",{class:"btn btn-light btn-sm addField mx-1",onClick:d=>Ms(o,r,c)},e[97]||(e[97]=[t("i",{class:"bi bi-plus"},null,-1),$(" Add Field ")]),8,Hr),t("button",{class:"btn btn-dark btn-sm font-12 mx-1",onClick:d=>Ws(o,r,c)}," Create Table ",8,Jr),e[98]||(e[98]=t("hr",null,null,-1))])):b("",!0)])}),128))])]),t("div",Gr,[t("button",{class:"btn btn-light border font-12",onClick:u=>bl(o,r)},e[99]||(e[99]=[t("i",{class:"bi bi-plus-circle me-1 fs-6"},null,-1),$(" Add Section ")]),8,Yr)])]))),128)),o===0?(n(),i("div",Zr)):b("",!0)])])),[[bt,o===Ae.value]])),128))],512)]),Rt.value?(n(),i("aside",Kr,[t("div",Qr,[e[101]||(e[101]=t("h6",{class:"mb-0"},"Field Properties",-1)),t("button",{class:"btn btn-sm btn-link p-0",onClick:e[30]||(e[30]=l=>Rt.value=null)},e[100]||(e[100]=[t("i",{class:"bi bi-x-lg"},null,-1)]))]),e[102]||(e[102]=t("div",{class:"properties-content"},[t("p",{class:"text-muted small"},"Select a field to edit its properties")],-1))])):b("",!0)],64))])])):b("",!0),A.value===3?(n(),i("div",Xr,[t("div",xr,[t("button",{onClick:e[31]||(e[31]=l=>Ft()),class:"btn btn-sm btn-light"},e[103]||(e[103]=[t("i",{class:"bi bi-chevron-left"},null,-1),$(" Back ")])),e[105]||(e[105]=t("h1",{class:"font-14 fw-bold m-0"},"Workflow Setup",-1)),t("button",{class:"btn btn-sm btn-dark",onClick:Ct},e[104]||(e[104]=[$(" Next "),t("i",{class:"bi bi-chevron-right"},null,-1)]))]),t("div",Ir,[t("div",ed,[e[111]||(e[111]=t("div",{class:"card-header bg-light"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-diagram-3 me-2"}),$("Workflow Configuration")])],-1)),t("div",td,[t("div",sd,[t("div",ld,[e[108]||(e[108]=t("label",{class:"form-label fw-bold"},"Workflow Type",-1)),t("div",od,[F(t("input",{type:"radio",class:"btn-check",name:"workflowType",id:"existingWorkflow",value:"existing","onUpdate:modelValue":e[32]||(e[32]=l=>ge.value=l)},null,512),[[ns,ge.value]]),e[106]||(e[106]=t("label",{class:"btn btn-outline-primary",for:"existingWorkflow"},[t("i",{class:"bi bi-folder me-1"}),$("Use Existing ")],-1)),F(t("input",{type:"radio",class:"btn-check",name:"workflowType",id:"newWorkflow",value:"new","onUpdate:modelValue":e[33]||(e[33]=l=>ge.value=l),checked:""},null,512),[[ns,ge.value]]),e[107]||(e[107]=t("label",{class:"btn btn-outline-primary",for:"newWorkflow"},[t("i",{class:"bi bi-plus-circle me-1"}),$("Create New ")],-1))])]),ge.value==="existing"?(n(),i("div",ad,[e[109]||(e[109]=t("label",{class:"form-label fw-bold"},"Select Workflow",-1)),se(E(Oe),{onOpen:Xt,options:Ge.value,modelValue:ke.value,"onUpdate:modelValue":e[34]||(e[34]=l=>ke.value=l),placeholder:"Select WF Road Map",multiple:!1,class:"font-11 multiselect",searchable:!0,label:"display_name","track-by":"roadmap_title",onSelect:xt,openDirection:"bottom"},null,8,["options","modelValue"]),e[110]||(e[110]=t("small",{class:"text-muted font-12 mt-1 d-block"},[t("i",{class:"bi bi-info-circle me-1"}),$("Auto-populates requestors and approvers ")],-1))])):b("",!0)])])]),ge.value==="new"?(n(),i("div",nd,[e[117]||(e[117]=t("div",{class:"card-header bg-light"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-person-plus me-2"}),$("Requestor Configuration")])],-1)),t("div",id,[e[116]||(e[116]=t("p",{class:"text-muted font-12 mb-3"},[t("i",{class:"bi bi-info-circle me-1"}),$(" Define who can submit requests for this form based on WF Requestors ")],-1)),t("button",{class:"btn btn-primary btn-sm mb-3",onClick:Ul},e[112]||(e[112]=[t("i",{class:"bi bi-plus-lg me-1"},null,-1),$("Add Requestor Role ")])),nt.value.length>0?(n(),i("div",rd,[t("table",dd,[e[115]||(e[115]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"40%"},"Role"),t("th",{width:"30%"},"Auto Approval"),t("th",{width:"20%"},"Permissions"),t("th",{width:"10%"},"Action")])],-1)),t("tbody",null,[(n(!0),i(R,null,M(nt.value,(l,o)=>(n(),i("tr",{key:o},[t("td",null,[F(t("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":a=>l.role=a,placeholder:"Enter role name"},null,8,ud),[[B,l.role]])]),t("td",null,[t("div",cd,[F(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":a=>l.autoApproval=a},null,8,pd),[[ye,l.autoApproval]]),t("label",md,g(l.autoApproval?"Yes":"No"),1)])]),t("td",null,[t("button",{class:"btn btn-sm btn-outline-secondary",onClick:a=>Ll()},e[113]||(e[113]=[t("i",{class:"bi bi-gear"},null,-1),$(" Configure ")]),8,fd)]),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:a=>Tl(o)},e[114]||(e[114]=[t("i",{class:"bi bi-trash"},null,-1)]),8,vd)])]))),128))])])])):b("",!0)])])):b("",!0),ge.value==="existing"&&ke.value&&je.value.length>0?(n(),i("div",_d,[e[123]||(e[123]=t("div",{class:"card-header bg-success text-white"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-check-circle me-2"}),$("Loaded Requestors")])],-1)),t("div",bd,[t("div",hd,[e[118]||(e[118]=t("i",{class:"bi bi-check-circle me-1"},null,-1)),t("strong",null,g(je.value.length),1),e[119]||(e[119]=$(" requestor role(s) loaded from ")),t("strong",null,g(ke.value.display_name),1)]),t("div",gd,[t("table",yd,[e[121]||(e[121]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Role"),t("th",null,"Auto Approval"),t("th",null,"Columns Allowed")])],-1)),t("tbody",null,[(n(!0),i(R,null,M(je.value,(l,o)=>(n(),i("tr",{key:o},[t("td",null,[t("strong",null,g(l.requestor),1)]),t("td",null,[l.auto_approval?(n(),i("span",wd,e[120]||(e[120]=[t("i",{class:"bi bi-check-circle me-1"},null,-1),$("Yes ")]))):(n(),i("span",kd,"No"))]),t("td",null,[t("small",$d,g(l.columns_allowed||"All fields"),1)])]))),128))])])]),e[122]||(e[122]=t("div",{class:"alert alert-info mt-3"},[t("i",{class:"bi bi-info-circle me-1"}),$(" Go to "),t("strong",null,"Step 2"),$(" and click "),t("strong",null,'"Add Requestors"'),$(" to select specific designations for these roles ")],-1))])])):b("",!0),ge.value==="existing"&&ke.value&&Ve.value.length>0?(n(),i("div",Cd,[e[132]||(e[132]=t("div",{class:"card-header bg-primary text-white"},[t("h6",{class:"mb-0 fw-bold"},[t("i",{class:"bi bi-diagram-3 me-2"}),$("Loaded Approval Workflow")])],-1)),t("div",Fd,[t("div",Dd,[e[124]||(e[124]=t("i",{class:"bi bi-check-circle me-1"},null,-1)),t("strong",null,g(Ve.value.length),1),e[125]||(e[125]=$(" approval level(s) loaded from ")),t("strong",null,g(ke.value.display_name),1)]),t("div",Sd,[t("table",Ad,[e[130]||(e[130]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"10%"},"Level"),t("th",{width:"25%"},"Role"),t("th",{width:"15%"},"Mandatory"),t("th",{width:"20%"},"Approval Type"),t("th",{width:"30%"},"Columns Allowed")])],-1)),t("tbody",null,[(n(!0),i(R,null,M(Ve.value,(l,o)=>(n(),i("tr",{key:o},[t("td",null,[t("span",qd,"Level "+g(l.level),1)]),t("td",null,[t("strong",null,g(l.role),1)]),t("td",null,[l.mandatory?(n(),i("span",Vd,e[126]||(e[126]=[t("i",{class:"bi bi-exclamation-circle me-1"},null,-1),$("Required ")]))):(n(),i("span",Ed,"Optional"))]),t("td",null,[l.view_only_reportee?(n(),i("span",Ud,e[127]||(e[127]=[t("i",{class:"bi bi-person me-1"},null,-1),$("Reporting Manager ")]))):l.all_approvals_required?(n(),i("span",Td,e[128]||(e[128]=[t("i",{class:"bi bi-people me-1"},null,-1),$("All Users ")]))):l.requester_as_a_approver?(n(),i("span",Ld,e[129]||(e[129]=[t("i",{class:"bi bi-person-check me-1"},null,-1),$("Requestor ")]))):(n(),i("span",Rd," Any One "))]),t("td",null,[t("small",Md,g(l.columns_allowed||"All fields"),1)])]))),128))])])]),e[131]||(e[131]=t("div",{class:"alert alert-info mt-3"},[t("i",{class:"bi bi-info-circle me-1"}),$(" Go to "),t("strong",null,"Step 2"),$(" and click "),t("strong",null,'"Add Approvers"'),$(" for each level to select specific designations ")],-1))])])):b("",!0),e[133]||(e[133]=as('<div class="card mt-4" data-v-c8c2427d><div class="card-header bg-light" data-v-c8c2427d><h6 class="mb-0 fw-bold" data-v-c8c2427d><i class="bi bi-shield-check me-2" data-v-c8c2427d></i>System Generated Fields</h6></div><div class="card-body" data-v-c8c2427d><div class="alert alert-secondary mb-3" data-v-c8c2427d><i class="bi bi-info-circle me-2" data-v-c8c2427d></i> These fields are automatically included for all requestors. </div><div class="row g-3" data-v-c8c2427d><div class="col-md-6" data-v-c8c2427d><div class="field-preview-card" data-v-c8c2427d><label class="form-label fw-bold" data-v-c8c2427d>Requestor Name</label><input type="text" class="form-control" value="Auto-populated from user profile" disabled data-v-c8c2427d></div></div><div class="col-md-6" data-v-c8c2427d><div class="field-preview-card" data-v-c8c2427d><label class="form-label fw-bold" data-v-c8c2427d>Requestor Email</label><input type="email" class="form-control" value="Auto-populated from user profile" disabled data-v-c8c2427d></div></div><div class="col-md-6" data-v-c8c2427d><div class="field-preview-card" data-v-c8c2427d><label class="form-label fw-bold" data-v-c8c2427d>Request Date</label><input type="text" class="form-control" value="Auto-populated on submission" disabled data-v-c8c2427d></div></div><div class="col-md-6" data-v-c8c2427d><div class="field-preview-card" data-v-c8c2427d><label class="form-label fw-bold" data-v-c8c2427d>Department</label><input type="text" class="form-control" value="Auto-populated from user profile" disabled data-v-c8c2427d></div></div></div></div></div>',1))])])):b("",!0),A.value===4?(n(),i("div",Od,[e[134]||(e[134]=t("div",{class:"stepperbackground d-flex align-items-center justify-content-end gap-2"},[t("div",null,[t("button",{class:"btn btn btn-light previewBtn font-13","data-bs-toggle":"modal","data-bs-target":"#customFormatModal"},"Print Format ")]),t("div")],-1)),se(is,{blockArr:vt.value},null,8,["blockArr"])])):b("",!0)])])])])])])]),t("div",Bd,[t("div",Nd,[t("div",zd,[e[138]||(e[138]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"customFormatModalLabel"},"Print Format"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Pd,[e[136]||(e[136]=t("label",{for:""},"Form Name",-1)),F(t("input",{"onUpdate:modelValue":e[35]||(e[35]=l=>rt.value=l),multiple:!1,placeholder:E(S).query.id,class:"font-11 form-control",id:"Form_name_print",searchable:!0},null,8,jd),[[B,rt.value]]),t("div",Wd,[t("div",Hd,[F(t("input",{class:"font-12","onUpdate:modelValue":e[36]||(e[36]=l=>We.value=l),"true-value":1,"false-value":0,placeholder:"Field Name",type:"checkbox"},null,512),[[ye,We.value]])]),e[135]||(e[135]=t("div",null,[t("label",{for:"mandatory",class:"font-12 fw-bold m-0 fw-light"},"Print Landscape Mode")],-1))])]),t("div",{class:"modal-footer"},[e[137]||(e[137]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Close",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:fl},"Add Print Format")])])])]),t("div",Jd,[t("div",Gd,[t("div",Yd,[e[139]||(e[139]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"formViewModalLabel"},"Form Preview"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Zd,[se(is,{blockArr:vt.value},null,8,["blockArr"])]),e[140]||(e[140]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),t("div",Kd,[t("div",Qd,[t("span",Xd,g(W.value==0?"Add Requestors":`Approval Settings - Level ${W.value}`),1),e[141]||(e[141]=t("button",{type:"button",class:"btn-close bg-light text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),t("div",xd,[t("div",Id,[W.value!==0?(n(),i("div",eu,[e[143]||(e[143]=t("label",{class:"fw-bold font-12 mb-2"},"Approver Type",-1)),F(t("select",{"onUpdate:modelValue":e[37]||(e[37]=l=>ve.value=l),class:"form-select shadow-none font-12"},e[142]||(e[142]=[t("option",{value:""},"Any one of the selected approvers",-1),t("option",{value:"ViewOnlyReportee"},"Reporting Manager only",-1),t("option",{value:"all_approvals_required"},"All of the selected approvers",-1),t("option",{value:"requester_as_a_approver"},"Approval by Requestor",-1)]),512),[[Ne,ve.value]])])):b("",!0),t("div",tu,[t("div",su,[t("span",lu," Select "+g(W.value===0?"Requestors":"Approvers"),1),t("span",ou,g(O.value.length)+" Selected ",1)]),re.value.length?(n(),i("div",au,[t("div",nu,[t("div",iu,[t("input",{type:"checkbox",id:"selectAll",checked:ll.value,onChange:ol,class:"form-check-input me-2 designationCheckBox"},null,40,ru),t("label",du," Select all designation ("+g(Qe.value.length)+") ",1)]),W.value!==0?(n(),i("div",uu,[F(t("input",{type:"checkbox",id:"showHods","onUpdate:modelValue":e[38]||(e[38]=l=>He.value=l),class:"form-check-input me-2 designationCheckBox"},null,512),[[ye,He.value]]),e[144]||(e[144]=t("label",{for:"showHods",class:"form-check-label mt-2 fw-bold"}," Show HODs Only ",-1))])):b("",!0),t("div",null,[O.value.length?(n(),i("button",{key:0,type:"button",class:"btn btn-sm font-12 text-danger",onClick:al},e[145]||(e[145]=[t("i",{class:"bi bi-x"},null,-1),$(" Clear all ")]))):b("",!0)])]),re.value.length?(n(),Et(E(Ql),{key:0,multiple:!0,modelValue:O.value,"onUpdate:modelValue":e[39]||(e[39]=l=>O.value=l),options:Qe.value,"close-on-select":!1,"clear-search-on-select":!0,placeholder:"Search & Select Designations"},null,8,["modelValue","options"])):b("",!0)],512)):(n(),i("div",cu,e[146]||(e[146]=[t("div",{class:"d-flex justify-content-center"},[t("span",null,"No Designations Found")],-1)])))]),W.value!==0?(n(),i("div",pu,[e[147]||(e[147]=t("div",null,[t("label",{for:"",class:"fw-bold font-12"},"On Rejection")],-1)),F(t("select",{"onUpdate:modelValue":e[40]||(e[40]=l=>he.value=l),class:"form-select shadow-none font-12 mt-1 me-2"},[(n(!0),i(R,null,M($s.value,l=>(n(),i("option",{key:l,value:l},g(l===0?"Requestor":"Approver Level "+l),9,mu))),128))],512),[[Ne,he.value,void 0,{number:!0}]])])):b("",!0),W.value!==0?(n(),i("div",fu,[t("div",vu,[t("div",_u,[F(t("input",{"onUpdate:modelValue":e[41]||(e[41]=l=>ze.value=l),type:"checkbox","true-value":1,"false-value":0,id:"Approver",class:"me-2 m-0 form-check-input designationCheckBox"},null,512),[[ye,ze.value]]),e[148]||(e[148]=t("label",{for:"Approver",class:"m-0"},"Approval Mandatory",-1))]),ne.value===!0?(n(),i("div",bu,[F(t("input",{"onUpdate:modelValue":e[42]||(e[42]=l=>ce.value=l),type:"checkbox","true-value":1,"false-value":0,id:"approver_can_edit",class:"me-2 m-0 form-check-input designationCheckBox"},null,512),[[ye,ce.value]]),e[149]||(e[149]=t("label",{for:"approver_can_edit",class:"m-0"}," Allow this approver to edit the form ",-1))])):b("",!0)])])):b("",!0)]),t("div",hu,[t("div",gu,[se(os,{class:"btn btn-dark addingDesignations","data-bs-dismiss":"offcanvas",onClick:nl,name:W.value===0?"Add Requestor":"Add Approvers"},null,8,["name"])])])])])]))}},$u=Tt(yu,[["__scopeId","data-v-c8c2427d"]]);export{$u as default};
