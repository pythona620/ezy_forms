var gt=Object.defineProperty,yt=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Ue=(C,p,f)=>p in C?gt(C,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):C[p]=f,ae=(C,p)=>{for(var f in p||(p={}))_t.call(p,f)&&Ue(C,f,p[f]);if(Re)for(var f of Re(p))ht.call(p,f)&&Ue(C,f,p[f]);return C},oe=(C,p)=>yt(C,bt(p));var ve=(C,p,f)=>new Promise((A,B)=>{var se=V=>{try{Q(f.next(V))}catch(U){B(U)}},R=V=>{try{Q(f.throw(V))}catch(U){B(U)}},Q=V=>V.done?A(V.value):Promise.resolve(V.value).then(se,R);Q((f=f.apply(C,p)).next())});import{_ as Et,e as j,d,w as W,o as i,c as r,b as l,i as y,a as c,v as z,t as g,x as m,y as O,z as N,s as Y,A as Z,B as re,C as de,D as ue,H as G,I as ge,G as kt,P as xt,T as wt,h as Ct,E as St,k as h,l as E,j as b,n as x,J as K}from"./index-OTUT9Deo.js";const Dt={class:"d-flex justify-content-between align-items-center py-2"},It={class:"modal fade",id:"createDepartments","data-bs-backdrop":"static",tabindex:"-1","data-bs-keyboard":"false","aria-labelledby":"createDepartmentsLabel","aria-hidden":"true"},Nt={class:"modal-dialog modal-lg"},Vt={class:"modal-content"},Lt={class:"modal-body"},Pt={class:"container-fluid"},$t={class:"row"},At={class:"col"},Rt={class:"mb-3"},Ut={key:0,class:"text-danger font-11 ps-1"},Mt={class:"mb-3"},Tt={key:0,class:"text-danger font-11 ps-1"},zt={class:"col"},Bt={class:"position-relative mb-3"},Ft={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},Xt=["onClick"],jt={class:"modal-dialog"},Ot={class:"modal-content"},Jt={class:"modal-header"},qt={class:"modal-body"},Ht={class:"modal-footer"},Wt={class:"mb-3 font-11"},Yt={key:0,style:{"max-width":"100px","max-height":"100px"},class:"d-flex justify-center position-relative mt-2"},Zt=["src"],Gt={class:"modal-footer"},Kt={key:0,class:"font-16 me-1"},Qt={key:1},el={key:2,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},tl={key:0,class:"mt-2"},ll={key:1},al={class:"bulkemployee"},ol={class:"insideBulkEmp"},sl={class:"d-flex justify-content-center align-content-center mb-5 gap-2"},nl={key:0,class:"loader"},il={class:"table-container"},rl={key:0,class:"d-flex justify-content-end align-content-center p-2"},dl={key:1,class:"warning-box"},ul={key:2,class:"styled-table"},ml={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},pl={class:"modal-dialog modal-lg"},cl={class:"modal-content"},fl={class:"modal-body"},vl={class:"container-fluid"},gl={class:"row"},yl={class:"col"},bl={class:"mb-3"},_l={class:"input-container"},hl={key:0,class:"text-danger font-11 ps-1"},El={class:"mb-3"},kl={class:"input-container"},xl={key:0,class:"text-danger font-11 ps-1"},wl={class:"col"},Cl={class:"position-relative mb-3"},Sl={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},Dl=["onClick"],Il={class:"modal-dialog"},Nl={class:"modal-content"},Vl={class:"modal-header"},Ll={class:"modal-body"},Pl={class:"modal-footer"},$l={class:"mb-3 font-11"},Al={key:0,class:"d-flex justify-center position-relative mt-2"},Rl=["src"],Ul={class:"modal-footer"},Ml={__name:"EmployeeComp",setup(C){const p=j(()=>St.value),f=d(!0),A=d([]),B=d(""),se=d(0),R=d([]),Q=d([]),V=d([]),U=d([]),I=d(""),ye=d(null),J=d(!1),o=d({emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",company_field:"",signature:""});W(()=>o.reporting_to,a=>{if(a){const e=$.find(t=>t.emp_mail_id===a);e?(o.reporting_designation=e.designation||"",console.log(o.reporting_designation,a,o.reporting_to)):o.reporting_designation=""}else o.reporting_designation=""});const D=d(null),me=d(""),v=d(""),S=d(!1),L=d([]),w=d([]),be=d([{th:"Emp ID",td_key:"emp_code"},{th:"Emp Name",td_key:"emp_name"},{th:"Designation",td_key:"designation"},{th:"Department",td_key:"department"},{th:"Signature",td_key:"signature"},{th:"Reports To",td_key:"reporting_to"},{th:"Creation Date",td_key:"creation"},{th:"last Login",td_key:"last_login"},{th:"last Login IP",td_key:"last_ip"},{th:"Emp Status",td_key:"enable"}]),ne=d(null),pe=d(0),ce=d(!1),fe=d(""),Me=()=>{ne.value.click()},Te=a=>{const e=a.target.files[0];e&&(Be(e),ne.value&&(ne.value.value=""))},ze=()=>Math.floor(Math.random()*1e6),Be=a=>{let t=`${ze()}-@${a.name}`;const s=new FormData;s.append("file",a,t),s.append("is_private","0"),s.append("folder","Home"),ce.value=!0,pe.value=0,h.post(E.uploadfile,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{pe.value=Math.round(n.loaded/n.total*100)}}).then(n=>{n.message&&n.message.file_url?(fe.value=n.message.file_url,n.message.file_url&&fe.value&&Fe()):b.error("File upload failed: file_url not found in response.")}).catch(n=>{console.error("Upload error:",n),b.error("File upload failed. Please try again.")}).finally(()=>{setTimeout(()=>{ce.value=!1,pe.value=0},2e3)})},Fe=()=>{const a={file:fe.value,doctype:x.EzyEmployeeList};h.post(E.uploadbulkEmployeefile,a).then(e=>{var t;if(!(e!=null&&e.data)){b.error("Import response not found.");return}if(w.value=e.data,e.data.success===!1){let s=e._error_message||e.data.message||"Import failed.";if(s=s.replace(/\s*\(.*?\)\s*/g,"").trim(),b.error(s),e.data._server_messages)try{const n=JSON.parse(e.data._server_messages);Array.isArray(n)&&n.forEach(u=>{let T=JSON.parse(u).message||"Permission error.";T=T.replace(/\s*\(.*?\)\s*/g,"").trim(),b.error(T)})}catch(n){console.error("Error parsing _server_messages:",n)}return}(t=w.value.template_warnings)!=null&&t.length&&w.value.template_warnings.forEach(s=>{b.warning(`Warning: ${s}`)}),w.value.records&&(w.value.records=w.value.records.map(s=>oe(ae({},s),{message:s.message}))),w.value.template_status==="success"?b.success("Bulk data imported successfully!"):w.value.template_status==="failed"?b.error(`Import Failed: ${w.value.message}`):w.value.status==="Partial Success"&&b.warning("Partial Success: Some records failed.")}).catch(e=>{console.error("Upload error:",e),b.error("Upload failed. Please try again.")})},ie=j(()=>{var e;return(((e=w.value)==null?void 0:e.records)||[]).map((t,s)=>{let n="N/A",u="N/A";try{if(t.status.toLowerCase()==="success")n=_e(t.message),u="Successfully imported";else if(t.status.toLowerCase()==="failed"){const k=JSON.parse(t.message);if(Array.isArray(k)&&k.length>0){u=k[0].title||"Unknown Issue";const T=Xe(k);T?(n=T,u="Invalid Email Address"):n=_e(k)}}}catch(k){u="Parsing Error"}return{sNo:s+1,email:n,status:t.status,displayMessage:u}})}),_e=a=>{var e,t,s;return typeof a=="string"&&(a=a.toLowerCase(),a.includes("successfully imported "))?a.split("successfully imported ")[1]||"N/A":Array.isArray(a)&&((s=(t=(e=a[0])==null?void 0:e.message)==null?void 0:t.match(/<strong>(.*?)<\/strong>/))==null?void 0:s[1])||"N/A"},Xe=a=>{if(Array.isArray(a)){for(const e of a)if(e.message.includes("is not a valid Email Address"))return e.message.split(" is not a valid Email Address")[0]}return null},he=j(()=>{var a;return((a=w.value)==null?void 0:a.template_warnings)||[]}),je=()=>{const a=window.XLSX;if(!a){console.error("XLSX library is not loaded.");return}const e=a.utils.json_to_sheet(ie.value),t=a.utils.book_new();a.utils.book_append_sheet(t,e,"Records");const s=a.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([s],{type:"application/octet-stream"}),u=document.createElement("a");u.href=URL.createObjectURL(n),u.download="Records.xlsx",document.body.appendChild(u),u.click(),document.body.removeChild(u)},Oe=()=>ve(this,null,function*(){const a=p.value,t=yield(yield fetch("/assets/ezy_forms/ezyformsfrontend/Employee_import.xlsx")).arrayBuffer(),s=XLSX.read(t,{type:"array"}),n=s.SheetNames[0],u=s.Sheets[n];u.A2={t:"s",v:a};const k=XLSX.utils.decode_range(u["!ref"]);k.e.r<1&&(k.e.r=1),u["!ref"]=XLSX.utils.encode_range(k);const T=XLSX.write(s,{bookType:"xlsx",type:"array"}),vt=new Blob([T],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),le=document.createElement("a");le.href=URL.createObjectURL(vt),le.setAttribute("download","Employee_import.xlsx"),document.body.appendChild(le),le.click(),document.body.removeChild(le)}),P=d(""),Ee=()=>{var t;const a=(t=H.value||o.value.emp_mail_id)==null?void 0:t.trim().toLowerCase();/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)?$.value.some(n=>{var u;return((u=n.emp_mail_id)==null?void 0:u.toLowerCase())===a})?P.value="Email already exists":P.value="":P.value="Invalid email address"};function Je(){f.value=!1}function qe(){f.value=!0}const M=d(!0),q=d(""),He=j(()=>M.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),ke=a=>(a=a.replace(/\D/g,""),a.startsWith("91")&&a.length===12?a="+"+a:a.length===10&&(a="+91"+a),a);W(()=>o.value.emp_phone,a=>{a.startsWith("+91")||(o.value.emp_phone=ke(a)),M.value||(q.value=o.value.emp_phone)},{immediate:!0});const xe=()=>{let a=o.value.emp_phone||"";if(a=ke(a),/^\+91\d{10}$/.test(a))I.value="";else{I.value="Phone number must start with +91 and have 10 digits.";return}q.value=a,o.value.emp_phone=M.value?"+91 ******"+a.slice(-4):a},We=()=>{q.value&&(M.value&&!window.confirm("Are you sure you want to see the phone number?")||(M.value=!M.value,o.value.emp_phone=M.value?"+91 ******"+q.value.slice(-4):q.value))},Ye=()=>{let a=q.value.replace("+91","");/^\d{10}$/.test(a)?I.value="":I.value="Phone number must be 10 digits."},F=d(!0),H=d(""),Ze=j(()=>F.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),we=()=>{if(!F.value||!o.value.emp_mail_id.includes("@"))return;H.value=o.value.emp_mail_id;const[a,e]=H.value.split("@");a.length>3&&(o.value.emp_mail_id=a.slice(0,3)+"***@"+e)},Ge=()=>{H.value&&(F.value&&!window.confirm("Are you sure you want to see the email address?")||(F.value=!F.value,o.value.emp_mail_id=F.value?Ke(H.value):H.value))},Ke=a=>{const[e,t]=a.split("@");return e.length>3?e.slice(0,3)+"***@"+t:a},Qe=a=>{let e=a.target.value;e=e.replace(/[^0-9+]/g,""),e.startsWith("+91")||(e="+91"+e.replace(/^91/,"")),e.length>13&&(e=e.slice(0,13)),o.value.emp_phone=e},et=()=>{if(o.value.emp_phone){const a=o.value.emp_phone.replace("+91",""),e=/^\d{10}$/;I.value=e.test(a)?"":"Invalid phone number."}},_=d({limitPageLength:20,limit_start:0}),ee=d("");W(S,a=>{a&&(ee.value=v.value)});const Ce=()=>{const a=v.value.toLowerCase().trim();L.value=R.value.filter(e=>e.toLowerCase().includes(a))},Se=a=>{o.value.designation=a,v.value=a,L.value=[]},De=j(()=>{const a=v.value.trim();return a&&!R.value.includes(a)&&a.length>1}),Ie=()=>{const a=v.value.trim();a&&h.post(E.resource+x.roles,{role_name:a}).then(e=>{var t;(t=e.data)!=null&&t.role_name&&h.post(E.resource+x.designations,{role:e.data.role_name}).then(s=>{var n;(n=s.data)!=null&&n.role&&(R.value.push(s.data.role),o.value.designation=s.data.role,v.value=s.data.role,L.value=[],S.value=!1)})}).catch(e=>{console.error("Error creating role:",e)})},Ne=()=>{o.value.signature=null;const a=document.getElementById("signatureInput");a&&(a.value="")};W(()=>o.value.reporting_to,a=>{if(a){const e=A.value.find(t=>t.emp_mail_id===a);e&&(o.value.reporting_designation=e.designation)}},{immediate:!0});const tt=d([{name:"Edit Employee",icon:"fa-solid fa-eye"}]),lt=j(()=>[o.value.emp_code,o.value.emp_name,o.value.emp_mail_id,o.value.department,o.value.designation].every(a=>a&&a.toString().trim()!==""));function at(){Le(),Ae(),$e()}function ot(a,e){(e==null?void 0:e.name)==="Edit Employee"&&(a?(I.value="",P.value="",o.value=oe(ae({},a),{department:""}),v.value=a.designation||"",Le(()=>{const s=U.value.find(n=>n.name===a.department);o.value.department=s||""}),Ae(),$e(),M.value=!0,F.value=!0,xe(),we(),new bootstrap.Modal(document.getElementById("exampleModal"),{}).show()):(console.warn("No form fields provided."),formCreation(a)))}function st(a){D.value=a;const e=a.enable==="1"||a.enable===1;me.value=e?"Disable":"Enable",document.getElementById("empActionText").innerText=me.value,document.getElementById("empRowName").innerText=a.emp_name,new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show()}function nt(){const a=D.value.enable==="1"||D.value.enable===1;if(D.value.enable=a?0:1,D.value.enable==0){const e=new Date,t=n=>n.toString().padStart(2,"0"),s=`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())} ${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`;D.value.enable_on=s,console.log("selectedEmpRow.value",D.value.enable_on)}h.put(`${E.resource}${x.EzyEmployeeList}/${D.value.name}`,D.value).then(()=>{const e={enabled:D.value.enable};return h.put(`${E.resource}${x.users}/${D.value.name}`,e)}).then(()=>{b.success(`Employee ${me.value}d successfully`),window.location.reload()}).catch(e=>{console.error("Toggle employee error:",e)})}const it=d({emp_code:{type:"input"},emp_name:{type:"input"},designation:{type:"input"}});function te(){o.value={emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",signature:null,company_field:p.value};const a=document.getElementById("signatureInput");a&&(a.value="")}function Ve(a){const e=a.target.files[0];e&&dt(e)}const rt=()=>ve(this,null,function*(){const a=[["company_field","like",`%${B.value}%`],["is_web_form","=","0"],["enable","=","1"]],e={fields:JSON.stringify(["*"]),limit_start:0,limit_page_length:"none",filters:JSON.stringify(a)};try{const t=yield h.get(E.resource+x.EzyEmployeeList,{params:e});if(t.data){const s=t.data;if(s.length){bootstrap.Modal.getInstance(document.getElementById("ExportEmployeeModal")).hide(),b.success("Successfully Completed");const u=XLSX.utils.json_to_sheet(s),k=XLSX.utils.book_new();XLSX.utils.book_append_sheet(k,u,"Employees"),XLSX.writeFile(k,"EmployeeDetails.xlsx")}else b.error("No Employee Details")}}catch(t){console.error("Error exporting employee data:",t)}}),dt=(a,e)=>{let t=`${a.name}`;const s=new FormData;s.append("file",a,t),s.append("is_private","0"),s.append("folder","Home"),h.post(E.uploadfile,s).then(n=>{n.message&&n.message.file_url?o.value.signature=n.message.file_url:console.error("file_url not found in the response.")}).catch(n=>{console.error("Upload error:",n)})};function Le(a){const e={fields:JSON.stringify(["*"]),limit_page_length:"None",limit_start:_.value.limit_start};h.get(E.resource+x.departments,{params:e}).then(t=>{t.data&&(U.value=t.data,a&&a())}).catch(t=>{console.error("Error fetching department data:",t)})}const ut=a=>{_.value.limitPageLength=a,_.value.limit_start=0,X()},mt=([a,e])=>{_.value.limitPageLength=a,_.value.limit_start=e,X()},Pe=d(null);function pt(a){clearTimeout(Pe.value),Pe.value=setTimeout(()=>{_.value.filters=[],be.value.forEach(e=>{const t=e.td_key;a[t]&&_.value.filters.push([t,"like",`%${a[t]}%`])}),_.value.filters.length?(_.value.limit_start=0,X(_.value.filters)):X()},500)}function X(a){const e=[["company_field","like",`%${B.value}%`],["is_web_form","=","0"],["enable","=","1"]];a&&e.push(...a);const t={fields:JSON.stringify(["*"]),filters:JSON.stringify(e),limit_page_length:_.value.limitPageLength,limit_start:_.value.limit_start,order_by:"`tabEzy Employee`.`enable` DESC,`tabEzy Employee`.`creation` DESC"},s={fields:JSON.stringify(["count(name) AS total_count"]),limitPageLength:"None",filters:JSON.stringify(e)};h.get(`${E.resource}${x.EzyEmployeeList}`,{params:s}).then(n=>{se.value=n.data[0].total_count}).catch(n=>{console.error("Error fetching ezyForms data:",n)}),h.get(E.resource+x.EzyEmployeeList,{params:t}).then(n=>{if(n.data){const u=n.data;_.value.limit_start===0?A.value=u:A.value=A.value.concat(u)}}).catch(n=>{console.error("Error fetching department data:",n)})}const $=d([]);function $e(){const a={fields:JSON.stringify(["*"]),limit_page_length:"None",filters:JSON.stringify([["company_field","like",`%${B.value}%`]]),order_by:"`tabEzy Employee`.`creation` desc"};h.get(E.resource+x.EzyEmployeeList,{params:a}).then(e=>{if(e.data){const t=e.data;_.value.limit_start===0?($.value=t,Q.value=[...new Set(e.data.map(s=>s.reporting_to))],V.value=[...new Set(e.data.map(s=>s.reporting_designation))],o.value.company_field=p.value):$.value=$.value.concat(t)}}).catch(e=>{console.error("Error fetching department data:",e)})}W(()=>o.value.reporting_to,a=>{const e=$.value.find(t=>t.emp_mail_id===a);o.value.reporting_designation=e==null?void 0:e.designation},{immediate:!0});function Ae(){const a=[],e={fields:JSON.stringify(["*"]),filters:JSON.stringify(a),limit_page_length:"None",limit_start:_.value.limit_start,order_by:"`tabWF Roles`.`creation` desc"};h.get(E.resource+x.designations,{params:e}).then(t=>{t.data&&(R.value=[...new Set(t.data.map(s=>s.role))])}).catch(t=>{console.error("Error fetching designations data:",t)})}W(p,a=>{a&&a.length&&(o.value.company_field=a,B.value=a,X())},{immediate:!0});function ct(){var e;if(!lt.value){b.error("Please fill all required fields",{autoClose:1e3,transition:"zoom"});return}if(P.value){b.error("Employee Email Id already exists",{autoClose:1e3,transition:"zoom"});return}o.value.company_field=p.value;const a=oe(ae({},o.value),{department:((e=o.value.department)==null?void 0:e.name)||"",doctype:x.EzyEmployeeList});console.log(a),J.value=!0,h.post(E.resource+x.EzyEmployeeList,a).then(t=>{if(t.data){b.success("Employee Created",{autoClose:500,transition:"zoom"}),bootstrap.Modal.getInstance(document.getElementById("createDepartments")).hide(),te();const n=document.getElementById("signatureInput");n&&(n.value=""),X(),J.value=!1}}).catch(t=>{console.error("Error creating employee:",t)}).finally(()=>{J.value=!1})}function ft(){var e;if(!o.value.designation&&v.value&&(o.value.designation=v.value),o.value.reporting_to){const t=$.value.find(s=>s.emp_mail_id===o.value.reporting_to);t&&(o.value.reporting_designation=t.designation)}else o.value.reporting_designation="";const a=oe(ae({},o.value),{department:((e=o.value.department)==null?void 0:e.name)||""});h.put(`${E.resource}${x.EzyEmployeeList}/${o.value.name}`,a).then(t=>{t.data&&(b.success("Changes Saved",{autoClose:500,transition:"zoom"}),X())}).catch(t=>{console.error("Error saving employee:",t)})}return(a,e)=>(i(),r("div",null,[l("div",null,[l("div",Dt,[e[40]||(e[40]=l("div",null,[l("h1",{class:"m-0 font-13"}," Active Employees ")],-1)),l("div",{class:"d-flex align-items-center gap-2"},[e[24]||(e[24]=l("button",{type:"button",class:"btn export-btn CreateDepartments font-12","data-bs-toggle":"modal","data-bs-target":"#ExportEmployeeModal"}," Export Employees ",-1)),l("button",{type:"button",class:"btn export-btn CreateDepartments font-12",onClick:Je}," Import Employees "),l("button",{type:"button",class:"btn btn-dark CreateDepartments","data-bs-toggle":"modal","data-bs-target":"#createDepartments",onClick:at}," Create Employee ")]),l("div",It,[l("div",Nt,[l("div",Vt,[l("div",{class:"modal-header"},[e[25]||(e[25]=l("h5",{class:"modal-title",id:"createDepartmentsLabel"}," Employee Creation ",-1)),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:te,"aria-label":"Close"})]),l("div",Lt,[l("div",Pt,[l("div",$t,[l("div",At,[e[28]||(e[28]=l("label",{class:"font-13 ps-1",for:"emp_name"},[y("Emp Name"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter Emp Name",modelValue:o.value.emp_name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.emp_name=t)},null,8,["modelValue"]),e[29]||(e[29]=l("label",{class:"font-13 ps-1",for:"emp_code"},[y("Emp ID"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter Emp ID",modelValue:o.value.emp_code,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.emp_code=t)},null,8,["modelValue"]),l("div",Rt,[e[26]||(e[26]=l("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),c(z,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"13",onInput:Qe,onChange:et,placeholder:"Enter Phone Number",modelValue:o.value.emp_phone,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.emp_phone=t)},null,8,["modelValue"]),I.value?(i(),r("p",Ut,g(I.value),1)):m("",!0)]),l("div",Mt,[e[27]||(e[27]=l("label",{class:"font-13 ps-1",for:"emp_mail_id"},[y("Emp Mail ID"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-1",tag:"input",type:"email",name:"emp_mail_id",onChange:Ee,required:!0,id:"emp_mail_id",placeholder:"Enter Email",modelValue:o.value.emp_mail_id,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.emp_mail_id=t)},null,8,["modelValue"]),P.value?(i(),r("p",Tt,g(P.value),1)):m("",!0)]),e[30]||(e[30]=l("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[y("Departments"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(Y(Z),{modelValue:o.value.department,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.department=t),options:U.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:O(({values:t,isOpen:s})=>[t.length?N((i(),r("span",{key:0,class:"multiselect__single font-10"},g(t.map(n=>n.department_name).join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"])]),l("div",zt,[l("div",Bt,[e[35]||(e[35]=l("label",{class:"font-13 ps-1",for:"Designation"},[y(" Designation"),l("span",{class:"text-danger ps-1"},"*")],-1)),N(l("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>v.value=t),onInput:Ce,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[re,v.value]]),v.value&&(L.value.length||De.value)?(i(),r("ul",Ft,[(i(!0),r(de,null,ue(L.value,(t,s)=>(i(),r("li",{key:s,class:"list-group-item list-group-item-action font-12",onClick:n=>Se(t),style:{cursor:"pointer"}},g(t),9,Xt))),128)),v.value&&L.value.length===0?(i(),r("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[6]||(e[6]=t=>S.value=!0)},[e[31]||(e[31]=y(' ➕ Create role "')),l("strong",null,g(v.value),1),e[32]||(e[32]=y('" '))])):m("",!0)])):m("",!0),S.value?(i(),r("div",{key:1,class:G(["modal fade",{show:S.value}]),style:{display:"block"}},[l("div",jt,[l("div",Ot,[l("div",Jt,[e[33]||(e[33]=l("h5",{class:"modal-title"},"Create New Role",-1)),l("button",{type:"button",class:"btn-close",onClick:e[7]||(e[7]=t=>S.value=!1)})]),l("div",qt,[e[34]||(e[34]=l("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),N(l("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[8]||(e[8]=t=>ee.value=t),placeholder:"Enter role name"},null,512),[[re,ee.value]])]),l("div",Ht,[l("button",{class:"btn btn-secondary",onClick:e[9]||(e[9]=t=>S.value=!1)},"Cancel"),l("button",{class:"btn btn-dark",onClick:Ie},"Save Role")])])])],2)):m("",!0)]),e[37]||(e[37]=l("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),c(Y(Z),{modelValue:o.value.reporting_to,"onUpdate:modelValue":e[10]||(e[10]=t=>o.value.reporting_to=t),options:$.value.map(t=>t.emp_mail_id),multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:O(({values:t,isOpen:s})=>[t.length?N((i(),r("span",{key:0,class:"multiselect__single font-10"},g(t.join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"]),e[38]||(e[38]=l("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),c(Y(Z),{modelValue:o.value.reporting_designation,"onUpdate:modelValue":e[11]||(e[11]=t=>o.value.reporting_designation=t),options:R.value,"allow-empty":!0,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!o.value.reporting_to},{selection:O(({values:t,isOpen:s})=>[t.length?N((i(),r("span",{key:0,class:"multiselect__single font-10"},g(t.join(", "))+" selected ",513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options","disabled"]),l("div",Wt,[e[36]||(e[36]=l("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),l("input",{type:"file",ref_key:"signatureInputRef",ref:ye,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Ve,"aria-describedby":"fileHelpId"},null,544),o.value.signature?(i(),r("div",Yt,[l("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:Ne}),l("img",{src:o.value.signature,style:{"max-width":"100px","max-height":"100px"},alt:"Signature",class:"img-fluid signature-img border-1"},null,8,Zt)])):m("",!0)])])])])]),l("div",Gt,[c(ge,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:te,"data-bs-dismiss":"modal"}),l("button",{type:"button",class:"applyfilter btn btn-dark text-nowrap font-10 d-flex justify-content-center align-items-center",onClick:ct},[J.value?m("",!0):(i(),r("span",Kt,e[39]||(e[39]=[l("i",{class:"bi bi-check2"},null,-1)]))),J.value?m("",!0):(i(),r("span",Qt,"Create Employee")),J.value?(i(),r("span",el)):m("",!0)])])])])])]),f.value?(i(),r("div",tl,[c(kt,{tHeaders:be.value,tData:A.value,isAction:"true",actions:tt.value,enableDisable:"true",onActionClicked:ot,onToggleClick:st,actionType:"dropdown",isCheckbox:"true",isFiltersoption:"true","field-mapping":it.value,onUpdateFilters:pt},null,8,["tHeaders","tData","actions","field-mapping"]),c(xt,{currentRecords:A.value.length,totalRecords:se.value,onUpdateValue:ut,onLimitStart:mt},null,8,["currentRecords","totalRecords"])])):(i(),r("div",ll,[l("div",al,[l("div",{class:"d-flex justify-content-between align-content-center"},[l("button",{type:"button",class:"font-12 btn btn-light",onClick:qe},e[41]||(e[41]=[l("i",{class:"bi bi-chevron-left"},null,-1),y(" Back to Employee List ")]))]),l("div",ol,[l("div",sl,[l("div",{class:G(w.value.length?"":"mb-5 mt-5")},[l("button",{type:"button",class:"font-12 my-1 btn btn-light",onClick:Oe},e[42]||(e[42]=[l("i",{class:"bi bi-download"},null,-1),y(" Use template ")])),l("input",{type:"file",ref_key:"fileInput",ref:ne,onChange:Te,hidden:""},null,544),l("button",{type:"button",class:"font-12 my-1 btn btn-dark",onClick:Me},e[43]||(e[43]=[l("i",{class:"bi bi-upload"},null,-1),y(" Upload Data ")]))],2)]),c(wt,{name:"fade"},{default:O(()=>[ce.value?(i(),r("div",nl)):m("",!0)]),_:1}),l("div",null,[l("div",il,[ie.value.length>0?(i(),r("div",rl,[l("button",{type:"button",class:"btn btn-light font-12",onClick:je},e[44]||(e[44]=[l("i",{class:"bi bi-download mx-2"},null,-1),y("Download Excel")]))])):m("",!0),he.value.length?(i(),r("div",dl,[e[45]||(e[45]=l("h3",{class:"font-13"},"Template Warnings:",-1)),l("ul",null,[(i(!0),r(de,null,ue(he.value,(t,s)=>(i(),r("li",{key:s},g(t),1))),128))])])):m("",!0),ie.value.length>0?(i(),r("table",ul,[e[46]||(e[46]=l("thead",null,[l("tr",null,[l("th",null,"#"),l("th",null,"Email"),l("th",null,"Status"),l("th",null,"Message")])],-1)),l("tbody",null,[(i(!0),r(de,null,ue(ie.value,(t,s)=>(i(),r("tr",{key:s},[l("td",null,g(s+1),1),l("td",null,g(t.email),1),l("td",{class:G(t.status==="success"?"status-success":"status-failed")},g(t.status),3),l("td",null,g(t.displayMessage),1)]))),128))])])):m("",!0)])])])])]))]),l("div",ml,[l("div",pl,[l("div",cl,[l("div",{class:"modal-header"},[e[47]||(e[47]=l("h5",{class:"modal-title",id:"viewEmployeeLabel"},"Employee Data",-1)),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:te,"aria-label":"Close"})]),l("div",fl,[l("div",vl,[l("div",gl,[l("div",yl,[e[50]||(e[50]=l("label",{class:"font-13 ps-1",for:"emp_name"},[y("Emp Name"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter department code",modelValue:o.value.emp_name,"onUpdate:modelValue":e[12]||(e[12]=t=>o.value.emp_name=t)},null,8,["modelValue"]),e[51]||(e[51]=l("label",{class:"font-13 ps-1",for:"emp_code"},[y("Emp ID"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(z,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter department code",modelValue:o.value.emp_code,"onUpdate:modelValue":e[13]||(e[13]=t=>o.value.emp_code=t)},null,8,["modelValue"]),l("div",bl,[e[48]||(e[48]=l("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),l("div",_l,[c(z,{tag:"input",type:"text",name:"emp_phone",id:"emp_phone",maxlength:"10",class:"w-100",readonly:!0,placeholder:"Enter Phone Number",modelValue:o.value.emp_phone,"onUpdate:modelValue":e[14]||(e[14]=t=>o.value.emp_phone=t),onInput:xe,onChange:Ye},null,8,["modelValue"]),l("i",{class:G([He.value,"eye-icon"]),onClick:We},null,2)]),I.value?(i(),r("p",hl,g(I.value),1)):m("",!0)]),l("div",El,[e[49]||(e[49]=l("label",{class:"font-13 ps-1",for:"emp_mail_id"},[y("Emp Mail ID"),l("span",{class:"text-danger ps-1"},"*")],-1)),l("div",kl,[c(z,{class:"mb-1 w-100",tag:"input",type:"email",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter Email",modelValue:o.value.emp_mail_id,"onUpdate:modelValue":e[15]||(e[15]=t=>o.value.emp_mail_id=t),onInput:we,onChange:Ee,required:!0},null,8,["modelValue"]),l("i",{class:G([Ze.value,"eye-icon"]),onClick:Ge},null,2)]),P.value?(i(),r("p",xl,g(P.value),1)):m("",!0)]),e[52]||(e[52]=l("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[y("Departments"),l("span",{class:"text-danger ps-1"},"*")],-1)),c(Y(Z),{modelValue:o.value.department,"onUpdate:modelValue":e[16]||(e[16]=t=>o.value.department=t),options:U.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:O(({values:t,isOpen:s})=>[t.length?N((i(),r("span",{key:0,class:"multiselect__single font-10"},g(t.map(n=>n.department_name).join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"])]),l("div",wl,[l("div",Cl,[e[57]||(e[57]=l("label",{class:"font-13 ps-1",for:"Designation"},[y(" Designation"),l("span",{class:"text-danger ps-1"},"*")],-1)),N(l("input",{type:"text","onUpdate:modelValue":e[17]||(e[17]=t=>v.value=t),onInput:Ce,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[re,v.value]]),v.value&&(L.value.length||De.value)?(i(),r("ul",Sl,[(i(!0),r(de,null,ue(L.value,(t,s)=>(i(),r("li",{key:s,class:"list-group-item list-group-item-action font-12",onClick:n=>Se(t),style:{cursor:"pointer"}},g(t),9,Dl))),128)),v.value&&L.value.length===0?(i(),r("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[18]||(e[18]=t=>S.value=!0)},[e[53]||(e[53]=y(' ➕ Create role "')),l("strong",null,g(v.value),1),e[54]||(e[54]=y('" '))])):m("",!0)])):m("",!0),S.value?(i(),r("div",{key:1,class:G(["modal fade",{show:S.value}]),style:{display:"block"}},[l("div",Il,[l("div",Nl,[l("div",Vl,[e[55]||(e[55]=l("h5",{class:"modal-title"},"Create New Role",-1)),l("button",{type:"button",class:"btn-close",onClick:e[19]||(e[19]=t=>S.value=!1)})]),l("div",Ll,[e[56]||(e[56]=l("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),N(l("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[20]||(e[20]=t=>ee.value=t),placeholder:"Enter role name"},null,512),[[re,ee.value]])]),l("div",Pl,[l("button",{class:"btn btn-secondary",onClick:e[21]||(e[21]=t=>S.value=!1)},"Cancel"),l("button",{class:"btn btn-dark",onClick:Ie},"Save Role")])])])],2)):m("",!0)]),e[59]||(e[59]=l("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),c(Y(Z),{modelValue:o.value.reporting_to,"onUpdate:modelValue":e[22]||(e[22]=t=>o.value.reporting_to=t),options:$.value.map(t=>t.emp_mail_id),multiple:!1,"close-on-select":!0,"allow-empty":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:O(({values:t,isOpen:s})=>[t.length?N((i(),r("span",{key:0,class:"multiselect__single font-10"},g(t.join(", ")),513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options"]),e[60]||(e[60]=l("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),c(Y(Z),{modelValue:o.value.reporting_designation,"onUpdate:modelValue":e[23]||(e[23]=t=>o.value.reporting_designation=t),options:R.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!o.value.reporting_to},{selection:O(({values:t,isOpen:s})=>[t.length?N((i(),r("span",{key:0,class:"multiselect__single font-10"},g(t.join(", "))+" selected ",513)),[[K,!s]]):m("",!0)]),_:1},8,["modelValue","options","disabled"]),l("div",$l,[e[58]||(e[58]=l("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),l("input",{type:"file",ref_key:"signatureInputRef",ref:ye,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Ve,"aria-describedby":"fileHelpId"},null,544),o.value.signature?(i(),r("div",Al,[l("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:Ne}),l("img",{src:o.value.signature,alt:"Signature",class:"img-fluid signature-img"},null,8,Rl)])):m("",!0)])])])])]),l("div",Ul,[c(ge,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:te,"data-bs-dismiss":"modal"}),c(ge,{type:"button",class:"btn btn-dark font-11",name:"Save Employee","data-bs-dismiss":"modal",onClick:ft})])])])]),l("div",{class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},[l("div",{class:"modal-dialog modal-dialog-centered"},[l("div",{class:"modal-content"},[e[62]||(e[62]=Ct('<div class="modal-header" data-v-a04ff04d><h5 class="modal-title" data-v-a04ff04d>Confirm Employee Status</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-a04ff04d></button></div><div class="modal-body" data-v-a04ff04d> Are you sure you want to <span id="empActionText" data-v-a04ff04d></span> &quot;<span id="empRowName" data-v-a04ff04d></span>&quot;? </div>',2)),l("div",{class:"modal-footer"},[e[61]||(e[61]=l("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),l("button",{type:"button",class:"btn btn-dark",onClick:nt},"Yes, Proceed")])])])]),l("div",{class:"modal fade",id:"ExportEmployeeModal",tabindex:"-1","aria-hidden":"true"},[l("div",{class:"modal-dialog modal-dialog-centered"},[l("div",{class:"modal-content"},[e[64]||(e[64]=l("div",{class:"modal-header"},[l("h5",{class:"modal-title"},"Export Employee"),l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[65]||(e[65]=l("div",{class:"modal-body"}," Are you sure you want to export the employee details? ",-1)),l("div",{class:"modal-footer"},[e[63]||(e[63]=l("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),l("button",{type:"button",class:"btn btn-dark",onClick:rt},"Yes, Proceed")])])])])]))}},Bl=Et(Ml,[["__scopeId","data-v-a04ff04d"]]);export{Bl as default};
