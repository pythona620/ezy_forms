var J=Object.defineProperty,T=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var S=(m,i,a)=>i in m?J(m,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[i]=a,C=(m,i)=>{for(var a in i||(i={}))F.call(i,a)&&S(m,a,i[a]);if(A)for(var a of A(i))M.call(i,a)&&S(m,a,i[a]);return m},z=(m,i)=>T(m,B(i));import{_ as V,r as f,f as q,o as p,c as u,d as t,L as I,n as P,l as v,t as n,m as d,F as G,h as R,y as b,z as h,K as D,H}from"./index-BsSxkMRO.js";const $="/assets/ezy_forms/ezyformsfrontend/assets/UploadProfile-BzsawPEI.jpg",K={class:"main-div"},Q={class:"py-2"},W={class:"card card-div border-0 mt-4 p-3"},X={class:"d-flex flex-column flex-md-row align-items-center align-items-md-start"},Y={class:"position-relative image-div mb-3 mb-md-0"},Z=["src"],ee={class:"ms-md-3 flex-grow-1 text-center text-md-start"},te={class:"mb-3 mt-2"},se={class:"d-flex flex-wrap justify-content-center justify-content-md-start gap-4 role-details"},ie={class:"mt-3 d-flex flex-wrap justify-content-center justify-content-md-start gap-4 font-11"},ae={class:"fw-bold"},le={class:"fw-bold"},ne={class:"fw-bold"},oe={class:"mt-3 d-flex flex-column flex-sm-row align-items-end"},re={class:"position-relative d-inline-block mt-2 mt-sm-0"},de=["src"],me={key:0},pe={class:"container-fluid p-0"},ue={class:"row"},ce={class:"card p-3 shadow-sm team-card"},fe={class:"d-flex align-items-center"},ge=["src"],_e={class:"mb-0 font-14"},ve={class:"paragraph-txt mb-2"},ye={class:"paragraph-txt"},be={class:"paragraph-txt"},he={class:"paragraph-txt"},xe={__name:"ProfileComp",setup(m){const i=f({}),a=f(""),s=f([]),w=f(null),x=f(""),N=f("");function g(r){x.value=r,w.value.click()}function L(r){if(!r)return"N/A";const e={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0};return new Date(r).toLocaleString(void 0,e)}function O(r){const e=r.target.files[0];if(!e)return;const l=new FormData;l.append("file",e),b.post(h.uploadfile,l).then(c=>{const _=c.message.file_url,y=z(C({},x.value==="profile"?{profile_image:_}:{signature:_}),{name:s.value.name,doctype:D.EzyEmployeeList});return b.put(`${h.DataUpdate}/${s.value.name}`,y)}).then(()=>{E(s.value.name),H(`${x.value==="profile"?"Profile":"Signature"} Updated Successfully`)}).catch(c=>{console.error("Error uploading image:",c)})}function E(r){const e={fields:JSON.stringify(["acknowledge_on","company_field","department","designation","emp_code","emp_mail_id","emp_name","emp_phone","name","profile_image","reporting_designation","reporting_to","signature"]),doctype:D.EzyEmployeeList,filters:JSON.stringify([["Ezy Employee","emp_mail_id","=",r]]),order_by:"`tabEzy Employee`.`enable` DESC, `tabEzy Employee`.`modified` DESC"};b.get(h.GetDoctypeData,{params:e}).then(l=>{l.message.data&&(s.value=l.message.data[0]||{},U())}).catch(l=>{console.error("Error fetching department data:",l)})}function U(){const r={reporting_to:s.value.emp_mail_id},e={filters:JSON.stringify(r),limit_page_length:"none",doctype:D.EzyEmployeeList,fields:JSON.stringify(["profile_image","name","department","designation","emp_code","emp_mail_id","emp_name"])};b.get(`${h.GetDoctypeData}`,{params:e}).then(l=>{N.value=l.message.data}).catch(l=>{console.error("Error fetching user data:",l)})}return q(()=>{i.value=JSON.parse(localStorage.getItem("employeeData"))||{},a.value=i.value.emp_mail_id||"",a.value&&E(a.value)}),(r,e)=>{var l,c,_,y,k;return p(),u("div",K,[t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("img",{src:(l=s.value)!=null&&l.profile_image?s.value.profile_image:I($),title:"Upload Profile Image",class:P(["img-fluid profile-pic",(c=s.value)!=null&&c.profile_image?"profile-img":"default-image"]),onClick:e[0]||(e[0]=o=>g("profile"))},null,10,Z),s.value.profile_image?(p(),u("i",{key:0,class:"bi bi-pencil-fill edit-profile-icon position-absolute",onClick:e[1]||(e[1]=o=>g("profile")),style:{cursor:"pointer"}})):v("",!0)]),t("div",ee,[t("h6",te,n(s.value.emp_name||"N/A"),1),t("div",se,[t("span",null,[e[5]||(e[5]=t("i",{class:"bi bi-person-badge-fill me-1"},null,-1)),d(n(s.value.emp_code||"N/A"),1)]),t("span",null,[e[6]||(e[6]=t("i",{class:"bi bi-envelope-fill me-1"},null,-1)),d(n(s.value.emp_mail_id||"N/A"),1)]),t("span",null,[e[7]||(e[7]=t("i",{class:"bi bi-telephone-fill me-1"},null,-1)),d(n(s.value.emp_phone||"N/A"),1)]),t("span",null,[e[8]||(e[8]=t("i",{class:"bi bi-briefcase-fill me-1"},null,-1)),d(n(s.value.designation||"N/A"),1)]),t("span",null,[e[9]||(e[9]=t("i",{class:"bi bi-building-fill me-1"},null,-1)),d(n(s.value.company_field||"N/A"),1)])]),t("div",ie,[t("span",null,[e[10]||(e[10]=d("Department: ")),t("span",ae,n(s.value.department||"N/A"),1)]),t("span",null,[e[11]||(e[11]=d("Reporting Manager: ")),t("span",le,n(s.value.reporting_to||"N/A"),1)]),t("span",null,[e[12]||(e[12]=d("Acknowledged On: ")),t("span",ne,n(L(s.value.acknowledge_on)||"N/A"),1)])]),t("div",oe,[e[13]||(e[13]=t("p",{class:"m-0 me-sm-2 fw-bold font-12"},"Signature:",-1)),t("div",re,[(_=s.value)!=null&&_.signature?(p(),u("img",{key:0,src:s.value.signature,class:"img-fluid signiture-image border p-1",onClick:e[2]||(e[2]=o=>g("signature")),style:{cursor:"pointer"}},null,8,de)):v("",!0),(y=s.value)!=null&&y.signature?(p(),u("i",{key:1,class:"bi bi-pencil-fill edit-image m-2",onClick:e[3]||(e[3]=o=>g("signature")),style:{cursor:"pointer"}})):v("",!0),(k=s.value)!=null&&k.signature?v("",!0):(p(),u("button",{key:2,class:"upload-sign-btn",onClick:e[4]||(e[4]=o=>g("signature"))}," Upload signature "))]),t("input",{type:"file",ref_key:"fileInput",ref:w,onChange:O,accept:"image/*",hidden:""},null,544)])])])])]),N.value.length?(p(),u("div",me,[e[17]||(e[17]=t("h6",{class:"font-16 my-3 ms-2 fw-bold"},"My Team",-1)),t("div",pe,[t("div",ue,[(p(!0),u(G,null,R(N.value,(o,j)=>(p(),u("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:j},[t("div",ce,[t("div",fe,[t("img",{src:o.profile_image||I($),class:P([o.profile_image?"rounded-circle":"","me-3"]),alt:"Profile Image",width:"80",height:"80"},null,10,ge),t("div",null,[t("h5",_e,n(o.emp_name||"N/A"),1),t("p",ve,n(o.emp_code||"N/A"),1),t("p",ye,[e[14]||(e[14]=t("strong",{class:"text-secondary"},"Designation :",-1)),d(" "+n(o.designation||"N/A"),1)]),t("p",be,[e[15]||(e[15]=t("strong",{class:"text-secondary"},"Department :",-1)),d(" "+n(o.department||"N/A"),1)]),t("p",he,[e[16]||(e[16]=t("strong",{class:"text-secondary"},"Email :",-1)),d(" "+n(o.emp_mail_id||"N/A"),1)])])])])]))),128))])])])):v("",!0)])}}},we=V(xe,[["__scopeId","data-v-cf2f326d"]]);export{we as default};
