var Ct=Object.defineProperty,Dt=Object.defineProperties;var St=Object.getOwnPropertyDescriptors;var Te=Object.getOwnPropertySymbols;var It=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable;var $e=(D,b,p)=>b in D?Ct(D,b,{enumerable:!0,configurable:!0,writable:!0,value:p}):D[b]=p,le=(D,b)=>{for(var p in b||(b={}))It.call(b,p)&&$e(D,p,b[p]);if(Te)for(var p of Te(b))Vt.call(b,p)&&$e(D,p,b[p]);return D},ae=(D,b)=>Dt(D,St(b));var he=(D,b,p)=>new Promise((ne,R)=>{var $=L=>{try{V(p.next(L))}catch(K){R(K)}},ie=L=>{try{V(p.throw(L))}catch(K){R(K)}},V=L=>L.done?ne(L.value):Promise.resolve(L.value).then($,ie);V((p=p.apply(D,b)).next())});import{_ as Nt,M as Lt,u as Pt,x as j,E as Ut,r as d,w as me,o as i,c as r,d as t,m as g,b as v,O as F,t as f,l as u,Q as O,i as y,v as G,L as Z,R as Y,j as se,F as pe,h as ce,n as X,S as ke,G as At,P as Rt,T as Mt,N as fe,B as Tt,y as h,z as k,U as _,K as w,I as ze,H as oe,V as $t}from"./index-D_k4ZnJS.js";const zt={class:"d-flex justify-content-between align-items-center mt-2 py-2"},Bt={class:"modal fade",id:"createDepartments","data-bs-backdrop":"static",tabindex:"-1","data-bs-keyboard":"false","aria-labelledby":"createDepartmentsLabel","aria-hidden":"true"},jt={class:"modal-dialog modal-lg"},Ft={class:"modal-content"},Ot={class:"modal-body"},Xt={class:"container-fluid"},qt={class:"row"},Jt={class:"col"},Ht={class:"mb-3"},Wt={key:0,class:"text-danger font-11 ps-1"},Gt={class:"mb-3"},Zt={key:0,class:"text-danger font-11 ps-1"},Yt={class:"col"},Kt={class:"position-relative mb-3"},Qt={key:0,class:"list-group position-absolute w-100 zindex-dropdown"},el=["onClick"],tl={class:"modal-dialog"},ll={class:"modal-content"},al={class:"modal-header"},sl={class:"modal-body"},ol={class:"modal-footer"},nl={class:"mb-3 font-11"},il={key:0,style:{"max-width":"100px","max-height":"100px"},class:"d-flex justify-center position-relative mt-2"},rl=["src"],dl={class:"modal-footer"},ul={key:0,class:"font-16 me-1"},ml={key:1},pl={key:2,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},cl={key:0,class:"mt-2"},fl={key:1},vl={class:"bulkemployee"},gl={class:"insideBulkEmp"},_l={class:"d-flex justify-content-center align-content-center mb-5 gap-2"},bl={key:0,class:"loader"},yl={class:"table-container"},hl={key:0,class:"d-flex justify-content-end align-content-center p-2"},kl={key:1,class:"warning-box"},El={key:2,class:"styled-table"},xl={class:"modal fade",id:"exampleModal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},wl={class:"modal-dialog modal-lg"},Cl={class:"modal-content"},Dl={class:"modal-header"},Sl={class:"form-check d-flex justify-content-center w-25 form-switch"},Il=["checked"],Vl={class:"font-13 ms-2 mt-1 fw-bold",for:"is_high_level"},Nl={class:"modal-body"},Ll={class:"container-fluid"},Pl={class:"row"},Ul={class:"col"},Al={class:"d-flex justify-content-between"},Rl={class:"me-2"},Ml={class:"mb-3"},Tl={class:"input-container"},$l=["readonly","value"],zl={key:0,class:"text-danger font-11 ps-1"},Bl={class:"mb-3"},jl={class:"input-container"},Fl={key:0,class:"text-danger font-11 ps-1"},Ol={class:"d-flex justify-content-between"},Xl={class:"me-2"},ql={class:"position-relative mb-3"},Jl={key:0,class:"text-danger font-11 ps-1"},Hl={key:1,class:"list-group position-absolute w-100 zindex-dropdown"},Wl=["onClick"],Gl={class:"modal-dialog"},Zl={class:"modal-content"},Yl={class:"modal-header"},Kl={class:"modal-body"},Ql={class:"modal-footer"},ea={class:"col"},ta={class:"d-flex justify-content-between"},la={class:"font-13 ps-1",for:"reporting_to"},aa={key:0,class:"text-danger ps-1"},sa={class:"me-2"},oa={class:"mb-3"},na=["value"],ia={class:"mb-3"},ra={class:"mb-3 font-11"},da={key:0,class:"d-flex justify-center position-relative mt-2"},ua=["src"],ma={class:"modal-footer"},pa={__name:"InactiveEmployee",setup(D){const b=Lt();Pt();const p=j(()=>Ut.value),ne=d(!0),R=d([]),$=d(""),ie=d(0),V=d([]),L=d([]),K=d([]),re=d([]),N=d(""),Ee=d(null),q=d(!1),s=d({emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",company_field:"",signature:""}),S=d(null),ve=d(""),c=d(""),I=d(!1),P=d([]),C=d([]),xe=d([{th:"Emp ID",td_key:"emp_code"},{th:"Emp Name",td_key:"emp_name"},{th:"Designation",td_key:"designation"},{th:"Department",td_key:"department"},{th:"Signature",td_key:"signature"},{th:"Reports Designation",td_key:"reporting_designation"},{th:"Creation Date",td_key:"creation"},{th:"last Login",td_key:"last_login"},{th:"last Login IP",td_key:"last_ip"},{th:"Disabled on",td_key:"enable_on"},{th:"Emp Status",td_key:"enable"}]);function Be(l){return l?l.split(".")[0]:""}const de=d(null),ge=d(0),_e=d(!1),be=d(""),je=()=>{de.value.click()},Fe=l=>{const e=l.target.files[0];e&&(qe(e),de.value&&(de.value.value=""))};function Oe(){s.value.emp_name=s.value.emp_name.trim().toUpperCase()}const Xe=()=>Math.floor(Math.random()*1e6),qe=l=>{let a=`${Xe()}-@${l.name}`;const o=new FormData;o.append("file",l,a),o.append("is_private","0"),o.append("folder","Home"),_e.value=!0,ge.value=0,h.post(k.uploadfile,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{ge.value=Math.round(n.loaded/n.total*100)}}).then(n=>{n.message&&n.message.file_url?(be.value=n.message.file_url,n.message.file_url&&be.value&&Je()):_("File upload failed: file_url not found in response.")}).catch(n=>{console.error("Upload error:",n),_("File upload failed. Please try again.")}).finally(()=>{setTimeout(()=>{_e.value=!1,ge.value=0},2e3)})},Je=()=>{const l={file:be.value,doctype:w.EzyEmployeeList};h.post(k.uploadbulkEmployeefile,l).then(e=>{var a;if(!(e!=null&&e.data)){_("Import response not found.");return}if(C.value=e.data,e.data.success===!1){let o=e._error_message||e.data.message||"Import failed.";if(o=o.replace(/\s*\(.*?\)\s*/g,"").trim(),_(o),e.data._server_messages)try{const n=JSON.parse(e.data._server_messages);Array.isArray(n)&&n.forEach(m=>{let T=JSON.parse(m).message||"Permission error.";T=T.replace(/\s*\(.*?\)\s*/g,"").trim(),_(T)})}catch(n){console.error("Error parsing _server_messages:",n)}return}(a=C.value.template_warnings)!=null&&a.length&&C.value.template_warnings.forEach(o=>{ze(`Warning: ${o}`)}),C.value.records&&(C.value.records=C.value.records.map(o=>ae(le({},o),{message:o.message}))),C.value.template_status==="success"?oe("Bulk data imported successfully!"):C.value.template_status==="failed"?_(`Import Failed: ${C.value.message}`):C.value.status==="Partial Success"&&ze("Partial Success: Some records failed.")}).catch(e=>{console.error("Upload error:",e),_("Upload failed. Please try again.")})},ue=j(()=>{var e;return(((e=C.value)==null?void 0:e.records)||[]).map((a,o)=>{let n="N/A",m="N/A";try{if(a.status.toLowerCase()==="success")n=we(a.message),m="Successfully imported";else if(a.status.toLowerCase()==="failed"){const x=JSON.parse(a.message);if(Array.isArray(x)&&x.length>0){m=x[0].title||"Unknown Issue";const T=He(x);T?(n=T,m="Invalid Email Address"):n=we(x)}}}catch(x){m="Parsing Error"}return{sNo:o+1,email:n,status:a.status,displayMessage:m}})}),we=l=>{var e,a,o;return typeof l=="string"&&(l=l.toLowerCase(),l.includes("successfully imported "))?l.split("successfully imported ")[1]||"N/A":Array.isArray(l)&&((o=(a=(e=l[0])==null?void 0:e.message)==null?void 0:a.match(/<strong>(.*?)<\/strong>/))==null?void 0:o[1])||"N/A"},He=l=>{if(Array.isArray(l)){for(const e of l)if(e.message.includes("is not a valid Email Address"))return e.message.split(" is not a valid Email Address")[0]}return null},Ce=j(()=>{var l;return((l=C.value)==null?void 0:l.template_warnings)||[]}),We=()=>{const l=window.XLSX;if(!l){console.error("XLSX library is not loaded.");return}const e=l.utils.json_to_sheet(ue.value),a=l.utils.book_new();l.utils.book_append_sheet(a,e,"Records");const o=l.write(a,{bookType:"xlsx",type:"array"}),n=new Blob([o],{type:"application/octet-stream"}),m=document.createElement("a");m.href=URL.createObjectURL(n),m.download="Records.xlsx",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Ge=()=>he(this,null,function*(){const l=p.value,a=yield(yield fetch("/assets/ezy_forms/ezyformsfrontend/Employee_import.xlsx")).arrayBuffer(),o=XLSX.read(a,{type:"array"}),n=o.SheetNames[0],m=o.Sheets[n];m.A2={t:"s",v:l};const x=XLSX.utils.decode_range(m["!ref"]);x.e.r<1&&(x.e.r=1),m["!ref"]=XLSX.utils.encode_range(x);const T=XLSX.write(o,{bookType:"xlsx",type:"array"}),wt=new Blob([T],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),te=document.createElement("a");te.href=URL.createObjectURL(wt),te.setAttribute("download","Employee_import.xlsx"),document.body.appendChild(te),te.click(),document.body.removeChild(te)}),U=d(""),De=()=>{var a;const l=(a=J.value||s.value.emp_mail_id)==null?void 0:a.trim().toLowerCase();/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l)?M.value.some(n=>{var m;return((m=n.emp_mail_id)==null?void 0:m.toLowerCase())===l})?U.value="Email already exists":U.value="":U.value="Invalid email address"};function Ze(){ne.value=!0}const A=d(!0),Ye=d(""),Se=j(()=>A.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),Ke=l=>(l=l.replace(/\D/g,""),l.startsWith("91")&&l.length===12?l="+"+l:l.length===10&&(l="+91"+l),l);me(()=>s.value.emp_phone,l=>{l.startsWith("+91")||(s.value.emp_phone=Ke(l)),A.value||(Ye.value=s.value.emp_phone)},{immediate:!0});const Qe=()=>{if(s.value.emp_phone){const l=s.value.emp_phone.replace("+91",""),e=/^\d{10}$/;N.value=e.test(l)?"":"Invalid phone number."}};function et(l){return!l||l.length<13?l:"+91 ******"+l.slice(-4)}function tt(l){s.value.emp_phone=l.target.value}function ye(){let l=s.value.emp_phone.replace(/\D/g,"");l.startsWith("91")&&l.length>10&&(l=l.slice(2)),l.length===10?(s.value.emp_phone="+91"+l,N.value=""):(s.value.emp_phone=l,l.length>0?N.value="Phone number must be 10 digits.":N.value="")}function lt(){A.value&&!window.confirm("Are you sure you want to see the phone number?")||(A.value=!A.value,Se.value=A.value?"bi-eye":"bi-eye-slash")}const z=d(!0),J=d(""),at=j(()=>z.value?"bi bi-eye-slash-fill":"bi bi-eye-fill"),Ie=()=>{if(!z.value||!s.value.emp_mail_id.includes("@"))return;J.value=s.value.emp_mail_id;const[l,e]=J.value.split("@");l.length>3&&(s.value.emp_mail_id=l.slice(0,3)+"***@"+e)},st=()=>{J.value&&(z.value&&!window.confirm("Are you sure you want to see the email address?")||(z.value=!z.value,s.value.emp_mail_id=z.value?ot(J.value):J.value))},ot=l=>{const[e,a]=l.split("@");return e.length>3?e.slice(0,3)+"***@"+a:l},E=d({limitPageLength:20,limit_start:0}),Q=d("");me(I,l=>{l&&(Q.value=c.value)});const H=d(""),W=d(""),nt=()=>{/[^a-zA-Z0-9 ]/.test(c.value)?H.value="Special characters are not allowed in the role name.":H.value=""},Ve=()=>{const l=c.value.toLowerCase().trim();P.value=V.value.filter(e=>e.toLowerCase().includes(l)),P.value.length===0&&l?W.value="No Designation found":W.value=""},Ne=l=>{s.value.designation=l,c.value=l,P.value=[]},Le=j(()=>{const l=c.value.trim();return l&&!V.value.includes(l)&&l.length>1}),Pe=()=>{const l=c.value.trim();l&&h.post(k.resource+w.roles,{role_name:l}).then(e=>{var a;(a=e.data)!=null&&a.role_name&&h.post(k.resource+w.designations,{role:e.data.role_name}).then(o=>{var n;(n=o.data)!=null&&n.role&&(V.value.push(o.data.role),s.value.designation=o.data.role,c.value=o.data.role,P.value=[],I.value=!1)})}).catch(e=>{console.error("Error creating role:",e)})},Ue=()=>{s.value.signature=null;const l=document.getElementById("signatureInput");l&&(l.value="")},it=d([{name:"Edit Employee",icon:"fa-solid fa-edit"},{name:"View Forms",icon:"fa-solid fa-eye"}]),Ae=j(()=>[s.value.emp_code,s.value.emp_name,s.value.emp_mail_id,s.value.department,s.value.designation].every(l=>l&&l.toString().trim()!==""));function rt(l,e){(e==null?void 0:e.name)==="Edit Employee"&&(l?(N.value="",U.value="",s.value=ae(le({},l),{department:""}),c.value=l.designation||"",gt(()=>{const o=re.value.find(n=>n.name===l.department);s.value.department=o||""}),kt(),ht(),A.value=!0,z.value=!0,Ie(),new bootstrap.Modal(document.getElementById("exampleModal"),{}).show()):(console.warn("No form fields provided."),formCreation(l))),(e==null?void 0:e.name)==="View Forms"&&b.push({name:"employeeforms",query:{name:l.name,EmpName:l.emp_name,business_unit:l.company_field,Dept:l.department}})}function dt(l){ut(l.name)}function ut(l){const e=[["company_field","=",`${$.value}`],["enable","=","1"],["department","like",`%${l}%`],["is_hod","=",1]],a={fields:JSON.stringify(["*"]),filters:JSON.stringify(e),limit_page_length:"none",order_by:"`tabEzy Employee`.`enable` DESC,`tabEzy Employee`.`creation` DESC"};h.get(k.resource+w.EzyEmployeeList,{params:a}).then(o=>{s.value.reporting_to=o.data[0].name,s.reporting_designation=o.data[0].designation}).catch(o=>{s.value.reporting_to="",s.reporting_designation="",console.error("Error fetching department data:",o)})}function mt(l){S.value=l;const e=l.enable==="1"||l.enable===1;ve.value=e?"Disable":"Enable",document.getElementById("empActionText").innerText=ve.value,document.getElementById("empRowName").innerText=l.emp_name,S.value.reporting_to!==""&&S.value.reporting_to!==null||S.value.is_high_level===1?new bootstrap.Modal(document.getElementById("EmployeeToggleModal")).show():$t("Please Add the Reports To before Enable employee.")}function pt(){const l=S.value.enable==="1"||S.value.enable===1;S.value.enable=l?0:1,h.put(`${k.resource}${w.EzyEmployeeList}/${S.value.name}`,S.value).then(()=>{const e={enabled:S.value.enable};return h.put(`${k.resource}${w.users}/${S.value.name}`,e)}).then(()=>{oe(`Employee ${ve.value}d successfully`),window.location.reload()}).catch(e=>{console.error("Toggle employee error:",e)})}const ct=d({emp_code:{type:"input"},emp_name:{type:"input"},designation:{type:"input"},department:{type:"input"},reporting_designation:{type:"input"}});function ee(){s.value={emp_code:"",emp_name:"",emp_phone:"",emp_mail_id:"",department:"",designation:"",reporting_to:"",reporting_designation:"",signature:null,company_field:p.value},W.value="";const l=document.getElementById("signatureInput");l&&(l.value="")}function Re(l){const e=l.target.files[0];e&&vt(e)}const ft=()=>he(this,null,function*(){const l=[["company_field","=",`${$.value}`],["is_web_form","=","0"],["enable","=","0"]],e={fields:JSON.stringify(["*"]),limit_start:0,limit_page_length:"none",filters:JSON.stringify(l)};try{const a=yield h.get(k.resource+w.EzyEmployeeList,{params:e});if(a.data){const o=a.data;if(o.length){bootstrap.Modal.getInstance(document.getElementById("ExportEmployeeModal")).hide(),oe("Successfully Completed");const m=XLSX.utils.json_to_sheet(o),x=XLSX.utils.book_new();XLSX.utils.book_append_sheet(x,m,"Employees"),XLSX.writeFile(x,"EmployeeDetails.xlsx")}else _("No Employee Details")}}catch(a){console.error("Error exporting employee data:",a)}}),vt=(l,e)=>{let a=`${l.name}`;const o=new FormData;o.append("file",l,a),o.append("is_private","0"),o.append("folder","Home"),h.post(k.uploadfile,o).then(n=>{n.message&&n.message.file_url?s.value.signature=n.message.file_url:console.error("file_url not found in the response.")}).catch(n=>{console.error("Upload error:",n)})};function gt(l){const e={fields:JSON.stringify(["name","department_code","department_name"]),limit_page_length:"none",doctype:w.departments};h.get(k.GetDoctypeData,{params:e}).then(a=>{a.message.data&&(re.value=a.message.data,l&&l())}).catch(a=>{console.error("Error fetching department data:",a)})}const _t=l=>{E.value.limitPageLength=l,E.value.limit_start=0,B()},bt=([l,e])=>{E.value.limitPageLength=l,E.value.limit_start=e,B()},Me=d(null);function yt(l){clearTimeout(Me.value),Me.value=setTimeout(()=>{E.value.filters=[],xe.value.forEach(e=>{const a=e.td_key;l[a]&&E.value.filters.push([a,"like",`%${l[a]}%`])}),E.value.filters.length?(E.value.limit_start=0,B(E.value.filters)):B()},500)}function B(l){const e=[["company_field","=",`${$.value}`],["is_web_form","=","0"],["enable","=","0"]];l&&e.push(...l);const a={fields:JSON.stringify(["acknowledge_on","acknowledgement","company_field","creation","department","designation","emp_code","emp_mail_id","emp_name","emp_phone","enable","enable_on","is_admin","is_hod","is_high_level","is_web_form","last_ip","last_login","name","profile_image","remarks","reporting_designation","reporting_to","signature"]),filters:JSON.stringify(e),limit_page_length:E.value.limitPageLength,limit_start:E.value.limit_start,doctype:w.EzyEmployeeList,order_by:"`tabEzy Employee`.`enable` DESC, `tabEzy Employee`.`modified` DESC"};h.get(k.GetDoctypeData,{params:a}).then(o=>{if(o.message.data){const n=o.message.data;ie.value=o.message.total_count,E.value.limit_start===0?R.value=n:R.value=R.value.concat(n)}}).catch(o=>{console.error("Error fetching department data:",o)})}const M=d([]);function ht(){const l={fields:JSON.stringify(["acknowledge_on","acknowledgement","company_field","creation","department","designation","emp_code","emp_mail_id","emp_name","emp_phone","enable","enable_on","is_admin","is_high_level","is_hod","is_web_form","last_ip","last_login","name","profile_image","remarks","reporting_designation","reporting_to","signature"]),limit_page_length:"none",filters:JSON.stringify([["company_field","=",`${$.value}`]]),doctype:w.EzyEmployeeList,order_by:"`tabEzy Employee`.`modified` desc"};h.get(k.GetDoctypeData,{params:l}).then(e=>{if(e.message){const a=e.message.data;E.value.limit_start===0?(M.value=a,L.value=[...new Set(e.message.data.map(o=>o.reporting_to))],K.value=[...new Set(e.message.data.map(o=>o.reporting_designation))],s.value.company_field=p.value):M.value=M.value.concat(a)}}).catch(e=>{console.error("Error fetching department data:",e)})}me(()=>s.value.reporting_to,l=>{const e=M.value.find(a=>a.emp_mail_id===l);e?s.value.reporting_designation=e==null?void 0:e.designation:s.value.reporting_designation=""},{immediate:!0});function kt(){const l={fields:JSON.stringify(["role"]),limit_page_length:"none",doctype:w.designations};h.get(k.GetDoctypeData,{params:l}).then(e=>{e.message.data&&(V.value=[...new Set(e.message.data.map(a=>a.role))])}).catch(e=>{console.error("Error fetching designations data:",e)})}me(p,l=>{l&&l.length&&(s.value.company_field=l,$.value=l,B())},{immediate:!0});function Et(){var e;if(!Ae.value){_("Please fill all required fields");return}if(U.value){_("Employee Email Id already exists");return}if(s.value.designation!==c.value.trim()){_("Please Add the designation before creating an employee.");return}s.value.company_field=p.value;const l=ae(le({},s.value),{department:((e=s.value.department)==null?void 0:e.name)||"",doctype:w.EzyEmployeeList});q.value=!0,h.post(k.resource+w.EzyEmployeeList,l).then(a=>{if(a.data){oe("Employee Created"),bootstrap.Modal.getInstance(document.getElementById("createDepartments")).hide(),ee();const n=document.getElementById("signatureInput");n&&(n.value=""),B(),q.value=!1}}).catch(a=>{console.error("Error creating employee:",a)}).finally(()=>{q.value=!1})}function xt(){var e;if(!Ae.value){_("Please fill all required fields");return}if(N.value){_("Invalid phone number");return}if(!c.value){_("Please select or enter a designation");return}if(!s.value.designation&&c.value&&(s.value.designation=c.value),s.value.designation!==c.value.trim()){_("Please Add the designation before Update an employee.");return}if(s.value.is_high_level===0&&!s.value.reporting_to){_("Please Add the Reports To before updating employee.",{autoClose:1e3,transition:"zoom"});return}if(s.value.reporting_to){const a=M.value.find(o=>o.emp_mail_id===s.value.reporting_to);a&&(s.value.reporting_designation=a.designation)}else s.value.reporting_designation="";const l=ae(le({},s.value),{department:((e=s.value.department)==null?void 0:e.name)||"",doctype:w.EzyEmployeeList});h.put(`${k.DataUpdate}/${s.value.name}`,l).then(a=>{a.message.success==!0?(oe("Changes Saved"),bootstrap.Modal.getInstance(document.getElementById("exampleModal")).hide(),B()):_(a.message.message)}).catch(a=>{console.error("Error saving employee:",a)})}return(l,e)=>(i(),r("div",null,[t("div",null,[t("div",zt,[e[44]||(e[44]=t("div",null,[t("h1",{class:"m-0 font-13"}," Inactive Employees ")],-1)),e[45]||(e[45]=t("div",{class:"d-flex align-items-center gap-2"},[t("button",{type:"button",class:"btn export-btn CreateDepartments font-12","data-bs-toggle":"modal","data-bs-target":"#ExportEmployeeModal"}," Export Employees ")],-1)),t("div",Bt,[t("div",jt,[t("div",Ft,[t("div",{class:"modal-header"},[e[29]||(e[29]=t("h5",{class:"modal-title",id:"createDepartmentsLabel"}," Employee Creation ",-1)),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:ee,"aria-label":"Close"})]),t("div",Ot,[t("div",Xt,[t("div",qt,[t("div",Jt,[e[32]||(e[32]=t("label",{class:"font-13 ps-1",for:"create_emp_name"},[g("Emp Name"),t("span",{class:"text-danger ps-1"},"*")],-1)),v(F,{class:"mb-3",tag:"input",type:"text",name:"create_emp_name",id:"create_emp_name",placeholder:"Enter Emp Name",modelValue:s.value.emp_name,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.emp_name=a)},null,8,["modelValue"]),e[33]||(e[33]=t("label",{class:"font-13 ps-1",for:"create_emp_code"},[g("Emp ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),v(F,{class:"mb-3",tag:"input",type:"text",name:"create_emp_code",id:"create_emp_code",placeholder:"Enter Emp ID",modelValue:s.value.emp_code,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.emp_code=a)},null,8,["modelValue"]),t("div",Ht,[e[30]||(e[30]=t("label",{class:"font-13 ps-1",for:"create_emp_phone"},"Emp Phone",-1)),v(F,{tag:"input",type:"text",name:"create_emp_phone",id:"create_emp_phone",maxlength:"13",onInput:ye,onChange:Qe,placeholder:"Enter Phone Number",modelValue:s.value.emp_phone,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.emp_phone=a)},null,8,["modelValue"]),N.value?(i(),r("p",Wt,f(N.value),1)):u("",!0)]),t("div",Gt,[e[31]||(e[31]=t("label",{class:"font-13 ps-1",for:"create_emp_mail_id"},[g("Emp Mail ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),v(F,{class:"mb-1",tag:"input",type:"email",name:"create_emp_mail_id",onChange:De,required:!0,id:"create_emp_mail_id",placeholder:"Enter Email",modelValue:s.value.emp_mail_id,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.emp_mail_id=a)},null,8,["modelValue"]),U.value?(i(),r("p",Zt,f(U.value),1)):u("",!0)]),e[34]||(e[34]=t("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[g("Departments"),t("span",{class:"text-danger ps-1"},"*")],-1)),v(Z(Y),{modelValue:s.value.department,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.department=a),options:re.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:O(({values:a,isOpen:o})=>[a.length?y((i(),r("span",{key:0,class:"multiselect__single font-10"},f(a.map(n=>n.department_name).join(", ")),513)),[[G,!o]]):u("",!0)]),_:1},8,["modelValue","options"])]),t("div",Yt,[t("div",Kt,[e[39]||(e[39]=t("label",{class:"font-13 ps-1",for:"Designation"},[g(" Designation"),t("span",{class:"text-danger ps-1"},"*")],-1)),y(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>c.value=a),onInput:Ve,class:"form-control font-12",placeholder:"Search or type new role"},null,544),[[se,c.value]]),c.value&&(P.value.length||Le.value)?(i(),r("ul",Qt,[(i(!0),r(pe,null,ce(P.value,(a,o)=>(i(),r("li",{key:o,class:"list-group-item list-group-item-action font-12",onClick:n=>Ne(a),style:{cursor:"pointer"}},f(a),9,el))),128)),c.value&&P.value.length===0?(i(),r("li",{key:0,class:"list-group-item list-group-item-action font-12 text-primary",style:{cursor:"pointer"},onClick:e[6]||(e[6]=a=>I.value=!0)},[e[35]||(e[35]=g(' âž• Create role "')),t("strong",null,f(c.value),1),e[36]||(e[36]=g('" '))])):u("",!0)])):u("",!0),I.value?(i(),r("div",{key:1,class:X(["modal fade",{show:I.value}]),style:{display:"block"}},[t("div",tl,[t("div",ll,[t("div",al,[e[37]||(e[37]=t("h5",{class:"modal-title"},"Create New Role",-1)),t("button",{type:"button",class:"btn-close",onClick:e[7]||(e[7]=a=>I.value=!1)})]),t("div",sl,[e[38]||(e[38]=t("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),y(t("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[8]||(e[8]=a=>Q.value=a),placeholder:"Enter role name"},null,512),[[se,Q.value]])]),t("div",ol,[t("button",{class:"btn btn-secondary",onClick:e[9]||(e[9]=a=>I.value=!1)},"Cancel"),t("button",{class:"btn btn-dark",onClick:Pe},"Save Role")])])])],2)):u("",!0)]),e[41]||(e[41]=t("label",{class:"font-13 ps-1",for:"reporting_to"},"Reports To",-1)),v(Z(Y),{modelValue:s.value.reporting_to,"onUpdate:modelValue":e[10]||(e[10]=a=>s.value.reporting_to=a),options:M.value.map(a=>a.emp_mail_id),multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:O(({values:a,isOpen:o})=>[a.length?y((i(),r("span",{key:0,class:"multiselect__single font-10"},f(a.join(", ")),513)),[[G,!o]]):u("",!0)]),_:1},8,["modelValue","options"]),e[42]||(e[42]=t("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),v(Z(Y),{modelValue:s.value.reporting_designation,"onUpdate:modelValue":e[11]||(e[11]=a=>s.value.reporting_designation=a),options:V.value,"allow-empty":!0,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!!s.value.reporting_to},{selection:O(({values:a,isOpen:o})=>[a.length?y((i(),r("span",{key:0,class:"multiselect__single font-10"},f(a.join(", "))+" selected ",513)),[[G,!o]]):u("",!0)]),_:1},8,["modelValue","options","disabled"]),t("div",nl,[e[40]||(e[40]=t("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),t("input",{type:"file",ref_key:"signatureInputRef",ref:Ee,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Re,"aria-describedby":"fileHelpId"},null,544),s.value.signature?(i(),r("div",il,[t("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:Ue}),t("img",{src:s.value.signature,style:{"max-width":"100px","max-height":"100px"},alt:"Signature",class:"img-fluid signature-img border-1"},null,8,rl)])):u("",!0)])])])])]),t("div",dl,[v(ke,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:ee,"data-bs-dismiss":"modal"}),t("button",{type:"button",class:"applyfilter btn btn-dark text-nowrap font-10 d-flex justify-content-center align-items-center",onClick:Et},[q.value?u("",!0):(i(),r("span",ul,e[43]||(e[43]=[t("i",{class:"bi bi-check2"},null,-1)]))),q.value?u("",!0):(i(),r("span",ml,"Create Employee")),q.value?(i(),r("span",pl)):u("",!0)])])])])])]),ne.value?(i(),r("div",cl,[v(At,{tHeaders:xe.value,tData:R.value,isAction:"true",actions:it.value,enableDisable:"true",onActionClicked:rt,onToggleClick:mt,actionType:"dropdown",isCheckbox:"true",isFiltersoption:"true","field-mapping":ct.value,onUpdateFilters:yt},null,8,["tHeaders","tData","actions","field-mapping"]),v(Rt,{currentRecords:R.value.length,totalRecords:ie.value,"items-per-page":E.value.limitPageLength,onUpdateValue:_t,onLimitStart:bt},null,8,["currentRecords","totalRecords","items-per-page"])])):(i(),r("div",fl,[t("div",vl,[t("div",{class:"d-flex justify-content-between align-content-center"},[t("button",{type:"button",class:"font-12 btn btn-light",onClick:Ze},e[46]||(e[46]=[t("i",{class:"bi bi-chevron-left"},null,-1),g(" Back to Employee List ")]))]),t("div",gl,[t("div",_l,[t("div",{class:X(C.value.length?"":"mb-5 mt-5")},[t("button",{type:"button",class:"font-12 my-1 btn btn-light",onClick:Ge},e[47]||(e[47]=[t("i",{class:"bi bi-download"},null,-1),g(" Use template ")])),t("input",{type:"file",ref_key:"fileInput",ref:de,onChange:Fe,hidden:""},null,544),t("button",{type:"button",class:"font-12 my-1 btn btn-dark",onClick:je},e[48]||(e[48]=[t("i",{class:"bi bi-upload"},null,-1),g(" Upload Data ")]))],2)]),v(Mt,{name:"fade"},{default:O(()=>[_e.value?(i(),r("div",bl)):u("",!0)]),_:1}),t("div",null,[t("div",yl,[ue.value.length>0?(i(),r("div",hl,[t("button",{type:"button",class:"btn btn-light font-12",onClick:We},e[49]||(e[49]=[t("i",{class:"bi bi-download mx-2"},null,-1),g("Download Excel")]))])):u("",!0),Ce.value.length?(i(),r("div",kl,[e[50]||(e[50]=t("h3",{class:"font-13"},"Template Warnings:",-1)),t("ul",null,[(i(!0),r(pe,null,ce(Ce.value,(a,o)=>(i(),r("li",{key:o},f(a),1))),128))])])):u("",!0),ue.value.length>0?(i(),r("table",El,[e[51]||(e[51]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Email"),t("th",null,"Status"),t("th",null,"Message")])],-1)),t("tbody",null,[(i(!0),r(pe,null,ce(ue.value,(a,o)=>(i(),r("tr",{key:o},[t("td",null,f(o+1),1),t("td",null,f(a.email),1),t("td",{class:X(a.status==="success"?"status-success":"status-failed")},f(a.status),3),t("td",null,f(a.displayMessage),1)]))),128))])])):u("",!0)])])])])]))]),t("div",xl,[t("div",wl,[t("div",Cl,[t("div",Dl,[e[52]||(e[52]=t("h5",{class:"modal-title",id:"viewEmployeeLabel"},"Employee Data",-1)),t("div",Sl,[y(t("input",{class:"form-check-input shadow-none","onUpdate:modelValue":e[12]||(e[12]=a=>s.value.enable=a),checked:s.value.enable==1,"true-value":"1","false-value":"0",type:"checkbox",role:"switch"},null,8,Il),[[fe,s.value.enable]]),t("label",Vl,f(s.value.enable=="1"?"Enabled":"Disabled"),1)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:ee,"aria-label":"Close"})]),t("div",Nl,[t("div",Ll,[t("div",Pl,[t("div",Ul,[t("div",Al,[e[54]||(e[54]=t("label",{class:"font-13 ps-1",for:"emp_name"},[g("Emp Name"),t("span",{class:"text-danger ps-1"},"*")],-1)),t("div",Rl,[y(t("input",{type:"checkbox",id:"is_admin","true-value":1,"false-value":0,"onUpdate:modelValue":e[13]||(e[13]=a=>s.value.is_admin=a),class:"form-check-input mt-1 input-border"},null,512),[[fe,s.value.is_admin]]),e[53]||(e[53]=t("label",{class:"font-13 ms-2",for:"is_admin"},"Is Admin",-1))])]),v(F,{class:"mb-3",tag:"input",type:"text",name:"emp_name",id:"emp_name",placeholder:"Enter Emp Name",modelValue:s.value.emp_name,"onUpdate:modelValue":e[14]||(e[14]=a=>s.value.emp_name=a),onInput:Oe},null,8,["modelValue"]),e[62]||(e[62]=t("label",{class:"font-13 ps-1",for:"emp_code"},[g("Emp ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),v(F,{class:"mb-3",tag:"input",type:"text",name:"emp_code",id:"emp_code",placeholder:"Enter Emp ID",modelValue:s.value.emp_code,"onUpdate:modelValue":e[15]||(e[15]=a=>s.value.emp_code=a)},null,8,["modelValue"]),t("div",Ml,[e[55]||(e[55]=t("label",{class:"font-13 ps-1",for:"emp_phone"},"Emp Phone",-1)),t("div",Tl,[t("input",{type:"text",name:"emp_phone",id:"emp_phone",maxlength:"13",class:"w-100 font-12 form-control",readonly:A.value,value:A.value?et(s.value.emp_phone):s.value.emp_phone,onInput:tt,onBlur:e[16]||(e[16]=(...a)=>ye&&ye(...a)),placeholder:"Enter Phone Number"},null,40,$l),t("i",{class:X([Se.value,"eye-icon"]),onClick:lt},null,2)]),N.value?(i(),r("p",zl,f(N.value),1)):u("",!0)]),t("div",Bl,[e[56]||(e[56]=t("label",{class:"font-13 ps-1",for:"emp_mail_id"},[g("Emp Mail ID"),t("span",{class:"text-danger ps-1"},"*")],-1)),t("div",jl,[v(F,{class:"mb-1 w-100",tag:"input",type:"email",name:"emp_mail_id",id:"emp_mail_id",placeholder:"Enter Email",modelValue:s.value.emp_mail_id,"onUpdate:modelValue":e[17]||(e[17]=a=>s.value.emp_mail_id=a),onInput:Ie,disabled:s.value.emp_mail_id,onChange:De,required:!0},null,8,["modelValue","disabled"]),t("i",{class:X([at.value,"eye-icon"]),onClick:st},null,2)]),U.value?(i(),r("p",Fl,f(U.value),1)):u("",!0)]),t("div",Ol,[e[58]||(e[58]=t("label",{class:"font-13 ps-1 fw-medium",for:"dept"},[g("Departments"),t("span",{class:"text-danger ps-1"},"*")],-1)),t("div",Xl,[y(t("input",{type:"checkbox",id:"isHOD","true-value":1,"false-value":0,"onUpdate:modelValue":e[18]||(e[18]=a=>s.value.is_hod=a),class:"form-check-input mt-1 input-border border-1"},null,512),[[fe,s.value.is_hod]]),e[57]||(e[57]=t("label",{class:"font-13 ms-2",for:"isHOD"},"Is HOD",-1))])]),v(Z(Y),{modelValue:s.value.department,"onUpdate:modelValue":[e[19]||(e[19]=a=>s.value.department=a),dt],options:re.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,placeholder:"Select department",label:"department_name","track-by":"name",class:"font-11 mb-3"},{selection:O(({values:a,isOpen:o})=>[a.length?y((i(),r("span",{key:0,class:"multiselect__single font-10"},f(a.map(n=>n.department_name).join(", ")),513)),[[G,!o]]):u("",!0)]),_:1},8,["modelValue","options"]),t("div",ql,[e[61]||(e[61]=t("label",{class:"font-13 ps-1",for:"Designation"},[g(" Designation"),t("span",{class:"text-danger ps-1"},"*")],-1)),y(t("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=a=>c.value=a),onInput:e[21]||(e[21]=()=>{Ve(),nt()}),class:X(["form-control font-12 shadow-none",["form-control font-12",H.value||W.value?"border-danger":""]]),placeholder:"Search or type new role"},null,34),[[se,c.value]]),H.value||W.value?(i(),r("p",Jl,f(H.value||W.value),1)):u("",!0),c.value&&(P.value.length||Le.value)&&!H.value?(i(),r("ul",Hl,[(i(!0),r(pe,null,ce(P.value,(a,o)=>(i(),r("li",{key:o,class:"list-group-item list-group-item-action font-12",onClick:n=>Ne(a),style:{cursor:"pointer"}},f(a),9,Wl))),128))])):u("",!0),I.value?(i(),r("div",{key:2,class:X(["modal fade",{show:I.value}]),style:{display:"block"}},[t("div",Gl,[t("div",Zl,[t("div",Yl,[e[59]||(e[59]=t("h5",{class:"modal-title"},"Create New Role",-1)),t("button",{type:"button",class:"btn-close",onClick:e[22]||(e[22]=a=>I.value=!1)})]),t("div",Kl,[e[60]||(e[60]=t("label",{for:"",class:"font-12 fw-bold"},"Designation",-1)),y(t("input",{type:"text",class:"form-control font-12","onUpdate:modelValue":e[23]||(e[23]=a=>Q.value=a),placeholder:"Enter role name"},null,512),[[se,Q.value]])]),t("div",Ql,[t("button",{class:"btn btn-secondary",onClick:e[24]||(e[24]=a=>I.value=!1)},"Cancel"),t("button",{class:"btn btn-dark",onClick:Pe},"Save Role")])])])],2)):u("",!0)])]),t("div",ea,[t("div",ta,[t("label",la,[e[63]||(e[63]=g("Reports To")),s.value.is_high_level==0?(i(),r("span",aa,"*")):u("",!0)]),t("div",sa,[y(t("input",{type:"checkbox",id:"is_high_level","true-value":1,"false-value":0,"onUpdate:modelValue":e[25]||(e[25]=a=>s.value.is_high_level=a),class:"form-check-input mt-1 input-border"},null,512),[[fe,s.value.is_high_level]]),e[64]||(e[64]=t("label",{class:"font-13 ms-2",for:"is_high_level"},"Is High-level",-1))])]),v(Z(Y),{modelValue:s.value.reporting_to,"onUpdate:modelValue":e[26]||(e[26]=a=>s.value.reporting_to=a),options:M.value.map(a=>a.emp_mail_id),multiple:!1,"close-on-select":!0,"allow-empty":!0,"clear-on-select":!1,"preserve-search":!1,placeholder:"Select Reports To",class:"font-11 mb-3"},{selection:O(({values:a,isOpen:o})=>[a.length?y((i(),r("span",{key:0,class:"multiselect__single font-10"},f(a.join(", ")),513)),[[G,!o]]):u("",!0)]),_:1},8,["modelValue","options"]),e[69]||(e[69]=t("label",{class:"font-13 ps-1",for:"reporting_designation"},"Reporting Designation",-1)),v(Z(Y),{modelValue:s.value.reporting_designation,"onUpdate:modelValue":e[27]||(e[27]=a=>s.value.reporting_designation=a),options:V.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!1,placeholder:"Select Reporting Designation",class:"font-11 mb-3",disabled:!0},{selection:O(({values:a,isOpen:o})=>[a.length?y((i(),r("span",{key:0,class:"multiselect__single font-10"},f(a.join(", "))+" selected ",513)),[[G,!o]]):u("",!0)]),_:1},8,["modelValue","options"]),t("div",oa,[e[65]||(e[65]=t("label",{class:"font-13 ps-1",for:"reporting_to"},"Acknowledge On",-1)),e[66]||(e[66]=t("br",null,null,-1)),t("input",{class:"mb-3 date-time",tag:"input",type:"datetime-local",name:"acknowledge_on",id:"acknowledge_on",placeholder:"Enter department code",value:Be(s.value.acknowledge_on),readonly:""},null,8,na)]),t("div",ia,[e[67]||(e[67]=t("label",{for:"",class:"font-12 fw-bold"},"Remarks",-1)),y(t("textarea",{type:"text",class:"form-control font-12 shadow-none remarks",readonly:"","onUpdate:modelValue":e[28]||(e[28]=a=>s.value.remarks=a)},null,512),[[se,s.value.remarks]])]),t("div",ra,[e[68]||(e[68]=t("label",{for:"signatureInput",class:"form-label mb-0 font-13 ps-1"}," Add Signature ",-1)),t("input",{type:"file",ref_key:"signatureInputRef",ref:Ee,class:"form-control font-12 mb-2",id:"signatureInput",onChange:Re,"aria-describedby":"fileHelpId"},null,544),s.value.signature?(i(),r("div",da,[t("i",{class:"bi bi-x-lg position-absolute text-danger cursor-pointer",style:{top:"-7px",right:"-5px","font-size":"13px",background:"white","border-radius":"50%",padding:"3px"},onClick:Ue}),t("img",{src:s.value.signature,alt:"Signature",class:"img-fluid signature-img"},null,8,ua)])):u("",!0)])])])])]),t("div",ma,[v(ke,{type:"button",class:"cancelfilter border-1 text-nowrap font-10",name:"Cancel",onClick:ee,"data-bs-dismiss":"modal"}),v(ke,{type:"button",class:"btn btn-dark font-11",name:"Save Employee",onClick:xt})])])])]),t("div",{class:"modal fade",id:"EmployeeToggleModal",tabindex:"-1","aria-hidden":"true"},[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content"},[e[71]||(e[71]=Tt('<div class="modal-header" data-v-7403688f><h5 class="modal-title" data-v-7403688f>Confirm Employee Status</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-v-7403688f></button></div><div class="modal-body" data-v-7403688f> Are you sure you want to <span id="empActionText" data-v-7403688f></span> &quot;<span id="empRowName" data-v-7403688f></span>&quot;? </div>',2)),t("div",{class:"modal-footer"},[e[70]||(e[70]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:pt},"Yes, Proceed")])])])]),t("div",{class:"modal fade",id:"ExportEmployeeModal",tabindex:"-1","aria-hidden":"true"},[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content"},[e[73]||(e[73]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Export Employee"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e[74]||(e[74]=t("div",{class:"modal-body"}," Are you sure you want to export the employee details? ",-1)),t("div",{class:"modal-footer"},[e[72]||(e[72]=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"Cancel",-1)),t("button",{type:"button",class:"btn btn-dark",onClick:ft},"Yes, Proceed")])])])])]))}},va=Nt(pa,[["__scopeId","data-v-7403688f"]]);export{va as default};
